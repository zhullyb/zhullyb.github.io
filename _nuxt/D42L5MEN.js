const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./B_LVqHyN.js","./DMBZNLBx.js","./entry.Cb3Jctur.css","./C0e4w4BS.js"])))=>i.map(i=>d[i]);
import{_ as ie}from"./C0e4w4BS.js";import{q as N,e as ge,ap as Le,W as X,Z as Me,a3 as Ie,Y as Ne,b as R,s as fe,a4 as Pe,X as me,M as je,E as f,a1 as Re,aq as Ae,a6 as ce,a7 as Be,ar as Fe,as as Ve,at as We,au as qe,a9 as Ue,A as ze,ak as He,av as Ye,S as Qe,d as U,V as le,C as x,o as D,G as y,N as Q,O as K,c as ue,w as Z,F as ee,I as M,_ as z,D as q,T as ye,K as G,f as ae,i as ve,a as B,R as be,aa as Ze,$ as we,ac as Ge,aw as Je,U as Xe,ax as Ke,J as de,y as et,Q as tt,H as nt,r as oe}from"./DMBZNLBx.js";const at={trailing:!0};function st(e,t=25,n={}){if(n={...at,...n},!Number.isFinite(t))throw new TypeError("Expected `wait` to be a finite number");let s,a,o=[],r,i;const h=(p,O)=>(r=ot(e,p,O),r.finally(()=>{if(r=null,n.trailing&&i&&!a){const L=h(p,i);return i=null,L}}),r),u=function(...p){return n.trailing&&(i=p),r||new Promise(O=>{const L=!a&&n.leading;clearTimeout(a),a=setTimeout(()=>{a=null;const _=n.leading?s:h(this,p);i=null;for(const g of o)g(_);o=[]},t),L?(s=h(this,p),O(s)):o.push(O)})},c=p=>{p&&(clearTimeout(p),a=null)};return u.isPending=()=>!!a,u.cancel=()=>{c(a),o=[],i=null},u.flush=()=>{if(c(a),!i||r)return;const p=i;return i=null,h(this,p)},u}async function ot(e,t,n){return await e.apply(t,n)}function De(...e){const t=typeof e[e.length-1]=="string"?e.pop():void 0;Ce(e[0],e[1])&&e.unshift(t);let[n,s,a={}]=e,o=!1;const r=N(()=>Ie(n));if(typeof r.value!="string")throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if(typeof s!="function")throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const i=ge();a.server??=!0,a.default??=ct,a.getCachedData??=Se,a.lazy??=!1,a.immediate??=!0,a.deep??=Le.deep,a.dedupe??="cancel",a._functionName,i._asyncData[r.value];function h(){const _={cause:"initial",dedupe:a.dedupe};return i._asyncData[r.value]?._init||(_.cachedData=a.getCachedData(r.value,i,{cause:"initial"}),i._asyncData[r.value]=he(i,r.value,s,a,_.cachedData)),()=>i._asyncData[r.value].execute(_)}const u=h(),c=i._asyncData[r.value];c._deps++;const p=a.server!==!1&&i.payload.serverRendered;{let _=function(v){const $=i._asyncData[v];$?._deps&&($._deps--,$._deps===0&&$?._off())};const g=Re();if(g&&p&&a.immediate&&!g.sp&&(g.sp=[]),g&&!g._nuxtOnBeforeMountCbs){g._nuxtOnBeforeMountCbs=[];const v=g._nuxtOnBeforeMountCbs;Ae(()=>{v.forEach($=>{$()}),v.splice(0,v.length)}),ce(()=>v.splice(0,v.length))}const C=g&&(g._nuxtClientOnly||Be(Fe,!1));p&&i.isHydrating&&(c.error.value||c.data.value!==void 0)?c.status.value=c.error.value?"error":"success":g&&(!C&&i.payload.serverRendered&&i.isHydrating||a.lazy)&&a.immediate?g._nuxtOnBeforeMountCbs.push(u):a.immediate&&c.status.value!=="success"&&u();const b=Ne(),m=X(r,(v,$)=>{if((v||$)&&v!==$){o=!0;const k=i._asyncData[$]?.data.value!==void 0,A=i._asyncDataPromises[$]!==void 0,j={cause:"initial",dedupe:a.dedupe};if(!i._asyncData[v]?._init){let F;$&&k?F=i._asyncData[$].data.value:(F=a.getCachedData(v,i,{cause:"initial"}),j.cachedData=F),i._asyncData[v]=he(i,v,s,a,F)}i._asyncData[v]._deps++,$&&_($),(a.immediate||k||A)&&i._asyncData[v].execute(j),Ve(()=>{o=!1})}},{flush:"sync"}),T=a.watch?X(a.watch,()=>{o||c._execute({cause:"watch",dedupe:a.dedupe})}):()=>{};b&&Me(()=>{m(),T(),_(r.value)})}const O={data:J(()=>i._asyncData[r.value]?.data),pending:J(()=>i._asyncData[r.value]?.pending),status:J(()=>i._asyncData[r.value]?.status),error:J(()=>i._asyncData[r.value]?.error),refresh:(..._)=>i._asyncData[r.value]?._init?i._asyncData[r.value].execute(..._):h()(),execute:(..._)=>O.refresh(..._),clear:()=>{const _=i._asyncData[r.value];if(_?._abortController)try{_._abortController.abort(new DOMException("AsyncData aborted by user.","AbortError"))}finally{_._abortController=void 0}$e(i,r.value)}},L=Promise.resolve(i._asyncDataPromises[r.value]).then(()=>O);return Object.assign(L,O),L}function J(e){return N({get(){return e()?.value},set(t){const n=e();n&&(n.value=t)}})}function rt(...e){const t=typeof e[e.length-1]=="string"?e.pop():void 0;Ce(e[0],e[1])&&e.unshift(t);const[n,s,a={}]=e;return De(n,s,{...a,lazy:!0},null)}function Ce(e,t){return!(typeof e=="string"||typeof e=="object"&&e!==null||typeof e=="function"&&typeof t=="function")}function $e(e,t){t in e.payload.data&&(e.payload.data[t]=void 0),t in e.payload._errors&&(e.payload._errors[t]=void 0),e._asyncData[t]&&(e._asyncData[t].data.value=f(e._asyncData[t]._default()),e._asyncData[t].error.value=void 0,e._asyncData[t].status.value="idle"),t in e._asyncDataPromises&&(e._asyncDataPromises[t]=void 0)}function it(e,t){const n={};for(const s of t)n[s]=e[s];return n}function he(e,t,n,s,a){e.payload._errors[t]??=void 0;const o=s.getCachedData!==Se,r=n,i=s.deep?R:fe,h=a!==void 0,u=e.hook("app:data:refresh",async p=>{(!p||p.includes(t))&&await c.execute({cause:"refresh:hook"})}),c={data:i(h?a:s.default()),pending:N(()=>c.status.value==="pending"),error:Pe(e.payload._errors,t),status:fe("idle"),execute:(...p)=>{const[O,L=void 0]=p,_=O&&L===void 0&&typeof O=="object"?O:{};if(e._asyncDataPromises[t]&&(_.dedupe??s.dedupe)==="defer")return e._asyncDataPromises[t];{const C="cachedData"in _?_.cachedData:s.getCachedData(t,e,{cause:_.cause??"refresh:manual"});if(C!==void 0)return e.payload.data[t]=c.data.value=C,c.error.value=void 0,c.status.value="success",Promise.resolve(C)}c._abortController&&c._abortController.abort(new DOMException("AsyncData request cancelled by deduplication","AbortError")),c._abortController=new AbortController,c.status.value="pending";const g=new Promise((C,b)=>{try{const m=_.timeout??s.timeout,T=lt([c._abortController?.signal,_?.signal],m);if(T.aborted){const v=T.reason;b(v instanceof Error?v:new DOMException(String(v??"Aborted"),"AbortError"));return}return T.addEventListener("abort",()=>{const v=T.reason;b(v instanceof Error?v:new DOMException(String(v??"Aborted"),"AbortError"))},{once:!0}),Promise.resolve(r(e,{signal:T})).then(C,b)}catch(m){b(m)}}).then(async C=>{let b=C;s.transform&&(b=await s.transform(C)),s.pick&&(b=it(b,s.pick)),e.payload.data[t]=b,c.data.value=b,c.error.value=void 0,c.status.value="success"}).catch(C=>{if(!(e._asyncDataPromises[t]&&e._asyncDataPromises[t]!==g)&&!c._abortController?.signal.aborted){if(typeof DOMException<"u"&&C instanceof DOMException&&C.name==="AbortError"){c.status.value="idle";return}c.error.value=je(C),c.data.value=f(s.default()),c.status.value="error"}}).finally(()=>{delete e._asyncDataPromises[t]});return e._asyncDataPromises[t]=g,e._asyncDataPromises[t]},_execute:st((...p)=>c.execute(...p),0,{leading:!0}),_default:s.default,_deps:0,_init:!0,_hash:void 0,_off:()=>{u(),e._asyncData[t]?._init&&(e._asyncData[t]._init=!1),o||me(()=>{e._asyncData[t]?._init||($e(e,t),c.execute=()=>Promise.resolve())})}};return c}const ct=()=>{},Se=(e,t,n)=>{if(t.isHydrating)return t.payload.data[e];if(n.cause!=="refresh:manual"&&n.cause!=="refresh:hook")return t.static.data[e]};function lt(e,t){const n=e.filter(o=>!!o);if(typeof t=="number"&&t>=0){const o=AbortSignal.timeout?.(t);o&&n.push(o)}if(AbortSignal.any)return AbortSignal.any(n);const s=new AbortController;for(const o of n)if(o.aborted){const r=o.reason??new DOMException("Aborted","AbortError");try{s.abort(r)}catch{s.abort()}return s.signal}const a=()=>{const r=n.find(i=>i.aborted)?.reason??new DOMException("Aborted","AbortError");try{s.abort(r)}catch{s.abort()}};for(const o of n)o.addEventListener?.("abort",a,{once:!0});return s.signal}const ut={nuxt:{}},dt=We(qe,ut);function Ee(){const e=ge();return e._appConfig||=Ue(dt),e._appConfig}const xe={posts:"v3.5.0--_Wj5D3PLBCeGw0zFM7MusnYFrDHYYIlex2qsiLpZL3U",others:"v3.5.0--BTqY8yPGt5Hx3ZAEU8dZZuxAh3vm06e2ZRqFd6hn898"},ft={posts:"_content_posts",others:"_content_others",info:"_content_info"},mn={posts:{type:"page",fields:{id:"string",title:"string",body:"json",date:"string",description:"string",extension:"string",lang:"string",meta:"json",navigation:"json",path:"string",rawbody:"string",seo:"json",stem:"string",sticky:"boolean",tags:"json"}},others:{type:"page",fields:{id:"string",title:"string",body:"json",description:"string",extension:"string",meta:"json",navigation:"json",path:"string",seo:"json",stem:"string"}},info:{type:"data",fields:{}}},te=(e,t)=>{const n=e._conditions;return n.length>0?`(${n.join(` ${t} `)})`:""},ne=e=>{const t=[],n={_conditions:t,where(s,a,o){let r;switch(a.toUpperCase()){case"IN":case"NOT IN":if(Array.isArray(o)){const i=o.map(h=>Y(h)).join(", ");r=`"${String(s)}" ${a.toUpperCase()} (${i})`}else throw new TypeError(`Value for ${a} must be an array`);break;case"BETWEEN":case"NOT BETWEEN":if(Array.isArray(o)&&o.length===2)r=`"${String(s)}" ${a.toUpperCase()} ${Y(o[0])} AND ${Y(o[1])}`;else throw new Error(`Value for ${a} must be an array with two elements`);break;case"IS NULL":case"IS NOT NULL":r=`"${String(s)}" ${a.toUpperCase()}`;break;case"LIKE":case"NOT LIKE":r=`"${String(s)}" ${a.toUpperCase()} ${Y(o)}`;break;default:r=`"${String(s)}" ${a} ${Y(typeof o=="boolean"?Number(o):o)}`}return t.push(`${r}`),n},andWhere(s){const a=s(ne());return t.push(te(a,"AND")),n},orWhere(s){const a=s(ne());return t.push(te(a,"OR")),n}};return n},ht=(e,t)=>{const n={conditions:[],selectedFields:[],offset:0,limit:0,orderBy:[],count:{field:"",distinct:!1}},s={__params:n,andWhere(o){const r=o(ne());return n.conditions.push(te(r,"AND")),s},orWhere(o){const r=o(ne());return n.conditions.push(te(r,"OR")),s},path(o){return s.where("path","=",ze(o))},skip(o){return n.offset=o,s},where(o,r,i){return s.andWhere(h=>h.where(String(o),r,i)),s},limit(o){return n.limit=o,s},select(...o){return o.length&&n.selectedFields.push(...o),s},order(o,r){return n.orderBy.push(`"${String(o)}" ${r}`),s},async all(){return t(e,a()).then(o=>o||[])},async first(){return t(e,a({limit:1})).then(o=>o[0]||null)},async count(o="*",r=!1){return t(e,a({count:{field:String(o),distinct:r}})).then(i=>i[0].count)}};function a(o={}){let r="SELECT ";if(o?.count)r+=`COUNT(${o.count.distinct?"DISTINCT ":""}${o.count.field}) as count`;else{const h=Array.from(new Set(n.selectedFields));r+=h.length>0?h.map(u=>`"${String(u)}"`).join(", "):"*"}r+=` FROM ${ft[String(e)]}`,n.conditions.length>0&&(r+=` WHERE ${n.conditions.join(" AND ")}`),n.orderBy.length>0?r+=` ORDER BY ${n.orderBy.join(", ")}`:r+=" ORDER BY stem ASC";const i=o?.limit||n.limit;return i>0&&(n.offset>0?r+=` LIMIT ${i} OFFSET ${n.offset}`:r+=` LIMIT ${i}`),r}return s};function Y(e){return`'${String(e).replace(/'/g,"''")}'`}function pe(e){return t=>(t=t||{},(e||[]).filter(n=>typeof t[n]<"u").reduce((n,s)=>Object.assign(n,{[s]:t[s]}),{}))}async function pt(e,t=[]){e.__params?.orderBy?.length||(e=e.order("stem","ASC"));const s=await e.orWhere(u=>u.where("navigation","<>","false").where("navigation","IS NULL")).select("navigation","stem","path","title","meta",...t||[]).all(),{contents:a,configs:o}=s.reduce((u,c)=>{if(String(c.stem).split("/").pop()===".navigation"){c.title=c.title?.toLowerCase()==="navigation"?"":c.title;const p=c.path.split("/").slice(0,-1).join("/")||"/";u.configs[p]={...c,...c.body}}else u.contents.push(c);return u},{configs:{},contents:[]}),r=u=>({...pe(["title",...t])(u),...u.meta,..._e(u?.navigation)?u.navigation:{}}),i=u=>({...pe(["title",...t])(u),..._e(u?.navigation)?u.navigation:{}}),h=a.reduce((u,c)=>{const p=c.path.substring(1).split("/"),O=c.stem.split("/"),L=!!O[O.length-1]?.match(/([1-9]\d*\.)?index/g),_=m=>({title:m.title,path:m.path,stem:m.stem,children:[],...i(m)}),g=_(c);if(L){const m=o[g.path];if(typeof m?.navigation<"u"&&m?.navigation===!1)return u;if(c.path!=="/"){const T=_(c);g.children.push(T)}m&&Object.assign(g,r(m))}if(p.length===1){const m=u.find(T=>T.path===g.path&&T.page===!1);return L&&m?Object.assign(m,{page:void 0,children:[...g.children||[],...m.children||[]]}):u.push(g),u}const C=p.slice(0,-1).reduce((m,T,v)=>{const $="/"+p.slice(0,v+1).join("/"),k=o[$];if(typeof k?.navigation<"u"&&k.navigation===!1)return[];let A=m.find(j=>j.path===$);if(!A){const j=k?r(k):{};A={...j,title:j.title||_t(T),path:$,stem:O.slice(0,v+1).join("/"),children:[],page:!1},m.push(A)}return A.children},u),b=C.find(m=>m.path===g.path&&m.page===!1);return b?Object.assign(b,{...g,page:void 0,children:[...g.children||[],...b.children||[]]}):C.push(g),u},[]);return Oe(h)}function Oe(e){const t=e;for(const n of t)n.children?.length?Oe(n.children):delete n.children;return e}function _e(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}const _t=e=>e.split(/[\s-]/g).map(He).join(" ");async function gt(e,t,n){const{before:s=1,after:a=1,fields:o=[]}=n||{},r=await pt(e,o),i=Te(r),h=i.findIndex(p=>p.path===t),u=h===-1?[]:i.slice(h-s,h),c=h===-1?[]:i.slice(h+1,h+a+1);return[...Array.from({length:s}).fill(null).concat(u).slice(u.length),...c.concat(Array.from({length:a}).fill(null)).slice(0,a)]}function Te(e){return e.flatMap(n=>{const s=n.children?Te(n.children):[];return n.page===!1||s.length&&s.find(a=>a.path===n.path)?s:[{...n,children:void 0},...s]})}async function yn(e,t){return await $fetch(`/__nuxt_content/${t}/sql_dump.txt`,{context:{},responseType:"text",headers:{"content-type":"text/plain"},query:{v:xe[String(t)],t:void 0}})}async function mt(e,t,n){return await $fetch(`/__nuxt_content/${t}/query`,{context:e?{cloudflare:e.context.cloudflare}:{},headers:{"content-type":"application/json",...e?.node?.req?.headers?.cookie?{cookie:e.node.req.headers.cookie}:{}},query:{v:xe[String(t)],t:void 0},method:"POST",body:{sql:n}})}const re=e=>{const t=Ye()?.ssrContext?.event;return ht(e,(n,s)=>yt(t,n,s))};function vn(e,t,n){return bt(e,s=>gt(s,t,n))}async function yt(e,t,n){return window.WebAssembly?vt(t,n):mt(e,String(t),n)}async function vt(e,t){return await Qe(()=>import("./B_LVqHyN.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(s=>s.loadDatabaseAdapter(e)).then(s=>s.all(t))}function bt(e,t){const n=re(e),s={where(a,o,r){return n.where(String(a),o,r),s},andWhere(a){return n.andWhere(a),s},orWhere(a){return n.orWhere(a),s},order(a,o){return n.order(String(a),o),s},then(a,o){return t(n).then(a,o)},catch(a){return this.then(void 0,a)},finally(a){return this.then(void 0,void 0).finally(a)},get[Symbol.toStringTag](){return"Promise"}};return s}const wt={class:"pc-nav"},Dt={class:"container"},Ct=U({__name:"HeaderNav",props:{navItems:{}},emits:["toggle"],setup(e,{emit:t}){const n=t,s=le(),a=o=>{n("toggle",o)};return(o,r)=>{const i=ie;return D(),x("nav",null,[y("div",wt,[(D(!0),x(Q,null,K(e.navItems,h=>(D(),ue(i,{key:h.link,to:f(s)(h.link)},{default:Z(()=>[ee(M(o.$t(h.text)),1)]),_:2},1032,["to"]))),128))]),y("div",{class:"mobile-nav",onClick:a},[y("div",Dt,[(D(),x(Q,null,K(3,h=>y("div",{class:"mobile-nav-item",key:h})),64))])])])}}}),$t=Object.assign(z(Ct,[["__scopeId","data-v-20ac0c73"]]),{__name:"HeaderNav"}),St={class:"mask"},Et={class:"title-container"},xt={class:"title"},Ot={key:0},Tt=U({__name:"Banner",props:{title:{},slogan:{},background:{}},setup(e){const t=e,n=N(()=>({...t.background}));return(s,a)=>(D(),x("div",{class:"banner",style:ye(f(n))},[y("div",St,[y("div",Et,[y("div",xt,[y("h1",null,M(e.title),1),e.slogan?(D(),x("p",Ot,M(e.slogan),1)):q("",!0)])])])],4))}}),kt=Object.assign(z(Tt,[["__scopeId","data-v-4e11f931"]]),{__name:"Banner"}),Lt={class:"search-overlay__panel"},Mt={class:"search-overlay__header"},It=["placeholder"],Nt=["aria-label"],Pt={key:0,class:"search-overlay__state"},jt={key:1,class:"search-overlay__body"},Rt={key:0,class:"search-overlay__state"},At={key:1,class:"search-overlay__state"},Bt={key:2,class:"search-overlay__count"},Ft={key:3,class:"search-overlay__list"},Vt={class:"search-overlay__item-title"},Wt={class:"search-overlay__item-meta"},qt={key:0},Ut={class:"search-overlay__item-snippet"},zt=50,Ht=U({__name:"SearchOverlay",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,s=t,{t:a,locale:o}=G(),r=N(()=>o.value.startsWith("zh")),i=R(""),h=R(null),u=Ke(),c=R(!1),p=async()=>{const d=await u("/search/sections.json");if(Array.isArray(d))return d;if(typeof d=="string")try{return JSON.parse(d)}catch(w){console.warn("[search] Failed to parse sections payload",w)}return[]},{data:O,pending:L,refresh:_}=rt("posts-search-sections",p,{server:!1,immediate:!1,default:()=>[]}),g=N(()=>O.value??[]),C=N(()=>{const d=i.value.trim().toLowerCase();if(!d)return[];const w=Array.from(new Set(d.split(/\s+/).filter(Boolean)));if(!w.length)return[];const I=g.value.map(l=>{const S=(l.content??"").replace(/\s+/g," ").trim();if(!S)return null;const V=T(l),H=v(l),se=`${V} ${H} ${S}`.toLowerCase();if(!w.every(P=>se.includes(P)))return null;let W=0;return w.forEach(P=>{V.toLowerCase().includes(P)?W+=4:H.toLowerCase().includes(P)?W+=3:W+=1}),{id:l.id,baseId:$(l.id),documentTitle:V,sectionTitle:H,snippet:j(S,w),score:W}}).filter(l=>!!l).sort((l,S)=>S.score-l.score);if(!I.length)return[];const E=new Map;return I.forEach(l=>{const S=E.get(l.baseId);if(!S){E.set(l.baseId,{id:l.id,baseId:l.baseId,documentTitle:l.documentTitle,sectionTitles:l.sectionTitle?[l.sectionTitle]:[],snippets:[l.snippet],score:l.score,matchCount:1,bestScore:l.score});return}S.matchCount+=1,S.score+=l.score,S.snippets.push(l.snippet),l.sectionTitle&&!S.sectionTitles.includes(l.sectionTitle)&&S.sectionTitles.length<3&&S.sectionTitles.push(l.sectionTitle),l.score>S.bestScore&&(S.bestScore=l.score,S.id=l.id)}),Array.from(E.values()).map(l=>({id:l.id,documentTitle:l.documentTitle,sectionLabel:A(l.sectionTitles,l.matchCount),snippet:k(l.snippets),score:l.score,matchCount:l.matchCount})).sort((l,S)=>S.score-l.score).slice(0,zt)}),b=d=>{n.modelValue&&d.key==="Escape"&&(d.preventDefault(),m())};X(()=>n.modelValue,d=>{d?(c.value||(c.value=!0,_()),document.body.style.setProperty("overflow","hidden"),me(()=>{i.value="",h.value?.focus()})):document.body.style.removeProperty("overflow")}),ae(()=>{window.addEventListener("keydown",b)}),ve(()=>{window.removeEventListener("keydown",b),document.body.style.removeProperty("overflow")});function m(){s("update:modelValue",!1)}function T(d){return d.titles?.[0]??d.title??a("searchOverlay.untitled")}function v(d){return d.titles?.length?d.titles.slice(1).filter(Boolean).at(-1)??d.title??"":d.title??""}function $(d){const w=d.indexOf("#");return w===-1?d:d.slice(0,w)}function k(d){const w=[];if(d.forEach(E=>{const l=E.trim();l&&(w.includes(l)||w.push(l))}),!w.length)return"";const I=w.slice(0,2).join(" â€¦ ");return I.length>240?`${I.slice(0,240)}â€¦`:I}function A(d,w){if(!w)return"";if(w===1)return d[0]??"";if(!d.length)return"";const I=r.value?"ã€":", ",E=d.join(I),l=a("searchOverlay.sectionMatches",{sections:E}),S=w>d.length?a("searchOverlay.moreSuffix"):"";return`${l}${S}`}function j(d,w){if(!d)return"";const I=d.toLowerCase(),E=w.map(P=>I.indexOf(P)).filter(P=>P>=0).sort((P,ke)=>P-ke)[0];if(E===void 0)return F(d);const l=60,S=Math.max(0,E-l),V=Math.min(d.length,E+l),H=d.slice(S,V),se=S>0?"â€¦":"",W=V<d.length?"â€¦":"";return`${se}${H}${W}`}function F(d){return d.length>140?`${d.slice(0,140)}â€¦`:d}return(d,w)=>{const I=ie;return D(),ue(Xe,{to:"body"},[B(Je,{name:"search-overlay"},{default:Z(()=>[e.modelValue?(D(),x("div",{key:0,class:"search-overlay",role:"dialog","aria-modal":"true",onMousedown:be(m,["self"])},[y("div",Lt,[y("div",Mt,[Ze(y("input",{ref_key:"inputRef",ref:h,type:"search","onUpdate:modelValue":w[0]||(w[0]=E=>we(i)?i.value=E:null),class:"search-overlay__input",placeholder:f(a)("searchOverlay.placeholder")},null,8,It),[[Ge,f(i)]]),y("button",{class:"search-overlay__close",type:"button",onClick:m,"aria-label":f(a)("searchOverlay.closeLabel")}," Ã— ",8,Nt)]),f(L)?(D(),x("div",Pt,M(f(a)("searchOverlay.indexing")),1)):(D(),x("div",jt,[f(i).trim()?f(C).length?(D(),x("div",Bt,M(f(a)("searchOverlay.resultsCount",{count:f(C).length})),1)):(D(),x("p",At,M(f(a)("searchOverlay.noResults")),1)):(D(),x("p",Rt,M(f(a)("searchOverlay.startTyping")),1)),f(C).length?(D(),x("ul",Ft,[(D(!0),x(Q,null,K(f(C),E=>(D(),x("li",{key:E.id,class:"search-overlay__item"},[B(I,{to:E.id,class:"search-overlay__link",onClick:m},{default:Z(()=>[y("h3",Vt,M(E.documentTitle),1),y("p",Wt,[ee(M(f(a)("searchOverlay.matchCount",{count:E.matchCount}))+" ",1),E.sectionLabel?(D(),x("span",qt," Â· "+M(E.sectionLabel),1)):q("",!0)]),y("p",Ut,M(E.snippet),1)]),_:2},1032,["to"])]))),128))])):q("",!0)]))])],32)):q("",!0)]),_:1})])}}}),Yt=Object.assign(z(Ht,[["__scopeId","data-v-7dae6bfa"]]),{__name:"SearchOverlay"}),Qt=()=>{const{locale:e}=G(),t=de(),n=le();return{toggleLang:async()=>{const a=e.value==="zh"?"en":"zh";if(t.params.year&&t.params.month&&t.params.day&&t.params.slug){const{year:r,month:i,day:h,slug:u}=t.params,c=`/${r}/${i}/${h}/${u}`;try{if(await re("posts").path(c).where("lang","=",a==="zh"?"zh-CN":"en").count()===0){alert(a==="en"?"English version not available":"æš‚æ— ä¸­æ–‡ç‰ˆæœ¬");return}}catch(p){console.error("Failed to check article existence:",p)}}if(t.params.tag){const r=decodeURIComponent(t.params.tag);try{if(await re("posts").where("lang","=",a==="zh"?"zh-CN":"en").where("tags","LIKE",`%"${r}"%`).count()===0){alert(a==="en"?"No articles with this tag in English":"è¯¥æ ‡ç­¾ä¸‹æš‚æ— ä¸­æ–‡æ–‡ç« ");return}}catch(i){console.error("Failed to check tag existence:",i)}}let o=n(t.fullPath,a);t.path.includes("/archives/page/")?o=n("/archives",a):t.path.startsWith(n("/page/",e.value))&&(o=n("/",a)),et(o.endsWith("/")?o:o+"/")}}};function Zt(){const e=R(!1);let t=!1;const n=()=>{t||(window.requestAnimationFrame(()=>{e.value=window.scrollY>0,t=!1}),t=!0)};return ae(()=>{n(),window.addEventListener("scroll",n)}),ce(()=>{window.removeEventListener("scroll",n)}),{isScrolled:e}}function Gt(){const e=R(!1),t=s=>{s.stopPropagation(),e.value=!e.value},n=()=>{e.value=!1};return ae(()=>{document.addEventListener("click",n)}),ce(()=>{document.removeEventListener("click",n)}),{showMobileMenu:e,toggleMobileMenu:t,closeMobileMenu:n}}const Jt={class:"header-container"},Xt={class:"header"},Kt={class:"header-right"},en={class:"lang-switch__label"},tn={class:"search-trigger__label"},nn={key:0,class:"mobile-menu-dropdown"},an=U({__name:"Header",props:{title:{default:""},background:{}},setup(e){const{t}=G(),n=Ee(),s=de(),{locale:a}=G(),o=le(),{toggleLang:r}=Qt(),i=N(()=>s.path==="/"||s.path.startsWith("/page/")?n.slogan:null),h=e,u=N(()=>h.title||t("title")),{isScrolled:c}=Zt(),{showMobileMenu:p,toggleMobileMenu:O,closeMobileMenu:L}=Gt(),_=R(!1),g=()=>{L(),_.value=!0};return X(()=>s.fullPath,()=>{_.value=!1}),(C,b)=>{const m=ie,T=$t,v=kt,$=Yt;return D(),x(Q,null,[y("header",{class:tt({scrolled:f(c),"show-mobile-menu":f(p)})},[y("div",Jt,[y("div",Xt,[B(m,{to:f(o)("/"),class:"header-title"},{default:Z(()=>[ee(M(f(t)("title")),1)]),_:1},8,["to"]),y("div",Kt,[B(T,{"nav-items":f(n).nav.items,onToggle:f(O)},null,8,["nav-items","onToggle"]),y("button",{type:"button",class:"lang-switch",onClick:b[0]||(b[0]=(...k)=>f(r)&&f(r)(...k)),"aria-label":"Switch Language"},[y("span",en,M(f(a)==="zh"?"En":"ä¸­"),1)]),y("button",{type:"button",class:"search-trigger pc",onClick:g,"aria-label":"Search"},[b[2]||(b[2]=y("span",{"aria-hidden":"true"},"ðŸ”",-1)),y("span",tn,M(f(t)("search")),1)])])])]),f(p)?(D(),x("div",nn,[(D(!0),x(Q,null,K(f(n).nav.items,k=>(D(),ue(m,{key:k.link,to:f(o)(k.link),onClick:f(L)},{default:Z(()=>[ee(M(f(t)(k.text)),1)]),_:2},1032,["to","onClick"]))),128)),y("a",{onClick:be(g,["prevent"])},M(f(t)("search")),1)])):q("",!0)],2),B(v,{background:e.background,title:f(u),slogan:f(i)},null,8,["background","title","slogan"]),B($,{modelValue:f(_),"onUpdate:modelValue":b[1]||(b[1]=k=>we(_)?_.value=k:null)},null,8,["modelValue"])],64)}}}),sn=Object.assign(z(an,[["__scopeId","data-v-7fc41b48"]]),{__name:"Header"}),on=e=>{const t=R(null),n=R(!1);return ae(()=>{if(!t.value)return;const s=new IntersectionObserver(a=>{a.forEach(o=>{o.isIntersecting&&!n.value&&(n.value=!0,s.disconnect())})},{rootMargin:e?.rootMargin??"100px",threshold:e?.threshold??.1});s.observe(t.value),ve(()=>{s.disconnect()})}),{targetRef:t,isVisible:n}},rn={class:"footer-content"},cn={key:0,frameborder:"0",src:"https://support.nodeget.com/page/promotion?id=61",style:{"border-radius":"8px",height:"246px",transform:"scale(0.8)","transform-origin":"top center"}},ln=U({__name:"Footer",props:{background:{}},setup(e){const t=e,n=N(()=>({minHeight:"120px",...t.background})),{targetRef:s,isVisible:a}=on({rootMargin:"100px",threshold:.1});return(o,r)=>(D(),x("footer",{ref_key:"footerRef",ref:s,style:ye(f(n))},[r[1]||(r[1]=y("div",{class:"footer-mask"},null,-1)),y("div",rn,[r[0]||(r[0]=y("div",null,"Â©2020 - 2025 By zhullyb",-1)),f(a)?(D(),x("iframe",cn)):q("",!0)])],4))}}),un=Object.assign(z(ln,[["__scopeId","data-v-22a21bbd"]]),{__name:"Footer"}),dn={class:"content-wrapper"},fn={class:"before-main side"},hn={class:"after-main side"},pn=U({__name:"DefaultLayout",props:{title:{default:""}},setup(e){const{t}=G(),n=de(),s=e,a=Ee(),{data:o}=De("randomIndex"+n.path,async()=>Math.floor(Math.random()*a.backgrounds.length),"$RRY2fi8_v6"),r=N(()=>a.backgrounds[o.value??0]);return nt({title:s.title||t("title")}),(i,h)=>{const u=sn,c=un;return D(),x("div",null,[B(u,{background:f(r),title:e.title},null,8,["background","title"]),y("div",dn,[y("div",fn,[oe(i.$slots,"BeforeMain",{},void 0,!0)]),y("main",null,[oe(i.$slots,"default",{},void 0,!0)]),y("div",hn,[oe(i.$slots,"AfterMain",{},void 0,!0)])]),B(c,{background:f(r)},null,8,["background"])])}}}),bn=Object.assign(z(pn,[["__scopeId","data-v-2fa67436"]]),{__name:"DefaultLayout"});export{bn as _,xe as a,on as b,mn as c,vn as d,yn as f,re as q,ft as t,De as u};
