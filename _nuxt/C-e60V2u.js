const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CgInidng.js","./BxhZ4jnB.js","./entry.Cb3Jctur.css","./BC7mfSrw.js"])))=>i.map(i=>d[i]);
import{_ as S}from"./FGEJq0of.js";import{_ as q}from"./CMJstOHc.js";import{a as F,d as U,_ as Y,u as R,q as G,e as J}from"./BZ8FGue4.js";import{d as j,K as O,C as x,D as A,o as _,c as b,w as $,G as u,I as w,E as c,_ as H,J as V,q as E,P as K,a as N,af as Q,ag as X,ah as Z,ai as tt,S as et,b as nt,f as st,i as at,N as B,O as M,Q as ot,R as rt,V as lt,L as T,M as it,H as ct,F as ut}from"./BxhZ4jnB.js";const _t={key:0,class:"post-navigation"},dt={class:"nav-content"},ft={class:"nav-label"},pt={class:"nav-title"},vt={class:"nav-content"},mt={class:"nav-label"},ht={class:"nav-title"},gt=j({__name:"PostNavigation",props:{prevPost:{},nextPost:{}},setup(t){const{t:l}=O();return(o,r)=>{const e=F;return t.prevPost||t.nextPost?(_(),x("nav",_t,[t.prevPost?(_(),b(e,{key:0,class:"nav-button prev",to:t.prevPost.path},{default:$(()=>[r[0]||(r[0]=u("div",{class:"nav-arrow"},"←",-1)),u("div",dt,[u("span",ft,w(c(l)("postNavigation.prev")),1),u("span",pt,w(t.prevPost.title),1)])]),_:1},8,["to"])):A("",!0),t.nextPost?(_(),b(e,{key:1,class:"nav-button next",to:t.nextPost.path},{default:$(()=>[u("div",vt,[u("span",mt,w(c(l)("postNavigation.next")),1),u("span",ht,w(t.nextPost.title),1)]),r[1]||(r[1]=u("div",{class:"nav-arrow"},"→",-1))]),_:1},8,["to"])):A("",!0)])):A("",!0)}}}),yt=Object.assign(H(gt,[["__scopeId","data-v-a46f138f"]]),{__name:"PostNavigation"}),xt={key:1},wt=j({__name:"Waline",setup(t){const l=Q(()=>et(()=>import("./CgInidng.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(n=>n.Waline)),o=V(),{locale:r}=O(),e=E(()=>({...K.waline,lang:r.value==="zh"?"zh-CN":"en",path:(o.path.endsWith("/")?o.path:o.path+"/").replace("/en/","/")})),{targetRef:g,isVisible:f}=U({rootMargin:"200px",threshold:0});return(n,s)=>{const a=tt;return _(),x("div",{id:"waline",ref_key:"walineRef",ref:g},[N(a,null,{default:$(()=>[c(f)?(_(),b(c(l),X(Z({key:0},c(e))),null,16)):(_(),x("div",xt,"Waline Loading..."))]),_:1})],512)}}}),bt=Object.assign(wt,{__name:"Waline"});function L(t){return t?typeof t=="string"?t:Array.isArray(t)?t.length>=2&&typeof t[0]=="string"&&typeof t[1]=="object"?t.slice(2).map(L).join(""):t.map(L).join(""):t.value&&typeof t.value=="string"?t.value:t.children&&Array.isArray(t.children)?t.children.map(L).join(""):"":""}function $t(t){if(!t)return[];const l=[],o=t.value||t;function r(e){if(e)if(Array.isArray(e))if(e.length>=2&&typeof e[0]=="string"&&typeof e[1]=="object"){const g=e[0],f=e[1],n=e.slice(2),s=g.match(/^h([1-6])$/);if(s?.[1]&&f.id){const a=parseInt(s[1]),i=n.map(L).join("").trim();i&&l.push({id:f.id,text:i,level:a})}n.forEach(r)}else e.forEach(r);else typeof e=="object"&&(e.children&&Array.isArray(e.children)&&e.children.forEach(r),e.value&&Array.isArray(e.value)&&e.value.forEach(r))}return r(o),l}const Pt={key:0,class:"toc"},kt={class:"toc-list"},Ct=["href","onClick"],It=j({__name:"TableOfContents",props:{body:{}},setup(t){const l=t,o=E(()=>$t(l.body)),r=nt(""),e=n=>{if(!r.value)return!1;const s=o.value.findIndex(p=>p.id===r.value),a=o.value.findIndex(p=>p.id===n.id);if(s===-1||a===-1)return!1;const i=n;if(i.id===r.value||i.level<=2)return!1;const d=p=>{const v=[],m=o.value[p];if(!m)return v;let h=m.level,I=p-1;for(;I>=0;){const y=o.value[I];if(!y||y.level<h&&(v.push(y.id),h=y.level,y.level<=1))break;I--}return v},P=p=>{const v=o.value[p];if(!v)return null;let m=p-1;for(;m>=0;){const h=o.value[m];if(!h)break;if(h.level<v.level)return h.id;m--}return null},k=d(s);if(k.includes(i.id))return!1;const C=P(a);return!(!C||C===r.value||k.includes(C))},g=n=>{const s=document.getElementById(n);s&&(s.scrollIntoView({behavior:"smooth",block:"start"}),window.history.pushState(null,"",`#${n}`))},f=()=>{const n=o.value.map(i=>({id:i.id,element:document.getElementById(i.id)})).filter(i=>i.element!==null);if(n.length===0)return;const s=window.scrollY;let a=n[0];for(const i of n)if(i.element.getBoundingClientRect().top+s<=s+100)a=i;else break;a&&(r.value=a.id)};return st(()=>{f();let n=!1;const s=()=>{n||(window.requestAnimationFrame(()=>{f(),n=!1}),n=!0)};window.addEventListener("scroll",s,{passive:!0}),at(()=>{window.removeEventListener("scroll",s)})}),(n,s)=>c(o).length>0?(_(),x("nav",Pt,[s[0]||(s[0]=u("div",{class:"toc-title"},"目录",-1)),u("ul",kt,[(_(!0),x(B,null,M(c(o),a=>(_(),x("li",{key:a.id,class:ot(["toc-item",`toc-level-${a.level}`,{active:c(r)===a.id,collapsed:e(a)}])},[u("a",{href:`#${a.id}`,onClick:rt(i=>g(a.id),["prevent"])},w(a.text),9,Ct)],2))),128))])])):A("",!0)}}),At=Object.assign(H(It,[["__scopeId","data-v-ae70bcd1"]]),{__name:"TableOfContents"}),Et={class:"tags"},Nt=j({__name:"index",async setup(t){let l,o;const r=V(),{locale:e}=O(),g=lt(),{year:f,month:n,day:s,slug:a}=r.params,i=E(()=>`/${f}/${n}/${s}/${a}`),{data:d}=([l,o]=T(()=>R(`post-${f}-${n}-${s}-${a}-${e.value}`,()=>G("posts").path(i.value).where("lang","=",e.value==="zh"?"zh-CN":"en").first())),l=await l,o(),l);if(!d.value)throw it({statusCode:404,statusMessage:"Post not found",fatal:!0});const P=([l,o]=T(()=>R(`surround-${f}-${n}-${s}-${a}-${e.value}`,()=>J("posts",d.value.path,{before:1,after:1,fields:["title","path","date","lang"]}).where("lang","=",e.value==="zh"?"zh-CN":"en").order("date","DESC"))),l=await l,o(),l).data,k=E(()=>P.value?.[0]||null),C=E(()=>P.value?.[1]||null);return ct({meta:[{name:"description",content:d.value?.description||""},{name:"keywords",content:d.value?.tags?.join(",")||""}],link:[{rel:"stylesheet",href:"https://s4.zstatic.net/ajax/libs/github-markdown-css/5.8.1/github-markdown.min.css"}]}),(p,v)=>{const m=S,h=q,I=yt,y=bt,W=At,D=Y;return _(),b(D,{title:c(d)?.title},{AfterMain:$(()=>[u("aside",null,[N(W,{body:c(d)?.body},null,8,["body"])])]),default:$(()=>[c(d)?(_(),b(m,{key:0,value:c(d),tag:"article",class:"markdown-body"},null,8,["value"])):A("",!0),v[0]||(v[0]=u("hr",{class:"article-end-hr"},null,-1)),u("div",Et,[(_(!0),x(B,null,M(c(d)?.tags,z=>(_(),b(h,{key:z,to:`${c(g)("/tags")}/${encodeURIComponent(z)}`,prefetchOn:"interaction"},{default:$(()=>[ut("#"+w(z),1)]),_:2},1032,["to"]))),128))]),N(I,{prevPost:c(k),nextPost:c(C)},null,8,["prevPost","nextPost"]),N(y)]),_:1},8,["title"])}}}),Ht=H(Nt,[["__scopeId","data-v-8764dfbd"]]);export{Ht as default};
