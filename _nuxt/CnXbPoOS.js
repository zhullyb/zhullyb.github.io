import{d as p,b as m,q as k,f as b,i as S,C as i,o as n,G as r,D as c,c as x,I as v,Q as f,S as _,E as C,T as E,_ as I}from"./cjAtpQsw.js";const z={class:"prose-img-wrapper"},B=["src","alt","title","width","height"],N={key:0,class:"prose-img-caption"},P=["src","alt"],M={key:0,class:"prose-img-preview-scale-indicator"},D=.5,q=4,F=p({__name:"ProseImg",props:{src:{type:String,required:!0},alt:{type:String,default:""},title:{type:String,default:""},width:{type:[String,Number],default:void 0},height:{type:[String,Number],default:void 0}},setup(e){const o=m(!1),t=m(1),g=k(()=>({transform:`scale(${t.value})`,transition:"transform 0.15s",cursor:t.value!==1?"zoom-out":"zoom-in"}));function y(){o.value=!0,t.value=1,document.body.style.overflow="hidden"}function l(){o.value=!1,document.body.style.overflow=""}function h(a){if(!o.value)return;const u=a.deltaY;let s=t.value;u<0?s*=1.1:s/=1.1,s=Math.max(D,Math.min(q,s)),t.value=Number(s.toFixed(2))}function w(){t.value=1}function d(a){o.value&&(a.key==="Escape"||a.key==="Esc")&&l()}return b(()=>{window.addEventListener("keydown",d)}),S(()=>{window.removeEventListener("keydown",d),document.body.style.overflow=""}),(a,u)=>(n(),i("span",z,[r("img",{src:e.src,alt:e.alt,title:e.title,width:e.width,height:e.height,loading:"lazy",class:"prose-img",onClick:y,style:{cursor:"zoom-in"}},null,8,B),e.alt?(n(),i("span",N,v(e.alt),1)):c("",!0),(n(),x(E,{to:"body"},[o.value?(n(),i("div",{key:0,class:"prose-img-preview-mask",onClick:f(l,["self"]),onWheel:f(h,["prevent"])},[r("img",{src:e.src,alt:e.alt,class:"prose-img-preview-img",style:_(C(g)),onDblclick:w},null,44,P),r("button",{class:"prose-img-preview-close",onClick:l,"aria-label":"关闭预览"}," × "),t.value!==1?(n(),i("div",M,v((t.value*100).toFixed(0))+"% ",1)):c("",!0)],32)):c("",!0)]))]))}}),T=Object.assign(I(F,[["__scopeId","data-v-4f488808"]]),{__name:"ProseImg"});export{T as default};
