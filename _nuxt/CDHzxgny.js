const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BbrfTcP8.js","./C56RG-Ix.js","./entry.0KQ4aIgo.css","./NaInO3jP.js"])))=>i.map(i=>d[i]);
import{x as I,g as ve,aq as Ie,X as Z,$ as Me,a4 as Ne,Z as Pe,f as V,s as he,a5 as Re,Y as ye,N as je,G as h,a2 as Ae,ar as Be,a7 as le,a8 as Ve,as as Fe,at as We,au as qe,av as ze,aa as Ue,e as F,aw as He,y as Qe,ax as _e,n as Ye,D as Ge,al as Je,ay as Xe,S as Ze,b as x,o as b,d as m,O as G,P as K,c as ee,w as z,H as te,J as O,_ as H,F as U,U as be,L as J,h as se,k as we,a as B,T as De,ab as Ke,a0 as $e,ad as et,az as tt,V as nt,aA as at,m as st,K as ue,W as ot,R as rt,I as it,r as re}from"./C56RG-Ix.js";import{_ as ie}from"./NaInO3jP.js";const ct={trailing:!0};function lt(e,t=25,n={}){if(n={...ct,...n},!Number.isFinite(t))throw new TypeError("Expected `wait` to be a finite number");let s,a,r=[],i,o;const f=(p,D)=>(i=ut(e,p,D),i.finally(()=>{if(i=null,n.trailing&&o&&!a){const T=f(p,o);return o=null,T}}),i),u=function(...p){return n.trailing&&(o=p),i||new Promise(D=>{const T=!a&&n.leading;clearTimeout(a),a=setTimeout(()=>{a=null;const v=n.leading?s:f(this,p);o=null;for(const _ of r)_(v);r=[]},t),T?(s=f(this,p),D(s)):r.push(D)})},c=p=>{p&&(clearTimeout(p),a=null)};return u.isPending=()=>!!a,u.cancel=()=>{c(a),r=[],o=null},u.flush=()=>{if(c(a),!o||i)return;const p=o;return o=null,f(this,p)},u}async function ut(e,t,n){return await e.apply(t,n)}function de(...e){const t=typeof e[e.length-1]=="string"?e.pop():void 0;Ce(e[0],e[1])&&e.unshift(t);let[n,s,a={}]=e,r=!1;const i=I(()=>Ne(n));if(typeof i.value!="string")throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if(typeof s!="function")throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const o=ve();a.server??=!0,a.default??=ht,a.getCachedData??=xe,a.lazy??=!1,a.immediate??=!0,a.deep??=Ie.deep,a.dedupe??="cancel",a._functionName,o._asyncData[i.value];function f(){const v={cause:"initial",dedupe:a.dedupe};return o._asyncData[i.value]?._init||(v.cachedData=a.getCachedData(i.value,o,{cause:"initial"}),o._asyncData[i.value]=pe(o,i.value,s,a,v.cachedData)),()=>o._asyncData[i.value].execute(v)}const u=f(),c=o._asyncData[i.value];c._deps++;const p=a.server!==!1&&o.payload.serverRendered;{let v=function(y){const C=o._asyncData[y];C?._deps&&(C._deps--,C._deps===0&&C?._off())};const _=Ae();if(_&&p&&a.immediate&&!_.sp&&(_.sp=[]),_&&!_._nuxtOnBeforeMountCbs){_._nuxtOnBeforeMountCbs=[];const y=_._nuxtOnBeforeMountCbs;Be(()=>{y.forEach(C=>{C()}),y.splice(0,y.length)}),le(()=>y.splice(0,y.length))}const w=_&&(_._nuxtClientOnly||Ve(Fe,!1));p&&o.isHydrating&&(c.error.value||c.data.value!==void 0)?c.status.value=c.error.value?"error":"success":_&&(!w&&o.payload.serverRendered&&o.isHydrating||a.lazy)&&a.immediate?_._nuxtOnBeforeMountCbs.push(u):a.immediate&&c.status.value!=="success"&&u();const k=Pe(),g=Z(i,(y,C)=>{if((y||C)&&y!==C){r=!0;const M=o._asyncData[C]?.data.value!==void 0,j=o._asyncDataPromises[C]!==void 0,R={cause:"initial",dedupe:a.dedupe};if(!o._asyncData[y]?._init){let N;C&&M?N=o._asyncData[C].data.value:(N=a.getCachedData(y,o,{cause:"initial"}),R.cachedData=N),o._asyncData[y]=pe(o,y,s,a,N)}o._asyncData[y]._deps++,C&&v(C),(a.immediate||M||j)&&o._asyncData[y].execute(R),We(()=>{r=!1})}},{flush:"sync"}),L=a.watch?Z(a.watch,()=>{r||c._execute({cause:"watch",dedupe:a.dedupe})}):()=>{};k&&Me(()=>{g(),L(),v(i.value)})}const D={data:X(()=>o._asyncData[i.value]?.data),pending:X(()=>o._asyncData[i.value]?.pending),status:X(()=>o._asyncData[i.value]?.status),error:X(()=>o._asyncData[i.value]?.error),refresh:(...v)=>o._asyncData[i.value]?._init?o._asyncData[i.value].execute(...v):f()(),execute:(...v)=>D.refresh(...v),clear:()=>{const v=o._asyncData[i.value];if(v?._abortController)try{v._abortController.abort(new DOMException("AsyncData aborted by user.","AbortError"))}finally{v._abortController=void 0}Se(o,i.value)}},T=Promise.resolve(o._asyncDataPromises[i.value]).then(()=>D);return Object.assign(T,D),T}function X(e){return I({get(){return e()?.value},set(t){const n=e();n&&(n.value=t)}})}function dt(...e){const t=typeof e[e.length-1]=="string"?e.pop():void 0;Ce(e[0],e[1])&&e.unshift(t);const[n,s,a={}]=e;return de(n,s,{...a,lazy:!0},null)}function Ce(e,t){return!(typeof e=="string"||typeof e=="object"&&e!==null||typeof e=="function"&&typeof t=="function")}function Se(e,t){t in e.payload.data&&(e.payload.data[t]=void 0),t in e.payload._errors&&(e.payload._errors[t]=void 0),e._asyncData[t]&&(e._asyncData[t].data.value=h(e._asyncData[t]._default()),e._asyncData[t].error.value=void 0,e._asyncData[t].status.value="idle"),t in e._asyncDataPromises&&(e._asyncDataPromises[t]=void 0)}function ft(e,t){const n={};for(const s of t)n[s]=e[s];return n}function pe(e,t,n,s,a){e.payload._errors[t]??=void 0;const r=s.getCachedData!==xe,i=n,o=s.deep?V:he,f=a!==void 0,u=e.hook("app:data:refresh",async p=>{(!p||p.includes(t))&&await c.execute({cause:"refresh:hook"})}),c={data:o(f?a:s.default()),pending:I(()=>c.status.value==="pending"),error:Re(e.payload._errors,t),status:he("idle"),execute:(...p)=>{const[D,T=void 0]=p,v=D&&T===void 0&&typeof D=="object"?D:{};if(e._asyncDataPromises[t]&&(v.dedupe??s.dedupe)==="defer")return e._asyncDataPromises[t];{const w="cachedData"in v?v.cachedData:s.getCachedData(t,e,{cause:v.cause??"refresh:manual"});if(w!==void 0)return e.payload.data[t]=c.data.value=w,c.error.value=void 0,c.status.value="success",Promise.resolve(w)}c._abortController&&c._abortController.abort(new DOMException("AsyncData request cancelled by deduplication","AbortError")),c._abortController=new AbortController,c.status.value="pending";const _=new Promise((w,k)=>{try{const g=v.timeout??s.timeout,L=_t([c._abortController?.signal,v?.signal],g);if(L.aborted){const y=L.reason;k(y instanceof Error?y:new DOMException(String(y??"Aborted"),"AbortError"));return}return L.addEventListener("abort",()=>{const y=L.reason;k(y instanceof Error?y:new DOMException(String(y??"Aborted"),"AbortError"))},{once:!0}),Promise.resolve(i(e,{signal:L})).then(w,k)}catch(g){k(g)}}).then(async w=>{let k=w;s.transform&&(k=await s.transform(w)),s.pick&&(k=ft(k,s.pick)),e.payload.data[t]=k,c.data.value=k,c.error.value=void 0,c.status.value="success"}).catch(w=>{if(!(e._asyncDataPromises[t]&&e._asyncDataPromises[t]!==_)&&!c._abortController?.signal.aborted){if(typeof DOMException<"u"&&w instanceof DOMException&&w.name==="AbortError"){c.status.value="idle";return}c.error.value=je(w),c.data.value=h(s.default()),c.status.value="error"}}).finally(()=>{delete e._asyncDataPromises[t]});return e._asyncDataPromises[t]=_,e._asyncDataPromises[t]},_execute:lt((...p)=>c.execute(...p),0,{leading:!0}),_default:s.default,_deps:0,_init:!0,_hash:void 0,_off:()=>{u(),e._asyncData[t]?._init&&(e._asyncData[t]._init=!1),r||ye(()=>{e._asyncData[t]?._init||(Se(e,t),c.execute=()=>Promise.resolve())})}};return c}const ht=()=>{},xe=(e,t,n)=>{if(t.isHydrating)return t.payload.data[e];if(n.cause!=="refresh:manual"&&n.cause!=="refresh:hook")return t.static.data[e]};function _t(e,t){const n=e.filter(r=>!!r);if(typeof t=="number"&&t>=0){const r=AbortSignal.timeout?.(t);r&&n.push(r)}if(AbortSignal.any)return AbortSignal.any(n);const s=new AbortController;for(const r of n)if(r.aborted){const i=r.reason??new DOMException("Aborted","AbortError");try{s.abort(i)}catch{s.abort()}return s.signal}const a=()=>{const i=n.find(o=>o.aborted)?.reason??new DOMException("Aborted","AbortError");try{s.abort(i)}catch{s.abort()}};for(const r of n)r.addEventListener?.("abort",a,{once:!0});return s.signal}const pt={nuxt:{}},gt=qe(ze,pt);function Ee(){const e=ve();return e._appConfig||=Ue(gt),e._appConfig}const fe=F({name:"NuxtLinkLocale",props:{...ie.props,locale:{type:String,default:void 0,required:!1}},setup(e,{slots:t}){const n=He(),s=I(()=>{const o=e.to||e.href||"";return typeof o=="string"&&Qe(o,{acceptRelative:!0})}),a=I(()=>{const o=e.to??e.href,f=o!=null?n(o,e.locale):o;return f&&_e(e.to)&&(f.state=e.to?.state),o!=null?f:o}),r=I(()=>{if(e.external)return!0;const o=e.to||e.href||"";return _e(o)?!1:o===""||s.value}),i=()=>{const o={...e};return r.value||(o.to=a.value),delete o.href,delete o.locale,o};return()=>Ye(ie,i(),t.default)}}),ke={posts:"v3.5.0--tHnk9YMiKsqBnJWcNVVnLt3eIMiL3eXWvDXRJp_QfKE",others:"v3.5.0--9VPoLkQqIDomami-nsy49a_crqqOSGHRztYQEyP-n_Q"},mt={posts:"_content_posts",others:"_content_others",info:"_content_info"},xn={posts:{type:"page",fields:{id:"string",title:"string",body:"json",date:"string",description:"string",extension:"string",lang:"string",meta:"json",navigation:"json",path:"string",rawbody:"string",seo:"json",stem:"string",sticky:"boolean",tags:"json"}},others:{type:"page",fields:{id:"string",title:"string",body:"json",description:"string",extension:"string",lang:"string",meta:"json",navigation:"json",path:"string",seo:"json",stem:"string"}},info:{type:"data",fields:{}}},ne=(e,t)=>{const n=e._conditions;return n.length>0?`(${n.join(` ${t} `)})`:""},ae=e=>{const t=[],n={_conditions:t,where(s,a,r){let i;switch(a.toUpperCase()){case"IN":case"NOT IN":if(Array.isArray(r)){const o=r.map(f=>Y(f)).join(", ");i=`"${String(s)}" ${a.toUpperCase()} (${o})`}else throw new TypeError(`Value for ${a} must be an array`);break;case"BETWEEN":case"NOT BETWEEN":if(Array.isArray(r)&&r.length===2)i=`"${String(s)}" ${a.toUpperCase()} ${Y(r[0])} AND ${Y(r[1])}`;else throw new Error(`Value for ${a} must be an array with two elements`);break;case"IS NULL":case"IS NOT NULL":i=`"${String(s)}" ${a.toUpperCase()}`;break;case"LIKE":case"NOT LIKE":i=`"${String(s)}" ${a.toUpperCase()} ${Y(r)}`;break;default:i=`"${String(s)}" ${a} ${Y(typeof r=="boolean"?Number(r):r)}`}return t.push(`${i}`),n},andWhere(s){const a=s(ae());return t.push(ne(a,"AND")),n},orWhere(s){const a=s(ae());return t.push(ne(a,"OR")),n}};return n},vt=(e,t)=>{const n={conditions:[],selectedFields:[],offset:0,limit:0,orderBy:[],count:{field:"",distinct:!1}},s={__params:n,andWhere(r){const i=r(ae());return n.conditions.push(ne(i,"AND")),s},orWhere(r){const i=r(ae());return n.conditions.push(ne(i,"OR")),s},path(r){return s.where("path","=",Ge(r))},skip(r){return n.offset=r,s},where(r,i,o){return s.andWhere(f=>f.where(String(r),i,o)),s},limit(r){return n.limit=r,s},select(...r){return r.length&&n.selectedFields.push(...r),s},order(r,i){return n.orderBy.push(`"${String(r)}" ${i}`),s},async all(){return t(e,a()).then(r=>r||[])},async first(){return t(e,a({limit:1})).then(r=>r[0]||null)},async count(r="*",i=!1){return t(e,a({count:{field:String(r),distinct:i}})).then(o=>o[0].count)}};function a(r={}){let i="SELECT ";if(r?.count)i+=`COUNT(${r.count.distinct?"DISTINCT ":""}${r.count.field}) as count`;else{const f=Array.from(new Set(n.selectedFields));i+=f.length>0?f.map(u=>`"${String(u)}"`).join(", "):"*"}i+=` FROM ${mt[String(e)]}`,n.conditions.length>0&&(i+=` WHERE ${n.conditions.join(" AND ")}`),n.orderBy.length>0?i+=` ORDER BY ${n.orderBy.join(", ")}`:i+=" ORDER BY stem ASC";const o=r?.limit||n.limit;return o>0&&(n.offset>0?i+=` LIMIT ${o} OFFSET ${n.offset}`:i+=` LIMIT ${o}`),i}return s};function Y(e){return`'${String(e).replace(/'/g,"''")}'`}function ge(e){return t=>(t=t||{},(e||[]).filter(n=>typeof t[n]<"u").reduce((n,s)=>Object.assign(n,{[s]:t[s]}),{}))}async function yt(e,t=[]){e.__params?.orderBy?.length||(e=e.order("stem","ASC"));const s=await e.orWhere(u=>u.where("navigation","<>","false").where("navigation","IS NULL")).select("navigation","stem","path","title","meta",...t||[]).all(),{contents:a,configs:r}=s.reduce((u,c)=>{if(String(c.stem).split("/").pop()===".navigation"){c.title=c.title?.toLowerCase()==="navigation"?"":c.title;const p=c.path.split("/").slice(0,-1).join("/")||"/";u.configs[p]={...c,...c.body}}else u.contents.push(c);return u},{configs:{},contents:[]}),i=u=>({...ge(["title",...t])(u),...u.meta,...me(u?.navigation)?u.navigation:{}}),o=u=>({...ge(["title",...t])(u),...me(u?.navigation)?u.navigation:{}}),f=a.reduce((u,c)=>{const p=c.path.substring(1).split("/"),D=c.stem.split("/"),T=!!D[D.length-1]?.match(/([1-9]\d*\.)?index/g),v=g=>({title:g.title,path:g.path,stem:g.stem,children:[],...o(g)}),_=v(c);if(T){const g=r[_.path];if(typeof g?.navigation<"u"&&g?.navigation===!1)return u;if(c.path!=="/"){const L=v(c);_.children.push(L)}g&&Object.assign(_,i(g))}if(p.length===1){const g=u.find(L=>L.path===_.path&&L.page===!1);return T&&g?Object.assign(g,{page:void 0,children:[..._.children||[],...g.children||[]]}):u.push(_),u}const w=p.slice(0,-1).reduce((g,L,y)=>{const C="/"+p.slice(0,y+1).join("/"),M=r[C];if(typeof M?.navigation<"u"&&M.navigation===!1)return[];let j=g.find(R=>R.path===C);if(!j){const R=M?i(M):{};j={...R,title:R.title||bt(L),path:C,stem:D.slice(0,y+1).join("/"),children:[],page:!1},g.push(j)}return j.children},u),k=w.find(g=>g.path===_.path&&g.page===!1);return k?Object.assign(k,{..._,page:void 0,children:[..._.children||[],...k.children||[]]}):w.push(_),u},[]);return Le(f)}function Le(e){const t=e;for(const n of t)n.children?.length?Le(n.children):delete n.children;return e}function me(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}const bt=e=>e.split(/[\s-]/g).map(Je).join(" ");async function wt(e,t,n){const{before:s=1,after:a=1,fields:r=[]}=n||{},i=await yt(e,r),o=Oe(i),f=o.findIndex(p=>p.path===t),u=f===-1?[]:o.slice(f-s,f),c=f===-1?[]:o.slice(f+1,f+a+1);return[...Array.from({length:s}).fill(null).concat(u).slice(u.length),...c.concat(Array.from({length:a}).fill(null)).slice(0,a)]}function Oe(e){return e.flatMap(n=>{const s=n.children?Oe(n.children):[];return n.page===!1||s.length&&s.find(a=>a.path===n.path)?s:[{...n,children:void 0},...s]})}async function En(e,t){return await $fetch(`/__nuxt_content/${t}/sql_dump.txt`,{context:{},responseType:"text",headers:{"content-type":"text/plain"},query:{v:ke[String(t)],t:void 0}})}async function Dt(e,t,n){return await $fetch(`/__nuxt_content/${t}/query`,{context:e?{cloudflare:e.context.cloudflare}:{},headers:{"content-type":"application/json",...e?.node?.req?.headers?.cookie?{cookie:e.node.req.headers.cookie}:{}},query:{v:ke[String(t)],t:void 0},method:"POST",body:{sql:n}})}const ce=e=>{const t=Xe()?.ssrContext?.event;return vt(e,(n,s)=>$t(t,n,s))};function kn(e,t,n){return St(e,s=>wt(s,t,n))}async function $t(e,t,n){return window.WebAssembly?Ct(t,n):Dt(e,String(t),n)}async function Ct(e,t){return await Ze(()=>import("./BbrfTcP8.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(s=>s.loadDatabaseAdapter(e)).then(s=>s.all(t))}function St(e,t){const n=ce(e),s={where(a,r,i){return n.where(String(a),r,i),s},andWhere(a){return n.andWhere(a),s},orWhere(a){return n.orWhere(a),s},order(a,r){return n.order(String(a),r),s},then(a,r){return t(n).then(a,r)},catch(a){return this.then(void 0,a)},finally(a){return this.then(void 0,void 0).finally(a)},get[Symbol.toStringTag](){return"Promise"}};return s}const xt={class:"pc-nav"},Et={class:"container"},kt=F({__name:"HeaderNav",props:{navItems:{}},emits:["toggle"],setup(e,{emit:t}){const n=t,s=a=>{n("toggle",a)};return(a,r)=>{const i=fe;return b(),x("nav",null,[m("div",xt,[(b(!0),x(G,null,K(e.navItems,o=>(b(),ee(i,{key:o.link,to:o.link},{default:z(()=>[te(O(a.$t(o.text)),1)]),_:2},1032,["to"]))),128))]),m("div",{class:"mobile-nav",onClick:s},[m("div",Et,[(b(),x(G,null,K(3,o=>m("div",{class:"mobile-nav-item",key:o})),64))])])])}}}),Lt=Object.assign(H(kt,[["__scopeId","data-v-c5a90b55"]]),{__name:"HeaderNav"}),Ot={class:"mask"},Tt={class:"title-container"},It={class:"title"},Mt={key:0},Nt=F({__name:"Banner",props:{title:{},slogan:{},background:{}},setup(e){const t=e,n=I(()=>({...t.background}));return(s,a)=>(b(),x("div",{class:"banner",style:be(h(n))},[m("div",Ot,[m("div",Tt,[m("div",It,[m("h1",null,O(e.title),1),e.slogan?(b(),x("p",Mt,O(e.slogan),1)):U("",!0)])])])],4))}}),Pt=Object.assign(H(Nt,[["__scopeId","data-v-a96b3d82"]]),{__name:"Banner"}),Rt={class:"search-overlay__panel"},jt={class:"search-overlay__header"},At=["placeholder"],Bt=["aria-label"],Vt={key:0,class:"search-overlay__state"},Ft={key:1,class:"search-overlay__body"},Wt={key:0,class:"search-overlay__state"},qt={key:1,class:"search-overlay__state"},zt={key:2,class:"search-overlay__count"},Ut={key:3,class:"search-overlay__list"},Ht={class:"search-overlay__item-title"},Qt={class:"search-overlay__item-meta"},Yt={key:0},Gt={class:"search-overlay__item-snippet"},Jt=50,Xt=F({__name:"SearchOverlay",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,s=t,{t:a,locale:r}=J(),i=I(()=>r.value.startsWith("zh")),o=V(""),f=V(null),u=at(),c=V(!1),p=async()=>{const d=await u("/search/sections.json");if(Array.isArray(d))return d;if(typeof d=="string")try{return JSON.parse(d)}catch($){console.warn("[search] Failed to parse sections payload",$)}return[]},{data:D,pending:T,refresh:v}=dt("posts-search-sections",p,{server:!1,immediate:!1,default:()=>[]}),_=I(()=>D.value??[]),w=I(()=>{const d=o.value.trim().toLowerCase();if(!d)return[];const $=Array.from(new Set(d.split(/\s+/).filter(Boolean)));if(!$.length)return[];const P=_.value.map(l=>{const S=(l.content??"").replace(/\s+/g," ").trim();if(!S)return null;const W=L(l),Q=y(l),oe=`${W} ${Q} ${S}`.toLowerCase();if(!$.every(A=>oe.includes(A)))return null;let q=0;return $.forEach(A=>{W.toLowerCase().includes(A)?q+=4:Q.toLowerCase().includes(A)?q+=3:q+=1}),{id:l.id,baseId:C(l.id),documentTitle:W,sectionTitle:Q,snippet:R(S,$),score:q}}).filter(l=>!!l).sort((l,S)=>S.score-l.score);if(!P.length)return[];const E=new Map;return P.forEach(l=>{const S=E.get(l.baseId);if(!S){E.set(l.baseId,{id:l.id,baseId:l.baseId,documentTitle:l.documentTitle,sectionTitles:l.sectionTitle?[l.sectionTitle]:[],snippets:[l.snippet],score:l.score,matchCount:1,bestScore:l.score});return}S.matchCount+=1,S.score+=l.score,S.snippets.push(l.snippet),l.sectionTitle&&!S.sectionTitles.includes(l.sectionTitle)&&S.sectionTitles.length<3&&S.sectionTitles.push(l.sectionTitle),l.score>S.bestScore&&(S.bestScore=l.score,S.id=l.id)}),Array.from(E.values()).map(l=>({id:l.id,documentTitle:l.documentTitle,sectionLabel:j(l.sectionTitles,l.matchCount),snippet:M(l.snippets),score:l.score,matchCount:l.matchCount})).sort((l,S)=>S.score-l.score).slice(0,Jt)}),k=d=>{n.modelValue&&d.key==="Escape"&&(d.preventDefault(),g())};Z(()=>n.modelValue,d=>{d?(c.value||(c.value=!0,v()),document.body.style.setProperty("overflow","hidden"),ye(()=>{o.value="",f.value?.focus()})):document.body.style.removeProperty("overflow")}),se(()=>{window.addEventListener("keydown",k)}),we(()=>{window.removeEventListener("keydown",k),document.body.style.removeProperty("overflow")});function g(){s("update:modelValue",!1)}function L(d){return d.titles?.[0]??d.title??a("searchOverlay.untitled")}function y(d){return d.titles?.length?d.titles.slice(1).filter(Boolean).at(-1)??d.title??"":d.title??""}function C(d){const $=d.indexOf("#");return $===-1?d:d.slice(0,$)}function M(d){const $=[];if(d.forEach(E=>{const l=E.trim();l&&($.includes(l)||$.push(l))}),!$.length)return"";const P=$.slice(0,2).join(" … ");return P.length>240?`${P.slice(0,240)}…`:P}function j(d,$){if(!$)return"";if($===1)return d[0]??"";if(!d.length)return"";const P=i.value?"、":", ",E=d.join(P),l=a("searchOverlay.sectionMatches",{sections:E}),S=$>d.length?a("searchOverlay.moreSuffix"):"";return`${l}${S}`}function R(d,$){if(!d)return"";const P=d.toLowerCase(),E=$.map(A=>P.indexOf(A)).filter(A=>A>=0).sort((A,Te)=>A-Te)[0];if(E===void 0)return N(d);const l=60,S=Math.max(0,E-l),W=Math.min(d.length,E+l),Q=d.slice(S,W),oe=S>0?"…":"",q=W<d.length?"…":"";return`${oe}${Q}${q}`}function N(d){return d.length>140?`${d.slice(0,140)}…`:d}return(d,$)=>{const P=fe;return b(),ee(nt,{to:"body"},[B(tt,{name:"search-overlay"},{default:z(()=>[e.modelValue?(b(),x("div",{key:0,class:"search-overlay",role:"dialog","aria-modal":"true",onMousedown:De(g,["self"])},[m("div",Rt,[m("div",jt,[Ke(m("input",{ref_key:"inputRef",ref:f,type:"search","onUpdate:modelValue":$[0]||($[0]=E=>$e(o)?o.value=E:null),class:"search-overlay__input",placeholder:h(a)("searchOverlay.placeholder")},null,8,At),[[et,h(o)]]),m("button",{class:"search-overlay__close",type:"button",onClick:g,"aria-label":h(a)("searchOverlay.closeLabel")}," × ",8,Bt)]),h(T)?(b(),x("div",Vt,O(h(a)("searchOverlay.indexing")),1)):(b(),x("div",Ft,[h(o).trim()?h(w).length?(b(),x("div",zt,O(h(a)("searchOverlay.resultsCount",{count:h(w).length})),1)):(b(),x("p",qt,O(h(a)("searchOverlay.noResults")),1)):(b(),x("p",Wt,O(h(a)("searchOverlay.startTyping")),1)),h(w).length?(b(),x("ul",Ut,[(b(!0),x(G,null,K(h(w),E=>(b(),x("li",{key:E.id,class:"search-overlay__item"},[B(P,{to:E.id,class:"search-overlay__link",onClick:g},{default:z(()=>[m("h3",Ht,O(E.documentTitle),1),m("p",Qt,[te(O(h(a)("searchOverlay.matchCount",{count:E.matchCount}))+" ",1),E.sectionLabel?(b(),x("span",Yt," · "+O(E.sectionLabel),1)):U("",!0)]),m("p",Gt,O(E.snippet),1)]),_:2},1032,["to"])]))),128))])):U("",!0)]))])],32)):U("",!0)]),_:1})])}}}),Zt=Object.assign(H(Xt,[["__scopeId","data-v-63592d71"]]),{__name:"SearchOverlay"}),Kt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function en(e,t){return b(),x("svg",Kt,[...t[0]||(t[0]=[m("path",{fill:"currentColor",d:"M15.5 14h-.79l-.28-.27A6.47 6.47 0 0 0 16 9.5A6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5S14 7.01 14 9.5S11.99 14 9.5 14"},null,-1)])])}const tn=st({name:"ic-baseline-search",render:en}),nn=()=>{const{locale:e}=J(),t=ue(),n=ot(),s=I(()=>e.value==="zh"?"en":"zh"),{data:a}=de(`language-switch-${t.path}-${s.value}`,async()=>{const r=s.value;if(t.params.year&&t.params.month&&t.params.day&&t.params.slug){const{year:o,month:f,day:u,slug:c}=t.params,p=`/${o}/${f}/${u}/${c}`;try{if(await ce("posts").path(p).where("lang","=",r==="zh"?"zh-CN":"en").count()===0)return null}catch(D){return console.error("Failed to check article existence:",D),null}}if(t.params.tag){const o=decodeURIComponent(t.params.tag);try{if(await ce("posts").where("lang","=",r==="zh"?"zh-CN":"en").where("tags","LIKE",`%"${o}"%`).count()===0)return null}catch(f){return console.error("Failed to check tag existence:",f),null}}let i=n(t.fullPath,r);return t.path.includes("/archives/page/")?i=n("/archives",r):t.path.startsWith(n("/page/",e.value))&&(i=n("/",r)),i.endsWith("/")?i:i+"/"},{watch:[()=>t.fullPath]});return{targetPath:a,targetLocale:s}};function an(){const e=V(!1);let t=!1;const n=()=>{t||(window.requestAnimationFrame(()=>{e.value=window.scrollY>0,t=!1}),t=!0)};return se(()=>{n(),window.addEventListener("scroll",n,{passive:!0})}),le(()=>{window.removeEventListener("scroll",n)}),{isScrolled:e}}function sn(){const e=V(!1),t=s=>{s.stopPropagation(),e.value=!e.value},n=()=>{e.value=!1};return se(()=>{document.addEventListener("click",n)}),le(()=>{document.removeEventListener("click",n)}),{showMobileMenu:e,toggleMobileMenu:t,closeMobileMenu:n}}const on={class:"header-container"},rn={class:"header"},cn={class:"header-right"},ln={class:"lang-switch__label"},un={class:"lang-switch__label"},dn={class:"search-trigger__label"},fn={key:0,class:"mobile-menu-dropdown"},hn=F({__name:"Header",props:{title:{default:""},background:{}},setup(e){const{t}=J(),n=Ee(),s=ue(),{locale:a}=J(),{targetPath:r,targetLocale:i}=nn(),o=()=>{alert(i.value==="en"?"English version not available":"暂无中文版本")},f=I(()=>s.path==="/"||s.path.startsWith("/page/")?n.slogan:null),u=e,c=I(()=>u.title||t("title")),{isScrolled:p}=an(),{showMobileMenu:D,toggleMobileMenu:T,closeMobileMenu:v}=sn(),_=V(!1),w=()=>{v(),_.value=!0};return Z(()=>s.fullPath,()=>{_.value=!1}),(k,g)=>{const L=fe,y=Lt,C=ie,M=tn,j=Pt,R=Zt;return b(),x(G,null,[m("header",{class:rt({scrolled:h(p),"show-mobile-menu":h(D)})},[m("div",on,[m("div",rn,[B(L,{to:"/",class:"header-title"},{default:z(()=>[te(O(h(t)("title")),1)]),_:1}),m("div",cn,[B(y,{"nav-items":h(n).nav.items,onToggle:h(T)},null,8,["nav-items","onToggle"]),h(r)?(b(),ee(C,{key:0,to:h(r),class:"lang-switch","aria-label":"Switch Language"},{default:z(()=>[m("span",ln,O(h(a)==="zh"?"En":"中"),1)]),_:1},8,["to"])):(b(),x("button",{key:1,type:"button",class:"lang-switch",onClick:o,"aria-label":"Switch Language"},[m("span",un,O(h(a)==="zh"?"En":"中"),1)])),m("button",{type:"button",class:"search-trigger pc",onClick:w,"aria-label":"Search"},[B(M),m("span",dn,O(h(t)("search")),1)])])])]),h(D)?(b(),x("div",fn,[(b(!0),x(G,null,K(h(n).nav.items,N=>(b(),ee(L,{key:N.link,to:N.link,onClick:h(v)},{default:z(()=>[te(O(h(t)(N.text)),1)]),_:2},1032,["to","onClick"]))),128)),m("a",{onClick:De(w,["prevent"])},[B(M)])])):U("",!0)],2),B(j,{background:e.background,title:h(c),slogan:h(f)},null,8,["background","title","slogan"]),B(R,{modelValue:h(_),"onUpdate:modelValue":g[0]||(g[0]=N=>$e(_)?_.value=N:null)},null,8,["modelValue"])],64)}}}),_n=Object.assign(H(hn,[["__scopeId","data-v-bf9b66e4"]]),{__name:"Header"}),pn=e=>{const t=V(null),n=V(!1);return se(()=>{if(!t.value)return;const s=new IntersectionObserver(a=>{a.forEach(r=>{r.isIntersecting&&!n.value&&(n.value=!0,s.disconnect())})},{rootMargin:e?.rootMargin??"100px",threshold:e?.threshold??.1});s.observe(t.value),we(()=>{s.disconnect()})}),{targetRef:t,isVisible:n}},gn={class:"footer-content"},mn={key:0,title:"NodeSupport Sponsorship",frameborder:"0",src:"https://support.nodeget.com/page/promotion?id=61",style:{"border-radius":"8px",height:"246px",transform:"scale(0.8)","transform-origin":"top center"}},vn=F({__name:"Footer",props:{background:{}},setup(e){const t=e,n=I(()=>({minHeight:"120px",...t.background})),{targetRef:s,isVisible:a}=pn({rootMargin:"100px",threshold:.1});return(r,i)=>(b(),x("footer",{ref_key:"footerRef",ref:s,style:be(h(n))},[i[1]||(i[1]=m("div",{class:"footer-mask"},null,-1)),m("div",gn,[i[0]||(i[0]=m("div",null,"©2020 - 2025 By zhullyb",-1)),h(a)?(b(),x("iframe",mn)):U("",!0)])],4))}}),yn=Object.assign(H(vn,[["__scopeId","data-v-71f6d0ea"]]),{__name:"Footer"}),bn={class:"content-wrapper"},wn={class:"before-main side"},Dn={class:"after-main side"},$n=F({__name:"DefaultLayout",props:{title:{default:""}},setup(e){const{t}=J(),n=ue(),s=e,a=Ee(),{data:r}=de("randomIndex"+n.path.replace("/en/","/"),async()=>Math.floor(Math.random()*a.backgrounds.length),"$RRY2fi8_v6"),i=I(()=>a.backgrounds[r.value??0]);return it({title:s.title||t("title")}),(o,f)=>{const u=_n,c=yn;return b(),x("div",null,[B(u,{background:h(i),title:e.title},null,8,["background","title"]),m("div",bn,[m("div",wn,[re(o.$slots,"BeforeMain",{},void 0,!0)]),m("main",null,[re(o.$slots,"default",{},void 0,!0)]),m("div",Dn,[re(o.$slots,"AfterMain",{},void 0,!0)])]),B(c,{background:h(i)},null,8,["background"])])}}}),Ln=Object.assign(H($n,[["__scopeId","data-v-3c9f8a67"]]),{__name:"DefaultLayout"});export{Ln as _,fe as a,ke as b,xn as c,pn as d,kn as e,En as f,ce as q,mt as t,de as u};
