import{u as q,q as C,a as j}from"./CO0s9KSL.js";import{_ as B}from"./BvgLo4Ns.js";import{_ as H}from"./CiI8yxbn.js";import{_ as S}from"./PmEWXe7E.js";import{m as E,b as c,o as s,d as x,e as O,K as R,L as D,W as F,x as w,M as P,N as G,I as J,a as r,O as k,P as A,w as h,H as d,J as u,c as K,G as _,_ as U}from"./DrBwty3P.js";const W={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Q(t,e){return s(),c("svg",W,[...e[0]||(e[0]=[x("path",{fill:"currentColor",d:"M5 22q-.825 0-1.412-.587T3 20V6q0-.825.588-1.412T5 4h1V3q0-.425.288-.712T7 2t.713.288T8 3v1h8V3q0-.425.288-.712T17 2t.713.288T18 3v1h1q.825 0 1.413.588T21 6v14q0 .825-.587 1.413T19 22zm0-2h14V10H5zm7-6q-.425 0-.712-.288T11 13t.288-.712T12 12t.713.288T13 13t-.288.713T12 14m-4 0q-.425 0-.712-.288T7 13t.288-.712T8 12t.713.288T9 13t-.288.713T8 14m8 0q-.425 0-.712-.288T15 13t.288-.712T16 12t.713.288T17 13t-.288.713T16 14m-4 4q-.425 0-.712-.288T11 17t.288-.712T12 16t.713.288T13 17t-.288.713T12 18m-4 0q-.425 0-.712-.288T7 17t.288-.712T8 16t.713.288T9 17t-.288.713T8 18m8 0q-.425 0-.712-.288T15 17t.288-.712T16 16t.713.288T17 17t-.288.713T16 18"},null,-1)])])}const X=E({name:"material-symbols-calendar-month-rounded",render:Q});function p(t){return t?typeof t=="string"?t:Array.isArray(t)?t.length>=2&&typeof t[0]=="string"&&typeof t[1]=="object"?t.slice(2).map(p).join(""):t.map(p).join(""):t.value&&typeof t.value=="string"?t.value:t.children&&Array.isArray(t.children)?t.children.map(p).join(""):"":""}function Y(t,e=300){if(!t)return"";const n=p(t.value||t).replace(/\s+/g," ").trim();return n.length<=e?n:n.slice(0,e)+"..."}const Z={class:"post-meta"},tt={class:"date"},g=10,et=O({__name:"HomeArticleContainer",async setup(t){let e,o;const n=R(),{locale:m}=D(),$=F(),l=n.params.page&&parseInt(n.params.page)||1,v=w(()=>m.value==="zh"?"zh-CN":"en"),i=([e,o]=P(()=>q(`index-page-${l}-${m.value}`,()=>C("posts").where("lang","=",v.value).order("date","DESC").skip((l-1)*g).limit(g).select("title","date","path","tags","body").all())),e=await e,o(),e).data,M=w(()=>i.value?i.value.map(T=>({...T,excerpt:Y(T.body,300)})):[]),N=([e,o]=P(()=>q(`posts-total-${m.value}`,()=>C("posts").where("lang","=",v.value).count())),e=await e,o(),e).data,V=Math.max(1,Math.ceil((N.value??0)/g));if(i.value&&i.value.length===0&&l>1)throw G({statusCode:404,statusMessage:"Page not found",fatal:!0});return J({title:"竹林里有冰的博客",titleTemplate:"%s"}),(T,at)=>{const y=j,z=X,I=S,L=B,b=H;return s(),c("div",null,[(s(!0),c(k,null,A(_(M),(a,nt)=>(s(),c("div",{key:a.path,class:"post-item"},[r(y,{class:"title",to:a.path},{default:h(()=>[d(u(a.title),1)]),_:2},1032,["to"]),r(y,{class:"description",to:a.path},{default:h(()=>[d(u(a.excerpt),1)]),_:2},1032,["to"]),x("div",Z,[r(z),x("span",tt,u(a.date?.split(" ")[0]),1),r(I,{style:{"font-size":"0.9em"}}),(s(!0),c(k,null,A(a.tags,f=>(s(),K(L,{class:"tags",key:f,to:`${_($)("/tags")}/${encodeURIComponent(f)}`,prefetchOn:"interaction"},{default:h(()=>[d(u("#"+f),1)]),_:2},1032,["to"]))),128))])]))),128)),r(b,{currentPage:_(l),totalPages:_(V)},null,8,["currentPage","totalPages"])])}}}),it=Object.assign(U(et,[["__scopeId","data-v-18532dfa"]]),{__name:"HomeArticleContainer"});export{it as _};
