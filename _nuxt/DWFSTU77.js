const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./VUpKPpet.js","./BE36Xxk1.js","./entry.Cb3Jctur.css","./BC7mfSrw.js"])))=>i.map(i=>d[i]);
import{_ as q}from"./DhO_gWDs.js";import{_ as F}from"./BDHgZ5Tr.js";import{a as U,_ as Y,u as H,q as G,d as J}from"./CWuP8uir.js";import{e as L,L as T,b as $,F as A,o as d,c as N,w,d as u,J as x,G as c,_ as z,K as R,x as E,Q as K,a as P,ag as Q,ah as X,ai as Z,aj as tt,T as et,f as nt,h as st,k as at,O as W,P as M,R as ot,S as rt,W as lt,M as B,N as it,I as ct,H as ut}from"./BE36Xxk1.js";import{_ as _t}from"./BspavZGp.js";const dt={key:0,class:"post-navigation"},ft={class:"nav-content"},pt={class:"nav-label"},vt={class:"nav-title"},mt={class:"nav-content"},ht={class:"nav-label"},gt={class:"nav-title"},yt=L({__name:"PostNavigation",props:{prevPost:{},nextPost:{}},setup(t){const{t:l}=T();return(s,a)=>{const e=U;return t.prevPost||t.nextPost?(d(),$("nav",dt,[t.prevPost?(d(),N(e,{key:0,class:"nav-button prev",to:t.prevPost.path},{default:w(()=>[a[0]||(a[0]=u("div",{class:"nav-arrow"},"←",-1)),u("div",ft,[u("span",pt,x(c(l)("postNavigation.prev")),1),u("span",vt,x(t.prevPost.title),1)])]),_:1},8,["to"])):A("",!0),t.nextPost?(d(),N(e,{key:1,class:"nav-button next",to:t.nextPost.path},{default:w(()=>[u("div",mt,[u("span",ht,x(c(l)("postNavigation.next")),1),u("span",gt,x(t.nextPost.title),1)]),a[1]||(a[1]=u("div",{class:"nav-arrow"},"→",-1))]),_:1},8,["to"])):A("",!0)])):A("",!0)}}}),xt=Object.assign(z(yt,[["__scopeId","data-v-a46f138f"]]),{__name:"PostNavigation"}),Pt={id:"waline"},$t=L({__name:"Waline",setup(t){const l=Q(()=>et(()=>import("./VUpKPpet.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(m=>m.Waline)),s=R(),{locale:a}=T(),e=E(()=>({...K.waline,lang:a.value==="zh"?"zh-CN":"en",path:(s.path.endsWith("/")?s.path:s.path+"/").replace("/en/","/")}));return(m,f)=>{const n=tt;return d(),$("div",Pt,[P(n,null,{default:w(()=>[P(c(l),X(Z(c(e))),null,16)]),_:1})])}}}),wt=Object.assign($t,{__name:"Waline"});function j(t){return t?typeof t=="string"?t:Array.isArray(t)?t.length>=2&&typeof t[0]=="string"&&typeof t[1]=="object"?t.slice(2).map(j).join(""):t.map(j).join(""):t.value&&typeof t.value=="string"?t.value:t.children&&Array.isArray(t.children)?t.children.map(j).join(""):"":""}function bt(t){if(!t)return[];const l=[],s=t.value||t;function a(e){if(e)if(Array.isArray(e))if(e.length>=2&&typeof e[0]=="string"&&typeof e[1]=="object"){const m=e[0],f=e[1],n=e.slice(2),o=m.match(/^h([1-6])$/);if(o?.[1]&&f.id){const r=parseInt(o[1]),i=n.map(j).join("").trim();i&&l.push({id:f.id,text:i,level:r})}n.forEach(a)}else e.forEach(a);else typeof e=="object"&&(e.children&&Array.isArray(e.children)&&e.children.forEach(a),e.value&&Array.isArray(e.value)&&e.value.forEach(a))}return a(s),l}const kt={key:0,class:"toc"},Ct={class:"toc-list"},It=["href","onClick"],At=L({__name:"TableOfContents",props:{body:{}},setup(t){const l=t,s=E(()=>bt(l.body)),a=nt(""),e=n=>{if(!a.value)return!1;const o=s.value.findIndex(p=>p.id===a.value),r=s.value.findIndex(p=>p.id===n.id);if(o===-1||r===-1)return!1;const i=n;if(i.id===a.value||i.level<=2)return!1;const _=p=>{const v=[],h=s.value[p];if(!h)return v;let g=h.level,I=p-1;for(;I>=0;){const y=s.value[I];if(!y||y.level<g&&(v.push(y.id),g=y.level,y.level<=1))break;I--}return v},b=p=>{const v=s.value[p];if(!v)return null;let h=p-1;for(;h>=0;){const g=s.value[h];if(!g)break;if(g.level<v.level)return g.id;h--}return null},k=_(o);if(k.includes(i.id))return!1;const C=b(r);return!(!C||C===a.value||k.includes(C))},m=n=>{const o=document.getElementById(n);o&&(o.scrollIntoView({behavior:"smooth",block:"start"}),window.history.pushState(null,"",`#${n}`))},f=()=>{const n=s.value.map(i=>({id:i.id,element:document.getElementById(i.id)})).filter(i=>i.element!==null);if(n.length===0)return;const o=window.scrollY;let r=n[0];for(const i of n)if(i.element.getBoundingClientRect().top+o<=o+100)r=i;else break;r&&(a.value=r.id)};return st(()=>{f();let n=!1;const o=()=>{n||(window.requestAnimationFrame(()=>{f(),n=!1}),n=!0)};window.addEventListener("scroll",o,{passive:!0}),at(()=>{window.removeEventListener("scroll",o)})}),(n,o)=>c(s).length>0?(d(),$("nav",kt,[o[0]||(o[0]=u("div",{class:"toc-title"},"目录",-1)),u("ul",Ct,[(d(!0),$(W,null,M(c(s),r=>(d(),$("li",{key:r.id,class:ot(["toc-item",`toc-level-${r.level}`,{active:c(a)===r.id,collapsed:e(r)}])},[u("a",{href:`#${r.id}`,onClick:rt(i=>m(r.id),["prevent"])},x(r.text),9,It)],2))),128))])])):A("",!0)}}),Nt=Object.assign(z(At,[["__scopeId","data-v-ae70bcd1"]]),{__name:"TableOfContents"}),Et={class:"tags"},jt=L({__name:"index",async setup(t){let l,s;const a=R(),{locale:e}=T(),m=lt(),{year:f,month:n,day:o,slug:r}=a.params,i=E(()=>`/${f}/${n}/${o}/${r}`),{data:_}=([l,s]=B(()=>H(`post-${f}-${n}-${o}-${r}-${e.value}`,()=>G("posts").path(i.value).where("lang","=",e.value==="zh"?"zh-CN":"en").first())),l=await l,s(),l);if(!_.value)throw it({statusCode:404,statusMessage:"Post not found",fatal:!0});const b=([l,s]=B(()=>H(`surround-${f}-${n}-${o}-${r}-${e.value}`,()=>J("posts",_.value.path,{before:1,after:1,fields:["title","path","date","lang"]}).where("lang","=",e.value==="zh"?"zh-CN":"en").order("date","DESC"))),l=await l,s(),l).data,k=E(()=>b.value?.[0]||null),C=E(()=>b.value?.[1]||null);return ct({meta:[{name:"description",content:_.value?.description||""},{name:"keywords",content:_.value?.tags?.join(",")||""}],link:[{rel:"stylesheet",href:"https://s4.zstatic.net/ajax/libs/github-markdown-css/5.8.1/github-markdown.min.css"}]}),(p,v)=>{const h=q,g=_t,I=F,y=xt,S=wt,V=Nt,D=Y;return d(),N(D,{title:c(_)?.title},{AfterMain:w(()=>[u("aside",null,[P(V,{body:c(_)?.body},null,8,["body"])])]),default:w(()=>[c(_)?(d(),N(h,{key:0,value:c(_),tag:"article",class:"markdown-body"},null,8,["value"])):A("",!0),v[0]||(v[0]=u("hr",{class:"article-end-hr"},null,-1)),u("div",Et,[P(g),(d(!0),$(W,null,M(c(_)?.tags,O=>(d(),N(I,{key:O,to:`${c(m)("/tags")}/${encodeURIComponent(O)}`,prefetchOn:"interaction"},{default:w(()=>[ut("#"+x(O),1)]),_:2},1032,["to"]))),128))]),P(y,{prevPost:c(k),nextPost:c(C)},null,8,["prevPost","nextPost"]),P(S)]),_:1},8,["title"])}}}),Bt=z(jt,[["__scopeId","data-v-02771279"]]);export{Bt as default};
