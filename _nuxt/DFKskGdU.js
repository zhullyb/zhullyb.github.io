import{e as b,f as c,x as S,h as x,k as _,b as l,o as i,d,F as u,c as z,R as C,J as f,T as g,U as I,V as P,_ as B}from"./CjOlRbNZ.js";const E={class:"prose-img-wrapper"},N=["src","alt","title","width","height"],L={key:0,class:"prose-img-caption"},M=["src","alt"],F={key:0,class:"prose-img-preview-scale-indicator"},V=.5,W=4,D=b({__name:"ProseImg",props:{src:{type:String,required:!0},alt:{type:String,default:""},title:{type:String,default:""},width:{type:[String,Number],default:void 0},height:{type:[String,Number],default:void 0}},setup(e){const s=c(!1),t=c(1),m=c(!1),h=S(()=>({transform:`scale(${t.value})`,transition:"transform 0.15s",cursor:t.value!==1?"zoom-out":"zoom-in"}));function y(){s.value=!0,t.value=1,document.body.style.overflow="hidden"}function r(){s.value=!1,document.body.style.overflow=""}function p(a){if(!s.value)return;const o=a.deltaY;let n=t.value;o<0?n*=1.1:n/=1.1,n=Math.max(V,Math.min(W,n)),t.value=Number(n.toFixed(2))}function w(){t.value=1}function k(a){const o=a.target;o&&(m.value=o.naturalHeight/o.naturalWidth>=1.15)}function v(a){s.value&&(a.key==="Escape"||a.key==="Esc")&&r()}return x(()=>{window.addEventListener("keydown",v)}),_(()=>{window.removeEventListener("keydown",v),document.body.style.overflow=""}),(a,o)=>(i(),l("span",E,[d("img",{src:e.src,alt:e.alt,title:e.title,width:e.width,height:e.height,loading:"lazy",class:C(["prose-img",{"prose-img--portrait":m.value}]),onClick:y,onLoad:k,style:{cursor:"zoom-in"}},null,42,N),e.alt?(i(),l("span",L,f(e.alt),1)):u("",!0),(i(),z(P,{to:"body"},[s.value?(i(),l("div",{key:0,class:"prose-img-preview-mask",onClick:g(r,["self"]),onWheel:g(p,["prevent"])},[d("img",{src:e.src,alt:e.alt,class:"prose-img-preview-img",style:I(h.value),onDblclick:w},null,44,M),d("button",{class:"prose-img-preview-close",onClick:r,"aria-label":"关闭预览"}," × "),t.value!==1?(i(),l("div",F,f((t.value*100).toFixed(0))+"% ",1)):u("",!0)],32)):u("",!0)]))]))}}),U=Object.assign(B(D,[["__scopeId","data-v-fc653585"]]),{__name:"ProseImg"});export{U as default};
