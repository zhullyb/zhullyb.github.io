import{u as p,q as m,a as P}from"./DWzm9oBL.js";import{_ as y}from"./CPrOAAhR.js";import{e as A,K as N,L as k,x as L,M as d,N as M,b as r,o as c,a as g,O as $,P as b,d as h,J as v,w as z,H as B,G as l,_ as D}from"./WUoQoJsz.js";const E={class:"date"},i=10,I=A({__name:"ArchiveArticleContainer",async setup(O){let t,e;const u=N(),{locale:n}=k(),a=u.params.page&&parseInt(u.params.page)||1,_=L(()=>n.value==="zh"?"zh-CN":"en"),o=([t,e]=d(()=>p(`index-page-${a}-${n.value}`,()=>m("posts").where("lang","=",_.value).order("date","DESC").skip((a-1)*i).limit(i).select("title","date","path","tags").all())),t=await t,e(),t).data,x=([t,e]=d(()=>p(`posts-nums-total-${n.value}`,()=>m("posts").where("lang","=",_.value).count())),t=await t,e(),t).data,f=Math.max(1,Math.ceil((x.value??0)/i));if(o.value&&o.value.length===0&&a>1)throw M({statusCode:404,statusMessage:"Page not found",fatal:!0});return(S,V)=>{const C=P,w=y;return c(),r("div",null,[(c(!0),r($,null,b(l(o),s=>(c(),r("div",{key:s.path,class:"post-item"},[h("p",E,v(s.date?.split(" ")[0]),1),h("p",null,[g(C,{to:s.path,prefetchOn:"interaction"},{default:z(()=>[B(v(s.title),1)]),_:2},1032,["to"])])]))),128)),g(w,{currentPage:l(a),totalPages:l(f),urlPrefix:"/archives"},null,8,["currentPage","totalPages"])])}}}),G=Object.assign(D(I,[["__scopeId","data-v-ea5c2baa"]]),{__name:"ArchiveArticleContainer"});export{G as _};
