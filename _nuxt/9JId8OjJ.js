const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./C-SZkTlu.js","./CmZUfZZX.js","./entry.Cb3Jctur.css","./IVamwgeO.js"])))=>i.map(i=>d[i]);
import{q as M,e as me,ap as Me,W as X,Z as Ie,a3 as Ne,Y as Pe,b as j,s as de,a4 as Re,X as ve,M as je,E as f,a1 as Ae,aq as Be,a6 as ie,a7 as Fe,ar as qe,as as Ve,at as We,au as Ue,a9 as ze,d as F,av as He,t as Ye,aw as fe,k as Qe,A as Ze,ak as Ge,ax as Je,S as Xe,C as O,o as C,G as g,N as Q,O as K,c as ce,w as Z,F as ee,I as T,_ as z,D as U,T as ye,K as G,f as ae,i as be,a as B,R as we,aa as Ke,$ as De,ac as et,ay as tt,U as nt,az as at,J as le,V as st,y as ot,Q as rt,H as it,r as oe}from"./CmZUfZZX.js";import{_ as he}from"./IVamwgeO.js";const ct={trailing:!0};function lt(e,t=25,n={}){if(n={...ct,...n},!Number.isFinite(t))throw new TypeError("Expected `wait` to be a finite number");let s,a,r=[],i,o;const h=(_,x)=>(i=ut(e,_,x),i.finally(()=>{if(i=null,n.trailing&&o&&!a){const L=h(_,o);return o=null,L}}),i),u=function(..._){return n.trailing&&(o=_),i||new Promise(x=>{const L=!a&&n.leading;clearTimeout(a),a=setTimeout(()=>{a=null;const m=n.leading?s:h(this,_);o=null;for(const v of r)v(m);r=[]},t),L?(s=h(this,_),x(s)):r.push(x)})},c=_=>{_&&(clearTimeout(_),a=null)};return u.isPending=()=>!!a,u.cancel=()=>{c(a),r=[],o=null},u.flush=()=>{if(c(a),!o||i)return;const _=o;return o=null,h(this,_)},u}async function ut(e,t,n){return await e.apply(t,n)}function Ce(...e){const t=typeof e[e.length-1]=="string"?e.pop():void 0;$e(e[0],e[1])&&e.unshift(t);let[n,s,a={}]=e,r=!1;const i=M(()=>Ne(n));if(typeof i.value!="string")throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if(typeof s!="function")throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const o=me();a.server??=!0,a.default??=ht,a.getCachedData??=xe,a.lazy??=!1,a.immediate??=!0,a.deep??=Me.deep,a.dedupe??="cancel",a._functionName,o._asyncData[i.value];function h(){const m={cause:"initial",dedupe:a.dedupe};return o._asyncData[i.value]?._init||(m.cachedData=a.getCachedData(i.value,o,{cause:"initial"}),o._asyncData[i.value]=_e(o,i.value,s,a,m.cachedData)),()=>o._asyncData[i.value].execute(m)}const u=h(),c=o._asyncData[i.value];c._deps++;const _=a.server!==!1&&o.payload.serverRendered;{let m=function(y){const w=o._asyncData[y];w?._deps&&(w._deps--,w._deps===0&&w?._off())};const v=Ae();if(v&&_&&a.immediate&&!v.sp&&(v.sp=[]),v&&!v._nuxtOnBeforeMountCbs){v._nuxtOnBeforeMountCbs=[];const y=v._nuxtOnBeforeMountCbs;Be(()=>{y.forEach(w=>{w()}),y.splice(0,y.length)}),ie(()=>y.splice(0,y.length))}const b=v&&(v._nuxtClientOnly||Fe(qe,!1));_&&o.isHydrating&&(c.error.value||c.data.value!==void 0)?c.status.value=c.error.value?"error":"success":v&&(!b&&o.payload.serverRendered&&o.isHydrating||a.lazy)&&a.immediate?v._nuxtOnBeforeMountCbs.push(u):a.immediate&&c.status.value!=="success"&&u();const S=Pe(),p=X(i,(y,w)=>{if((y||w)&&y!==w){r=!0;const P=o._asyncData[w]?.data.value!==void 0,A=o._asyncDataPromises[w]!==void 0,R={cause:"initial",dedupe:a.dedupe};if(!o._asyncData[y]?._init){let q;w&&P?q=o._asyncData[w].data.value:(q=a.getCachedData(y,o,{cause:"initial"}),R.cachedData=q),o._asyncData[y]=_e(o,y,s,a,q)}o._asyncData[y]._deps++,w&&m(w),(a.immediate||P||A)&&o._asyncData[y].execute(R),Ve(()=>{r=!1})}},{flush:"sync"}),k=a.watch?X(a.watch,()=>{r||c._execute({cause:"watch",dedupe:a.dedupe})}):()=>{};S&&Ie(()=>{p(),k(),m(i.value)})}const x={data:J(()=>o._asyncData[i.value]?.data),pending:J(()=>o._asyncData[i.value]?.pending),status:J(()=>o._asyncData[i.value]?.status),error:J(()=>o._asyncData[i.value]?.error),refresh:(...m)=>o._asyncData[i.value]?._init?o._asyncData[i.value].execute(...m):h()(),execute:(...m)=>x.refresh(...m),clear:()=>{const m=o._asyncData[i.value];if(m?._abortController)try{m._abortController.abort(new DOMException("AsyncData aborted by user.","AbortError"))}finally{m._abortController=void 0}Se(o,i.value)}},L=Promise.resolve(o._asyncDataPromises[i.value]).then(()=>x);return Object.assign(L,x),L}function J(e){return M({get(){return e()?.value},set(t){const n=e();n&&(n.value=t)}})}function dt(...e){const t=typeof e[e.length-1]=="string"?e.pop():void 0;$e(e[0],e[1])&&e.unshift(t);const[n,s,a={}]=e;return Ce(n,s,{...a,lazy:!0},null)}function $e(e,t){return!(typeof e=="string"||typeof e=="object"&&e!==null||typeof e=="function"&&typeof t=="function")}function Se(e,t){t in e.payload.data&&(e.payload.data[t]=void 0),t in e.payload._errors&&(e.payload._errors[t]=void 0),e._asyncData[t]&&(e._asyncData[t].data.value=f(e._asyncData[t]._default()),e._asyncData[t].error.value=void 0,e._asyncData[t].status.value="idle"),t in e._asyncDataPromises&&(e._asyncDataPromises[t]=void 0)}function ft(e,t){const n={};for(const s of t)n[s]=e[s];return n}function _e(e,t,n,s,a){e.payload._errors[t]??=void 0;const r=s.getCachedData!==xe,i=n,o=s.deep?j:de,h=a!==void 0,u=e.hook("app:data:refresh",async _=>{(!_||_.includes(t))&&await c.execute({cause:"refresh:hook"})}),c={data:o(h?a:s.default()),pending:M(()=>c.status.value==="pending"),error:Re(e.payload._errors,t),status:de("idle"),execute:(..._)=>{const[x,L=void 0]=_,m=x&&L===void 0&&typeof x=="object"?x:{};if(e._asyncDataPromises[t]&&(m.dedupe??s.dedupe)==="defer")return e._asyncDataPromises[t];{const b="cachedData"in m?m.cachedData:s.getCachedData(t,e,{cause:m.cause??"refresh:manual"});if(b!==void 0)return e.payload.data[t]=c.data.value=b,c.error.value=void 0,c.status.value="success",Promise.resolve(b)}c._abortController&&c._abortController.abort(new DOMException("AsyncData request cancelled by deduplication","AbortError")),c._abortController=new AbortController,c.status.value="pending";const v=new Promise((b,S)=>{try{const p=m.timeout??s.timeout,k=_t([c._abortController?.signal,m?.signal],p);if(k.aborted){const y=k.reason;S(y instanceof Error?y:new DOMException(String(y??"Aborted"),"AbortError"));return}return k.addEventListener("abort",()=>{const y=k.reason;S(y instanceof Error?y:new DOMException(String(y??"Aborted"),"AbortError"))},{once:!0}),Promise.resolve(i(e,{signal:k})).then(b,S)}catch(p){S(p)}}).then(async b=>{let S=b;s.transform&&(S=await s.transform(b)),s.pick&&(S=ft(S,s.pick)),e.payload.data[t]=S,c.data.value=S,c.error.value=void 0,c.status.value="success"}).catch(b=>{if(!(e._asyncDataPromises[t]&&e._asyncDataPromises[t]!==v)&&!c._abortController?.signal.aborted){if(typeof DOMException<"u"&&b instanceof DOMException&&b.name==="AbortError"){c.status.value="idle";return}c.error.value=je(b),c.data.value=f(s.default()),c.status.value="error"}}).finally(()=>{delete e._asyncDataPromises[t]});return e._asyncDataPromises[t]=v,e._asyncDataPromises[t]},_execute:lt((..._)=>c.execute(..._),0,{leading:!0}),_default:s.default,_deps:0,_init:!0,_hash:void 0,_off:()=>{u(),e._asyncData[t]?._init&&(e._asyncData[t]._init=!1),r||ve(()=>{e._asyncData[t]?._init||(Se(e,t),c.execute=()=>Promise.resolve())})}};return c}const ht=()=>{},xe=(e,t,n)=>{if(t.isHydrating)return t.payload.data[e];if(n.cause!=="refresh:manual"&&n.cause!=="refresh:hook")return t.static.data[e]};function _t(e,t){const n=e.filter(r=>!!r);if(typeof t=="number"&&t>=0){const r=AbortSignal.timeout?.(t);r&&n.push(r)}if(AbortSignal.any)return AbortSignal.any(n);const s=new AbortController;for(const r of n)if(r.aborted){const i=r.reason??new DOMException("Aborted","AbortError");try{s.abort(i)}catch{s.abort()}return s.signal}const a=()=>{const i=n.find(o=>o.aborted)?.reason??new DOMException("Aborted","AbortError");try{s.abort(i)}catch{s.abort()}};for(const r of n)r.addEventListener?.("abort",a,{once:!0});return s.signal}const pt={nuxt:{}},gt=We(Ue,pt);function Ee(){const e=me();return e._appConfig||=ze(gt),e._appConfig}const ue=F({name:"NuxtLinkLocale",props:{...he.props,locale:{type:String,default:void 0,required:!1}},setup(e,{slots:t}){const n=He(),s=M(()=>{const o=e.to||e.href||"";return typeof o=="string"&&Ye(o,{acceptRelative:!0})}),a=M(()=>{const o=e.to??e.href,h=o!=null?n(o,e.locale):o;return h&&fe(e.to)&&(h.state=e.to?.state),o!=null?h:o}),r=M(()=>{if(e.external)return!0;const o=e.to||e.href||"";return fe(o)?!1:o===""||s.value}),i=()=>{const o={...e};return r.value||(o.to=a.value),delete o.href,delete o.locale,o};return()=>Qe(he,i(),t.default)}}),Oe={posts:"v3.5.0--_Wj5D3PLBCeGw0zFM7MusnYFrDHYYIlex2qsiLpZL3U",others:"v3.5.0--BTqY8yPGt5Hx3ZAEU8dZZuxAh3vm06e2ZRqFd6hn898"},mt={posts:"_content_posts",others:"_content_others",info:"_content_info"},Dn={posts:{type:"page",fields:{id:"string",title:"string",body:"json",date:"string",description:"string",extension:"string",lang:"string",meta:"json",navigation:"json",path:"string",rawbody:"string",seo:"json",stem:"string",sticky:"boolean",tags:"json"}},others:{type:"page",fields:{id:"string",title:"string",body:"json",description:"string",extension:"string",meta:"json",navigation:"json",path:"string",seo:"json",stem:"string"}},info:{type:"data",fields:{}}},te=(e,t)=>{const n=e._conditions;return n.length>0?`(${n.join(` ${t} `)})`:""},ne=e=>{const t=[],n={_conditions:t,where(s,a,r){let i;switch(a.toUpperCase()){case"IN":case"NOT IN":if(Array.isArray(r)){const o=r.map(h=>Y(h)).join(", ");i=`"${String(s)}" ${a.toUpperCase()} (${o})`}else throw new TypeError(`Value for ${a} must be an array`);break;case"BETWEEN":case"NOT BETWEEN":if(Array.isArray(r)&&r.length===2)i=`"${String(s)}" ${a.toUpperCase()} ${Y(r[0])} AND ${Y(r[1])}`;else throw new Error(`Value for ${a} must be an array with two elements`);break;case"IS NULL":case"IS NOT NULL":i=`"${String(s)}" ${a.toUpperCase()}`;break;case"LIKE":case"NOT LIKE":i=`"${String(s)}" ${a.toUpperCase()} ${Y(r)}`;break;default:i=`"${String(s)}" ${a} ${Y(typeof r=="boolean"?Number(r):r)}`}return t.push(`${i}`),n},andWhere(s){const a=s(ne());return t.push(te(a,"AND")),n},orWhere(s){const a=s(ne());return t.push(te(a,"OR")),n}};return n},vt=(e,t)=>{const n={conditions:[],selectedFields:[],offset:0,limit:0,orderBy:[],count:{field:"",distinct:!1}},s={__params:n,andWhere(r){const i=r(ne());return n.conditions.push(te(i,"AND")),s},orWhere(r){const i=r(ne());return n.conditions.push(te(i,"OR")),s},path(r){return s.where("path","=",Ze(r))},skip(r){return n.offset=r,s},where(r,i,o){return s.andWhere(h=>h.where(String(r),i,o)),s},limit(r){return n.limit=r,s},select(...r){return r.length&&n.selectedFields.push(...r),s},order(r,i){return n.orderBy.push(`"${String(r)}" ${i}`),s},async all(){return t(e,a()).then(r=>r||[])},async first(){return t(e,a({limit:1})).then(r=>r[0]||null)},async count(r="*",i=!1){return t(e,a({count:{field:String(r),distinct:i}})).then(o=>o[0].count)}};function a(r={}){let i="SELECT ";if(r?.count)i+=`COUNT(${r.count.distinct?"DISTINCT ":""}${r.count.field}) as count`;else{const h=Array.from(new Set(n.selectedFields));i+=h.length>0?h.map(u=>`"${String(u)}"`).join(", "):"*"}i+=` FROM ${mt[String(e)]}`,n.conditions.length>0&&(i+=` WHERE ${n.conditions.join(" AND ")}`),n.orderBy.length>0?i+=` ORDER BY ${n.orderBy.join(", ")}`:i+=" ORDER BY stem ASC";const o=r?.limit||n.limit;return o>0&&(n.offset>0?i+=` LIMIT ${o} OFFSET ${n.offset}`:i+=` LIMIT ${o}`),i}return s};function Y(e){return`'${String(e).replace(/'/g,"''")}'`}function pe(e){return t=>(t=t||{},(e||[]).filter(n=>typeof t[n]<"u").reduce((n,s)=>Object.assign(n,{[s]:t[s]}),{}))}async function yt(e,t=[]){e.__params?.orderBy?.length||(e=e.order("stem","ASC"));const s=await e.orWhere(u=>u.where("navigation","<>","false").where("navigation","IS NULL")).select("navigation","stem","path","title","meta",...t||[]).all(),{contents:a,configs:r}=s.reduce((u,c)=>{if(String(c.stem).split("/").pop()===".navigation"){c.title=c.title?.toLowerCase()==="navigation"?"":c.title;const _=c.path.split("/").slice(0,-1).join("/")||"/";u.configs[_]={...c,...c.body}}else u.contents.push(c);return u},{configs:{},contents:[]}),i=u=>({...pe(["title",...t])(u),...u.meta,...ge(u?.navigation)?u.navigation:{}}),o=u=>({...pe(["title",...t])(u),...ge(u?.navigation)?u.navigation:{}}),h=a.reduce((u,c)=>{const _=c.path.substring(1).split("/"),x=c.stem.split("/"),L=!!x[x.length-1]?.match(/([1-9]\d*\.)?index/g),m=p=>({title:p.title,path:p.path,stem:p.stem,children:[],...o(p)}),v=m(c);if(L){const p=r[v.path];if(typeof p?.navigation<"u"&&p?.navigation===!1)return u;if(c.path!=="/"){const k=m(c);v.children.push(k)}p&&Object.assign(v,i(p))}if(_.length===1){const p=u.find(k=>k.path===v.path&&k.page===!1);return L&&p?Object.assign(p,{page:void 0,children:[...v.children||[],...p.children||[]]}):u.push(v),u}const b=_.slice(0,-1).reduce((p,k,y)=>{const w="/"+_.slice(0,y+1).join("/"),P=r[w];if(typeof P?.navigation<"u"&&P.navigation===!1)return[];let A=p.find(R=>R.path===w);if(!A){const R=P?i(P):{};A={...R,title:R.title||bt(k),path:w,stem:x.slice(0,y+1).join("/"),children:[],page:!1},p.push(A)}return A.children},u),S=b.find(p=>p.path===v.path&&p.page===!1);return S?Object.assign(S,{...v,page:void 0,children:[...v.children||[],...S.children||[]]}):b.push(v),u},[]);return Le(h)}function Le(e){const t=e;for(const n of t)n.children?.length?Le(n.children):delete n.children;return e}function ge(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}const bt=e=>e.split(/[\s-]/g).map(Ge).join(" ");async function wt(e,t,n){const{before:s=1,after:a=1,fields:r=[]}=n||{},i=await yt(e,r),o=ke(i),h=o.findIndex(_=>_.path===t),u=h===-1?[]:o.slice(h-s,h),c=h===-1?[]:o.slice(h+1,h+a+1);return[...Array.from({length:s}).fill(null).concat(u).slice(u.length),...c.concat(Array.from({length:a}).fill(null)).slice(0,a)]}function ke(e){return e.flatMap(n=>{const s=n.children?ke(n.children):[];return n.page===!1||s.length&&s.find(a=>a.path===n.path)?s:[{...n,children:void 0},...s]})}async function Cn(e,t){return await $fetch(`/__nuxt_content/${t}/sql_dump.txt`,{context:{},responseType:"text",headers:{"content-type":"text/plain"},query:{v:Oe[String(t)],t:void 0}})}async function Dt(e,t,n){return await $fetch(`/__nuxt_content/${t}/query`,{context:e?{cloudflare:e.context.cloudflare}:{},headers:{"content-type":"application/json",...e?.node?.req?.headers?.cookie?{cookie:e.node.req.headers.cookie}:{}},query:{v:Oe[String(t)],t:void 0},method:"POST",body:{sql:n}})}const re=e=>{const t=Je()?.ssrContext?.event;return vt(e,(n,s)=>Ct(t,n,s))};function $n(e,t,n){return St(e,s=>wt(s,t,n))}async function Ct(e,t,n){return window.WebAssembly?$t(t,n):Dt(e,String(t),n)}async function $t(e,t){return await Xe(()=>import("./C-SZkTlu.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(s=>s.loadDatabaseAdapter(e)).then(s=>s.all(t))}function St(e,t){const n=re(e),s={where(a,r,i){return n.where(String(a),r,i),s},andWhere(a){return n.andWhere(a),s},orWhere(a){return n.orWhere(a),s},order(a,r){return n.order(String(a),r),s},then(a,r){return t(n).then(a,r)},catch(a){return this.then(void 0,a)},finally(a){return this.then(void 0,void 0).finally(a)},get[Symbol.toStringTag](){return"Promise"}};return s}const xt={class:"pc-nav"},Et={class:"container"},Ot=F({__name:"HeaderNav",props:{navItems:{}},emits:["toggle"],setup(e,{emit:t}){const n=t,s=a=>{n("toggle",a)};return(a,r)=>{const i=ue;return C(),O("nav",null,[g("div",xt,[(C(!0),O(Q,null,K(e.navItems,o=>(C(),ce(i,{key:o.link,to:o.link},{default:Z(()=>[ee(T(a.$t(o.text)),1)]),_:2},1032,["to"]))),128))]),g("div",{class:"mobile-nav",onClick:s},[g("div",Et,[(C(),O(Q,null,K(3,o=>g("div",{class:"mobile-nav-item",key:o})),64))])])])}}}),Lt=Object.assign(z(Ot,[["__scopeId","data-v-46e33355"]]),{__name:"HeaderNav"}),kt={class:"mask"},Tt={class:"title-container"},Mt={class:"title"},It={key:0},Nt=F({__name:"Banner",props:{title:{},slogan:{},background:{}},setup(e){const t=e,n=M(()=>({...t.background}));return(s,a)=>(C(),O("div",{class:"banner",style:ye(f(n))},[g("div",kt,[g("div",Tt,[g("div",Mt,[g("h1",null,T(e.title),1),e.slogan?(C(),O("p",It,T(e.slogan),1)):U("",!0)])])])],4))}}),Pt=Object.assign(z(Nt,[["__scopeId","data-v-4e11f931"]]),{__name:"Banner"}),Rt={class:"search-overlay__panel"},jt={class:"search-overlay__header"},At=["placeholder"],Bt=["aria-label"],Ft={key:0,class:"search-overlay__state"},qt={key:1,class:"search-overlay__body"},Vt={key:0,class:"search-overlay__state"},Wt={key:1,class:"search-overlay__state"},Ut={key:2,class:"search-overlay__count"},zt={key:3,class:"search-overlay__list"},Ht={class:"search-overlay__item-title"},Yt={class:"search-overlay__item-meta"},Qt={key:0},Zt={class:"search-overlay__item-snippet"},Gt=50,Jt=F({__name:"SearchOverlay",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,s=t,{t:a,locale:r}=G(),i=M(()=>r.value.startsWith("zh")),o=j(""),h=j(null),u=at(),c=j(!1),_=async()=>{const d=await u("/search/sections.json");if(Array.isArray(d))return d;if(typeof d=="string")try{return JSON.parse(d)}catch(D){console.warn("[search] Failed to parse sections payload",D)}return[]},{data:x,pending:L,refresh:m}=dt("posts-search-sections",_,{server:!1,immediate:!1,default:()=>[]}),v=M(()=>x.value??[]),b=M(()=>{const d=o.value.trim().toLowerCase();if(!d)return[];const D=Array.from(new Set(d.split(/\s+/).filter(Boolean)));if(!D.length)return[];const I=v.value.map(l=>{const $=(l.content??"").replace(/\s+/g," ").trim();if(!$)return null;const V=k(l),H=y(l),se=`${V} ${H} ${$}`.toLowerCase();if(!D.every(N=>se.includes(N)))return null;let W=0;return D.forEach(N=>{V.toLowerCase().includes(N)?W+=4:H.toLowerCase().includes(N)?W+=3:W+=1}),{id:l.id,baseId:w(l.id),documentTitle:V,sectionTitle:H,snippet:R($,D),score:W}}).filter(l=>!!l).sort((l,$)=>$.score-l.score);if(!I.length)return[];const E=new Map;return I.forEach(l=>{const $=E.get(l.baseId);if(!$){E.set(l.baseId,{id:l.id,baseId:l.baseId,documentTitle:l.documentTitle,sectionTitles:l.sectionTitle?[l.sectionTitle]:[],snippets:[l.snippet],score:l.score,matchCount:1,bestScore:l.score});return}$.matchCount+=1,$.score+=l.score,$.snippets.push(l.snippet),l.sectionTitle&&!$.sectionTitles.includes(l.sectionTitle)&&$.sectionTitles.length<3&&$.sectionTitles.push(l.sectionTitle),l.score>$.bestScore&&($.bestScore=l.score,$.id=l.id)}),Array.from(E.values()).map(l=>({id:l.id,documentTitle:l.documentTitle,sectionLabel:A(l.sectionTitles,l.matchCount),snippet:P(l.snippets),score:l.score,matchCount:l.matchCount})).sort((l,$)=>$.score-l.score).slice(0,Gt)}),S=d=>{n.modelValue&&d.key==="Escape"&&(d.preventDefault(),p())};X(()=>n.modelValue,d=>{d?(c.value||(c.value=!0,m()),document.body.style.setProperty("overflow","hidden"),ve(()=>{o.value="",h.value?.focus()})):document.body.style.removeProperty("overflow")}),ae(()=>{window.addEventListener("keydown",S)}),be(()=>{window.removeEventListener("keydown",S),document.body.style.removeProperty("overflow")});function p(){s("update:modelValue",!1)}function k(d){return d.titles?.[0]??d.title??a("searchOverlay.untitled")}function y(d){return d.titles?.length?d.titles.slice(1).filter(Boolean).at(-1)??d.title??"":d.title??""}function w(d){const D=d.indexOf("#");return D===-1?d:d.slice(0,D)}function P(d){const D=[];if(d.forEach(E=>{const l=E.trim();l&&(D.includes(l)||D.push(l))}),!D.length)return"";const I=D.slice(0,2).join(" â€¦ ");return I.length>240?`${I.slice(0,240)}â€¦`:I}function A(d,D){if(!D)return"";if(D===1)return d[0]??"";if(!d.length)return"";const I=i.value?"ã€":", ",E=d.join(I),l=a("searchOverlay.sectionMatches",{sections:E}),$=D>d.length?a("searchOverlay.moreSuffix"):"";return`${l}${$}`}function R(d,D){if(!d)return"";const I=d.toLowerCase(),E=D.map(N=>I.indexOf(N)).filter(N=>N>=0).sort((N,Te)=>N-Te)[0];if(E===void 0)return q(d);const l=60,$=Math.max(0,E-l),V=Math.min(d.length,E+l),H=d.slice($,V),se=$>0?"â€¦":"",W=V<d.length?"â€¦":"";return`${se}${H}${W}`}function q(d){return d.length>140?`${d.slice(0,140)}â€¦`:d}return(d,D)=>{const I=ue;return C(),ce(nt,{to:"body"},[B(tt,{name:"search-overlay"},{default:Z(()=>[e.modelValue?(C(),O("div",{key:0,class:"search-overlay",role:"dialog","aria-modal":"true",onMousedown:we(p,["self"])},[g("div",Rt,[g("div",jt,[Ke(g("input",{ref_key:"inputRef",ref:h,type:"search","onUpdate:modelValue":D[0]||(D[0]=E=>De(o)?o.value=E:null),class:"search-overlay__input",placeholder:f(a)("searchOverlay.placeholder")},null,8,At),[[et,f(o)]]),g("button",{class:"search-overlay__close",type:"button",onClick:p,"aria-label":f(a)("searchOverlay.closeLabel")}," Ã— ",8,Bt)]),f(L)?(C(),O("div",Ft,T(f(a)("searchOverlay.indexing")),1)):(C(),O("div",qt,[f(o).trim()?f(b).length?(C(),O("div",Ut,T(f(a)("searchOverlay.resultsCount",{count:f(b).length})),1)):(C(),O("p",Wt,T(f(a)("searchOverlay.noResults")),1)):(C(),O("p",Vt,T(f(a)("searchOverlay.startTyping")),1)),f(b).length?(C(),O("ul",zt,[(C(!0),O(Q,null,K(f(b),E=>(C(),O("li",{key:E.id,class:"search-overlay__item"},[B(I,{to:E.id,class:"search-overlay__link",onClick:p},{default:Z(()=>[g("h3",Ht,T(E.documentTitle),1),g("p",Yt,[ee(T(f(a)("searchOverlay.matchCount",{count:E.matchCount}))+" ",1),E.sectionLabel?(C(),O("span",Qt," Â· "+T(E.sectionLabel),1)):U("",!0)]),g("p",Zt,T(E.snippet),1)]),_:2},1032,["to"])]))),128))])):U("",!0)]))])],32)):U("",!0)]),_:1})])}}}),Xt=Object.assign(z(Jt,[["__scopeId","data-v-79f9a5ff"]]),{__name:"SearchOverlay"}),Kt=()=>{const{locale:e}=G(),t=le(),n=st();return{toggleLang:async()=>{const a=e.value==="zh"?"en":"zh";if(t.params.year&&t.params.month&&t.params.day&&t.params.slug){const{year:i,month:o,day:h,slug:u}=t.params,c=`/${i}/${o}/${h}/${u}`;try{if(await re("posts").path(c).where("lang","=",a==="zh"?"zh-CN":"en").count()===0){alert(a==="en"?"English version not available":"æš‚æ— ä¸­æ–‡ç‰ˆæœ¬");return}}catch(_){console.error("Failed to check article existence:",_)}}if(t.params.tag){const i=decodeURIComponent(t.params.tag);try{if(await re("posts").where("lang","=",a==="zh"?"zh-CN":"en").where("tags","LIKE",`%"${i}"%`).count()===0){alert(a==="en"?"No articles with this tag in English":"è¯¥æ ‡ç­¾ä¸‹æš‚æ— ä¸­æ–‡æ–‡ç« ");return}}catch(o){console.error("Failed to check tag existence:",o)}}let r=n(t.fullPath,a);t.path.includes("/archives/page/")?r=n("/archives",a):t.path.startsWith(n("/page/",e.value))&&(r=n("/",a)),ot(r.endsWith("/")?r:r+"/")}}};function en(){const e=j(!1);let t=!1;const n=()=>{t||(window.requestAnimationFrame(()=>{e.value=window.scrollY>0,t=!1}),t=!0)};return ae(()=>{n(),window.addEventListener("scroll",n)}),ie(()=>{window.removeEventListener("scroll",n)}),{isScrolled:e}}function tn(){const e=j(!1),t=s=>{s.stopPropagation(),e.value=!e.value},n=()=>{e.value=!1};return ae(()=>{document.addEventListener("click",n)}),ie(()=>{document.removeEventListener("click",n)}),{showMobileMenu:e,toggleMobileMenu:t,closeMobileMenu:n}}const nn={class:"header-container"},an={class:"header"},sn={class:"header-right"},on={class:"lang-switch__label"},rn={class:"search-trigger__label"},cn={key:0,class:"mobile-menu-dropdown"},ln=F({__name:"Header",props:{title:{default:""},background:{}},setup(e){const{t}=G(),n=Ee(),s=le(),{locale:a}=G(),{toggleLang:r}=Kt(),i=M(()=>s.path==="/"||s.path.startsWith("/page/")?n.slogan:null),o=e,h=M(()=>o.title||t("title")),{isScrolled:u}=en(),{showMobileMenu:c,toggleMobileMenu:_,closeMobileMenu:x}=tn(),L=j(!1),m=()=>{x(),L.value=!0};return X(()=>s.fullPath,()=>{L.value=!1}),(v,b)=>{const S=ue,p=Lt,k=Pt,y=Xt;return C(),O(Q,null,[g("header",{class:rt({scrolled:f(u),"show-mobile-menu":f(c)})},[g("div",nn,[g("div",an,[B(S,{to:"/",class:"header-title"},{default:Z(()=>[ee(T(f(t)("title")),1)]),_:1}),g("div",sn,[B(p,{"nav-items":f(n).nav.items,onToggle:f(_)},null,8,["nav-items","onToggle"]),g("button",{type:"button",class:"lang-switch",onClick:b[0]||(b[0]=(...w)=>f(r)&&f(r)(...w)),"aria-label":"Switch Language"},[g("span",on,T(f(a)==="zh"?"En":"ä¸­"),1)]),g("button",{type:"button",class:"search-trigger pc",onClick:m,"aria-label":"Search"},[b[2]||(b[2]=g("span",{"aria-hidden":"true"},"ðŸ”",-1)),g("span",rn,T(f(t)("search")),1)])])])]),f(c)?(C(),O("div",cn,[(C(!0),O(Q,null,K(f(n).nav.items,w=>(C(),ce(S,{key:w.link,to:w.link,onClick:f(x)},{default:Z(()=>[ee(T(f(t)(w.text)),1)]),_:2},1032,["to","onClick"]))),128)),g("a",{onClick:we(m,["prevent"])},T(f(t)("search")),1)])):U("",!0)],2),B(k,{background:e.background,title:f(h),slogan:f(i)},null,8,["background","title","slogan"]),B(y,{modelValue:f(L),"onUpdate:modelValue":b[1]||(b[1]=w=>De(L)?L.value=w:null)},null,8,["modelValue"])],64)}}}),un=Object.assign(z(ln,[["__scopeId","data-v-3b3dfd83"]]),{__name:"Header"}),dn=e=>{const t=j(null),n=j(!1);return ae(()=>{if(!t.value)return;const s=new IntersectionObserver(a=>{a.forEach(r=>{r.isIntersecting&&!n.value&&(n.value=!0,s.disconnect())})},{rootMargin:e?.rootMargin??"100px",threshold:e?.threshold??.1});s.observe(t.value),be(()=>{s.disconnect()})}),{targetRef:t,isVisible:n}},fn={class:"footer-content"},hn={key:0,frameborder:"0",src:"https://support.nodeget.com/page/promotion?id=61",style:{"border-radius":"8px",height:"246px",transform:"scale(0.8)","transform-origin":"top center"}},_n=F({__name:"Footer",props:{background:{}},setup(e){const t=e,n=M(()=>({minHeight:"120px",...t.background})),{targetRef:s,isVisible:a}=dn({rootMargin:"100px",threshold:.1});return(r,i)=>(C(),O("footer",{ref_key:"footerRef",ref:s,style:ye(f(n))},[i[1]||(i[1]=g("div",{class:"footer-mask"},null,-1)),g("div",fn,[i[0]||(i[0]=g("div",null,"Â©2020 - 2025 By zhullyb",-1)),f(a)?(C(),O("iframe",hn)):U("",!0)])],4))}}),pn=Object.assign(z(_n,[["__scopeId","data-v-22a21bbd"]]),{__name:"Footer"}),gn={class:"content-wrapper"},mn={class:"before-main side"},vn={class:"after-main side"},yn=F({__name:"DefaultLayout",props:{title:{default:""}},setup(e){const{t}=G(),n=le(),s=e,a=Ee(),{data:r}=Ce("randomIndex"+n.path,async()=>Math.floor(Math.random()*a.backgrounds.length),"$RRY2fi8_v6"),i=M(()=>a.backgrounds[r.value??0]);return it({title:s.title||t("title")}),(o,h)=>{const u=un,c=pn;return C(),O("div",null,[B(u,{background:f(i),title:e.title},null,8,["background","title"]),g("div",gn,[g("div",mn,[oe(o.$slots,"BeforeMain",{},void 0,!0)]),g("main",null,[oe(o.$slots,"default",{},void 0,!0)]),g("div",vn,[oe(o.$slots,"AfterMain",{},void 0,!0)])]),B(c,{background:f(i)},null,8,["background"])])}}}),Sn=Object.assign(z(yn,[["__scopeId","data-v-2fa67436"]]),{__name:"DefaultLayout"});export{Sn as _,ue as a,Oe as b,Dn as c,dn as d,$n as e,Cn as f,re as q,mt as t,Ce as u};
