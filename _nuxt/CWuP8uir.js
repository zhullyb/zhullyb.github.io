const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./X4YFJghW.js","./BE36Xxk1.js","./entry.Cb3Jctur.css","./BDHgZ5Tr.js"])))=>i.map(i=>d[i]);
import{x as N,g as me,aq as Te,X,$ as Ie,a4 as Ne,Z as Me,f as R,s as de,a5 as Pe,Y as ve,N as je,G as _,a2 as Ae,ar as Be,a7 as re,a8 as Re,as as Fe,at as Ve,au as We,av as qe,aa as Ue,e as F,aw as ze,y as He,ax as fe,n as Ye,D as Ge,al as Qe,ay as Ze,T as Je,b as O,o as D,d as p,O as G,P as K,c as ie,w as Q,H as ee,J as I,_ as U,F as Y,U as ye,L as Z,h as ce,k as Xe,a as j,S as be,ab as Ke,a0 as we,ad as et,az as tt,V as nt,aA as at,m as st,K as le,W as ot,B as rt,R as it,I as ct,r as se}from"./BE36Xxk1.js";import{_ as he}from"./BDHgZ5Tr.js";const lt={trailing:!0};function ut(e,t=25,n={}){if(n={...lt,...n},!Number.isFinite(t))throw new TypeError("Expected `wait` to be a finite number");let o,a,r=[],i,s;const f=(h,x)=>(i=dt(e,h,x),i.finally(()=>{if(i=null,n.trailing&&s&&!a){const k=f(h,s);return s=null,k}}),i),u=function(...h){return n.trailing&&(s=h),i||new Promise(x=>{const k=!a&&n.leading;clearTimeout(a),a=setTimeout(()=>{a=null;const m=n.leading?o:f(this,h);s=null;for(const v of r)v(m);r=[]},t),k?(o=f(this,h),x(o)):r.push(x)})},c=h=>{h&&(clearTimeout(h),a=null)};return u.isPending=()=>!!a,u.cancel=()=>{c(a),r=[],s=null},u.flush=()=>{if(c(a),!s||i)return;const h=s;return s=null,f(this,h)},u}async function dt(e,t,n){return await e.apply(t,n)}function De(...e){const t=typeof e[e.length-1]=="string"?e.pop():void 0;Ce(e[0],e[1])&&e.unshift(t);let[n,o,a={}]=e,r=!1;const i=N(()=>Ne(n));if(typeof i.value!="string")throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if(typeof o!="function")throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const s=me();a.server??=!0,a.default??=_t,a.getCachedData??=Se,a.lazy??=!1,a.immediate??=!0,a.deep??=Te.deep,a.dedupe??="cancel",a._functionName,s._asyncData[i.value];function f(){const m={cause:"initial",dedupe:a.dedupe};return s._asyncData[i.value]?._init||(m.cachedData=a.getCachedData(i.value,s,{cause:"initial"}),s._asyncData[i.value]=_e(s,i.value,o,a,m.cachedData)),()=>s._asyncData[i.value].execute(m)}const u=f(),c=s._asyncData[i.value];c._deps++;const h=a.server!==!1&&s.payload.serverRendered;{let m=function(y){const C=s._asyncData[y];C?._deps&&(C._deps--,C._deps===0&&C?._off())};const v=Ae();if(v&&h&&a.immediate&&!v.sp&&(v.sp=[]),v&&!v._nuxtOnBeforeMountCbs){v._nuxtOnBeforeMountCbs=[];const y=v._nuxtOnBeforeMountCbs;Be(()=>{y.forEach(C=>{C()}),y.splice(0,y.length)}),re(()=>y.splice(0,y.length))}const b=v&&(v._nuxtClientOnly||Re(Fe,!1));h&&s.isHydrating&&(c.error.value||c.data.value!==void 0)?c.status.value=c.error.value?"error":"success":v&&(!b&&s.payload.serverRendered&&s.isHydrating||a.lazy)&&a.immediate?v._nuxtOnBeforeMountCbs.push(u):a.immediate&&c.status.value!=="success"&&u();const S=Me(),g=X(i,(y,C)=>{if((y||C)&&y!==C){r=!0;const T=s._asyncData[C]?.data.value!==void 0,B=s._asyncDataPromises[C]!==void 0,A={cause:"initial",dedupe:a.dedupe};if(!s._asyncData[y]?._init){let V;C&&T?V=s._asyncData[C].data.value:(V=a.getCachedData(y,s,{cause:"initial"}),A.cachedData=V),s._asyncData[y]=_e(s,y,o,a,V)}s._asyncData[y]._deps++,C&&m(C),(a.immediate||T||B)&&s._asyncData[y].execute(A),Ve(()=>{r=!1})}},{flush:"sync"}),L=a.watch?X(a.watch,()=>{r||c._execute({cause:"watch",dedupe:a.dedupe})}):()=>{};S&&Ie(()=>{g(),L(),m(i.value)})}const x={data:J(()=>s._asyncData[i.value]?.data),pending:J(()=>s._asyncData[i.value]?.pending),status:J(()=>s._asyncData[i.value]?.status),error:J(()=>s._asyncData[i.value]?.error),refresh:(...m)=>s._asyncData[i.value]?._init?s._asyncData[i.value].execute(...m):f()(),execute:(...m)=>x.refresh(...m),clear:()=>{const m=s._asyncData[i.value];if(m?._abortController)try{m._abortController.abort(new DOMException("AsyncData aborted by user.","AbortError"))}finally{m._abortController=void 0}$e(s,i.value)}},k=Promise.resolve(s._asyncDataPromises[i.value]).then(()=>x);return Object.assign(k,x),k}function J(e){return N({get(){return e()?.value},set(t){const n=e();n&&(n.value=t)}})}function ft(...e){const t=typeof e[e.length-1]=="string"?e.pop():void 0;Ce(e[0],e[1])&&e.unshift(t);const[n,o,a={}]=e;return De(n,o,{...a,lazy:!0},null)}function Ce(e,t){return!(typeof e=="string"||typeof e=="object"&&e!==null||typeof e=="function"&&typeof t=="function")}function $e(e,t){t in e.payload.data&&(e.payload.data[t]=void 0),t in e.payload._errors&&(e.payload._errors[t]=void 0),e._asyncData[t]&&(e._asyncData[t].data.value=_(e._asyncData[t]._default()),e._asyncData[t].error.value=void 0,e._asyncData[t].status.value="idle"),t in e._asyncDataPromises&&(e._asyncDataPromises[t]=void 0)}function ht(e,t){const n={};for(const o of t)n[o]=e[o];return n}function _e(e,t,n,o,a){e.payload._errors[t]??=void 0;const r=o.getCachedData!==Se,i=n,s=o.deep?R:de,f=a!==void 0,u=e.hook("app:data:refresh",async h=>{(!h||h.includes(t))&&await c.execute({cause:"refresh:hook"})}),c={data:s(f?a:o.default()),pending:N(()=>c.status.value==="pending"),error:Pe(e.payload._errors,t),status:de("idle"),execute:(...h)=>{const[x,k=void 0]=h,m=x&&k===void 0&&typeof x=="object"?x:{};if(e._asyncDataPromises[t]&&(m.dedupe??o.dedupe)==="defer")return e._asyncDataPromises[t];{const b="cachedData"in m?m.cachedData:o.getCachedData(t,e,{cause:m.cause??"refresh:manual"});if(b!==void 0)return e.payload.data[t]=c.data.value=b,c.error.value=void 0,c.status.value="success",Promise.resolve(b)}c._abortController&&c._abortController.abort(new DOMException("AsyncData request cancelled by deduplication","AbortError")),c._abortController=new AbortController,c.status.value="pending";const v=new Promise((b,S)=>{try{const g=m.timeout??o.timeout,L=pt([c._abortController?.signal,m?.signal],g);if(L.aborted){const y=L.reason;S(y instanceof Error?y:new DOMException(String(y??"Aborted"),"AbortError"));return}return L.addEventListener("abort",()=>{const y=L.reason;S(y instanceof Error?y:new DOMException(String(y??"Aborted"),"AbortError"))},{once:!0}),Promise.resolve(i(e,{signal:L})).then(b,S)}catch(g){S(g)}}).then(async b=>{let S=b;o.transform&&(S=await o.transform(b)),o.pick&&(S=ht(S,o.pick)),e.payload.data[t]=S,c.data.value=S,c.error.value=void 0,c.status.value="success"}).catch(b=>{if(!(e._asyncDataPromises[t]&&e._asyncDataPromises[t]!==v)&&!c._abortController?.signal.aborted){if(typeof DOMException<"u"&&b instanceof DOMException&&b.name==="AbortError"){c.status.value="idle";return}c.error.value=je(b),c.data.value=_(o.default()),c.status.value="error"}}).finally(()=>{delete e._asyncDataPromises[t]});return e._asyncDataPromises[t]=v,e._asyncDataPromises[t]},_execute:ut((...h)=>c.execute(...h),0,{leading:!0}),_default:o.default,_deps:0,_init:!0,_hash:void 0,_off:()=>{u(),e._asyncData[t]?._init&&(e._asyncData[t]._init=!1),r||ve(()=>{e._asyncData[t]?._init||($e(e,t),c.execute=()=>Promise.resolve())})}};return c}const _t=()=>{},Se=(e,t,n)=>{if(t.isHydrating)return t.payload.data[e];if(n.cause!=="refresh:manual"&&n.cause!=="refresh:hook")return t.static.data[e]};function pt(e,t){const n=e.filter(r=>!!r);if(typeof t=="number"&&t>=0){const r=AbortSignal.timeout?.(t);r&&n.push(r)}if(AbortSignal.any)return AbortSignal.any(n);const o=new AbortController;for(const r of n)if(r.aborted){const i=r.reason??new DOMException("Aborted","AbortError");try{o.abort(i)}catch{o.abort()}return o.signal}const a=()=>{const i=n.find(s=>s.aborted)?.reason??new DOMException("Aborted","AbortError");try{o.abort(i)}catch{o.abort()}};for(const r of n)r.addEventListener?.("abort",a,{once:!0});return o.signal}const gt={nuxt:{}},mt=We(qe,gt);function xe(){const e=me();return e._appConfig||=Ue(mt),e._appConfig}const ue=F({name:"NuxtLinkLocale",props:{...he.props,locale:{type:String,default:void 0,required:!1}},setup(e,{slots:t}){const n=ze(),o=N(()=>{const s=e.to||e.href||"";return typeof s=="string"&&He(s,{acceptRelative:!0})}),a=N(()=>{const s=e.to??e.href,f=s!=null?n(s,e.locale):s;return f&&fe(e.to)&&(f.state=e.to?.state),s!=null?f:s}),r=N(()=>{if(e.external)return!0;const s=e.to||e.href||"";return fe(s)?!1:s===""||o.value}),i=()=>{const s={...e};return r.value||(s.to=a.value),delete s.href,delete s.locale,s};return()=>Ye(he,i(),t.default)}}),Ee={posts:"v3.5.0--jHf2YgJmEgWplkBHKhcLX9kEyvYrBLVteylhwCK_VGk",others:"v3.5.0--BTqY8yPGt5Hx3ZAEU8dZZuxAh3vm06e2ZRqFd6hn898"},vt={posts:"_content_posts",others:"_content_others",info:"_content_info"},Cn={posts:{type:"page",fields:{id:"string",title:"string",body:"json",date:"string",description:"string",extension:"string",lang:"string",meta:"json",navigation:"json",path:"string",rawbody:"string",seo:"json",stem:"string",sticky:"boolean",tags:"json"}},others:{type:"page",fields:{id:"string",title:"string",body:"json",description:"string",extension:"string",meta:"json",navigation:"json",path:"string",seo:"json",stem:"string"}},info:{type:"data",fields:{}}},te=(e,t)=>{const n=e._conditions;return n.length>0?`(${n.join(` ${t} `)})`:""},ne=e=>{const t=[],n={_conditions:t,where(o,a,r){let i;switch(a.toUpperCase()){case"IN":case"NOT IN":if(Array.isArray(r)){const s=r.map(f=>H(f)).join(", ");i=`"${String(o)}" ${a.toUpperCase()} (${s})`}else throw new TypeError(`Value for ${a} must be an array`);break;case"BETWEEN":case"NOT BETWEEN":if(Array.isArray(r)&&r.length===2)i=`"${String(o)}" ${a.toUpperCase()} ${H(r[0])} AND ${H(r[1])}`;else throw new Error(`Value for ${a} must be an array with two elements`);break;case"IS NULL":case"IS NOT NULL":i=`"${String(o)}" ${a.toUpperCase()}`;break;case"LIKE":case"NOT LIKE":i=`"${String(o)}" ${a.toUpperCase()} ${H(r)}`;break;default:i=`"${String(o)}" ${a} ${H(typeof r=="boolean"?Number(r):r)}`}return t.push(`${i}`),n},andWhere(o){const a=o(ne());return t.push(te(a,"AND")),n},orWhere(o){const a=o(ne());return t.push(te(a,"OR")),n}};return n},yt=(e,t)=>{const n={conditions:[],selectedFields:[],offset:0,limit:0,orderBy:[],count:{field:"",distinct:!1}},o={__params:n,andWhere(r){const i=r(ne());return n.conditions.push(te(i,"AND")),o},orWhere(r){const i=r(ne());return n.conditions.push(te(i,"OR")),o},path(r){return o.where("path","=",Ge(r))},skip(r){return n.offset=r,o},where(r,i,s){return o.andWhere(f=>f.where(String(r),i,s)),o},limit(r){return n.limit=r,o},select(...r){return r.length&&n.selectedFields.push(...r),o},order(r,i){return n.orderBy.push(`"${String(r)}" ${i}`),o},async all(){return t(e,a()).then(r=>r||[])},async first(){return t(e,a({limit:1})).then(r=>r[0]||null)},async count(r="*",i=!1){return t(e,a({count:{field:String(r),distinct:i}})).then(s=>s[0].count)}};function a(r={}){let i="SELECT ";if(r?.count)i+=`COUNT(${r.count.distinct?"DISTINCT ":""}${r.count.field}) as count`;else{const f=Array.from(new Set(n.selectedFields));i+=f.length>0?f.map(u=>`"${String(u)}"`).join(", "):"*"}i+=` FROM ${vt[String(e)]}`,n.conditions.length>0&&(i+=` WHERE ${n.conditions.join(" AND ")}`),n.orderBy.length>0?i+=` ORDER BY ${n.orderBy.join(", ")}`:i+=" ORDER BY stem ASC";const s=r?.limit||n.limit;return s>0&&(n.offset>0?i+=` LIMIT ${s} OFFSET ${n.offset}`:i+=` LIMIT ${s}`),i}return o};function H(e){return`'${String(e).replace(/'/g,"''")}'`}function pe(e){return t=>(t=t||{},(e||[]).filter(n=>typeof t[n]<"u").reduce((n,o)=>Object.assign(n,{[o]:t[o]}),{}))}async function bt(e,t=[]){e.__params?.orderBy?.length||(e=e.order("stem","ASC"));const o=await e.orWhere(u=>u.where("navigation","<>","false").where("navigation","IS NULL")).select("navigation","stem","path","title","meta",...t||[]).all(),{contents:a,configs:r}=o.reduce((u,c)=>{if(String(c.stem).split("/").pop()===".navigation"){c.title=c.title?.toLowerCase()==="navigation"?"":c.title;const h=c.path.split("/").slice(0,-1).join("/")||"/";u.configs[h]={...c,...c.body}}else u.contents.push(c);return u},{configs:{},contents:[]}),i=u=>({...pe(["title",...t])(u),...u.meta,...ge(u?.navigation)?u.navigation:{}}),s=u=>({...pe(["title",...t])(u),...ge(u?.navigation)?u.navigation:{}}),f=a.reduce((u,c)=>{const h=c.path.substring(1).split("/"),x=c.stem.split("/"),k=!!x[x.length-1]?.match(/([1-9]\d*\.)?index/g),m=g=>({title:g.title,path:g.path,stem:g.stem,children:[],...s(g)}),v=m(c);if(k){const g=r[v.path];if(typeof g?.navigation<"u"&&g?.navigation===!1)return u;if(c.path!=="/"){const L=m(c);v.children.push(L)}g&&Object.assign(v,i(g))}if(h.length===1){const g=u.find(L=>L.path===v.path&&L.page===!1);return k&&g?Object.assign(g,{page:void 0,children:[...v.children||[],...g.children||[]]}):u.push(v),u}const b=h.slice(0,-1).reduce((g,L,y)=>{const C="/"+h.slice(0,y+1).join("/"),T=r[C];if(typeof T?.navigation<"u"&&T.navigation===!1)return[];let B=g.find(A=>A.path===C);if(!B){const A=T?i(T):{};B={...A,title:A.title||wt(L),path:C,stem:x.slice(0,y+1).join("/"),children:[],page:!1},g.push(B)}return B.children},u),S=b.find(g=>g.path===v.path&&g.page===!1);return S?Object.assign(S,{...v,page:void 0,children:[...v.children||[],...S.children||[]]}):b.push(v),u},[]);return Oe(f)}function Oe(e){const t=e;for(const n of t)n.children?.length?Oe(n.children):delete n.children;return e}function ge(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}const wt=e=>e.split(/[\s-]/g).map(Qe).join(" ");async function Dt(e,t,n){const{before:o=1,after:a=1,fields:r=[]}=n||{},i=await bt(e,r),s=ke(i),f=s.findIndex(h=>h.path===t),u=f===-1?[]:s.slice(f-o,f),c=f===-1?[]:s.slice(f+1,f+a+1);return[...Array.from({length:o}).fill(null).concat(u).slice(u.length),...c.concat(Array.from({length:a}).fill(null)).slice(0,a)]}function ke(e){return e.flatMap(n=>{const o=n.children?ke(n.children):[];return n.page===!1||o.length&&o.find(a=>a.path===n.path)?o:[{...n,children:void 0},...o]})}async function $n(e,t){return await $fetch(`/__nuxt_content/${t}/sql_dump.txt`,{context:{},responseType:"text",headers:{"content-type":"text/plain"},query:{v:Ee[String(t)],t:void 0}})}async function Ct(e,t,n){return await $fetch(`/__nuxt_content/${t}/query`,{context:e?{cloudflare:e.context.cloudflare}:{},headers:{"content-type":"application/json",...e?.node?.req?.headers?.cookie?{cookie:e.node.req.headers.cookie}:{}},query:{v:Ee[String(t)],t:void 0},method:"POST",body:{sql:n}})}const oe=e=>{const t=Ze()?.ssrContext?.event;return yt(e,(n,o)=>$t(t,n,o))};function Sn(e,t,n){return xt(e,o=>Dt(o,t,n))}async function $t(e,t,n){return window.WebAssembly?St(t,n):Ct(e,String(t),n)}async function St(e,t){return await Je(()=>import("./X4YFJghW.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(o=>o.loadDatabaseAdapter(e)).then(o=>o.all(t))}function xt(e,t){const n=oe(e),o={where(a,r,i){return n.where(String(a),r,i),o},andWhere(a){return n.andWhere(a),o},orWhere(a){return n.orWhere(a),o},order(a,r){return n.order(String(a),r),o},then(a,r){return t(n).then(a,r)},catch(a){return this.then(void 0,a)},finally(a){return this.then(void 0,void 0).finally(a)},get[Symbol.toStringTag](){return"Promise"}};return o}const Et={class:"pc-nav"},Ot={class:"container"},kt=F({__name:"HeaderNav",props:{navItems:{}},emits:["toggle"],setup(e,{emit:t}){const n=t,o=a=>{n("toggle",a)};return(a,r)=>{const i=ue;return D(),O("nav",null,[p("div",Et,[(D(!0),O(G,null,K(e.navItems,s=>(D(),ie(i,{key:s.link,to:s.link},{default:Q(()=>[ee(I(a.$t(s.text)),1)]),_:2},1032,["to"]))),128))]),p("div",{class:"mobile-nav",onClick:o},[p("div",Ot,[(D(),O(G,null,K(3,s=>p("div",{class:"mobile-nav-item",key:s})),64))])])])}}}),Lt=Object.assign(U(kt,[["__scopeId","data-v-46e33355"]]),{__name:"HeaderNav"}),Tt={class:"mask"},It={class:"title-container"},Nt={class:"title"},Mt={key:0},Pt=F({__name:"Banner",props:{title:{},slogan:{},background:{}},setup(e){const t=e,n=N(()=>({...t.background}));return(o,a)=>(D(),O("div",{class:"banner",style:ye(_(n))},[p("div",Tt,[p("div",It,[p("div",Nt,[p("h1",null,I(e.title),1),e.slogan?(D(),O("p",Mt,I(e.slogan),1)):Y("",!0)])])])],4))}}),jt=Object.assign(U(Pt,[["__scopeId","data-v-4e11f931"]]),{__name:"Banner"}),At={class:"search-overlay__panel"},Bt={class:"search-overlay__header"},Rt=["placeholder"],Ft=["aria-label"],Vt={key:0,class:"search-overlay__state"},Wt={key:1,class:"search-overlay__body"},qt={key:0,class:"search-overlay__state"},Ut={key:1,class:"search-overlay__state"},zt={key:2,class:"search-overlay__count"},Ht={key:3,class:"search-overlay__list"},Yt={class:"search-overlay__item-title"},Gt={class:"search-overlay__item-meta"},Qt={key:0},Zt={class:"search-overlay__item-snippet"},Jt=50,Xt=F({__name:"SearchOverlay",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,o=t,{t:a,locale:r}=Z(),i=N(()=>r.value.startsWith("zh")),s=R(""),f=R(null),u=at(),c=R(!1),h=async()=>{const d=await u("/search/sections.json");if(Array.isArray(d))return d;if(typeof d=="string")try{return JSON.parse(d)}catch(w){console.warn("[search] Failed to parse sections payload",w)}return[]},{data:x,pending:k,refresh:m}=ft("posts-search-sections",h,{server:!1,immediate:!1,default:()=>[]}),v=N(()=>x.value??[]),b=N(()=>{const d=s.value.trim().toLowerCase();if(!d)return[];const w=Array.from(new Set(d.split(/\s+/).filter(Boolean)));if(!w.length)return[];const M=v.value.map(l=>{const $=(l.content??"").replace(/\s+/g," ").trim();if(!$)return null;const W=L(l),z=y(l),ae=`${W} ${z} ${$}`.toLowerCase();if(!w.every(P=>ae.includes(P)))return null;let q=0;return w.forEach(P=>{W.toLowerCase().includes(P)?q+=4:z.toLowerCase().includes(P)?q+=3:q+=1}),{id:l.id,baseId:C(l.id),documentTitle:W,sectionTitle:z,snippet:A($,w),score:q}}).filter(l=>!!l).sort((l,$)=>$.score-l.score);if(!M.length)return[];const E=new Map;return M.forEach(l=>{const $=E.get(l.baseId);if(!$){E.set(l.baseId,{id:l.id,baseId:l.baseId,documentTitle:l.documentTitle,sectionTitles:l.sectionTitle?[l.sectionTitle]:[],snippets:[l.snippet],score:l.score,matchCount:1,bestScore:l.score});return}$.matchCount+=1,$.score+=l.score,$.snippets.push(l.snippet),l.sectionTitle&&!$.sectionTitles.includes(l.sectionTitle)&&$.sectionTitles.length<3&&$.sectionTitles.push(l.sectionTitle),l.score>$.bestScore&&($.bestScore=l.score,$.id=l.id)}),Array.from(E.values()).map(l=>({id:l.id,documentTitle:l.documentTitle,sectionLabel:B(l.sectionTitles,l.matchCount),snippet:T(l.snippets),score:l.score,matchCount:l.matchCount})).sort((l,$)=>$.score-l.score).slice(0,Jt)}),S=d=>{n.modelValue&&d.key==="Escape"&&(d.preventDefault(),g())};X(()=>n.modelValue,d=>{d?(c.value||(c.value=!0,m()),document.body.style.setProperty("overflow","hidden"),ve(()=>{s.value="",f.value?.focus()})):document.body.style.removeProperty("overflow")}),ce(()=>{window.addEventListener("keydown",S)}),Xe(()=>{window.removeEventListener("keydown",S),document.body.style.removeProperty("overflow")});function g(){o("update:modelValue",!1)}function L(d){return d.titles?.[0]??d.title??a("searchOverlay.untitled")}function y(d){return d.titles?.length?d.titles.slice(1).filter(Boolean).at(-1)??d.title??"":d.title??""}function C(d){const w=d.indexOf("#");return w===-1?d:d.slice(0,w)}function T(d){const w=[];if(d.forEach(E=>{const l=E.trim();l&&(w.includes(l)||w.push(l))}),!w.length)return"";const M=w.slice(0,2).join(" … ");return M.length>240?`${M.slice(0,240)}…`:M}function B(d,w){if(!w)return"";if(w===1)return d[0]??"";if(!d.length)return"";const M=i.value?"、":", ",E=d.join(M),l=a("searchOverlay.sectionMatches",{sections:E}),$=w>d.length?a("searchOverlay.moreSuffix"):"";return`${l}${$}`}function A(d,w){if(!d)return"";const M=d.toLowerCase(),E=w.map(P=>M.indexOf(P)).filter(P=>P>=0).sort((P,Le)=>P-Le)[0];if(E===void 0)return V(d);const l=60,$=Math.max(0,E-l),W=Math.min(d.length,E+l),z=d.slice($,W),ae=$>0?"…":"",q=W<d.length?"…":"";return`${ae}${z}${q}`}function V(d){return d.length>140?`${d.slice(0,140)}…`:d}return(d,w)=>{const M=ue;return D(),ie(nt,{to:"body"},[j(tt,{name:"search-overlay"},{default:Q(()=>[e.modelValue?(D(),O("div",{key:0,class:"search-overlay",role:"dialog","aria-modal":"true",onMousedown:be(g,["self"])},[p("div",At,[p("div",Bt,[Ke(p("input",{ref_key:"inputRef",ref:f,type:"search","onUpdate:modelValue":w[0]||(w[0]=E=>we(s)?s.value=E:null),class:"search-overlay__input",placeholder:_(a)("searchOverlay.placeholder")},null,8,Rt),[[et,_(s)]]),p("button",{class:"search-overlay__close",type:"button",onClick:g,"aria-label":_(a)("searchOverlay.closeLabel")}," × ",8,Ft)]),_(k)?(D(),O("div",Vt,I(_(a)("searchOverlay.indexing")),1)):(D(),O("div",Wt,[_(s).trim()?_(b).length?(D(),O("div",zt,I(_(a)("searchOverlay.resultsCount",{count:_(b).length})),1)):(D(),O("p",Ut,I(_(a)("searchOverlay.noResults")),1)):(D(),O("p",qt,I(_(a)("searchOverlay.startTyping")),1)),_(b).length?(D(),O("ul",Ht,[(D(!0),O(G,null,K(_(b),E=>(D(),O("li",{key:E.id,class:"search-overlay__item"},[j(M,{to:E.id,class:"search-overlay__link",onClick:g},{default:Q(()=>[p("h3",Yt,I(E.documentTitle),1),p("p",Gt,[ee(I(_(a)("searchOverlay.matchCount",{count:E.matchCount}))+" ",1),E.sectionLabel?(D(),O("span",Qt," · "+I(E.sectionLabel),1)):Y("",!0)]),p("p",Zt,I(E.snippet),1)]),_:2},1032,["to"])]))),128))])):Y("",!0)]))])],32)):Y("",!0)]),_:1})])}}}),Kt=Object.assign(U(Xt,[["__scopeId","data-v-79f9a5ff"]]),{__name:"SearchOverlay"}),en={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function tn(e,t){return D(),O("svg",en,[...t[0]||(t[0]=[p("path",{fill:"currentColor",d:"M15.5 14h-.79l-.28-.27A6.47 6.47 0 0 0 16 9.5A6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5S14 7.01 14 9.5S11.99 14 9.5 14"},null,-1)])])}const nn=st({name:"ic-baseline-search",render:tn}),an=()=>{const{locale:e}=Z(),t=le(),n=ot();return{toggleLang:async()=>{const a=e.value==="zh"?"en":"zh";if(t.params.year&&t.params.month&&t.params.day&&t.params.slug){const{year:i,month:s,day:f,slug:u}=t.params,c=`/${i}/${s}/${f}/${u}`;try{if(await oe("posts").path(c).where("lang","=",a==="zh"?"zh-CN":"en").count()===0){alert(a==="en"?"English version not available":"暂无中文版本");return}}catch(h){console.error("Failed to check article existence:",h)}}if(t.params.tag){const i=decodeURIComponent(t.params.tag);try{if(await oe("posts").where("lang","=",a==="zh"?"zh-CN":"en").where("tags","LIKE",`%"${i}"%`).count()===0){alert(a==="en"?"No articles with this tag in English":"该标签下暂无中文文章");return}}catch(s){console.error("Failed to check tag existence:",s)}}let r=n(t.fullPath,a);t.path.includes("/archives/page/")?r=n("/archives",a):t.path.startsWith(n("/page/",e.value))&&(r=n("/",a)),rt(r.endsWith("/")?r:r+"/")}}};function sn(){const e=R(!1);let t=!1;const n=()=>{t||(window.requestAnimationFrame(()=>{e.value=window.scrollY>0,t=!1}),t=!0)};return ce(()=>{n(),window.addEventListener("scroll",n,{passive:!0})}),re(()=>{window.removeEventListener("scroll",n)}),{isScrolled:e}}function on(){const e=R(!1),t=o=>{o.stopPropagation(),e.value=!e.value},n=()=>{e.value=!1};return ce(()=>{document.addEventListener("click",n)}),re(()=>{document.removeEventListener("click",n)}),{showMobileMenu:e,toggleMobileMenu:t,closeMobileMenu:n}}const rn={class:"header-container"},cn={class:"header"},ln={class:"header-right"},un={class:"lang-switch__label"},dn={class:"search-trigger__label"},fn={key:0,class:"mobile-menu-dropdown"},hn=F({__name:"Header",props:{title:{default:""},background:{}},setup(e){const{t}=Z(),n=xe(),o=le(),{locale:a}=Z(),{toggleLang:r}=an(),i=N(()=>o.path==="/"||o.path.startsWith("/page/")?n.slogan:null),s=e,f=N(()=>s.title||t("title")),{isScrolled:u}=sn(),{showMobileMenu:c,toggleMobileMenu:h,closeMobileMenu:x}=on(),k=R(!1),m=()=>{x(),k.value=!0};return X(()=>o.fullPath,()=>{k.value=!1}),(v,b)=>{const S=ue,g=Lt,L=nn,y=jt,C=Kt;return D(),O(G,null,[p("header",{class:it({scrolled:_(u),"show-mobile-menu":_(c)})},[p("div",rn,[p("div",cn,[j(S,{to:"/",class:"header-title"},{default:Q(()=>[ee(I(_(t)("title")),1)]),_:1}),p("div",ln,[j(g,{"nav-items":_(n).nav.items,onToggle:_(h)},null,8,["nav-items","onToggle"]),p("button",{type:"button",class:"lang-switch",onClick:b[0]||(b[0]=(...T)=>_(r)&&_(r)(...T)),"aria-label":"Switch Language"},[p("span",un,I(_(a)==="zh"?"En":"中"),1)]),p("button",{type:"button",class:"search-trigger pc",onClick:m,"aria-label":"Search"},[j(L),p("span",dn,I(_(t)("search")),1)])])])]),_(c)?(D(),O("div",fn,[(D(!0),O(G,null,K(_(n).nav.items,T=>(D(),ie(S,{key:T.link,to:T.link,onClick:_(x)},{default:Q(()=>[ee(I(_(t)(T.text)),1)]),_:2},1032,["to","onClick"]))),128)),p("a",{onClick:be(m,["prevent"])},[j(L)])])):Y("",!0)],2),j(y,{background:e.background,title:_(f),slogan:_(i)},null,8,["background","title","slogan"]),j(C,{modelValue:_(k),"onUpdate:modelValue":b[1]||(b[1]=T=>we(k)?k.value=T:null)},null,8,["modelValue"])],64)}}}),_n=Object.assign(U(hn,[["__scopeId","data-v-d5c97683"]]),{__name:"Header"}),pn=F({__name:"Footer",props:{background:{}},setup(e){const t=e,n=N(()=>({minHeight:"120px",...t.background}));return(o,a)=>(D(),O("footer",{style:ye(_(n))},[...a[0]||(a[0]=[p("div",{class:"footer-mask"},null,-1),p("div",{class:"footer-content"},[p("div",null,"©2020 - 2025 By zhullyb"),p("iframe",{frameborder:"0",src:"https://support.nodeget.com/page/promotion?id=61",loading:"lazy",style:{"border-radius":"8px",height:"246px",transform:"scale(0.8)","transform-origin":"top center"}})],-1)])],4))}}),gn=Object.assign(U(pn,[["__scopeId","data-v-620c8785"]]),{__name:"Footer"}),mn={class:"content-wrapper"},vn={class:"before-main side"},yn={class:"after-main side"},bn=F({__name:"DefaultLayout",props:{title:{default:""}},setup(e){const{t}=Z(),n=le(),o=e,a=xe(),{data:r}=De("randomIndex"+n.path,async()=>Math.floor(Math.random()*a.backgrounds.length),"$RRY2fi8_v6"),i=N(()=>a.backgrounds[r.value??0]);return ct({title:o.title||t("title")}),(s,f)=>{const u=_n,c=gn;return D(),O("div",null,[j(u,{background:_(i),title:e.title},null,8,["background","title"]),p("div",mn,[p("div",vn,[se(s.$slots,"BeforeMain",{},void 0,!0)]),p("main",null,[se(s.$slots,"default",{},void 0,!0)]),p("div",yn,[se(s.$slots,"AfterMain",{},void 0,!0)])]),j(c,{background:_(i)},null,8,["background"])])}}}),xn=Object.assign(U(bn,[["__scopeId","data-v-2fa67436"]]),{__name:"DefaultLayout"});export{xn as _,ue as a,Ee as b,Cn as c,Sn as d,$n as f,oe as q,vt as t,De as u};
