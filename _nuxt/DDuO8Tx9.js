import{f as p,p as m,l as k,B as b,C as S,c as l,o as n,a as r,j as c,e as x,t as v,s as f,n as _,k as B,ab as C,_ as z}from"./H-0zYzXa.js";const E={class:"prose-img-wrapper"},I=["src","alt","title","width","height"],N={key:0,class:"prose-img-caption"},P=["src","alt"],M={key:0,class:"prose-img-preview-scale-indicator"},j=.5,D=4,F=p({__name:"ProseImg",props:{src:{type:String,required:!0},alt:{type:String,default:""},title:{type:String,default:""},width:{type:[String,Number],default:void 0},height:{type:[String,Number],default:void 0}},setup(e){const o=m(!1),t=m(1),g=k(()=>({transform:`scale(${t.value})`,transition:"transform 0.15s",cursor:t.value!==1?"zoom-out":"zoom-in"}));function y(){o.value=!0,t.value=1,document.body.style.overflow="hidden"}function i(){o.value=!1,document.body.style.overflow=""}function h(a){if(!o.value)return;const u=a.deltaY;let s=t.value;u<0?s*=1.1:s/=1.1,s=Math.max(j,Math.min(D,s)),t.value=Number(s.toFixed(2))}function w(){t.value=1}function d(a){o.value&&(a.key==="Escape"||a.key==="Esc")&&i()}return b(()=>{window.addEventListener("keydown",d)}),S(()=>{window.removeEventListener("keydown",d),document.body.style.overflow=""}),(a,u)=>(n(),l("span",E,[r("img",{src:e.src,alt:e.alt,title:e.title,width:e.width,height:e.height,loading:"lazy",class:"prose-img",onClick:y,style:{cursor:"zoom-in"}},null,8,I),e.alt?(n(),l("span",N,v(e.alt),1)):c("",!0),(n(),x(C,{to:"body"},[o.value?(n(),l("div",{key:0,class:"prose-img-preview-mask",onClick:f(i,["self"]),onWheel:f(h,["prevent"])},[r("img",{src:e.src,alt:e.alt,class:"prose-img-preview-img",style:_(B(g)),onDblclick:w},null,44,P),r("button",{class:"prose-img-preview-close",onClick:i,"aria-label":"关闭预览"}," × "),t.value!==1?(n(),l("div",M,v((t.value*100).toFixed(0))+"% ",1)):c("",!0)],32)):c("",!0)]))]))}}),V=Object.assign(z(F,[["__scopeId","data-v-4f488808"]]),{__name:"ProseImg"});export{V as default};
