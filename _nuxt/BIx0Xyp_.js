import{_ as C}from"./zUSoyYz1.js";import{_ as k,u as S}from"./bIOjXvdM.js";import{q as I}from"./CaRVx73X.js";import{f as w,h as E,l as M,e as p,w as d,o as _,a as z,c as f,k as x,F,r as v,n as B,d as D,t as L,_ as N}from"./BeZ9uWtg.js";function T(r,e,o){if(o===0)return r;if(o===1)return e;const s=h(r),c=h(e);if(!s||!c)throw new Error("Invalid color format");const n=Math.round(s.r+o*(c.r-s.r)),i=Math.round(s.g+o*(c.g-s.g)),a=Math.round(s.b+o*(c.b-s.b));return $(n,i,a)}function h(r){const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function $(r,e,o){return"#"+((1<<24)+(r<<16)+(e<<8)+o).toString(16).slice(1)}const j={class:"text-center tagcloud"},q={key:1},A=40,y=20,O="#bbbbee",R="#337ab7",U=w({__name:"index",async setup(r){let e,o;const s=([e,o]=E(()=>S("tags-posts",()=>I("posts").select("tags").all())),e=await e,o(),e).data,c=M(()=>{const n={};let i=0,a=1/0;s.value.forEach(t=>{typeof t.tags?.forEach=="function"&&t.tags?.forEach(l=>{l in n?n[l]+=1:n[l]=1})}),Object.keys(n).forEach(t=>{i=Math.max(i,n[t]),a=Math.min(a,n[t])});const u=Object.keys(n).map(t=>{const l=n[t],m=i===a?1:(l-a)/(i-a),g=y+m*(A-y),b=T(O,R,m);return{name:t,count:n[t],style:{fontSize:`${g.toFixed(2)}px`,color:b}}});return u.sort((t,l)=>t.name.localeCompare(l.name,"en-US")),u});return(n,i)=>{const a=C,u=k;return _(),p(u,{title:"标签"},{default:d(()=>[z("div",j,[x(c).length?(_(!0),f(F,{key:0},v(x(c),t=>(_(),p(a,{class:"tag",key:t.name,to:`/tags/${encodeURIComponent(t.name)}`,style:B(t.style)},{default:d(()=>[D(L(t.name),1)]),_:2},1032,["to","style"]))),128)):(_(),f("p",q,"Loading tags..."))])]),_:1})}}}),K=N(U,[["__scopeId","data-v-7970918b"]]);export{K as default};
