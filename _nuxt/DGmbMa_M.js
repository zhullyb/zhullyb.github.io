import{e as p,f as m,x as k,h as b,k as S,b as n,o as l,d as r,F as c,c as x,J as v,T as f,U as _,V as z,_ as B}from"./DmkkHgfp.js";const C={class:"prose-img-wrapper"},E=["src","alt","title","width","height"],I={key:0,class:"prose-img-caption"},N=["src","alt"],P={key:0,class:"prose-img-preview-scale-indicator"},M=.5,F=4,V=p({__name:"ProseImg",props:{src:{type:String,required:!0},alt:{type:String,default:""},title:{type:String,default:""},width:{type:[String,Number],default:void 0},height:{type:[String,Number],default:void 0}},setup(e){const o=m(!1),t=m(1),g=k(()=>({transform:`scale(${t.value})`,transition:"transform 0.15s",cursor:t.value!==1?"zoom-out":"zoom-in"}));function h(){o.value=!0,t.value=1,document.body.style.overflow="hidden"}function i(){o.value=!1,document.body.style.overflow=""}function y(a){if(!o.value)return;const u=a.deltaY;let s=t.value;u<0?s*=1.1:s/=1.1,s=Math.max(M,Math.min(F,s)),t.value=Number(s.toFixed(2))}function w(){t.value=1}function d(a){o.value&&(a.key==="Escape"||a.key==="Esc")&&i()}return b(()=>{window.addEventListener("keydown",d)}),S(()=>{window.removeEventListener("keydown",d),document.body.style.overflow=""}),(a,u)=>(l(),n("span",C,[r("img",{src:e.src,alt:e.alt,title:e.title,width:e.width,height:e.height,loading:"lazy",class:"prose-img",onClick:h,style:{cursor:"zoom-in"}},null,8,E),e.alt?(l(),n("span",I,v(e.alt),1)):c("",!0),(l(),x(z,{to:"body"},[o.value?(l(),n("div",{key:0,class:"prose-img-preview-mask",onClick:f(i,["self"]),onWheel:f(y,["prevent"])},[r("img",{src:e.src,alt:e.alt,class:"prose-img-preview-img",style:_(g.value),onDblclick:w},null,44,N),r("button",{class:"prose-img-preview-close",onClick:i,"aria-label":"关闭预览"}," × "),t.value!==1?(l(),n("div",P,v((t.value*100).toFixed(0))+"% ",1)):c("",!0)],32)):c("",!0)]))]))}}),L=Object.assign(B(V,[["__scopeId","data-v-f9b993a4"]]),{__name:"ProseImg"});export{L as default};
