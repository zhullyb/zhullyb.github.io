const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./C8TbR_wE.js","./DbskkZdU.js","./entry.Cb3Jctur.css","./BC7mfSrw.js"])))=>i.map(i=>d[i]);
import{_ as B}from"./BBO5uOiM.js";import{_ as z}from"./BiLadyVR.js";import{d as k,C as c,D as f,o as i,Q as T,E as n,y as E,G as a,I as x,_ as R,J as V,q as b,O as S,a as m,w as v,c as g,W as F,X as H,Y as G,Z as J,R as K,K as y,L as Q,H as U,F as h,M as X,N as Y}from"./DbskkZdU.js";import{a as Z,_ as tt,u as P}from"./BF8af9ZJ.js";import{_ as et}from"./BEg2yoWX.js";import{q as L,b as nt}from"./Cq7l85EN.js";const st={key:0,class:"post-navigation"},ot=["href"],at={class:"nav-content"},it={class:"nav-title"},rt=["href"],lt={class:"nav-content"},ut={class:"nav-title"},dt=k({__name:"PostNavigation",props:{prevPost:{},nextPost:{}},setup(s){return(e,t)=>s.prevPost||s.nextPost?(i(),c("nav",st,[s.prevPost?(i(),c("a",{key:0,class:"nav-button prev",href:s.prevPost.path+"/",onClick:t[0]||(t[0]=T(p=>("navigateTo"in e?e.navigateTo:n(E))(s.prevPost.path+"/"),["prevent"]))},[t[3]||(t[3]=a("div",{class:"nav-arrow"},"←",-1)),a("div",at,[t[2]||(t[2]=a("span",{class:"nav-label"},"上一篇",-1)),a("span",it,x(s.prevPost.title),1)])],8,ot)):f("",!0),s.nextPost?(i(),c("a",{key:1,class:"nav-button next",href:s.nextPost.path+"/",onClick:t[1]||(t[1]=T(p=>("navigateTo"in e?e.navigateTo:n(E))(s.nextPost.path+"/"),["prevent"]))},[a("div",lt,[t[4]||(t[4]=a("span",{class:"nav-label"},"下一篇",-1)),a("span",ut,x(s.nextPost.title),1)]),t[5]||(t[5]=a("div",{class:"nav-arrow"},"→",-1))],8,rt)):f("",!0)])):f("",!0)}}),ct=Object.assign(R(dt,[["__scopeId","data-v-f7d5c848"]]),{__name:"PostNavigation"}),_t={key:1},pt=k({__name:"Waline",setup(s){const e=F(()=>K(()=>import("./C8TbR_wE.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(r=>r.Waline)),t=V(),p=b(()=>({...S.waline,path:t.path.endsWith("/")?t.path:t.path+"/"})),{targetRef:u,isVisible:d}=Z({rootMargin:"200px",threshold:0});return(r,_)=>{const o=J;return i(),c("div",{id:"waline",ref_key:"walineRef",ref:u},[m(o,null,{default:v(()=>[n(d)?(i(),g(n(e),H(G({key:0},n(p))),null,16)):(i(),c("div",_t,"Waline Loading..."))]),_:1})],512)}}}),mt=Object.assign(pt,{__name:"Waline"}),vt={key:0,class:"english-version-notice"},ft={class:"tags"},ht=k({__name:"index",async setup(s){let e,t;const p=V(),{year:u,month:d,day:r,slug:_}=p.params,{data:o}=([e,t]=y(()=>P(`post-${u}-${d}-${r}-${_}`,()=>L("posts").path(`/${u}/${d}/${r}/${_}`).first())),e=await e,t(),e),{data:W}=([e,t]=y(()=>P(`has-en-${u}-${d}-${r}-${_}`,()=>L("posts").path(`/${u}/${d}/${r}/${_}-en`).count().then(C=>C>0))),e=await e,t(),e);if(!o.value)throw Q({statusCode:404,statusMessage:"Post not found",fatal:!0});const w=([e,t]=y(()=>P(`surround-${u}-${d}-${r}-${_}`,()=>nt("posts",o.value.path,{before:1,after:1,fields:["title","path","date"]}).order("date","DESC"))),e=await e,t(),e).data,O=b(()=>w.value?.[0]||null),D=b(()=>w.value?.[1]||null);return U({meta:[{name:"description",content:o.value?.description||""},{name:"keywords",content:o.value?.tags?.join(",")||""}],link:[{rel:"stylesheet",href:"https://s4.zstatic.net/ajax/libs/github-markdown-css/5.8.1/github-markdown.min.css"}]}),(C,l)=>{const N=B,I=z,A=ct,M=mt,j=et,q=tt;return i(),g(q,{title:n(o)?.title},{AfterMain:v(()=>[a("aside",null,[m(j,{body:n(o)?.body},null,8,["body"])])]),default:v(()=>[n(W)?(i(),c("div",vt,[l[1]||(l[1]=h(" This article has an ",-1)),m(N,{to:`${n(o)?.path}/en`},{default:v(()=>[...l[0]||(l[0]=[h("English version",-1)])]),_:1},8,["to"]),l[2]||(l[2]=h(". ",-1))])):f("",!0),n(o)?(i(),g(I,{key:1,value:n(o),tag:"article",class:"markdown-body"},null,8,["value"])):f("",!0),l[3]||(l[3]=a("hr",{class:"article-end-hr"},null,-1)),a("div",ft,[(i(!0),c(X,null,Y(n(o)?.tags,$=>(i(),g(N,{key:$,to:`/tags/${encodeURIComponent($)}`,prefetchOn:"interaction"},{default:v(()=>[h("#"+x($),1)]),_:2},1032,["to"]))),128))]),m(A,{prevPost:n(O),nextPost:n(D)},null,8,["prevPost","nextPost"]),m(M)]),_:1},8,["title"])}}}),kt=R(ht,[["__scopeId","data-v-badca94a"]]);export{kt as default};
