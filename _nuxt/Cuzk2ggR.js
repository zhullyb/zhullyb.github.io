const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./C9tAbscE.js","./D59_Ym3t.js","./entry.Cb3Jctur.css","./BW7hYVtE.js"])))=>i.map(i=>d[i]);
import{x as N,g as me,aq as Ie,X,$ as Ne,a4 as Me,Z as Pe,f as A,s as de,a5 as Re,Y as ve,N as je,G as h,a2 as Ae,ar as Be,a7 as ie,a8 as Fe,as as Ve,at as qe,au as We,av as ze,aa as Ue,e as F,aw as He,y as Qe,ax as fe,n as Ye,D as Ge,al as Je,ay as Ze,S as Xe,b as x,o as w,d as g,O as Y,P as K,c as ce,w as G,H as ee,J as I,_ as U,F as z,U as ye,L as J,h as ae,k as be,a as R,T as we,ab as Ke,a0 as De,ad as et,az as tt,V as nt,aA as at,m as st,K as le,W as ot,B as rt,R as it,I as ct,r as oe}from"./D59_Ym3t.js";import{_ as he}from"./BW7hYVtE.js";const lt={trailing:!0};function ut(e,t=25,n={}){if(n={...lt,...n},!Number.isFinite(t))throw new TypeError("Expected `wait` to be a finite number");let s,a,r=[],i,o;const f=(_,E)=>(i=dt(e,_,E),i.finally(()=>{if(i=null,n.trailing&&o&&!a){const L=f(_,o);return o=null,L}}),i),u=function(..._){return n.trailing&&(o=_),i||new Promise(E=>{const L=!a&&n.leading;clearTimeout(a),a=setTimeout(()=>{a=null;const m=n.leading?s:f(this,_);o=null;for(const v of r)v(m);r=[]},t),L?(s=f(this,_),E(s)):r.push(E)})},c=_=>{_&&(clearTimeout(_),a=null)};return u.isPending=()=>!!a,u.cancel=()=>{c(a),r=[],o=null},u.flush=()=>{if(c(a),!o||i)return;const _=o;return o=null,f(this,_)},u}async function dt(e,t,n){return await e.apply(t,n)}function Ce(...e){const t=typeof e[e.length-1]=="string"?e.pop():void 0;Se(e[0],e[1])&&e.unshift(t);let[n,s,a={}]=e,r=!1;const i=N(()=>Me(n));if(typeof i.value!="string")throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if(typeof s!="function")throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const o=me();a.server??=!0,a.default??=_t,a.getCachedData??=xe,a.lazy??=!1,a.immediate??=!0,a.deep??=Ie.deep,a.dedupe??="cancel",a._functionName,o._asyncData[i.value];function f(){const m={cause:"initial",dedupe:a.dedupe};return o._asyncData[i.value]?._init||(m.cachedData=a.getCachedData(i.value,o,{cause:"initial"}),o._asyncData[i.value]=_e(o,i.value,s,a,m.cachedData)),()=>o._asyncData[i.value].execute(m)}const u=f(),c=o._asyncData[i.value];c._deps++;const _=a.server!==!1&&o.payload.serverRendered;{let m=function(y){const C=o._asyncData[y];C?._deps&&(C._deps--,C._deps===0&&C?._off())};const v=Ae();if(v&&_&&a.immediate&&!v.sp&&(v.sp=[]),v&&!v._nuxtOnBeforeMountCbs){v._nuxtOnBeforeMountCbs=[];const y=v._nuxtOnBeforeMountCbs;Be(()=>{y.forEach(C=>{C()}),y.splice(0,y.length)}),ie(()=>y.splice(0,y.length))}const b=v&&(v._nuxtClientOnly||Fe(Ve,!1));_&&o.isHydrating&&(c.error.value||c.data.value!==void 0)?c.status.value=c.error.value?"error":"success":v&&(!b&&o.payload.serverRendered&&o.isHydrating||a.lazy)&&a.immediate?v._nuxtOnBeforeMountCbs.push(u):a.immediate&&c.status.value!=="success"&&u();const $=Pe(),p=X(i,(y,C)=>{if((y||C)&&y!==C){r=!0;const T=o._asyncData[C]?.data.value!==void 0,B=o._asyncDataPromises[C]!==void 0,j={cause:"initial",dedupe:a.dedupe};if(!o._asyncData[y]?._init){let V;C&&T?V=o._asyncData[C].data.value:(V=a.getCachedData(y,o,{cause:"initial"}),j.cachedData=V),o._asyncData[y]=_e(o,y,s,a,V)}o._asyncData[y]._deps++,C&&m(C),(a.immediate||T||B)&&o._asyncData[y].execute(j),qe(()=>{r=!1})}},{flush:"sync"}),k=a.watch?X(a.watch,()=>{r||c._execute({cause:"watch",dedupe:a.dedupe})}):()=>{};$&&Ne(()=>{p(),k(),m(i.value)})}const E={data:Z(()=>o._asyncData[i.value]?.data),pending:Z(()=>o._asyncData[i.value]?.pending),status:Z(()=>o._asyncData[i.value]?.status),error:Z(()=>o._asyncData[i.value]?.error),refresh:(...m)=>o._asyncData[i.value]?._init?o._asyncData[i.value].execute(...m):f()(),execute:(...m)=>E.refresh(...m),clear:()=>{const m=o._asyncData[i.value];if(m?._abortController)try{m._abortController.abort(new DOMException("AsyncData aborted by user.","AbortError"))}finally{m._abortController=void 0}$e(o,i.value)}},L=Promise.resolve(o._asyncDataPromises[i.value]).then(()=>E);return Object.assign(L,E),L}function Z(e){return N({get(){return e()?.value},set(t){const n=e();n&&(n.value=t)}})}function ft(...e){const t=typeof e[e.length-1]=="string"?e.pop():void 0;Se(e[0],e[1])&&e.unshift(t);const[n,s,a={}]=e;return Ce(n,s,{...a,lazy:!0},null)}function Se(e,t){return!(typeof e=="string"||typeof e=="object"&&e!==null||typeof e=="function"&&typeof t=="function")}function $e(e,t){t in e.payload.data&&(e.payload.data[t]=void 0),t in e.payload._errors&&(e.payload._errors[t]=void 0),e._asyncData[t]&&(e._asyncData[t].data.value=h(e._asyncData[t]._default()),e._asyncData[t].error.value=void 0,e._asyncData[t].status.value="idle"),t in e._asyncDataPromises&&(e._asyncDataPromises[t]=void 0)}function ht(e,t){const n={};for(const s of t)n[s]=e[s];return n}function _e(e,t,n,s,a){e.payload._errors[t]??=void 0;const r=s.getCachedData!==xe,i=n,o=s.deep?A:de,f=a!==void 0,u=e.hook("app:data:refresh",async _=>{(!_||_.includes(t))&&await c.execute({cause:"refresh:hook"})}),c={data:o(f?a:s.default()),pending:N(()=>c.status.value==="pending"),error:Re(e.payload._errors,t),status:de("idle"),execute:(..._)=>{const[E,L=void 0]=_,m=E&&L===void 0&&typeof E=="object"?E:{};if(e._asyncDataPromises[t]&&(m.dedupe??s.dedupe)==="defer")return e._asyncDataPromises[t];{const b="cachedData"in m?m.cachedData:s.getCachedData(t,e,{cause:m.cause??"refresh:manual"});if(b!==void 0)return e.payload.data[t]=c.data.value=b,c.error.value=void 0,c.status.value="success",Promise.resolve(b)}c._abortController&&c._abortController.abort(new DOMException("AsyncData request cancelled by deduplication","AbortError")),c._abortController=new AbortController,c.status.value="pending";const v=new Promise((b,$)=>{try{const p=m.timeout??s.timeout,k=pt([c._abortController?.signal,m?.signal],p);if(k.aborted){const y=k.reason;$(y instanceof Error?y:new DOMException(String(y??"Aborted"),"AbortError"));return}return k.addEventListener("abort",()=>{const y=k.reason;$(y instanceof Error?y:new DOMException(String(y??"Aborted"),"AbortError"))},{once:!0}),Promise.resolve(i(e,{signal:k})).then(b,$)}catch(p){$(p)}}).then(async b=>{let $=b;s.transform&&($=await s.transform(b)),s.pick&&($=ht($,s.pick)),e.payload.data[t]=$,c.data.value=$,c.error.value=void 0,c.status.value="success"}).catch(b=>{if(!(e._asyncDataPromises[t]&&e._asyncDataPromises[t]!==v)&&!c._abortController?.signal.aborted){if(typeof DOMException<"u"&&b instanceof DOMException&&b.name==="AbortError"){c.status.value="idle";return}c.error.value=je(b),c.data.value=h(s.default()),c.status.value="error"}}).finally(()=>{delete e._asyncDataPromises[t]});return e._asyncDataPromises[t]=v,e._asyncDataPromises[t]},_execute:ut((..._)=>c.execute(..._),0,{leading:!0}),_default:s.default,_deps:0,_init:!0,_hash:void 0,_off:()=>{u(),e._asyncData[t]?._init&&(e._asyncData[t]._init=!1),r||ve(()=>{e._asyncData[t]?._init||($e(e,t),c.execute=()=>Promise.resolve())})}};return c}const _t=()=>{},xe=(e,t,n)=>{if(t.isHydrating)return t.payload.data[e];if(n.cause!=="refresh:manual"&&n.cause!=="refresh:hook")return t.static.data[e]};function pt(e,t){const n=e.filter(r=>!!r);if(typeof t=="number"&&t>=0){const r=AbortSignal.timeout?.(t);r&&n.push(r)}if(AbortSignal.any)return AbortSignal.any(n);const s=new AbortController;for(const r of n)if(r.aborted){const i=r.reason??new DOMException("Aborted","AbortError");try{s.abort(i)}catch{s.abort()}return s.signal}const a=()=>{const i=n.find(o=>o.aborted)?.reason??new DOMException("Aborted","AbortError");try{s.abort(i)}catch{s.abort()}};for(const r of n)r.addEventListener?.("abort",a,{once:!0});return s.signal}const gt={nuxt:{}},mt=We(ze,gt);function Ee(){const e=me();return e._appConfig||=Ue(mt),e._appConfig}const ue=F({name:"NuxtLinkLocale",props:{...he.props,locale:{type:String,default:void 0,required:!1}},setup(e,{slots:t}){const n=He(),s=N(()=>{const o=e.to||e.href||"";return typeof o=="string"&&Qe(o,{acceptRelative:!0})}),a=N(()=>{const o=e.to??e.href,f=o!=null?n(o,e.locale):o;return f&&fe(e.to)&&(f.state=e.to?.state),o!=null?f:o}),r=N(()=>{if(e.external)return!0;const o=e.to||e.href||"";return fe(o)?!1:o===""||s.value}),i=()=>{const o={...e};return r.value||(o.to=a.value),delete o.href,delete o.locale,o};return()=>Ye(he,i(),t.default)}}),Oe={posts:"v3.5.0--jNdO9LxFsDcBqt249awcJwuhOrhLZh0tVULEi8PQIW0",others:"v3.5.0--9VPoLkQqIDomami-nsy49a_crqqOSGHRztYQEyP-n_Q"},vt={posts:"_content_posts",others:"_content_others",info:"_content_info"},xn={posts:{type:"page",fields:{id:"string",title:"string",body:"json",date:"string",description:"string",extension:"string",lang:"string",meta:"json",navigation:"json",path:"string",rawbody:"string",seo:"json",stem:"string",sticky:"boolean",tags:"json"}},others:{type:"page",fields:{id:"string",title:"string",body:"json",description:"string",extension:"string",lang:"string",meta:"json",navigation:"json",path:"string",seo:"json",stem:"string"}},info:{type:"data",fields:{}}},te=(e,t)=>{const n=e._conditions;return n.length>0?`(${n.join(` ${t} `)})`:""},ne=e=>{const t=[],n={_conditions:t,where(s,a,r){let i;switch(a.toUpperCase()){case"IN":case"NOT IN":if(Array.isArray(r)){const o=r.map(f=>Q(f)).join(", ");i=`"${String(s)}" ${a.toUpperCase()} (${o})`}else throw new TypeError(`Value for ${a} must be an array`);break;case"BETWEEN":case"NOT BETWEEN":if(Array.isArray(r)&&r.length===2)i=`"${String(s)}" ${a.toUpperCase()} ${Q(r[0])} AND ${Q(r[1])}`;else throw new Error(`Value for ${a} must be an array with two elements`);break;case"IS NULL":case"IS NOT NULL":i=`"${String(s)}" ${a.toUpperCase()}`;break;case"LIKE":case"NOT LIKE":i=`"${String(s)}" ${a.toUpperCase()} ${Q(r)}`;break;default:i=`"${String(s)}" ${a} ${Q(typeof r=="boolean"?Number(r):r)}`}return t.push(`${i}`),n},andWhere(s){const a=s(ne());return t.push(te(a,"AND")),n},orWhere(s){const a=s(ne());return t.push(te(a,"OR")),n}};return n},yt=(e,t)=>{const n={conditions:[],selectedFields:[],offset:0,limit:0,orderBy:[],count:{field:"",distinct:!1}},s={__params:n,andWhere(r){const i=r(ne());return n.conditions.push(te(i,"AND")),s},orWhere(r){const i=r(ne());return n.conditions.push(te(i,"OR")),s},path(r){return s.where("path","=",Ge(r))},skip(r){return n.offset=r,s},where(r,i,o){return s.andWhere(f=>f.where(String(r),i,o)),s},limit(r){return n.limit=r,s},select(...r){return r.length&&n.selectedFields.push(...r),s},order(r,i){return n.orderBy.push(`"${String(r)}" ${i}`),s},async all(){return t(e,a()).then(r=>r||[])},async first(){return t(e,a({limit:1})).then(r=>r[0]||null)},async count(r="*",i=!1){return t(e,a({count:{field:String(r),distinct:i}})).then(o=>o[0].count)}};function a(r={}){let i="SELECT ";if(r?.count)i+=`COUNT(${r.count.distinct?"DISTINCT ":""}${r.count.field}) as count`;else{const f=Array.from(new Set(n.selectedFields));i+=f.length>0?f.map(u=>`"${String(u)}"`).join(", "):"*"}i+=` FROM ${vt[String(e)]}`,n.conditions.length>0&&(i+=` WHERE ${n.conditions.join(" AND ")}`),n.orderBy.length>0?i+=` ORDER BY ${n.orderBy.join(", ")}`:i+=" ORDER BY stem ASC";const o=r?.limit||n.limit;return o>0&&(n.offset>0?i+=` LIMIT ${o} OFFSET ${n.offset}`:i+=` LIMIT ${o}`),i}return s};function Q(e){return`'${String(e).replace(/'/g,"''")}'`}function pe(e){return t=>(t=t||{},(e||[]).filter(n=>typeof t[n]<"u").reduce((n,s)=>Object.assign(n,{[s]:t[s]}),{}))}async function bt(e,t=[]){e.__params?.orderBy?.length||(e=e.order("stem","ASC"));const s=await e.orWhere(u=>u.where("navigation","<>","false").where("navigation","IS NULL")).select("navigation","stem","path","title","meta",...t||[]).all(),{contents:a,configs:r}=s.reduce((u,c)=>{if(String(c.stem).split("/").pop()===".navigation"){c.title=c.title?.toLowerCase()==="navigation"?"":c.title;const _=c.path.split("/").slice(0,-1).join("/")||"/";u.configs[_]={...c,...c.body}}else u.contents.push(c);return u},{configs:{},contents:[]}),i=u=>({...pe(["title",...t])(u),...u.meta,...ge(u?.navigation)?u.navigation:{}}),o=u=>({...pe(["title",...t])(u),...ge(u?.navigation)?u.navigation:{}}),f=a.reduce((u,c)=>{const _=c.path.substring(1).split("/"),E=c.stem.split("/"),L=!!E[E.length-1]?.match(/([1-9]\d*\.)?index/g),m=p=>({title:p.title,path:p.path,stem:p.stem,children:[],...o(p)}),v=m(c);if(L){const p=r[v.path];if(typeof p?.navigation<"u"&&p?.navigation===!1)return u;if(c.path!=="/"){const k=m(c);v.children.push(k)}p&&Object.assign(v,i(p))}if(_.length===1){const p=u.find(k=>k.path===v.path&&k.page===!1);return L&&p?Object.assign(p,{page:void 0,children:[...v.children||[],...p.children||[]]}):u.push(v),u}const b=_.slice(0,-1).reduce((p,k,y)=>{const C="/"+_.slice(0,y+1).join("/"),T=r[C];if(typeof T?.navigation<"u"&&T.navigation===!1)return[];let B=p.find(j=>j.path===C);if(!B){const j=T?i(T):{};B={...j,title:j.title||wt(k),path:C,stem:E.slice(0,y+1).join("/"),children:[],page:!1},p.push(B)}return B.children},u),$=b.find(p=>p.path===v.path&&p.page===!1);return $?Object.assign($,{...v,page:void 0,children:[...v.children||[],...$.children||[]]}):b.push(v),u},[]);return Le(f)}function Le(e){const t=e;for(const n of t)n.children?.length?Le(n.children):delete n.children;return e}function ge(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}const wt=e=>e.split(/[\s-]/g).map(Je).join(" ");async function Dt(e,t,n){const{before:s=1,after:a=1,fields:r=[]}=n||{},i=await bt(e,r),o=ke(i),f=o.findIndex(_=>_.path===t),u=f===-1?[]:o.slice(f-s,f),c=f===-1?[]:o.slice(f+1,f+a+1);return[...Array.from({length:s}).fill(null).concat(u).slice(u.length),...c.concat(Array.from({length:a}).fill(null)).slice(0,a)]}function ke(e){return e.flatMap(n=>{const s=n.children?ke(n.children):[];return n.page===!1||s.length&&s.find(a=>a.path===n.path)?s:[{...n,children:void 0},...s]})}async function En(e,t){return await $fetch(`/__nuxt_content/${t}/sql_dump.txt`,{context:{},responseType:"text",headers:{"content-type":"text/plain"},query:{v:Oe[String(t)],t:void 0}})}async function Ct(e,t,n){return await $fetch(`/__nuxt_content/${t}/query`,{context:e?{cloudflare:e.context.cloudflare}:{},headers:{"content-type":"application/json",...e?.node?.req?.headers?.cookie?{cookie:e.node.req.headers.cookie}:{}},query:{v:Oe[String(t)],t:void 0},method:"POST",body:{sql:n}})}const re=e=>{const t=Ze()?.ssrContext?.event;return yt(e,(n,s)=>St(t,n,s))};function On(e,t,n){return xt(e,s=>Dt(s,t,n))}async function St(e,t,n){return window.WebAssembly?$t(t,n):Ct(e,String(t),n)}async function $t(e,t){return await Xe(()=>import("./C9tAbscE.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(s=>s.loadDatabaseAdapter(e)).then(s=>s.all(t))}function xt(e,t){const n=re(e),s={where(a,r,i){return n.where(String(a),r,i),s},andWhere(a){return n.andWhere(a),s},orWhere(a){return n.orWhere(a),s},order(a,r){return n.order(String(a),r),s},then(a,r){return t(n).then(a,r)},catch(a){return this.then(void 0,a)},finally(a){return this.then(void 0,void 0).finally(a)},get[Symbol.toStringTag](){return"Promise"}};return s}const Et={class:"pc-nav"},Ot={class:"container"},Lt=F({__name:"HeaderNav",props:{navItems:{}},emits:["toggle"],setup(e,{emit:t}){const n=t,s=a=>{n("toggle",a)};return(a,r)=>{const i=ue;return w(),x("nav",null,[g("div",Et,[(w(!0),x(Y,null,K(e.navItems,o=>(w(),ce(i,{key:o.link,to:o.link},{default:G(()=>[ee(I(a.$t(o.text)),1)]),_:2},1032,["to"]))),128))]),g("div",{class:"mobile-nav",onClick:s},[g("div",Ot,[(w(),x(Y,null,K(3,o=>g("div",{class:"mobile-nav-item",key:o})),64))])])])}}}),kt=Object.assign(U(Lt,[["__scopeId","data-v-c5a90b55"]]),{__name:"HeaderNav"}),Tt={class:"mask"},It={class:"title-container"},Nt={class:"title"},Mt={key:0},Pt=F({__name:"Banner",props:{title:{},slogan:{},background:{}},setup(e){const t=e,n=N(()=>({...t.background}));return(s,a)=>(w(),x("div",{class:"banner",style:ye(h(n))},[g("div",Tt,[g("div",It,[g("div",Nt,[g("h1",null,I(e.title),1),e.slogan?(w(),x("p",Mt,I(e.slogan),1)):z("",!0)])])])],4))}}),Rt=Object.assign(U(Pt,[["__scopeId","data-v-a96b3d82"]]),{__name:"Banner"}),jt={class:"search-overlay__panel"},At={class:"search-overlay__header"},Bt=["placeholder"],Ft=["aria-label"],Vt={key:0,class:"search-overlay__state"},qt={key:1,class:"search-overlay__body"},Wt={key:0,class:"search-overlay__state"},zt={key:1,class:"search-overlay__state"},Ut={key:2,class:"search-overlay__count"},Ht={key:3,class:"search-overlay__list"},Qt={class:"search-overlay__item-title"},Yt={class:"search-overlay__item-meta"},Gt={key:0},Jt={class:"search-overlay__item-snippet"},Zt=50,Xt=F({__name:"SearchOverlay",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,s=t,{t:a,locale:r}=J(),i=N(()=>r.value.startsWith("zh")),o=A(""),f=A(null),u=at(),c=A(!1),_=async()=>{const d=await u("/search/sections.json");if(Array.isArray(d))return d;if(typeof d=="string")try{return JSON.parse(d)}catch(D){console.warn("[search] Failed to parse sections payload",D)}return[]},{data:E,pending:L,refresh:m}=ft("posts-search-sections",_,{server:!1,immediate:!1,default:()=>[]}),v=N(()=>E.value??[]),b=N(()=>{const d=o.value.trim().toLowerCase();if(!d)return[];const D=Array.from(new Set(d.split(/\s+/).filter(Boolean)));if(!D.length)return[];const M=v.value.map(l=>{const S=(l.content??"").replace(/\s+/g," ").trim();if(!S)return null;const q=k(l),H=y(l),se=`${q} ${H} ${S}`.toLowerCase();if(!D.every(P=>se.includes(P)))return null;let W=0;return D.forEach(P=>{q.toLowerCase().includes(P)?W+=4:H.toLowerCase().includes(P)?W+=3:W+=1}),{id:l.id,baseId:C(l.id),documentTitle:q,sectionTitle:H,snippet:j(S,D),score:W}}).filter(l=>!!l).sort((l,S)=>S.score-l.score);if(!M.length)return[];const O=new Map;return M.forEach(l=>{const S=O.get(l.baseId);if(!S){O.set(l.baseId,{id:l.id,baseId:l.baseId,documentTitle:l.documentTitle,sectionTitles:l.sectionTitle?[l.sectionTitle]:[],snippets:[l.snippet],score:l.score,matchCount:1,bestScore:l.score});return}S.matchCount+=1,S.score+=l.score,S.snippets.push(l.snippet),l.sectionTitle&&!S.sectionTitles.includes(l.sectionTitle)&&S.sectionTitles.length<3&&S.sectionTitles.push(l.sectionTitle),l.score>S.bestScore&&(S.bestScore=l.score,S.id=l.id)}),Array.from(O.values()).map(l=>({id:l.id,documentTitle:l.documentTitle,sectionLabel:B(l.sectionTitles,l.matchCount),snippet:T(l.snippets),score:l.score,matchCount:l.matchCount})).sort((l,S)=>S.score-l.score).slice(0,Zt)}),$=d=>{n.modelValue&&d.key==="Escape"&&(d.preventDefault(),p())};X(()=>n.modelValue,d=>{d?(c.value||(c.value=!0,m()),document.body.style.setProperty("overflow","hidden"),ve(()=>{o.value="",f.value?.focus()})):document.body.style.removeProperty("overflow")}),ae(()=>{window.addEventListener("keydown",$)}),be(()=>{window.removeEventListener("keydown",$),document.body.style.removeProperty("overflow")});function p(){s("update:modelValue",!1)}function k(d){return d.titles?.[0]??d.title??a("searchOverlay.untitled")}function y(d){return d.titles?.length?d.titles.slice(1).filter(Boolean).at(-1)??d.title??"":d.title??""}function C(d){const D=d.indexOf("#");return D===-1?d:d.slice(0,D)}function T(d){const D=[];if(d.forEach(O=>{const l=O.trim();l&&(D.includes(l)||D.push(l))}),!D.length)return"";const M=D.slice(0,2).join(" … ");return M.length>240?`${M.slice(0,240)}…`:M}function B(d,D){if(!D)return"";if(D===1)return d[0]??"";if(!d.length)return"";const M=i.value?"、":", ",O=d.join(M),l=a("searchOverlay.sectionMatches",{sections:O}),S=D>d.length?a("searchOverlay.moreSuffix"):"";return`${l}${S}`}function j(d,D){if(!d)return"";const M=d.toLowerCase(),O=D.map(P=>M.indexOf(P)).filter(P=>P>=0).sort((P,Te)=>P-Te)[0];if(O===void 0)return V(d);const l=60,S=Math.max(0,O-l),q=Math.min(d.length,O+l),H=d.slice(S,q),se=S>0?"…":"",W=q<d.length?"…":"";return`${se}${H}${W}`}function V(d){return d.length>140?`${d.slice(0,140)}…`:d}return(d,D)=>{const M=ue;return w(),ce(nt,{to:"body"},[R(tt,{name:"search-overlay"},{default:G(()=>[e.modelValue?(w(),x("div",{key:0,class:"search-overlay",role:"dialog","aria-modal":"true",onMousedown:we(p,["self"])},[g("div",jt,[g("div",At,[Ke(g("input",{ref_key:"inputRef",ref:f,type:"search","onUpdate:modelValue":D[0]||(D[0]=O=>De(o)?o.value=O:null),class:"search-overlay__input",placeholder:h(a)("searchOverlay.placeholder")},null,8,Bt),[[et,h(o)]]),g("button",{class:"search-overlay__close",type:"button",onClick:p,"aria-label":h(a)("searchOverlay.closeLabel")}," × ",8,Ft)]),h(L)?(w(),x("div",Vt,I(h(a)("searchOverlay.indexing")),1)):(w(),x("div",qt,[h(o).trim()?h(b).length?(w(),x("div",Ut,I(h(a)("searchOverlay.resultsCount",{count:h(b).length})),1)):(w(),x("p",zt,I(h(a)("searchOverlay.noResults")),1)):(w(),x("p",Wt,I(h(a)("searchOverlay.startTyping")),1)),h(b).length?(w(),x("ul",Ht,[(w(!0),x(Y,null,K(h(b),O=>(w(),x("li",{key:O.id,class:"search-overlay__item"},[R(M,{to:O.id,class:"search-overlay__link",onClick:p},{default:G(()=>[g("h3",Qt,I(O.documentTitle),1),g("p",Yt,[ee(I(h(a)("searchOverlay.matchCount",{count:O.matchCount}))+" ",1),O.sectionLabel?(w(),x("span",Gt," · "+I(O.sectionLabel),1)):z("",!0)]),g("p",Jt,I(O.snippet),1)]),_:2},1032,["to"])]))),128))])):z("",!0)]))])],32)):z("",!0)]),_:1})])}}}),Kt=Object.assign(U(Xt,[["__scopeId","data-v-63592d71"]]),{__name:"SearchOverlay"}),en={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function tn(e,t){return w(),x("svg",en,[...t[0]||(t[0]=[g("path",{fill:"currentColor",d:"M15.5 14h-.79l-.28-.27A6.47 6.47 0 0 0 16 9.5A6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5S14 7.01 14 9.5S11.99 14 9.5 14"},null,-1)])])}const nn=st({name:"ic-baseline-search",render:tn}),an=()=>{const{locale:e}=J(),t=le(),n=ot();return{toggleLang:async()=>{const a=e.value==="zh"?"en":"zh";if(t.params.year&&t.params.month&&t.params.day&&t.params.slug){const{year:i,month:o,day:f,slug:u}=t.params,c=`/${i}/${o}/${f}/${u}`;try{if(await re("posts").path(c).where("lang","=",a==="zh"?"zh-CN":"en").count()===0){alert(a==="en"?"English version not available":"暂无中文版本");return}}catch(_){console.error("Failed to check article existence:",_)}}if(t.params.tag){const i=decodeURIComponent(t.params.tag);try{if(await re("posts").where("lang","=",a==="zh"?"zh-CN":"en").where("tags","LIKE",`%"${i}"%`).count()===0){alert(a==="en"?"No articles with this tag in English":"该标签下暂无中文文章");return}}catch(o){console.error("Failed to check tag existence:",o)}}let r=n(t.fullPath,a);t.path.includes("/archives/page/")?r=n("/archives",a):t.path.startsWith(n("/page/",e.value))&&(r=n("/",a)),rt(r.endsWith("/")?r:r+"/")}}};function sn(){const e=A(!1);let t=!1;const n=()=>{t||(window.requestAnimationFrame(()=>{e.value=window.scrollY>0,t=!1}),t=!0)};return ae(()=>{n(),window.addEventListener("scroll",n,{passive:!0})}),ie(()=>{window.removeEventListener("scroll",n)}),{isScrolled:e}}function on(){const e=A(!1),t=s=>{s.stopPropagation(),e.value=!e.value},n=()=>{e.value=!1};return ae(()=>{document.addEventListener("click",n)}),ie(()=>{document.removeEventListener("click",n)}),{showMobileMenu:e,toggleMobileMenu:t,closeMobileMenu:n}}const rn={class:"header-container"},cn={class:"header"},ln={class:"header-right"},un={class:"lang-switch__label"},dn={class:"search-trigger__label"},fn={key:0,class:"mobile-menu-dropdown"},hn=F({__name:"Header",props:{title:{default:""},background:{}},setup(e){const{t}=J(),n=Ee(),s=le(),{locale:a}=J(),{toggleLang:r}=an(),i=N(()=>s.path==="/"||s.path.startsWith("/page/")?n.slogan:null),o=e,f=N(()=>o.title||t("title")),{isScrolled:u}=sn(),{showMobileMenu:c,toggleMobileMenu:_,closeMobileMenu:E}=on(),L=A(!1),m=()=>{E(),L.value=!0};return X(()=>s.fullPath,()=>{L.value=!1}),(v,b)=>{const $=ue,p=kt,k=nn,y=Rt,C=Kt;return w(),x(Y,null,[g("header",{class:it({scrolled:h(u),"show-mobile-menu":h(c)})},[g("div",rn,[g("div",cn,[R($,{to:"/",class:"header-title"},{default:G(()=>[ee(I(h(t)("title")),1)]),_:1}),g("div",ln,[R(p,{"nav-items":h(n).nav.items,onToggle:h(_)},null,8,["nav-items","onToggle"]),g("button",{type:"button",class:"lang-switch",onClick:b[0]||(b[0]=(...T)=>h(r)&&h(r)(...T)),"aria-label":"Switch Language"},[g("span",un,I(h(a)==="zh"?"En":"中"),1)]),g("button",{type:"button",class:"search-trigger pc",onClick:m,"aria-label":"Search"},[R(k),g("span",dn,I(h(t)("search")),1)])])])]),h(c)?(w(),x("div",fn,[(w(!0),x(Y,null,K(h(n).nav.items,T=>(w(),ce($,{key:T.link,to:T.link,onClick:h(E)},{default:G(()=>[ee(I(h(t)(T.text)),1)]),_:2},1032,["to","onClick"]))),128)),g("a",{onClick:we(m,["prevent"])},[R(k)])])):z("",!0)],2),R(y,{background:e.background,title:h(f),slogan:h(i)},null,8,["background","title","slogan"]),R(C,{modelValue:h(L),"onUpdate:modelValue":b[1]||(b[1]=T=>De(L)?L.value=T:null)},null,8,["modelValue"])],64)}}}),_n=Object.assign(U(hn,[["__scopeId","data-v-ed43282e"]]),{__name:"Header"}),pn=e=>{const t=A(null),n=A(!1);return ae(()=>{if(!t.value)return;const s=new IntersectionObserver(a=>{a.forEach(r=>{r.isIntersecting&&!n.value&&(n.value=!0,s.disconnect())})},{rootMargin:e?.rootMargin??"100px",threshold:e?.threshold??.1});s.observe(t.value),be(()=>{s.disconnect()})}),{targetRef:t,isVisible:n}},gn={class:"footer-content"},mn={key:0,title:"NodeSupport Sponsorship",frameborder:"0",src:"https://support.nodeget.com/page/promotion?id=61",style:{"border-radius":"8px",height:"246px",transform:"scale(0.8)","transform-origin":"top center"}},vn=F({__name:"Footer",props:{background:{}},setup(e){const t=e,n=N(()=>({minHeight:"120px",...t.background})),{targetRef:s,isVisible:a}=pn({rootMargin:"100px",threshold:.1});return(r,i)=>(w(),x("footer",{ref_key:"footerRef",ref:s,style:ye(h(n))},[i[1]||(i[1]=g("div",{class:"footer-mask"},null,-1)),g("div",gn,[i[0]||(i[0]=g("div",null,"©2020 - 2025 By zhullyb",-1)),h(a)?(w(),x("iframe",mn)):z("",!0)])],4))}}),yn=Object.assign(U(vn,[["__scopeId","data-v-71f6d0ea"]]),{__name:"Footer"}),bn={class:"content-wrapper"},wn={class:"before-main side"},Dn={class:"after-main side"},Cn=F({__name:"DefaultLayout",props:{title:{default:""}},setup(e){const{t}=J(),n=le(),s=e,a=Ee(),{data:r}=Ce("randomIndex"+n.path,async()=>Math.floor(Math.random()*a.backgrounds.length),"$RRY2fi8_v6"),i=N(()=>a.backgrounds[r.value??0]);return ct({title:s.title||t("title")}),(o,f)=>{const u=_n,c=yn;return w(),x("div",null,[R(u,{background:h(i),title:e.title},null,8,["background","title"]),g("div",bn,[g("div",wn,[oe(o.$slots,"BeforeMain",{},void 0,!0)]),g("main",null,[oe(o.$slots,"default",{},void 0,!0)]),g("div",Dn,[oe(o.$slots,"AfterMain",{},void 0,!0)])]),R(c,{background:h(i)},null,8,["background"])])}}}),Ln=Object.assign(U(Cn,[["__scopeId","data-v-ccd9c1ba"]]),{__name:"DefaultLayout"});export{Ln as _,ue as a,Oe as b,xn as c,pn as d,On as e,En as f,re as q,vt as t,Ce as u};
