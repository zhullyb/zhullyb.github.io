const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CLUcdTz0.js","./BAC0a9_w.js","./entry.0KQ4aIgo.css","./BC7mfSrw.js"])))=>i.map(i=>d[i]);
import{_ as F}from"./pNEU20kV.js";import{_ as U}from"./CAXn6T7G.js";import{a as Y,d as G,_ as J,u as O,q as K,e as Q}from"./CoRo_hBB.js";import{m as T,b as h,o as u,d as _,e as j,L as B,F as L,c as $,w as k,a as w,J as b,G as c,_ as M,K as H,x as N,Q as X,ag as Z,ah as tt,ai as et,aj as nt,S as st,f as at,h as ot,k as rt,O as S,P as V,R as lt,T as it,W as ct,M as R,N as ut,I as _t,H as dt}from"./BAC0a9_w.js";import{_ as ft}from"./B_dFQiUO.js";const pt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function mt(t,n){return u(),h("svg",pt,[...n[0]||(n[0]=[_("path",{fill:"currentColor",d:"M8.025 22L6.25 20.225L14.475 12L6.25 3.775L8.025 2l10 10z"},null,-1)])])}const vt=T({name:"material-symbols-arrow-forward-ios",render:mt}),ht={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function gt(t,n){return u(),h("svg",ht,[...n[0]||(n[0]=[_("path",{fill:"currentColor",d:"M10 22L0 12L10 2l1.775 1.775L3.55 12l8.225 8.225z"},null,-1)])])}const yt=T({name:"material-symbols-arrow-back-ios",render:gt}),xt={key:0,class:"post-navigation"},wt={class:"nav-content"},bt={class:"nav-label"},$t={class:"nav-title"},kt={class:"nav-content"},Pt={class:"nav-label"},Ct={class:"nav-title"},It=j({__name:"PostNavigation",props:{prevPost:{},nextPost:{}},setup(t){const{t:n}=B();return(r,l)=>{const e=yt,p=Y,d=vt;return t.prevPost||t.nextPost?(u(),h("nav",xt,[t.prevPost?(u(),$(p,{key:0,class:"nav-button prev",to:t.prevPost.path},{default:k(()=>[w(e,{class:"nav-arrow"}),_("div",wt,[_("span",bt,b(c(n)("postNavigation.prev")),1),_("span",$t,b(t.prevPost.title),1)])]),_:1},8,["to"])):L("",!0),t.nextPost?(u(),$(p,{key:1,class:"nav-button next",to:t.nextPost.path},{default:k(()=>[w(d,{class:"nav-arrow"}),_("div",kt,[_("span",Pt,b(c(n)("postNavigation.next")),1),_("span",Ct,b(t.nextPost.title),1)])]),_:1},8,["to"])):L("",!0)])):L("",!0)}}}),At=Object.assign(M(It,[["__scopeId","data-v-a35c130b"]]),{__name:"PostNavigation"}),Lt={key:1},Nt=j({__name:"Waline",setup(t){const n=Z(()=>st(()=>import("./CLUcdTz0.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(s=>s.Waline)),r=H(),{locale:l}=B(),e=N(()=>({...X.waline,lang:l.value==="zh"?"zh-CN":"en",path:(r.path.endsWith("/")?r.path:r.path+"/").replace("/en/","/")})),{targetRef:p,isVisible:d}=G({rootMargin:"200px",threshold:0});return(s,a)=>{const o=nt;return u(),h("div",{id:"waline",ref_key:"walineRef",ref:p},[w(o,null,{default:k(()=>[c(d)?(u(),$(c(n),tt(et({key:0},c(e))),null,16)):(u(),h("div",Lt,"Waline Loading..."))]),_:1})],512)}}}),Et=Object.assign(Nt,{__name:"Waline"});function E(t){return t?typeof t=="string"?t:Array.isArray(t)?t.length>=2&&typeof t[0]=="string"&&typeof t[1]=="object"?t.slice(2).map(E).join(""):t.map(E).join(""):t.value&&typeof t.value=="string"?t.value:t.children&&Array.isArray(t.children)?t.children.map(E).join(""):"":""}function jt(t){if(!t)return[];const n=[],r=t.value||t;function l(e){if(e)if(Array.isArray(e))if(e.length>=2&&typeof e[0]=="string"&&typeof e[1]=="object"){const p=e[0],d=e[1],s=e.slice(2),a=p.match(/^h([1-6])$/);if(a?.[1]&&d.id){const o=parseInt(a[1]),i=s.map(E).join("").trim();i&&n.push({id:d.id,text:i,level:o})}s.forEach(l)}else e.forEach(l);else typeof e=="object"&&(e.children&&Array.isArray(e.children)&&e.children.forEach(l),e.value&&Array.isArray(e.value)&&e.value.forEach(l))}return l(r),n}const zt={key:0,class:"toc"},Bt={class:"toc-list"},Mt=["href","onClick"],Ot=j({__name:"TableOfContents",props:{body:{}},setup(t){const n=t,r=N(()=>jt(n.body)),l=at(""),e=s=>{if(!l.value)return!1;const a=r.value.findIndex(m=>m.id===l.value),o=r.value.findIndex(m=>m.id===s.id);if(a===-1||o===-1)return!1;const i=s;if(i.id===l.value||i.level<=2)return!1;const f=m=>{const v=[],g=r.value[m];if(!g)return v;let y=g.level,A=m-1;for(;A>=0;){const x=r.value[A];if(!x||x.level<y&&(v.push(x.id),y=x.level,x.level<=1))break;A--}return v},P=m=>{const v=r.value[m];if(!v)return null;let g=m-1;for(;g>=0;){const y=r.value[g];if(!y)break;if(y.level<v.level)return y.id;g--}return null},C=f(a);if(C.includes(i.id))return!1;const I=P(o);return!(!I||I===l.value||C.includes(I))},p=s=>{const a=document.getElementById(s);a&&(a.scrollIntoView({behavior:"smooth",block:"start"}),window.history.pushState(null,"",`#${s}`))},d=()=>{const s=r.value.map(i=>({id:i.id,element:document.getElementById(i.id)})).filter(i=>i.element!==null);if(s.length===0)return;const a=window.scrollY;let o=s[0];for(const i of s)if(i.element.getBoundingClientRect().top+a<=a+100)o=i;else break;o&&(l.value=o.id)};return ot(()=>{d();let s=!1;const a=()=>{s||(window.requestAnimationFrame(()=>{d(),s=!1}),s=!0)};window.addEventListener("scroll",a,{passive:!0}),rt(()=>{window.removeEventListener("scroll",a)})}),(s,a)=>c(r).length>0?(u(),h("nav",zt,[a[0]||(a[0]=_("div",{class:"toc-title"},"目录",-1)),_("ul",Bt,[(u(!0),h(S,null,V(c(r),o=>(u(),h("li",{key:o.id,class:lt(["toc-item",`toc-level-${o.level}`,{active:c(l)===o.id,collapsed:e(o)}])},[_("a",{href:`#${o.id}`,onClick:it(i=>p(o.id),["prevent"])},b(o.text),9,Mt)],2))),128))])])):L("",!0)}}),Rt=Object.assign(M(Ot,[["__scopeId","data-v-ae70bcd1"]]),{__name:"TableOfContents"}),Tt={class:"tags"},Ht=j({__name:"index",async setup(t){let n,r;const l=H(),{locale:e}=B(),p=ct(),{year:d,month:s,day:a,slug:o}=l.params,i=N(()=>`/${d}/${s}/${a}/${o}`),{data:f}=([n,r]=R(()=>O(`post-${d}-${s}-${a}-${o}-${e.value}`,()=>K("posts").path(i.value).where("lang","=",e.value==="zh"?"zh-CN":"en").first())),n=await n,r(),n);if(!f.value)throw ut({statusCode:404,statusMessage:"Post not found",fatal:!0});const P=([n,r]=R(()=>O(`surround-${d}-${s}-${a}-${o}-${e.value}`,()=>Q("posts",f.value.path,{before:1,after:1,fields:["title","path","date","lang"]}).where("lang","=",e.value==="zh"?"zh-CN":"en").order("date","DESC"))),n=await n,r(),n).data,C=N(()=>P.value?.[0]||null),I=N(()=>P.value?.[1]||null);return _t({meta:[{name:"description",content:f.value?.description||""},{name:"keywords",content:f.value?.tags?.join(",")||""}],link:[{rel:"stylesheet",href:"https://s4.zstatic.net/ajax/libs/github-markdown-css/5.8.1/github-markdown.min.css"}]}),(m,v)=>{const g=F,y=ft,A=U,x=At,W=Et,D=Rt,q=J;return u(),$(q,{title:c(f)?.title},{AfterMain:k(()=>[_("aside",null,[w(D,{body:c(f)?.body},null,8,["body"])])]),default:k(()=>[c(f)?(u(),$(g,{key:0,value:c(f),tag:"article",class:"markdown-body"},null,8,["value"])):L("",!0),v[0]||(v[0]=_("hr",{class:"article-end-hr"},null,-1)),_("div",Tt,[w(y),(u(!0),h(S,null,V(c(f)?.tags,z=>(u(),$(A,{key:z,to:`${c(p)("/tags")}/${encodeURIComponent(z)}`,prefetchOn:"interaction"},{default:k(()=>[dt("#"+b(z),1)]),_:2},1032,["to"]))),128))]),w(x,{prevPost:c(C),nextPost:c(I)},null,8,["prevPost","nextPost"]),w(W)]),_:1},8,["title"])}}}),Ft=M(Ht,[["__scopeId","data-v-11c89a0f"]]);export{Ft as default};
