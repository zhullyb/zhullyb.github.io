import{u as p,q as m,a as P}from"./BZ8FGue4.js";import{_ as y}from"./XdZaM6-K.js";import{d as A,J as N,K as k,q as L,L as d,M as E,C as r,o as c,a as g,N as I,O as M,G as h,I as v,w as $,F as q,E as l,_ as z}from"./BxhZ4jnB.js";const B={class:"date"},i=10,D=A({__name:"ArchiveArticleContainer",async setup(O){let t,e;const u=N(),{locale:n}=k(),a=u.params.page&&parseInt(u.params.page)||1,_=L(()=>n.value==="zh"?"zh-CN":"en"),o=([t,e]=d(()=>p(`index-page-${a}-${n.value}`,()=>m("posts").where("lang","=",_.value).order("date","DESC").skip((a-1)*i).limit(i).select("title","date","path","tags").all())),t=await t,e(),t).data,f=([t,e]=d(()=>p(`posts-nums-total-${n.value}`,()=>m("posts").where("lang","=",_.value).count())),t=await t,e(),t).data,x=Math.max(1,Math.ceil((f.value??0)/i));if(o.value&&o.value.length===0&&a>1)throw E({statusCode:404,statusMessage:"Page not found",fatal:!0});return(S,V)=>{const C=P,w=y;return c(),r("div",null,[(c(!0),r(I,null,M(l(o),s=>(c(),r("div",{key:s.path,class:"post-item"},[h("p",B,v(s.date?.split(" ")[0]),1),h("p",null,[g(C,{to:s.path,prefetchOn:"interaction"},{default:$(()=>[q(v(s.title),1)]),_:2},1032,["to"])])]))),128)),g(w,{currentPage:l(a),totalPages:l(x),urlPrefix:"/archives"},null,8,["currentPage","totalPages"])])}}}),G=Object.assign(z(D,[["__scopeId","data-v-27511661"]]),{__name:"ArchiveArticleContainer"});export{G as _};
