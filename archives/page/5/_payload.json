[{"data":1,"prerenderedAt":2913},["ShallowReactive",2],{"randomIndex/archives/page/5/":3,"index-page-5-zh":4,"language-switch-/archives/page/5/-en":2911,"posts-nums-total-zh":2912},0,[5,182,301,671,1017,1671,1948,2177,2443,2709],{"title":6,"date":7,"path":8,"tags":9,"body":16},"使用动态公网 ip + ddns 实现 rustdesk 的 ip 直连","2024-06-30 18:15:00","/2024/06/30/dynamic-public-ip-and-ddns-for-rustdesk",[10,11,12,13,14,15],"Linux","OpenSource Project","Shell Script","Rustdesk","Router","HomeServer",{"type":17,"value":18,"toc":175},"minimark",[19,23,26,29,34,37,40,47,50,67,128,131,134,137,140,145,148,153,160,163,166,171],[20,21,22],"p",{},"最近跟风整了一台 n100 的迷你主机装了个 Archlinux 当 HomeServer，搭配上了显卡欺骗器，平常一直远程使用，因此需要实现稳定的远程桌面连接。开源软件 Rustdesk 本身对 Linux 的适配尚可，可惜官方提供的服务器位于境外，且前一阵子因为诈骗相关的风波使得官方对连接做出了一些限制，应当使用自建服务器或者 ip 直连。",[20,24,25],{},"单从网络安全的角度出发，最佳实践应该是通过 wireguard 或者别的协议先接入局域网，然后使用局域网内的 ip 直连，这是最稳妥的，但我有点懒，而且我可能会在多个设备上都有控制 HomeServer 的需求，给所有设备配置 wireguard 是一件挺麻烦的事情，因此我决定放弃安全性，直接公网裸奔。",[20,27,28],{},"在学校宿舍的电信宽带提供了一个动态公网 ip，因此只需要设置好 ddns 和端口转发就可以拿到一个固定的 domain + port 提供给 rustdesk 直连。",[30,31,33],"h2",{"id":32},"在被控端-rustdesk-允许直连访问","在被控端 Rustdesk 允许直连访问",[20,35,36],{},"在「设置」中的「安全」一栏选择「解锁安全设置」，拉到最下面的「安全」栏，勾选「允许 IP 直接访问」，并选择一个端口，范围在 1000 ~35535 之间且不要被本地的其他程序占用，Rustdesk 的默认值为 21118。",[20,38,39],{},"可以直接在局域网内的另一台设备进行测试，直接在 Rustdesk 中输入被控端的局域网 ip 和刚刚设置的端口，看看能不能访问得通，如果不行可能需要排查一下被控端访问墙设置的问题。",[20,41,42],{},[43,44],"img",{"alt":45,"src":46},"","https://static.031130.xyz/uploads/2024/08/12/66814701cf7ce.webp",[30,48,49],{"id":49},"ddns",[20,51,52,53,60,61,66],{},"由于我的域名是交给 cloudflare 进行解析的，就找了个",[54,55,59],"a",{"href":56,"rel":57},"https://github.com/yulewang/cloudflare-api-v4-ddns/",[58],"nofollow","支持 cloudflare 的 ddns 脚本","，大致的部署过程可以参考 ",[54,62,65],{"href":63,"rel":64},"https://www.rclogs.com/2023/06/%25e8%2587%25aa%25e5%25bb%25ba%25e5%259f%25ba%25e4%25ba%258ecloudflare%25e7%259a%2584ddns",[58],"「自建基于Cloudflare的DDNS」","，不过我小改了一下脚本中获取公网 ipv4 的方式，直接 ssh 到路由器上获取当前的 ipv4 地址，不依赖外部的服务。",[68,69,73],"pre",{"className":70,"code":71,"language":72,"meta":45,"style":45},"language-bash shiki shiki-themes one-light one-dark-pro","WAN_IP=`ssh -o HostKeyAlgorithms=+ssh-rsa -o PubkeyAcceptedKeyTypes=+ssh-rsa root@192.168.1.1 'ip -br a' | grep pppoe-wan | awk '{print $3}'`\n","bash",[74,75,76],"code",{"__ignoreMap":45},[77,78,81,85,89,93,97,101,104,107,110,114,117,120,122,125],"span",{"class":79,"line":80},"line",1,[77,82,84],{"class":83},"sJa8x","WAN_IP",[77,86,88],{"class":87},"sknuh","=",[77,90,92],{"class":91},"sDhpE","`",[77,94,96],{"class":95},"sAdtL","ssh",[77,98,100],{"class":99},"sAGMh"," -o",[77,102,103],{"class":91}," HostKeyAlgorithms=+ssh-rsa ",[77,105,106],{"class":99},"-o",[77,108,109],{"class":91}," PubkeyAcceptedKeyTypes=+ssh-rsa root@192.168.1.1 'ip -br a' ",[77,111,113],{"class":112},"s5ixo","|",[77,115,116],{"class":95}," grep",[77,118,119],{"class":91}," pppoe-wan ",[77,121,113],{"class":112},[77,123,124],{"class":95}," awk",[77,126,127],{"class":91}," '{print $3}'`\n",[20,129,130],{},"理论上来说，有不少路由器自身就支持不少域名解析商",[30,132,133],{"id":133},"端口转发",[20,135,136],{},"端口转发需要在路由器的后台设置进行，我这里路由器使用的是 openwrt 系统，大部分路由器应该都支持这个操作。",[20,138,139],{},"在「网络」-「防火墙」",[20,141,142],{},[43,143],{"alt":45,"src":144},"https://static.031130.xyz/uploads/2024/08/12/6681635804e68.webp",[20,146,147],{},"选择「端口转发」",[20,149,150],{},[43,151],{"alt":45,"src":152},"https://static.031130.xyz/uploads/2024/08/12/66817e416534c.webp",[20,154,155,156,159],{},"新建端口转发，共享名随便填，外部端口是你最终要在主控端输入的端口，内部 IP 地址是被控机 的 IP 地址，可以用 ",[74,157,158],{},"ip -br a"," 命令看到，内部端口就是上文在 Rustdesk 指定的端口号。",[30,161,162],{"id":162},"效果",[20,164,165],{},"可以直接在主控端口输入 ddns 的域名和端口号，实现远程控制",[20,167,168],{},[43,169],{"alt":45,"src":170},"https://static.031130.xyz/uploads/2024/08/12/66817f77aae7e.webp",[172,173,174],"style",{},"html pre.shiki code .sJa8x, html code.shiki .sJa8x{--shiki-default:#E45649;--shiki-dark:#E06C75}html pre.shiki code .sknuh, html code.shiki .sknuh{--shiki-default:#383A42;--shiki-dark:#56B6C2}html pre.shiki code .sDhpE, html code.shiki .sDhpE{--shiki-default:#50A14F;--shiki-dark:#98C379}html pre.shiki code .sAdtL, html code.shiki .sAdtL{--shiki-default:#4078F2;--shiki-dark:#61AFEF}html pre.shiki code .sAGMh, html code.shiki .sAGMh{--shiki-default:#986801;--shiki-dark:#D19A66}html pre.shiki code .s5ixo, html code.shiki .s5ixo{--shiki-default:#383A42;--shiki-dark:#ABB2BF}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":45,"searchDepth":176,"depth":176,"links":177},2,[178,179,180,181],{"id":32,"depth":176,"text":33},{"id":49,"depth":176,"text":49},{"id":133,"depth":176,"text":133},{"id":162,"depth":176,"text":162},{"title":183,"date":184,"path":185,"tags":186,"body":190},"使用 Windows 虚拟机运行虚拟专用网客户端为 Linux 提供内网环境","2024-05-23 01:07:44","/2024/05/23/setup-network-environment-for-non-linux-vpn-client-with-virtual-machine",[10,187,188,189],"Windows","Virtual Machine","Network",{"type":17,"value":191,"toc":291},[192,195,198,203,206,209,212,217,220,225,234,240,243,248,251,255,264,269,272,277,280,283,288],[30,193,194],{"id":194},"起因",[20,196,197],{},"最近在某家公司实习，公司内部的 git 部署在内网环境上，需要通过虚拟专用网的客户端（天翼云的 AONE）才能够正常访问。很可惜，客户端只提供了 Windows 和 MacOS 的版本。",[20,199,200],{},[43,201],{"alt":45,"src":202},"https://static.031130.xyz/uploads/2024/08/12/664e29866c1ab.webp",[20,204,205],{},"工作的代码总是要提交的，我也不想改变我的开发环境，又不希望在 Windows 上使用 git-for-windows 这个近乎简陋的工具进行代码提交，更别说还有一些别的内网服务接下来可能也会用到。所以最好的办法就是在 Linux 下也配置好能够访问内网的环境。",[30,207,208],{"id":208},"理论",[20,210,211],{},"在 Windows 下使用 AONE 的网络拓扑是这样的",[20,213,214],{},[43,215],{"alt":45,"src":216},"https://static.031130.xyz/uploads/2024/08/12/664e2b93de6f9.webp",[20,218,219],{},"而我的方案则是使用 Windows 虚拟机开启 AONE，并在这台虚拟机上开一个 socks5 server 负责代理 Linux 宿主机需要打到内网服务的流量。网络拓扑如下",[20,221,222],{},[43,223],{"alt":45,"src":224},"https://static.031130.xyz/uploads/2024/08/12/664e2e1b0da09.webp",[20,226,227,228,233],{},"根据 bilibili 上",[54,229,232],{"href":230,"rel":231},"https://www.bilibili.com/video/BV11M4y1J7zP/",[58],"技术蛋老师的视频总结","，我们应该选择使用网卡桥接的网络配置，只有这个配置方式同时支持「宿主->虚拟机」和 「虚拟机->互联网」的网络。",[20,235,236],{},[43,237],{"alt":238,"src":239},"图片来源: bilibili 技术蛋老师","https://static.031130.xyz/uploads/2024/08/12/664e2fbb4a36b.webp",[30,241,242],{"id":242},"实操",[244,245,247],"h3",{"id":246},"在-windows-虚拟机中开启虚拟专用网客户端","在 Windows 虚拟机中开启虚拟专用网客户端",[20,249,250],{},"开启 AONE，不做赘述",[244,252,254],{"id":253},"开启-socks-server监听地址为-0000-或者设置为宿主机的-ip-地址","开启 socks server，监听地址为 0.0.0.0 （或者设置为宿主机的 IP 地址）",[20,256,257,258,263],{},"在「",[54,259,262],{"href":260,"rel":261},"https://imbearchild.cyou/",[58],"熊孩子(BearChild)","」的推荐下，我这里采用的是大名鼎鼎的二级射线（某 V 字开头的常见软件），直接从 GIthub Release 中下载 Windows X64 的压缩包，简单配置下即可，如果没有什么特殊需求的话可以只修改图中的两处配置。",[20,265,266],{},[43,267],{"alt":45,"src":268},"https://static.031130.xyz/uploads/2024/08/12/664e328cd83b3.webp",[20,270,271],{},"在终端中通过该软件的 run 命令即可开启服务",[20,273,274],{},[43,275],{"alt":45,"src":276},"https://static.031130.xyz/uploads/2024/08/12/664e32e6c350a.webp",[244,278,279],{"id":279},"在宿主机进行测试",[20,281,282],{},"我这里使用的是 mzz2017 编写的 gg 命令进行代理，代理服务器的 ip 地址使用虚拟机下 ipconfig 命令获得的 ip 地址，端口号则对应上面配置文件中的 port 参数。",[20,284,285],{},[43,286],{"alt":45,"src":287},"https://static.031130.xyz/uploads/2024/08/12/664e33c3e8320.webp",[20,289,290],{},"这里 curl 百度得到了正确的相应，说明通道是通的，gg 也可以用于代理浏览器。经实测能够正常访问公司内网服务，不便在博客中展示。",{"title":45,"searchDepth":176,"depth":176,"links":292},[293,294,295],{"id":194,"depth":176,"text":194},{"id":208,"depth":176,"text":208},{"id":242,"depth":176,"text":242,"children":296},[297,299,300],{"id":246,"depth":298,"text":247},3,{"id":253,"depth":298,"text":254},{"id":279,"depth":298,"text":279},{"title":302,"date":303,"path":304,"tags":305,"body":309},"以 Archlinux 中 makepkg 的方式打开 rpmbuild","2024-05-03 22:48:39","/2024/05/03/open-rpmbuild-in-the-way-of-archlinux-makepkg",[306,307,308,10],"Archlinux","Fedora","RPM Package",{"type":17,"value":310,"toc":664},[311,314,321,391,406,414,454,461,464,467,470,483,486,501,509,512,515,518,526,529,532,535,561,568,588,595,600,607,610,617,635,638,641,648,655,658,661],[20,312,313],{},"在 Redhat 系的发行版上打包软件的时候，会发现与 Archlinux 完全不同的思路。",[20,315,316,317,320],{},"Fedora 所代表的 Redhat 阵营一看就是那种宏大叙事的大型发行版，rpmbuild 在默认情况下会在 $HOME/rpmbuild 下的一系列文件夹进行构建过程。使用 ",[74,318,319],{},"rpmdev-setuptree"," 命令会创建好下面这些目录进行构建。",[68,322,324],{"className":70,"code":323,"language":72,"meta":45,"style":45},"$ tree rpmbuild\nrpmbuild\n├── BUILD\n├── BUILDROOT\n├── RPMS\n├── SOURCES\n├── SPECS\n└── SRPMS\n",[74,325,326,337,342,350,358,366,374,382],{"__ignoreMap":45},[77,327,328,331,334],{"class":79,"line":80},[77,329,330],{"class":95},"$",[77,332,333],{"class":91}," tree",[77,335,336],{"class":91}," rpmbuild\n",[77,338,339],{"class":79,"line":176},[77,340,341],{"class":95},"rpmbuild\n",[77,343,344,347],{"class":79,"line":298},[77,345,346],{"class":95},"├──",[77,348,349],{"class":91}," BUILD\n",[77,351,353,355],{"class":79,"line":352},4,[77,354,346],{"class":95},[77,356,357],{"class":91}," BUILDROOT\n",[77,359,361,363],{"class":79,"line":360},5,[77,362,346],{"class":95},[77,364,365],{"class":91}," RPMS\n",[77,367,369,371],{"class":79,"line":368},6,[77,370,346],{"class":95},[77,372,373],{"class":91}," SOURCES\n",[77,375,377,379],{"class":79,"line":376},7,[77,378,346],{"class":95},[77,380,381],{"class":91}," SPECS\n",[77,383,385,388],{"class":79,"line":384},8,[77,386,387],{"class":95},"└──",[77,389,390],{"class":91}," SRPMS\n",[20,392,393,394,399,400,405],{},"Fedora 将所有的软件的构建都集中在一个 rpmbuild 目录中，BUILD 是编译时使用的，BUILDROOT 是最终安装目录，RPMS 是存放最终产物的，SOURCES 是存放源码等文件的，SPECS 是存放指导构建过程的 spec 文件的，而 SRPMS 是 RH 系为了 reproducibility 而单独将 spec 和源文件打包的产物。除了 rpmbuild 命令以外，Fedora 还有一套使用容器构建 rpm 包的 ",[54,395,398],{"href":396,"rel":397},"https://fedoraproject.org/wiki/Using_Mock_to_test_package_builds",[58],"mock"," 构建系统，与 Archlinux 的 ",[54,401,404],{"href":402,"rel":403},"https://archlinux.org/packages/extra/any/devtools/",[58],"devtools"," 类似，这里不作过多叙述。",[20,407,408,409,413],{},"反观 Arch 的构建目录，",[410,411,412],"del",{},"就有一股浓浓的小作坊气味","。每个软件包自己拥有一个目录，指导构建过程的 PKGBUILD 文件、源文件和最终的产物都放在这个目录下，目录下的 src 和 pkg 文件夹分别对应 rpm 的 BUILD 和 BUILDROOT，前者是源文件被解压的目录和编译过程进行的目录，后者是软件最终的安装目录。",[68,415,417],{"className":70,"code":416,"language":72,"meta":45,"style":45},"$ tree repo\nrepo\n├── src\n├── pkg\n└── PKGBUILD\n",[74,418,419,428,433,440,447],{"__ignoreMap":45},[77,420,421,423,425],{"class":79,"line":80},[77,422,330],{"class":95},[77,424,333],{"class":91},[77,426,427],{"class":91}," repo\n",[77,429,430],{"class":79,"line":176},[77,431,432],{"class":95},"repo\n",[77,434,435,437],{"class":79,"line":298},[77,436,346],{"class":95},[77,438,439],{"class":91}," src\n",[77,441,442,444],{"class":79,"line":352},[77,443,346],{"class":95},[77,445,446],{"class":91}," pkg\n",[77,448,449,451],{"class":79,"line":360},[77,450,387],{"class":95},[77,452,453],{"class":91}," PKGBUILD\n",[20,455,456,457,460],{},"好巧不巧，我偏偏习惯这个小作坊气息的 arch build system，每个软件包独享一个自己的目录，",[410,458,459],{},"干净又卫生","。我自然也希望在 Fedora 下打 rpm 包的时候能够使用类似 Archlinux 下 makepkg 使用的目录结构。",[30,462,463],{"id":463},"简单了解",[20,465,466],{},"在了解一系列 rpmbuild 中宏（macros）相关的知识后，我意识到这并非不可能。",[20,468,469],{},"使用如下的命令可以获取目前系统中定义的所有宏",[68,471,473],{"className":70,"code":472,"language":72,"meta":45,"style":45},"rpm --showrc\n",[74,474,475],{"__ignoreMap":45},[77,476,477,480],{"class":79,"line":80},[77,478,479],{"class":95},"rpm",[77,481,482],{"class":99}," --showrc\n",[20,484,485],{},"而可以使用如下命令检查某一个宏目前被定义成了什么值",[68,487,489],{"className":70,"code":488,"language":72,"meta":45,"style":45},"rpm --eval \"%{_topdir}\"\n",[74,490,491],{"__ignoreMap":45},[77,492,493,495,498],{"class":79,"line":80},[77,494,479],{"class":95},[77,496,497],{"class":99}," --eval",[77,499,500],{"class":91}," \"%{_topdir}\"\n",[20,502,503,504,508],{},"更多关于宏的描述可以在 ",[54,505,506],{"href":506,"rel":507},"https://rpm-software-management.github.io/rpm/manual/macros.html",[58]," 获取",[30,510,511],{"id":511},"修改路径",[20,513,514],{},"我们可以把定义成 $HOME/rpmbuild 的 %_topdir 重新定义成当前目录。",[20,516,517],{},"在 $HOME/.rpmmacros 中，去除顶部对 %_topdir 的定义，重新填上以下这些定义，即可初步完成我想要的效果。",[68,519,524],{"className":520,"code":522,"language":523},[521],"language-text","%_topdir    %(pwd)\n%_builddir %{_topdir}/src\n%_buildrootdir %{_topdir}/pkg\n%_rpmdir %{_topdir}\n%_sourcedir %{_topdir}\n%_specdir %{_topdir}\n%_srcrpmdir %{_topdir}\n","text",[74,525,522],{"__ignoreMap":45},[20,527,528],{},"现在在任何一个目录下执行 rpmbuild 相关命令，都会把 src 认为是构建目录，pkg 是最后安装目录，spec 文件和源文件早当前文件夹下，构建产物在当前文件夹下的 x86_64（或者别的架构名，这一层目录我还没有找到应该如何去掉）下。",[30,530,531],{"id":531},"自动安装依赖文件",[20,533,534],{},"Fedora 中的 rpmbuild 不带有 makepkg -s 的功能，不能自动安装依赖。不过这也不意味着需要自己傻傻地去翻 spec 看看需要哪些构建依赖。可以使用 dnf 的 builddep 命令实现",[68,536,538],{"className":70,"code":537,"language":72,"meta":45,"style":45},"sudo dnf builddep ./*.spec\n",[74,539,540],{"__ignoreMap":45},[77,541,542,545,548,551,554,558],{"class":79,"line":80},[77,543,544],{"class":95},"sudo",[77,546,547],{"class":91}," dnf",[77,549,550],{"class":91}," builddep",[77,552,553],{"class":91}," ./",[77,555,557],{"class":556},"s2QsP","*",[77,559,560],{"class":91},".spec\n",[20,562,563,564,567],{},"不过 dnf 没有什么完成构建后自动卸载依赖的选项。",[410,565,566],{},"这些依赖装完以后就一辈子赖在你的电脑上了","，才不是，可以在构建完成后使用 dnf 自带的后悔药功能撤销上一条命令执行的效果。",[68,569,571],{"className":70,"code":570,"language":72,"meta":45,"style":45},"sudo dnf history undo 0\n",[74,572,573],{"__ignoreMap":45},[77,574,575,577,579,582,585],{"class":79,"line":80},[77,576,544],{"class":95},[77,578,547],{"class":91},[77,580,581],{"class":91}," history",[77,583,584],{"class":91}," undo",[77,586,587],{"class":99}," 0\n",[20,589,590,591,594],{},"不过如果在 builddep 过程中，dnf 从 updates 源里更新了一些软件，那么它在 undo 时可能就没法获取更新前的软件版本。会有 ",[74,592,593],{},"Cannot find rpm nevra","  的提示",[20,596,597],{},[43,598],{"alt":45,"src":599},"https://static.031130.xyz/uploads/2024/08/12/6635018238ffa.webp",[20,601,602,603,606],{},"可以使用 ",[74,604,605],{},"--skip-broken"," 命令跳过那些没法找到老版本的软件，继续卸载其余的软件。",[30,608,609],{"id":609},"自动下载源文件",[20,611,612,613,616],{},"很多使用 spec 中会在 source 里写上下载地址，而不是附上源码文件。rpm 似乎因为一些原因禁止了 rpmbuild 自动下载源文件的功能。可以通过在使用 rpmbuild 的时候带上 ",[74,614,615],{},"--undefine=_disable_source_fetch"," 取消定义这个行为，或者干脆在调用 rpmbuild 之前执行一遍",[68,618,620],{"className":70,"code":619,"language":72,"meta":45,"style":45},"spectool -gR *.spec\n",[74,621,622],{"__ignoreMap":45},[77,623,624,627,630,633],{"class":79,"line":80},[77,625,626],{"class":95},"spectool",[77,628,629],{"class":99}," -gR",[77,631,632],{"class":556}," *",[77,634,560],{"class":91},[20,636,637],{},"这样也能自动下载源文件。",[30,639,640],{"id":640},"构建行为",[20,642,643,644,647],{},"makepkg 的默认构建行为就是只构建最终的安装包，Archlinux 中并没有 Fedora 那样打 source rpm 保证 reproduceability 的行为，这在 rpmbuild 中对应的是 ",[74,645,646],{},"-bb"," 选项。",[20,649,650,651,654],{},"使用 ",[74,652,653],{},"rpmbuild -bb *.spec"," 即可",[656,657],"hr",{},[20,659,660],{},"上面介绍完了 rpmbuild 和 makepkg 的主要差异，应该可以自己搓一个 rpmbuild-wrapper 去实现以 makepkg 的方式打开 rpmbuild 的目标了，具体的 wrapper 脚本我就不放出来献丑了。",[172,662,663],{},"html pre.shiki code .sAdtL, html code.shiki .sAdtL{--shiki-default:#4078F2;--shiki-dark:#61AFEF}html pre.shiki code .sDhpE, html code.shiki .sDhpE{--shiki-default:#50A14F;--shiki-dark:#98C379}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .sAGMh, html code.shiki .sAGMh{--shiki-default:#986801;--shiki-dark:#D19A66}html pre.shiki code .s2QsP, html code.shiki .s2QsP{--shiki-default:#E45649;--shiki-dark:#E5C07B}",{"title":45,"searchDepth":176,"depth":176,"links":665},[666,667,668,669,670],{"id":463,"depth":176,"text":463},{"id":511,"depth":176,"text":511},{"id":531,"depth":176,"text":531},{"id":609,"depth":176,"text":609},{"id":640,"depth":176,"text":640},{"title":672,"date":673,"path":674,"tags":675,"body":677},"使用 Github Action 更新用于 rpm 打包的 spec 文件","2024-04-29 19:19:54","/2024/04/29/update-a-rpm-spec-by-github-action",[307,308,676],"Github Action",{"type":17,"value":678,"toc":1015},[679,686,695,698,700,703,752,755,792,795,829,832,904,907,964,967,1004,1012],[20,680,681,682,685],{},"有一些软件包的上游本身就是使用 Github Action 发版的，每次 commit 都会触发 Github Action 去构建并分发新版本，使用构建时的时间日期作为版本号。针对这种包，手动更新费时费力，而规范的 specfile 应当是更新 ",[74,683,684],{},"%changelog"," 的，因此应当是使用 rpmdev-bumpspec 命令。只不过 rpmdev-bumpspec 需要在 rpm 系发行版或者装有 rpm 系列依赖包的发行版下执行，这不是随随便便一个 Linux 环境就能运行的。",[20,687,688,689,694],{},"我找到了 ",[54,690,693],{"href":691,"rel":692},"https://github.com/netoarmando/rpmdev-bumpspec-action",[58],"netoarmando/rpmdev-bumpspec-action"," 这个 Github Action，它通过启动一个 Fedora 的 docker 实现了使用 rpmdev-bumpspec 的效果。虽然 release 中只有一个 2021 年构建的 v1 版本，~~但 Fedora 的版本高低不影响 rpmdev-bumpspec 的效果。~~但每次 Github Action 执行时都会使用 fedora:latest 的 docker 重新构建一遍，不用担心 fedora 版本过低。",[20,696,697],{},"于是我们便解决了最核心的问题——处理 spec 文件。接下来只要补充好头尾的步骤即可。",[656,699],{},[20,701,702],{},"首先使用 actions/checkout 释出仓库内的文件",[68,704,708],{"className":705,"code":706,"language":707,"meta":45,"style":45},"language-yaml shiki shiki-themes one-light one-dark-pro","- name: Checkout\n  uses: actions/checkout@v2\n  with:\n    fetch-depth: 0\n","yaml",[74,709,710,724,734,742],{"__ignoreMap":45},[77,711,712,715,718,721],{"class":79,"line":80},[77,713,714],{"class":112},"- ",[77,716,717],{"class":83},"name",[77,719,720],{"class":112},": ",[77,722,723],{"class":91},"Checkout\n",[77,725,726,729,731],{"class":79,"line":176},[77,727,728],{"class":83},"  uses",[77,730,720],{"class":112},[77,732,733],{"class":91},"actions/checkout@v2\n",[77,735,736,739],{"class":79,"line":298},[77,737,738],{"class":83},"  with",[77,740,741],{"class":112},":\n",[77,743,744,747,749],{"class":79,"line":352},[77,745,746],{"class":83},"    fetch-depth",[77,748,720],{"class":112},[77,750,751],{"class":99},"0\n",[20,753,754],{},"通过 shell 命令获取仓库内 spec 文件的版本号，存入 $GITHUB_ENV",[68,756,758],{"className":705,"code":757,"language":707,"meta":45,"style":45},"- name: Get Current Version\n  run: |\n    CURRENT_VERSION=`grep -E '^Version:' *.spec | awk '{print $2}'`\n    echo \"CURRENT_VERSION=$CURRENT_VERSION\" >> $GITHUB_ENV\n",[74,759,760,771,782,787],{"__ignoreMap":45},[77,761,762,764,766,768],{"class":79,"line":80},[77,763,714],{"class":112},[77,765,717],{"class":83},[77,767,720],{"class":112},[77,769,770],{"class":91},"Get Current Version\n",[77,772,773,776,778],{"class":79,"line":176},[77,774,775],{"class":83},"  run",[77,777,720],{"class":112},[77,779,781],{"class":780},"sLKXg","|\n",[77,783,784],{"class":79,"line":298},[77,785,786],{"class":91},"    CURRENT_VERSION=`grep -E '^Version:' *.spec | awk '{print $2}'`\n",[77,788,789],{"class":79,"line":352},[77,790,791],{"class":91},"    echo \"CURRENT_VERSION=$CURRENT_VERSION\" >> $GITHUB_ENV\n",[20,793,794],{},"通过 Github API 获取目标软件的最新版本号，存入 $GITHUB_ENV",[68,796,798],{"className":705,"code":797,"language":707,"meta":45,"style":45},"- name: Export latest geoip version\n  run: |\n    NEW_VERSION=`curl -s https://api.github.com/repos/{user_name}/{repo_name}/releases/latest | jq -r '.tag_name' | sed 's/v//g'`\n    echo \"NEW_VERSION=$NEW_VERSION\" >> $GITHUB_ENV\n",[74,799,800,811,819,824],{"__ignoreMap":45},[77,801,802,804,806,808],{"class":79,"line":80},[77,803,714],{"class":112},[77,805,717],{"class":83},[77,807,720],{"class":112},[77,809,810],{"class":91},"Export latest geoip version\n",[77,812,813,815,817],{"class":79,"line":176},[77,814,775],{"class":83},[77,816,720],{"class":112},[77,818,781],{"class":780},[77,820,821],{"class":79,"line":298},[77,822,823],{"class":91},"    NEW_VERSION=`curl -s https://api.github.com/repos/{user_name}/{repo_name}/releases/latest | jq -r '.tag_name' | sed 's/v//g'`\n",[77,825,826],{"class":79,"line":352},[77,827,828],{"class":91},"    echo \"NEW_VERSION=$NEW_VERSION\" >> $GITHUB_ENV\n",[20,830,831],{},"当仓库内 spec 版本号与软件最新版本号不一致时，运行 rpmdev-bumpspec",[68,833,835],{"className":705,"code":834,"language":707,"meta":45,"style":45},"- name: Run rpmdev-bumpspec action\n  if: ${{ env.CURRENT_VERSION != env.NEW_VERSION }}\n  uses: netoarmando/rpmdev-bumpspec-action@v1\n  with: \n    specfile: '{filename}'\n    new: ${{ env.NEW_VERSION }}\n    userstring: \"username \u003Cusername@mail.com>\"\n",[74,836,837,848,858,867,874,884,894],{"__ignoreMap":45},[77,838,839,841,843,845],{"class":79,"line":80},[77,840,714],{"class":112},[77,842,717],{"class":83},[77,844,720],{"class":112},[77,846,847],{"class":91},"Run rpmdev-bumpspec action\n",[77,849,850,853,855],{"class":79,"line":176},[77,851,852],{"class":83},"  if",[77,854,720],{"class":112},[77,856,857],{"class":91},"${{ env.CURRENT_VERSION != env.NEW_VERSION }}\n",[77,859,860,862,864],{"class":79,"line":298},[77,861,728],{"class":83},[77,863,720],{"class":112},[77,865,866],{"class":91},"netoarmando/rpmdev-bumpspec-action@v1\n",[77,868,869,871],{"class":79,"line":352},[77,870,738],{"class":83},[77,872,873],{"class":112},": \n",[77,875,876,879,881],{"class":79,"line":360},[77,877,878],{"class":83},"    specfile",[77,880,720],{"class":112},[77,882,883],{"class":91},"'{filename}'\n",[77,885,886,889,891],{"class":79,"line":368},[77,887,888],{"class":83},"    new",[77,890,720],{"class":112},[77,892,893],{"class":91},"${{ env.NEW_VERSION }}\n",[77,895,896,899,901],{"class":79,"line":376},[77,897,898],{"class":83},"    userstring",[77,900,720],{"class":112},[77,902,903],{"class":91},"\"username \u003Cusername@mail.com>\"\n",[20,905,906],{},"当仓库内 spec 版本号与软件最新版本号不一致时，保存更改，推入仓库。",[68,908,910],{"className":705,"code":909,"language":707,"meta":45,"style":45},"- name: Commit changes\n  if: ${{ env.CURRENT_VERSION != env.NEW_VERSION }}\n  run: |\n    git config --local user.email \"zhullyb@outlook.com\"\n    git config --local user.name \"zhullyb\"\n    git add .\n    git commit -m \"upgpkg: v2ray-geoip@${{ env.NEW_VERSION }}\"\n    git push\n",[74,911,912,923,931,939,944,949,954,959],{"__ignoreMap":45},[77,913,914,916,918,920],{"class":79,"line":80},[77,915,714],{"class":112},[77,917,717],{"class":83},[77,919,720],{"class":112},[77,921,922],{"class":91},"Commit changes\n",[77,924,925,927,929],{"class":79,"line":176},[77,926,852],{"class":83},[77,928,720],{"class":112},[77,930,857],{"class":91},[77,932,933,935,937],{"class":79,"line":298},[77,934,775],{"class":83},[77,936,720],{"class":112},[77,938,781],{"class":780},[77,940,941],{"class":79,"line":352},[77,942,943],{"class":91},"    git config --local user.email \"zhullyb@outlook.com\"\n",[77,945,946],{"class":79,"line":360},[77,947,948],{"class":91},"    git config --local user.name \"zhullyb\"\n",[77,950,951],{"class":79,"line":368},[77,952,953],{"class":91},"    git add .\n",[77,955,956],{"class":79,"line":376},[77,957,958],{"class":91},"    git commit -m \"upgpkg: v2ray-geoip@${{ env.NEW_VERSION }}\"\n",[77,960,961],{"class":79,"line":384},[77,962,963],{"class":91},"    git push\n",[20,965,966],{},"（可选）当仓库内 spec 版本号与软件最新版本号不一致时，通过 curl 语句触发 copr 的 webhook，让 copr 进行构建。",[68,968,970],{"className":705,"code":969,"language":707,"meta":45,"style":45},"- name: trigger copr webhook\n  if: ${{ env.CURRENT_VERSION != env.NEW_VERSION }}\n  run: |\n    curl -X POST ${{ secrets.COPR_HOOK_URL }}v2ray-geoip/\n",[74,971,972,983,991,999],{"__ignoreMap":45},[77,973,974,976,978,980],{"class":79,"line":80},[77,975,714],{"class":112},[77,977,717],{"class":83},[77,979,720],{"class":112},[77,981,982],{"class":91},"trigger copr webhook\n",[77,984,985,987,989],{"class":79,"line":176},[77,986,852],{"class":83},[77,988,720],{"class":112},[77,990,857],{"class":91},[77,992,993,995,997],{"class":79,"line":298},[77,994,775],{"class":83},[77,996,720],{"class":112},[77,998,781],{"class":780},[77,1000,1001],{"class":79,"line":352},[77,1002,1003],{"class":91},"    curl -X POST ${{ secrets.COPR_HOOK_URL }}v2ray-geoip/\n",[20,1005,1006,1007],{},"最终的 yml 文件可以参考",[54,1008,1011],{"href":1009,"rel":1010},"https://github.com/v2rayA/v2raya-copr/blob/master/.github/workflows/upgpkg-v2ray-geoip.yml",[58],"这里",[172,1013,1014],{},"html pre.shiki code .s5ixo, html code.shiki .s5ixo{--shiki-default:#383A42;--shiki-dark:#ABB2BF}html pre.shiki code .sJa8x, html code.shiki .sJa8x{--shiki-default:#E45649;--shiki-dark:#E06C75}html pre.shiki code .sDhpE, html code.shiki .sDhpE{--shiki-default:#50A14F;--shiki-dark:#98C379}html pre.shiki code .sAGMh, html code.shiki .sAGMh{--shiki-default:#986801;--shiki-dark:#D19A66}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .sLKXg, html code.shiki .sLKXg{--shiki-default:#A626A4;--shiki-dark:#C678DD}",{"title":45,"searchDepth":176,"depth":176,"links":1016},[],{"title":1018,"date":1019,"path":1020,"tags":1021,"body":1023},"使用 Python 生成甘特图(Gantt Chart)","2024-04-24 12:02:58","/2024/04/24/generate-gantt-chart-with-python",[1022],"Python",{"type":17,"value":1024,"toc":1669},[1025,1028,1031,1037,1046,1049,1054,1057,1060,1062,1453,1458,1460,1661,1666],[20,1026,1027],{},"在写操作系统的作业的时候有几道题给出了几个进程的相关信息，要求我们画出几种简单调度的甘特图。操作系统的作业一直是电子版，上传 pdf 即可的。我觉得手画甘特图拍照嵌入 pdf 中不太优雅，过于掉价，因此就想直接生成甘特图嵌入。",[20,1029,1030],{},"在谷歌搜寻了一番，我发现现在的甘特图生成网站都太现代化了，根本不是操作系统课上教的样子了。",[20,1032,1033],{},[43,1034],{"alt":1035,"src":1036},"现代化的甘特图","https://static.031130.xyz/uploads/2024/08/12/662888bd5a0af.webp",[20,1038,1039,1040,1045],{},"所幸我找到了 ",[54,1041,1044],{"href":1042,"rel":1043},"https://github.com/gao-keyong/matplotlib-gantt/",[58],"gao-keyong/matplotlib-gantt","，虽然只有两个 star（没事，加上我就 3 stars 了），但确实能用，README 中的样例也是我期望的样子。",[20,1047,1048],{},"项目中自带了一个 jupyter 的示例，算得上是非常简单易上手的了，依赖方面只要装好 matplotlib 就可以使用，不存在依赖地狱。尽管是三年前的项目，在我本机的 Python 3.11 上仍然能够正常运行。",[20,1050,1051],{},[43,1052],{"alt":45,"src":1053},"https://static.031130.xyz/uploads/2024/08/12/66288ba6414d4.webp",[20,1055,1056],{},"tuple 中的第一个数字表示从当前时间开始，第二个数字表示持续时间。每一个表示 category 的 list 中可以存在多个 tuple。",[20,1058,1059],{},"给一些咱生成的例子。",[656,1061],{},[68,1063,1067],{"className":1064,"code":1065,"language":1066,"meta":45,"style":45},"language-python shiki shiki-themes one-light one-dark-pro","from gantt import *\ncategory_names = ['P1', 'P2', 'P3', 'P4', 'P5']\n\nresults = {\n    'FCFS': [[(0,2)], [(2,1)], [(3,8)], [(11,4)], [(15,5)]],\n    'SJF': [[(1,2)], [(0,1)], [(12,8)], [(3,4)], [(7,5)]],\n    'non-compreemptive priority': [[(13,2)],[(19,1)],[(0,8)],[(15,4)],[(8,5)]],\n    'RR (quantum=2)': [[(0,2)], [(2,1)],[(3,2),(9,2),(15,2),(18,2)], [(5,2),(11,2)], [(7,2),(13,2),(17,1)]]\n}\n\narrival_t = [0, 0, 0, 0]\n\ngantt(category_names, results, arrival_t).show()\n\n","python",[74,1068,1069,1083,1120,1126,1136,1196,1245,1295,1395,1401,1406,1432,1437],{"__ignoreMap":45},[77,1070,1071,1074,1077,1080],{"class":79,"line":80},[77,1072,1073],{"class":780},"from",[77,1075,1076],{"class":112}," gantt ",[77,1078,1079],{"class":780},"import",[77,1081,1082],{"class":87}," *\n",[77,1084,1085,1088,1090,1093,1096,1099,1102,1104,1107,1109,1112,1114,1117],{"class":79,"line":176},[77,1086,1087],{"class":112},"category_names ",[77,1089,88],{"class":87},[77,1091,1092],{"class":112}," [",[77,1094,1095],{"class":91},"'P1'",[77,1097,1098],{"class":112},", ",[77,1100,1101],{"class":91},"'P2'",[77,1103,1098],{"class":112},[77,1105,1106],{"class":91},"'P3'",[77,1108,1098],{"class":112},[77,1110,1111],{"class":91},"'P4'",[77,1113,1098],{"class":112},[77,1115,1116],{"class":91},"'P5'",[77,1118,1119],{"class":112},"]\n",[77,1121,1122],{"class":79,"line":298},[77,1123,1125],{"emptyLinePlaceholder":1124},true,"\n",[77,1127,1128,1131,1133],{"class":79,"line":352},[77,1129,1130],{"class":112},"results ",[77,1132,88],{"class":87},[77,1134,1135],{"class":112}," {\n",[77,1137,1138,1141,1144,1147,1150,1153,1156,1158,1160,1163,1165,1168,1170,1173,1175,1178,1180,1183,1185,1188,1190,1193],{"class":79,"line":360},[77,1139,1140],{"class":91},"    'FCFS'",[77,1142,1143],{"class":112},": [[(",[77,1145,1146],{"class":99},"0",[77,1148,1149],{"class":112},",",[77,1151,1152],{"class":99},"2",[77,1154,1155],{"class":112},")], [(",[77,1157,1152],{"class":99},[77,1159,1149],{"class":112},[77,1161,1162],{"class":99},"1",[77,1164,1155],{"class":112},[77,1166,1167],{"class":99},"3",[77,1169,1149],{"class":112},[77,1171,1172],{"class":99},"8",[77,1174,1155],{"class":112},[77,1176,1177],{"class":99},"11",[77,1179,1149],{"class":112},[77,1181,1182],{"class":99},"4",[77,1184,1155],{"class":112},[77,1186,1187],{"class":99},"15",[77,1189,1149],{"class":112},[77,1191,1192],{"class":99},"5",[77,1194,1195],{"class":112},")]],\n",[77,1197,1198,1201,1203,1205,1207,1209,1211,1213,1215,1217,1219,1222,1224,1226,1228,1230,1232,1234,1236,1239,1241,1243],{"class":79,"line":368},[77,1199,1200],{"class":91},"    'SJF'",[77,1202,1143],{"class":112},[77,1204,1162],{"class":99},[77,1206,1149],{"class":112},[77,1208,1152],{"class":99},[77,1210,1155],{"class":112},[77,1212,1146],{"class":99},[77,1214,1149],{"class":112},[77,1216,1162],{"class":99},[77,1218,1155],{"class":112},[77,1220,1221],{"class":99},"12",[77,1223,1149],{"class":112},[77,1225,1172],{"class":99},[77,1227,1155],{"class":112},[77,1229,1167],{"class":99},[77,1231,1149],{"class":112},[77,1233,1182],{"class":99},[77,1235,1155],{"class":112},[77,1237,1238],{"class":99},"7",[77,1240,1149],{"class":112},[77,1242,1192],{"class":99},[77,1244,1195],{"class":112},[77,1246,1247,1250,1252,1255,1257,1259,1262,1265,1267,1269,1271,1273,1275,1277,1279,1281,1283,1285,1287,1289,1291,1293],{"class":79,"line":376},[77,1248,1249],{"class":91},"    'non-compreemptive priority'",[77,1251,1143],{"class":112},[77,1253,1254],{"class":99},"13",[77,1256,1149],{"class":112},[77,1258,1152],{"class":99},[77,1260,1261],{"class":112},")],[(",[77,1263,1264],{"class":99},"19",[77,1266,1149],{"class":112},[77,1268,1162],{"class":99},[77,1270,1261],{"class":112},[77,1272,1146],{"class":99},[77,1274,1149],{"class":112},[77,1276,1172],{"class":99},[77,1278,1261],{"class":112},[77,1280,1187],{"class":99},[77,1282,1149],{"class":112},[77,1284,1182],{"class":99},[77,1286,1261],{"class":112},[77,1288,1172],{"class":99},[77,1290,1149],{"class":112},[77,1292,1192],{"class":99},[77,1294,1195],{"class":112},[77,1296,1297,1300,1302,1304,1306,1308,1310,1312,1314,1316,1318,1320,1322,1324,1327,1330,1332,1334,1336,1338,1340,1342,1344,1347,1349,1351,1353,1355,1357,1359,1361,1363,1365,1367,1369,1371,1373,1375,1377,1379,1381,1383,1385,1388,1390,1392],{"class":79,"line":384},[77,1298,1299],{"class":91},"    'RR (quantum=2)'",[77,1301,1143],{"class":112},[77,1303,1146],{"class":99},[77,1305,1149],{"class":112},[77,1307,1152],{"class":99},[77,1309,1155],{"class":112},[77,1311,1152],{"class":99},[77,1313,1149],{"class":112},[77,1315,1162],{"class":99},[77,1317,1261],{"class":112},[77,1319,1167],{"class":99},[77,1321,1149],{"class":112},[77,1323,1152],{"class":99},[77,1325,1326],{"class":112},"),(",[77,1328,1329],{"class":99},"9",[77,1331,1149],{"class":112},[77,1333,1152],{"class":99},[77,1335,1326],{"class":112},[77,1337,1187],{"class":99},[77,1339,1149],{"class":112},[77,1341,1152],{"class":99},[77,1343,1326],{"class":112},[77,1345,1346],{"class":99},"18",[77,1348,1149],{"class":112},[77,1350,1152],{"class":99},[77,1352,1155],{"class":112},[77,1354,1192],{"class":99},[77,1356,1149],{"class":112},[77,1358,1152],{"class":99},[77,1360,1326],{"class":112},[77,1362,1177],{"class":99},[77,1364,1149],{"class":112},[77,1366,1152],{"class":99},[77,1368,1155],{"class":112},[77,1370,1238],{"class":99},[77,1372,1149],{"class":112},[77,1374,1152],{"class":99},[77,1376,1326],{"class":112},[77,1378,1254],{"class":99},[77,1380,1149],{"class":112},[77,1382,1152],{"class":99},[77,1384,1326],{"class":112},[77,1386,1387],{"class":99},"17",[77,1389,1149],{"class":112},[77,1391,1162],{"class":99},[77,1393,1394],{"class":112},")]]\n",[77,1396,1398],{"class":79,"line":1397},9,[77,1399,1400],{"class":112},"}\n",[77,1402,1404],{"class":79,"line":1403},10,[77,1405,1125],{"emptyLinePlaceholder":1124},[77,1407,1409,1412,1414,1416,1418,1420,1422,1424,1426,1428,1430],{"class":79,"line":1408},11,[77,1410,1411],{"class":112},"arrival_t ",[77,1413,88],{"class":87},[77,1415,1092],{"class":112},[77,1417,1146],{"class":99},[77,1419,1098],{"class":112},[77,1421,1146],{"class":99},[77,1423,1098],{"class":112},[77,1425,1146],{"class":99},[77,1427,1098],{"class":112},[77,1429,1146],{"class":99},[77,1431,1119],{"class":112},[77,1433,1435],{"class":79,"line":1434},12,[77,1436,1125],{"emptyLinePlaceholder":1124},[77,1438,1440,1444,1447,1450],{"class":79,"line":1439},13,[77,1441,1443],{"class":1442},"slOjB","gantt",[77,1445,1446],{"class":112},"(category_names, results, arrival_t).",[77,1448,1449],{"class":1442},"show",[77,1451,1452],{"class":112},"()\n",[20,1454,1455],{},[43,1456],{"alt":45,"src":1457},"https://static.031130.xyz/uploads/2024/08/12/662890f78f1da.webp",[656,1459],{},[68,1461,1463],{"className":1064,"code":1462,"language":1066,"meta":45,"style":45},"from gantt import *\ncategory_names = ['P1', 'P2', 'P3', 'P4', 'P5', 'P6']\n\nresults = {\n    '': [[(0,20)], [(25,10),(45,10),(75,5)], [(35,10),(55,5),(80,10)], [(60,15)], [(100,5),(115,5)],[(105,10)]],\n}\n\narrival_t = [0]\n\ngantt(category_names, results, arrival_t).show()\n\n",[74,1464,1465,1475,1508,1512,1520,1627,1631,1635,1647,1651],{"__ignoreMap":45},[77,1466,1467,1469,1471,1473],{"class":79,"line":80},[77,1468,1073],{"class":780},[77,1470,1076],{"class":112},[77,1472,1079],{"class":780},[77,1474,1082],{"class":87},[77,1476,1477,1479,1481,1483,1485,1487,1489,1491,1493,1495,1497,1499,1501,1503,1506],{"class":79,"line":176},[77,1478,1087],{"class":112},[77,1480,88],{"class":87},[77,1482,1092],{"class":112},[77,1484,1095],{"class":91},[77,1486,1098],{"class":112},[77,1488,1101],{"class":91},[77,1490,1098],{"class":112},[77,1492,1106],{"class":91},[77,1494,1098],{"class":112},[77,1496,1111],{"class":91},[77,1498,1098],{"class":112},[77,1500,1116],{"class":91},[77,1502,1098],{"class":112},[77,1504,1505],{"class":91},"'P6'",[77,1507,1119],{"class":112},[77,1509,1510],{"class":79,"line":298},[77,1511,1125],{"emptyLinePlaceholder":1124},[77,1513,1514,1516,1518],{"class":79,"line":352},[77,1515,1130],{"class":112},[77,1517,88],{"class":87},[77,1519,1135],{"class":112},[77,1521,1522,1525,1527,1529,1531,1534,1536,1539,1541,1544,1546,1549,1551,1553,1555,1558,1560,1562,1564,1567,1569,1571,1573,1576,1578,1580,1582,1585,1587,1589,1591,1594,1596,1598,1600,1603,1605,1607,1609,1612,1614,1616,1618,1621,1623,1625],{"class":79,"line":360},[77,1523,1524],{"class":91},"    ''",[77,1526,1143],{"class":112},[77,1528,1146],{"class":99},[77,1530,1149],{"class":112},[77,1532,1533],{"class":99},"20",[77,1535,1155],{"class":112},[77,1537,1538],{"class":99},"25",[77,1540,1149],{"class":112},[77,1542,1543],{"class":99},"10",[77,1545,1326],{"class":112},[77,1547,1548],{"class":99},"45",[77,1550,1149],{"class":112},[77,1552,1543],{"class":99},[77,1554,1326],{"class":112},[77,1556,1557],{"class":99},"75",[77,1559,1149],{"class":112},[77,1561,1192],{"class":99},[77,1563,1155],{"class":112},[77,1565,1566],{"class":99},"35",[77,1568,1149],{"class":112},[77,1570,1543],{"class":99},[77,1572,1326],{"class":112},[77,1574,1575],{"class":99},"55",[77,1577,1149],{"class":112},[77,1579,1192],{"class":99},[77,1581,1326],{"class":112},[77,1583,1584],{"class":99},"80",[77,1586,1149],{"class":112},[77,1588,1543],{"class":99},[77,1590,1155],{"class":112},[77,1592,1593],{"class":99},"60",[77,1595,1149],{"class":112},[77,1597,1187],{"class":99},[77,1599,1155],{"class":112},[77,1601,1602],{"class":99},"100",[77,1604,1149],{"class":112},[77,1606,1192],{"class":99},[77,1608,1326],{"class":112},[77,1610,1611],{"class":99},"115",[77,1613,1149],{"class":112},[77,1615,1192],{"class":99},[77,1617,1261],{"class":112},[77,1619,1620],{"class":99},"105",[77,1622,1149],{"class":112},[77,1624,1543],{"class":99},[77,1626,1195],{"class":112},[77,1628,1629],{"class":79,"line":368},[77,1630,1400],{"class":112},[77,1632,1633],{"class":79,"line":376},[77,1634,1125],{"emptyLinePlaceholder":1124},[77,1636,1637,1639,1641,1643,1645],{"class":79,"line":384},[77,1638,1411],{"class":112},[77,1640,88],{"class":87},[77,1642,1092],{"class":112},[77,1644,1146],{"class":99},[77,1646,1119],{"class":112},[77,1648,1649],{"class":79,"line":1397},[77,1650,1125],{"emptyLinePlaceholder":1124},[77,1652,1653,1655,1657,1659],{"class":79,"line":1403},[77,1654,1443],{"class":1442},[77,1656,1446],{"class":112},[77,1658,1449],{"class":1442},[77,1660,1452],{"class":112},[20,1662,1663],{},[43,1664],{"alt":45,"src":1665},"https://static.031130.xyz/uploads/2024/08/12/662891bfa52fc.webp",[172,1667,1668],{},"html pre.shiki code .sLKXg, html code.shiki .sLKXg{--shiki-default:#A626A4;--shiki-dark:#C678DD}html pre.shiki code .s5ixo, html code.shiki .s5ixo{--shiki-default:#383A42;--shiki-dark:#ABB2BF}html pre.shiki code .sknuh, html code.shiki .sknuh{--shiki-default:#383A42;--shiki-dark:#56B6C2}html pre.shiki code .sDhpE, html code.shiki .sDhpE{--shiki-default:#50A14F;--shiki-dark:#98C379}html pre.shiki code .sAGMh, html code.shiki .sAGMh{--shiki-default:#986801;--shiki-dark:#D19A66}html pre.shiki code .slOjB, html code.shiki .slOjB{--shiki-default:#383A42;--shiki-dark:#61AFEF}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":45,"searchDepth":176,"depth":176,"links":1670},[],{"title":1672,"date":1673,"path":1674,"tags":1675,"body":1680},"uniapp 中的图片预加载","2024-04-01 05:31:25","/2024/04/01/image-preload-in-uniapp",[1676,1677,1678,1679],"uniapp","Vue.js","Web","JavaScript",{"type":17,"value":1681,"toc":1946},[1682,1685,1687,1700,1702,1711,1721,1731,1737,1743,1745,1752,1931,1936,1943],[20,1683,1684],{},"最近在做微信小程序的时候遇到了图片资源过大无法正常打包的问题，没什么太好的方法，只能是使用图床托管这些图片资源。但部分图片的体积实在太大，即使是采用了境内 cdn 的图床，即使是采用 webp 对图片进行了压缩，部分图片都需要小几秒去把图片加载出来，这导致的用户体验就不是很好了，因此我们需要实现图片预加载的功能。",[656,1686],{},[20,1688,1689,1690,1695,1696,1699],{},"在 ",[54,1691,1694],{"href":1692,"rel":1693},"https://uniapp.dcloud.net.cn/api/preload-page.html#preloadpage",[58],"uniapp 的官方文档","中，我找到了 ",[74,1697,1698],{},"uni.preloadPage(OBJECT)"," 方法。很可惜，这个方法并不支持微信小程序，自然不能完成被预加载页面的图片资源预加载。",[656,1701],{},[20,1703,1704,1705,1710],{},"经过搜索，在",[54,1706,1709],{"href":1707,"rel":1708},"https://frontend.mimiwuqi.com/qianduan/202517.html",[58],"一篇奇奇怪怪的文章","中提到：",[1712,1713,1714],"blockquote",{},[20,1715,1716,1717,1720],{},"在UniApp中，图片预加载可以通过使用",[74,1718,1719],{},"uni.getImageInfo","方法来实现。这个方法可以获取图片的信息，包括宽度、高度等。可以在应用启动时就开始加载图片，以提高后续图片显示的速度。",[20,1722,1723,1724,1727,1728,1730],{},"很遗憾，经过实测，提前使用 ",[74,1725,1726],{},"getImageInfo()"," 方法并不能实现图片的预加载。",[74,1729,1726],{}," 获取时的 Type 是 xhr，而后续图片加载时的 Type 为 webp，图片会被重复下载，并没有实现预加载的作用。",[20,1732,1733],{},[43,1734],{"alt":1735,"src":1736},"下载测试","https://static.031130.xyz/uploads/2024/08/12/6609d97bc4f7f.webp",[20,1738,1739,1740,1742],{},"上图中，蓝色部分是 ",[74,1741,1726],{}," 的网络请求，红色部分是真正的图片加载请求，可谓是一点用都没有，该加载慢还是加载慢。",[656,1744],{},[20,1746,1747,1748,1751],{},"那有没有什么办法能够实现预加载呢？我没找到优雅的方法，选择在应用的首页创建一个 ",[74,1749,1750],{},"display: none"," 的 view 将所有的图片先加载一遍。",[68,1753,1757],{"className":1754,"code":1755,"language":1756,"meta":45,"style":45},"language-vue shiki shiki-themes one-light one-dark-pro","\u003Ctemplate>\n    \u003Cview style=\"display: none;\">\n        \u003Cimage\n            v-for=\"image in imageToPreload\"\n            :src=\"image\"\n        />\n    \u003C/view>\n\u003C/template>\n\u003Cscript setup lang=\"ts\">\nconst imageToPreload = [\n    \"https://http.cat/100\",\n    \"https://http.cat/200\",\n    \"https://http.cat/300\",\n    \"https://http.cat/400\",\n    \"https://http.cat/500\"\n]\n\u003C/script>\n","vue",[74,1758,1759,1770,1794,1802,1812,1822,1827,1836,1845,1865,1881,1889,1896,1903,1911,1917,1922],{"__ignoreMap":45},[77,1760,1761,1764,1767],{"class":79,"line":80},[77,1762,1763],{"class":112},"\u003C",[77,1765,1766],{"class":83},"template",[77,1768,1769],{"class":112},">\n",[77,1771,1772,1775,1778,1781,1783,1786,1790,1792],{"class":79,"line":176},[77,1773,1774],{"class":112},"    \u003C",[77,1776,1777],{"class":83},"view",[77,1779,1780],{"class":99}," style",[77,1782,88],{"class":112},[77,1784,1785],{"class":91},"\"",[77,1787,1789],{"class":1788},"s-4uI","display: none;",[77,1791,1785],{"class":91},[77,1793,1769],{"class":112},[77,1795,1796,1799],{"class":79,"line":298},[77,1797,1798],{"class":112},"        \u003C",[77,1800,1801],{"class":83},"image\n",[77,1803,1804,1807,1809],{"class":79,"line":352},[77,1805,1806],{"class":99},"            v-for",[77,1808,88],{"class":112},[77,1810,1811],{"class":91},"\"image in imageToPreload\"\n",[77,1813,1814,1817,1819],{"class":79,"line":360},[77,1815,1816],{"class":99},"            :src",[77,1818,88],{"class":112},[77,1820,1821],{"class":91},"\"image\"\n",[77,1823,1824],{"class":79,"line":368},[77,1825,1826],{"class":112},"        />\n",[77,1828,1829,1832,1834],{"class":79,"line":376},[77,1830,1831],{"class":112},"    \u003C/",[77,1833,1777],{"class":83},[77,1835,1769],{"class":112},[77,1837,1838,1841,1843],{"class":79,"line":384},[77,1839,1840],{"class":112},"\u003C/",[77,1842,1766],{"class":83},[77,1844,1769],{"class":112},[77,1846,1847,1849,1852,1855,1858,1860,1863],{"class":79,"line":1397},[77,1848,1763],{"class":112},[77,1850,1851],{"class":83},"script",[77,1853,1854],{"class":99}," setup",[77,1856,1857],{"class":99}," lang",[77,1859,88],{"class":112},[77,1861,1862],{"class":91},"\"ts\"",[77,1864,1769],{"class":112},[77,1866,1867,1870,1874,1878],{"class":79,"line":1403},[77,1868,1869],{"class":780},"const",[77,1871,1873],{"class":1872},"sNmU0"," imageToPreload",[77,1875,1877],{"class":1876},"s_Sar"," =",[77,1879,1880],{"class":112}," [\n",[77,1882,1883,1886],{"class":79,"line":1408},[77,1884,1885],{"class":91},"    \"https://http.cat/100\"",[77,1887,1888],{"class":112},",\n",[77,1890,1891,1894],{"class":79,"line":1434},[77,1892,1893],{"class":91},"    \"https://http.cat/200\"",[77,1895,1888],{"class":112},[77,1897,1898,1901],{"class":79,"line":1439},[77,1899,1900],{"class":91},"    \"https://http.cat/300\"",[77,1902,1888],{"class":112},[77,1904,1906,1909],{"class":79,"line":1905},14,[77,1907,1908],{"class":91},"    \"https://http.cat/400\"",[77,1910,1888],{"class":112},[77,1912,1914],{"class":79,"line":1913},15,[77,1915,1916],{"class":91},"    \"https://http.cat/500\"\n",[77,1918,1920],{"class":79,"line":1919},16,[77,1921,1119],{"class":112},[77,1923,1925,1927,1929],{"class":79,"line":1924},17,[77,1926,1840],{"class":112},[77,1928,1851],{"class":83},[77,1930,1769],{"class":112},[20,1932,1933],{},[43,1934],{"alt":1735,"src":1935},"https://static.031130.xyz/uploads/2024/08/12/6609db8a213da.webp",[20,1937,1938,1939,1942],{},"可以看到，红色部分的资源在 size 那一栏变成了 ",[74,1940,1941],{},"(disk cache)","，加载时间也明显降低，虽然方法不优雅，但起码实现了图片资源的预加载。",[172,1944,1945],{},"html pre.shiki code .s5ixo, html code.shiki .s5ixo{--shiki-default:#383A42;--shiki-dark:#ABB2BF}html pre.shiki code .sJa8x, html code.shiki .sJa8x{--shiki-default:#E45649;--shiki-dark:#E06C75}html pre.shiki code .sAGMh, html code.shiki .sAGMh{--shiki-default:#986801;--shiki-dark:#D19A66}html pre.shiki code .sDhpE, html code.shiki .sDhpE{--shiki-default:#50A14F;--shiki-dark:#98C379}html pre.shiki code .s-4uI, html code.shiki .s-4uI{--shiki-default:#383A42;--shiki-dark:#98C379}html pre.shiki code .sLKXg, html code.shiki .sLKXg{--shiki-default:#A626A4;--shiki-dark:#C678DD}html pre.shiki code .sNmU0, html code.shiki .sNmU0{--shiki-default:#986801;--shiki-dark:#E5C07B}html pre.shiki code .s_Sar, html code.shiki .s_Sar{--shiki-default:#0184BC;--shiki-dark:#56B6C2}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":45,"searchDepth":176,"depth":176,"links":1947},[],{"title":1949,"date":1950,"path":1951,"tags":1952,"body":1955},"小记 - 尝试拼凑出 apt 仓库中的 deb 包下载地址","2024-03-13 21:55:04","/2024/03/13/try-to-compose-download-links-of-deb-packages-in-apt-repository",[10,1953,1954],"Apt","deepin",{"type":17,"value":1956,"toc":2175},[1957,1960,1969,1972,1975,1981,1988,1991,1994,2002,2013,2082,2089,2095,2106,2112,2115,2118,2146,2152,2163,2166,2172],[20,1958,1959],{},"大概一周前，有一个来源不明的 Linux 微信，从包的结构来看是基于 qt 实现的图形化界面，deb 包中的 control 信息表明是腾讯团队官方出品的。今天听人说 UOS 的商店上架了最新的微信，便尝试从 UOS 的官方仓库提取下载链接，帮助 AUR Maintainer 获取到新的地址。",[20,1961,1962,1963,1968],{},"在我的",[54,1964,1967],{"href":1965,"rel":1966},"https://zhul.in/2021/11/20/what-is-deepin-elf-verify/",[58],"《deepin-elf-verify究竟是何物？》","这篇文章中，我成功从 uos.deepin.cn 下载到了来自 UOS 中的软件包。可惜，当我采用同样的方法搜索 weixin 或者 wechat 字样时，没有得到任何结果。",[20,1970,1971],{},"UOS 上的软件来源起码来自两个仓库，一个是与系统有关的软件，比如 Linux Kernel，GCC 一类开源软件，应该就是来自我之前下载到 deepin-elf-verify 的那个源。除此之外，还有一个 appstore 源，里面存放的都是应用商店中上架的软件（大部分可能是闭源的）。",[20,1973,1974],{},"在 chinauos.com 下载到最新的 ISO 安装镜像后，直接在虚拟机中走完正常的安装流畅，然后直捣黄龙。",[20,1976,1977],{},[43,1978],{"alt":1979,"src":1980},"源地址","https://static.031130.xyz/uploads/2024/08/12/65f1b344e5581.webp",[20,1982,1983,1984,1987],{},"可以看出，",[74,1985,1986],{},"/etc/apt/sources.list.d/appstore.list"," 文件中列出的源很有可能就是我们要找的新版微信的所在源。",[20,1989,1990],{},"可惜直接访问的时候，源地址给出了 403。他们似乎不愿意公开源地址的 filelist index。",[20,1992,1993],{},"不过没关系，既然 UOS Desktop 目前仍然依赖 APT 实现软件安装，那它的源应该仍然符合 Debian 的 APT Repository 目录结构。",[20,1995,1996,1997],{},"根据 ",[54,1998,2001],{"href":1999,"rel":2000},"https://wiki.debian.org/DebianRepository/Format",[58],"DebianWiki 中的描述",[1712,2003,2004,2007],{},[20,2005,2006],{},"gives an example:",[68,2008,2011],{"className":2009,"code":2010,"language":523},[521],"deb https://deb.debian.org/debian stable main contrib non-free\n",[74,2012,2010],{"__ignoreMap":45},[1712,2014,2015,2018,2036,2069],{},[20,2016,2017],{},"An archive can have either source packages or binary packages or both but they have to be specified separately to apt.",[20,2019,2020,2021,2027,2028,2031,2032,2035],{},"The uri, in this case ",[2022,2023,2024],"em",{},[74,2025,2026],{},"https://deb.debian.org/debian"," specifies the root of the archive. Often Debian archives are in the ",[2022,2029,2030],{},"debian/"," directory on the server but can be anywhere else (many mirrors for example have it in a ",[2022,2033,2034],{},"pub/linux/debian"," directory, for example).",[20,2037,2038,2039,2042,2043,2047,2048,2051,2052,2055,2056,2059,2060,2063,2064],{},"The distribution part (",[2022,2040,2041],{},"stable"," in this case) specifies a subdirectory in ",[2044,2045,2046],"strong",{},"$ARCHIVE_ROOT/dists",". It can contain additional slashes to specify subdirectories nested deeper, eg. ",[2022,2049,2050],{},"stable/updates",". distribution typically corresponds to ",[2044,2053,2054],{},"Suite"," or ",[2044,2057,2058],{},"Codename"," specified in the ",[2044,2061,2062],{},"Release"," files. ",[2022,2065,2066],{},[2044,2067,2068],{},"FIXME is this enforced anyhow?",[20,2070,2071,2072,2055,2075,2077,2078,2081],{},"To download packages from a repository apt would download an ",[2044,2073,2074],{},"InRelease",[2044,2076,2062],{}," file from the ",[2044,2079,2080],{},"$ARCHIVE_ROOT/dists/$DISTRIBUTION"," directory.",[20,2083,2084,2085,2088],{},"我尝试了访问 ",[74,2086,2087],{},"https://pro-store-packages.uniontech.com/appstore/dists/eagle-pro/Release","，获得了一系列索引文件的索引。",[20,2090,2091],{},[43,2092],{"alt":2093,"src":2094},"索引的索引（很拗口）","https://static.031130.xyz/uploads/2024/08/12/65f1b5166810a.webp",[20,2096,2097,2098,2101,2102],{},"第一段中就能看到熟悉的 ",[74,2099,2100],{},"Packages"," 文件。根据我 deepin-elf-verify 相关博客中记载，这个文件中会保存 deb 文件的相对路径。我们先拼出 amd64 架构的 Packages 文件下载链接: ",[54,2103,2104],{"href":2104,"rel":2105},"https://pro-store-packages.uniontech.com/appstore/dists/eagle-pro/appstore/binary-amd64/Packages",[58],[20,2107,2108],{},[43,2109],{"alt":2110,"src":2111},"deb 包详细信息","https://static.031130.xyz/uploads/2024/08/12/65f1b5faccc86.webp",[20,2113,2114],{},"这里可以看到源中每一个 deb 包的信息。图中红色方框框出的便是其中一个 deb 包在源中的相对路径。",[20,2116,2117],{},"我们可以使用 grep 命令去检索 weixin 或者 wechat 关键词",[68,2119,2121],{"className":70,"code":2120,"language":72,"meta":45,"style":45},"curl -sL https://pro-store-packages.uniontech.com/appstore/dists/eagle-pro/appstore/binary-amd64/Packages | grep -E \"weixin|wechat\"\n",[74,2122,2123],{"__ignoreMap":45},[77,2124,2125,2128,2131,2134,2137,2140,2143],{"class":79,"line":80},[77,2126,2127],{"class":95},"curl",[77,2129,2130],{"class":99}," -sL",[77,2132,2133],{"class":91}," https://pro-store-packages.uniontech.com/appstore/dists/eagle-pro/appstore/binary-amd64/Packages",[77,2135,2136],{"class":112}," | ",[77,2138,2139],{"class":95},"grep",[77,2141,2142],{"class":99}," -E",[77,2144,2145],{"class":91}," \"weixin|wechat\"\n",[20,2147,2148],{},[43,2149],{"alt":2150,"src":2151},"获取到我们想要的 deb 包的相对路径","https://static.031130.xyz/uploads/2024/08/12/65f1b6a4c3239.webp",[20,2153,2154,2155,2158,2159],{},"在这个路径前加上之前 ",[74,2156,2157],{},"appstore.list"," 文件中给出的 url 前缀，即可拼凑出 deb 包的完整下载地址: ",[54,2160,2161],{"href":2161,"rel":2162},"https://pro-store-packages.uniontech.com/appstore/pool/appstore/c/com.tencent.wechat/com.tencent.wechat_1.0.0.236_amd64.deb",[58],[20,2164,2165],{},"放到浏览器中尝试，果然可以正常下载",[20,2167,2168],{},[43,2169],{"alt":2170,"src":2171},"正常下载","https://static.031130.xyz/uploads/2024/08/12/65f1b73567121.webp",[172,2173,2174],{},"html pre.shiki code .sAdtL, html code.shiki .sAdtL{--shiki-default:#4078F2;--shiki-dark:#61AFEF}html pre.shiki code .sAGMh, html code.shiki .sAGMh{--shiki-default:#986801;--shiki-dark:#D19A66}html pre.shiki code .sDhpE, html code.shiki .sDhpE{--shiki-default:#50A14F;--shiki-dark:#98C379}html pre.shiki code .s5ixo, html code.shiki .s5ixo{--shiki-default:#383A42;--shiki-dark:#ABB2BF}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":45,"searchDepth":176,"depth":176,"links":2176},[],{"title":2178,"date":2179,"path":2180,"tags":2181,"body":2183},"在 Linux 下使用 mitmproxy 抓取 HTTPS 流量","2024-02-29 22:03:58","/2024/02/29/capture-https-traffic-on-linux-with-mitmproxy",[10,306,189,2182],"mitmproxy",{"type":17,"value":2184,"toc":2436},[2185,2188,2191,2195,2202,2220,2224,2227,2239,2247,2253,2263,2268,2272,2275,2282,2288,2299,2306,2326,2335,2356,2361,2373,2376,2380,2383,2390,2396,2405,2408,2414,2417,2420,2430,2433],[20,2186,2187],{},"作为部分 AUR Package 的 maintainer，一直以来我都有在 Linux 下抓取 https 流量的需求，比如抓取应用内的更新检测时访问的 url 地址。之前一直没有空去研究，趁着最近课少，总算是完成了这个目标。",[20,2189,2190],{},"在这里我使用的 mitmproxy，基于 python 和 webui 的一款开源简洁的流量代理软件，可以用于抓取 https 流量信息。",[30,2192,2194],{"id":2193},"安装-mitmproxy","安装 mitmproxy",[20,2196,2197,2198,2201],{},"在 Arch Linux 下，官方 ",[74,2199,2200],{},"extra"," 源中已经打包好了这款软件，直接使用下面的命令即可完成安装。",[68,2203,2205],{"className":70,"code":2204,"language":72,"meta":45,"style":45},"sudo pacman -S mitmproxy\n",[74,2206,2207],{"__ignoreMap":45},[77,2208,2209,2211,2214,2217],{"class":79,"line":80},[77,2210,544],{"class":95},[77,2212,2213],{"class":91}," pacman",[77,2215,2216],{"class":99}," -S",[77,2218,2219],{"class":91}," mitmproxy\n",[30,2221,2223],{"id":2222},"尝试运行-mitmweb","尝试运行 mitmweb",[20,2225,2226],{},"安装完成后，我们将会获得三个新的命令可用：",[2228,2229,2230,2234,2236],"ul",{},[2231,2232,2233],"li",{},"mitmdump",[2231,2235,2182],{},[2231,2237,2238],{},"mitmweb",[20,2240,2241,2242,2246],{},"我们只要使用 mitmweb 即可同时打开 8080 的代理端口和 8081 端口的 webui。访问 ",[54,2243,2244],{"href":2244,"rel":2245},"http://127.0.0.1:8081",[58]," 即可看到 mitmproxy 的网页。",[20,2248,2249],{},[43,2250],{"alt":2251,"src":2252},"mitmweb 的界面","https://static.031130.xyz/uploads/2024/08/12/65e092503d5bb.webp",[20,2254,2255,2256],{},"当然，也可以在 mitmweb 命令后面追加 -p ",[2257,2258,2259,2260],"port",{}," 和 --web-port=",[2257,2261,2262],{}," 分别设置代理端口和 webui 的端口。",[20,2264,2265,2266],{},"首先，我们先运行一次 ",[74,2267,2238],{},[30,2269,2271],{"id":2270},"安装-ca-证书","安装 ca 证书",[20,2273,2274],{},"为了解密 https 流量，我们需要为系统安装上 mitmproxy 自己的证书文件，让系统信任我们的证书。",[20,2276,2277,2278,2281],{},"先来看看 ",[74,2279,2280],{},"/usr/share/ca-certificates/trust-source/README"," 这个文件",[68,2283,2286],{"className":2284,"code":2285,"language":523},[521],"This directory /usr/share/ca-certificates/trust-source/ contains CA certificates\nand trust settings in the PEM file format. The trust settings found here will be\ninterpreted with a low priority - lower than the ones found in \n/etc/ca-certificates/trust-source/ .\n\n=============================================================================\nQUICK HELP: To add a certificate in the simple PEM or DER file formats to the\n            list of CAs trusted on the system:\n\n            Copy it to the\n                    /usr/share/ca-certificates/trust-source/anchors/\n            subdirectory, and run the\n                    update-ca-trust\n            command.\n\n            If your certificate is in the extended BEGIN TRUSTED file format,\n            then place it into the main trust-source/ directory instead.\n=============================================================================\n\nPlease refer to the update-ca-trust(8) manual page for additional information.\n",[74,2287,2285],{"__ignoreMap":45},[20,2289,2290,2291,2294,2295,2298],{},"这份文件告诉我们可以在 ",[74,2292,2293],{},"/usr/share/ca-certificates/trust-source/anchors/"," 路径下放置 PEM 证书文件，并使用 ",[74,2296,2297],{},"update-ca-trust"," 命令更新系统的信任。",[20,2300,2301,2302,2305],{},"mitmproxy 软件第一次运行时，将会在当前用户的 ",[74,2303,2304],{},"$HOME/.mitmproxy/"," 文件夹下生成证书，我们打开这个文件夹，发现一共有六个文件：",[2228,2307,2308,2311,2314,2317,2320,2323],{},[2231,2309,2310],{},"mitmproxy-ca-cert.cer",[2231,2312,2313],{},"mitmproxy-ca-cert.p12",[2231,2315,2316],{},"mitmproxy-ca-cert.pem",[2231,2318,2319],{},"mitmproxy-ca.p12",[2231,2321,2322],{},"mitmproxy-ca.pem",[2231,2324,2325],{},"mitmproxy-dhparam.pem",[20,2327,2328,2329,2331,2332,2334],{},"我们这里需要将 ",[74,2330,2316],{}," 文件复制到 ",[74,2333,2293],{}," 路径下",[68,2336,2338],{"className":70,"code":2337,"language":72,"meta":45,"style":45},"sudo cp $HOME/.mitmproxy/mitmproxy-ca-cert.pem /usr/share/ca-certificates/trust-source/anchors/\n",[74,2339,2340],{"__ignoreMap":45},[77,2341,2342,2344,2347,2350,2353],{"class":79,"line":80},[77,2343,544],{"class":95},[77,2345,2346],{"class":91}," cp",[77,2348,2349],{"class":83}," $HOME",[77,2351,2352],{"class":91},"/.mitmproxy/mitmproxy-ca-cert.pem",[77,2354,2355],{"class":91}," /usr/share/ca-certificates/trust-source/anchors/\n",[20,2357,2358,2359],{},"随后执行 ",[74,2360,2297],{},[68,2362,2364],{"className":70,"code":2363,"language":72,"meta":45,"style":45},"sudo update-ca-trust\n",[74,2365,2366],{"__ignoreMap":45},[77,2367,2368,2370],{"class":79,"line":80},[77,2369,544],{"class":95},[77,2371,2372],{"class":91}," update-ca-trust\n",[20,2374,2375],{},"这样便完成了 ca 证书的安装",[30,2377,2379],{"id":2378},"使目标软件使用-8080-端口通信","使目标软件使用 8080 端口通信",[20,2381,2382],{},"其实我试过使用透明代理进行抓包，只不过我的 Archlinux 是作为日常主力机使用的，系统无时无刻不在向外通信，透明代理以后 mitmproxy 的 webui 各种刷屏，便放弃了这个想法，选择指定目标软件使用 8080 端口通信。",[20,2384,2385,2386,2389],{},"网上比较常见的做法是使用 ",[74,2387,2388],{},"proxychains-ng"," 代理目标软件。这个方案是可行的，只不过我这边测试下来，部分软件使用 proxychains 代理以后出现了仍然不使用代理、无法联网、甚至直接崩溃的情况。",[20,2391,2392],{},[43,2393],{"alt":2394,"src":2395},"程序崩溃","https://static.031130.xyz/uploads/2024/08/12/65e09559dceef.webp",[20,2397,2398,2399,2404],{},"因此我转向了 ",[54,2400,2403],{"href":2401,"rel":2402},"https://github.com/mzz2017/gg",[58],"gg","。gg 和 proxychains-ng 的定位相同，都是使目标命令通过指定的代理进行通信，只不过 gg 解决了部分 golang 编写的软件无法被 proxychains 代理的问题，并支持一些常见的用来国际联网的协议。",[20,2406,2407],{},"在不对 gg 进行配置的情况下，每次启动时，gg 都会要求我们输入代理地址，这正合我意。",[20,2409,2410],{},[43,2411],{"alt":2412,"src":2413},"gg 要求输入代理地址","https://static.031130.xyz/uploads/2024/08/12/65e0963840449.webp",[20,2415,2416],{},"此时，软件正常启动，流量全部经过 mitmproxy，可以在 webui 上看到具体情况",[30,2418,2419],{"id":2419},"抓包成功",[20,2421,2422,2426],{},[43,2423],{"alt":2424,"src":2425},"命令行下看到流量信息","https://static.031130.xyz/uploads/2024/08/12/65e097dfe1f17.webp",[43,2427],{"alt":2428,"src":2429},"mitmweb 正常获取解密后的流量信息","https://static.031130.xyz/uploads/2024/08/12/65e09780dd2c0.webp",[20,2431,2432],{},"我们可以看到 mitmproxy 成功捕获并解密的 https 流量，针对图片等信息甚至可以直接实现预览。",[172,2434,2435],{},"html pre.shiki code .sAdtL, html code.shiki .sAdtL{--shiki-default:#4078F2;--shiki-dark:#61AFEF}html pre.shiki code .sDhpE, html code.shiki .sDhpE{--shiki-default:#50A14F;--shiki-dark:#98C379}html pre.shiki code .sAGMh, html code.shiki .sAGMh{--shiki-default:#986801;--shiki-dark:#D19A66}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .sJa8x, html code.shiki .sJa8x{--shiki-default:#E45649;--shiki-dark:#E06C75}",{"title":45,"searchDepth":176,"depth":176,"links":2437},[2438,2439,2440,2441,2442],{"id":2193,"depth":176,"text":2194},{"id":2222,"depth":176,"text":2223},{"id":2270,"depth":176,"text":2271},{"id":2378,"depth":176,"text":2379},{"id":2419,"depth":176,"text":2419},{"title":2444,"date":2445,"path":2446,"tags":2447,"body":2451},"如何使用 docker 部署 onemanager","2024-02-11 16:30:29","/2024/02/11/how-to-deploy-onemanager-with-docker",[2448,2449,11,2450],"PHP","OneDrive","Docker",{"type":17,"value":2452,"toc":2699},[2453,2455,2458,2465,2467,2476,2480,2509,2513,2528,2531,2535,2560,2567,2573,2582,2593,2609,2618,2627,2630,2633,2643,2662,2666,2693,2696],[656,2454],{},[30,2456,2457],{"id":2457},"部署方法",[20,2459,2460,2461],{},"如果你只是想找一个 OneManager-php 的 Docker 部署方法，直接看 ",[54,2462,2463],{"href":2463,"rel":2464},"https://github.com/zhullyb/OneManager-php-docker",[58],[656,2466],{},[20,2468,2469,2470,2475],{},"一直以来，我都是 ",[54,2471,2474],{"href":2472,"rel":2473},"https://github.com/qkqpttgf/OneManager-php",[58],"OneManager-php"," 的忠实用户。这些年来，尽管有 alist 这种 UI 好看，多种网盘高度聚合的项目逐渐取代了 onemanager 的生态位，但 onemanager 支持文件分片上传、上传流量不经服务器的特点还是让我非常满意。前一阵子，glitch 暂停了针对项目自定义域名的支持，因此在我手贱地取消了项目原本绑定的域名后，迫切地需要寻找一个新的部署的平台，只不过 onemanager 项目现在列出的方案都不太让我满意，因此我就萌生出了在 vps 上自己部署的想法。",[244,2477,2479],{"id":2478},"docker-镜像选用","Docker 镜像选用",[20,2481,2482,2483,2486,2487,2492,2493,2496,2497,2500,2501,2504,2505,2508],{},"vps 上自己部署 php 项目，最简单的方法是使用 Docker，",[410,2484,2485],{},"使用 Docker 就可以免去配置 nginx 或者同类产品的 php-fpm 配置","才怪。我打开 Docker 提供的 ",[54,2488,2491],{"href":2489,"rel":2490},"https://hub.docker.com/_/php",[58],"php 官方镜像","，最小的镜像是带",[74,2494,2495],{},"-cli","后缀的，这个镜像就不适合进行部署，php 内置的开发服务器是单线程的，当同时打开两个网页访问开发服务器的时候，其中一个网页就会卡住；以",[74,2498,2499],{},"-fpm","结尾的镜像变体很明显，仍然需要去 nginx 或同类产品的配置文件那边去配置 fpm，这给部署了好几次 php 项目的我带来的心理阴影；剩下一个就是",[74,2502,2503],{},"-apache","后缀、使用 apache server 提供 php 服务的镜像，体积虽然大了点，但好在操作简单，只需要将 php 文件放进 ",[74,2506,2507],{},"/var/www/html","，启用 php 的相关拓展，启用 apache 的相关功能即可。",[30,2510,2512],{"id":2511},"php-拓展","php 拓展",[20,2514,2515,2516,2519,2520,2523,2524,2527],{},"php 的拓展可以使用镜像自带的 ",[74,2517,2518],{},"docker-php-ext-install"," 和 ",[74,2521,2522],{},"docker-php-ext-enable"," 命令进行操作，此外还有一个 ",[74,2525,2526],{},"docker-php-ext-configure"," 命令可以配置相关的拓展，不过我并不是 php 开发者，不熟悉拓展有什么好配置的。",[20,2529,2530],{},"OneManager-php 没有依赖任何的 php 拓展，因此这个步骤可以直接跳过。",[30,2532,2534],{"id":2533},"apache-server-配置","Apache Server 配置",[20,2536,2537,2538,2541,2542,2541,2545,2541,2548,2541,2551,2541,2554,2541,2557,2559],{},"和 php 拓展一样，镜像内也提供了几个命令进行 Apache Server 的配置，分别为 ",[74,2539,2540],{},"a2disconf","、",[74,2543,2544],{},"a2dismod",[74,2546,2547],{},"a2dissite",[74,2549,2550],{},"a2enconf",[74,2552,2553],{},"a2enmod",[74,2555,2556],{},"a2ensite",[74,2558,2556],{},"。",[20,2561,2562,2563,2566],{},"OneManager-php 在部署的时候依赖于 Apache Server 的 rewrite 的模块，因此在 Dockerfile 中需要使用 ",[74,2564,2565],{},"a2enmod rewrite"," 开启 rewrite 支持。至于别的 Apache Server 配置，都可以通过项目中的 .htaccess 文件进行配置。",[30,2568,2570],{"id":2569},"htaccess-文件纠错",[410,2571,2572],{},".htaccess 文件纠错",[20,2574,2575],{},[410,2576,2577,2578,2581],{},"在 OneManager-php 仓库中，",[74,2579,2580],{},".htaccess"," 文件有一些小问题。",[68,2583,2587],{"className":2584,"code":2585,"language":2586,"meta":45,"style":45},"language-htaccess shiki shiki-themes one-light one-dark-pro","RewriteRule ^(.*) index.php?/$1 [L]\n","htaccess",[74,2588,2589],{"__ignoreMap":45},[77,2590,2591],{"class":79,"line":80},[77,2592,2585],{},[20,2594,2595],{},[410,2596,2597,2598,2601,2602,2541,2605,2608],{},"这行配置原本是将访问的路径追加到 ",[74,2599,2600],{},"index.php?/"," 后面的意思，但 一旦路径中出现了 ",[74,2603,2604],{},"[",[74,2606,2607],{},"]"," 或者空格等字符时，会触发 Apache 自带的保护，因此我们将这行改成下面这个样子即可。",[68,2610,2612],{"className":2584,"code":2611,"language":2586,"meta":45,"style":45},"RewriteRule ^(.*) index.php [QSA,L]\n",[74,2613,2614],{"__ignoreMap":45},[77,2615,2616],{"class":79,"line":80},[77,2617,2611],{},[20,2619,2620,2621,2626],{},"原项目合并了",[54,2622,2625],{"href":2623,"rel":2624},"https://github.com/qkqpttgf/OneManager-php/pull/716",[58],"我的 PR","，因此这一过程不再需要。",[30,2628,2629],{"id":2629},"处理文件权限问题",[20,2631,2632],{},"OneManager-php 在运行过程中，会有针对配置文件的读写操作，此外还内置了一键更新的功能，因此会对路径内的文件进行读写，我们需要确保 php 在运行过程中有权限对这些文件进行读写。",[20,2634,2635,2636,2638,2639,2642],{},"可以直接将 ",[74,2637,2507],{}," 路径的所有权转给 ",[74,2640,2641],{},"www-data"," 用户。",[68,2644,2646],{"className":70,"code":2645,"language":72,"meta":45,"style":45},"chown -R www-data:www-data /var/www/html\n",[74,2647,2648],{"__ignoreMap":45},[77,2649,2650,2653,2656,2659],{"class":79,"line":80},[77,2651,2652],{"class":95},"chown",[77,2654,2655],{"class":99}," -R",[77,2657,2658],{"class":91}," www-data:www-data",[77,2660,2661],{"class":91}," /var/www/html\n",[30,2663,2665],{"id":2664},"最终的-dockerfile","最终的 Dockerfile",[68,2667,2671],{"className":2668,"code":2669,"language":2670,"meta":45,"style":45},"language-dockerfile shiki shiki-themes one-light one-dark-pro","FROM php:8-apache\nRUN a2enmod rewrite\nCOPY OneManager-php /var/www/html\nRUN chown -R www-data:www-data /var/www/html\n","dockerfile",[74,2672,2673,2678,2683,2688],{"__ignoreMap":45},[77,2674,2675],{"class":79,"line":80},[77,2676,2677],{},"FROM php:8-apache\n",[77,2679,2680],{"class":79,"line":176},[77,2681,2682],{},"RUN a2enmod rewrite\n",[77,2684,2685],{"class":79,"line":298},[77,2686,2687],{},"COPY OneManager-php /var/www/html\n",[77,2689,2690],{"class":79,"line":352},[77,2691,2692],{},"RUN chown -R www-data:www-data /var/www/html\n",[20,2694,2695],{},"其实一共就 4 行，还是挺简单的。",[172,2697,2698],{},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .sAdtL, html code.shiki .sAdtL{--shiki-default:#4078F2;--shiki-dark:#61AFEF}html pre.shiki code .sAGMh, html code.shiki .sAGMh{--shiki-default:#986801;--shiki-dark:#D19A66}html pre.shiki code .sDhpE, html code.shiki .sDhpE{--shiki-default:#50A14F;--shiki-dark:#98C379}",{"title":45,"searchDepth":176,"depth":176,"links":2700},[2701,2704,2705,2706,2707,2708],{"id":2457,"depth":176,"text":2457,"children":2702},[2703],{"id":2478,"depth":298,"text":2479},{"id":2511,"depth":176,"text":2512},{"id":2533,"depth":176,"text":2534},{"id":2569,"depth":176,"text":2572},{"id":2629,"depth":176,"text":2629},{"id":2664,"depth":176,"text":2665},{"title":2710,"date":2711,"path":2712,"tags":2713,"body":2715},"crontab 中简单的@语法糖","2024-02-08 17:21:31","/2024/02/08/extra-usage-for-crontab",[10,2714],"crontab",{"type":17,"value":2716,"toc":2909},[2717,2723,2736,2859,2862,2865,2906],[20,2718,2719,2720],{},"说来惭愧，其实我用了这么久的 Linux，一直没有学会编写 crontab 脚本。一行的开头写上五位莫名其妙的数字或星号，后面跟上需要执行的命令，看上去很 kiss，",[410,2721,2722],{},"但我确实记不住，以至于我现在每次写 crontab 都是让 ChatGPT 来帮我写。",[20,2724,2725,2726,2729,2730,2735],{},"不过我最近查阅 Linux 下设置开机自启脚本的方案的时候，意外地看到 crontab 中居然可以用 ",[74,2727,2728],{},"@reboot command"," 的方式去写，这让我意识到 crontab 也是有一些简单的语法糖的。在查阅了 ",[54,2731,2734],{"href":2732,"rel":2733},"https://man.archlinux.org/man/crontab.5.en#EXTENSIONS",[58],"crontab 的 manual"," 后，我发现一共有下面这么几种 @ 写法的语法糖。这是在全网大部分的 crontab 中文教程中是没有的。",[2737,2738,2739,2755],"table",{},[2740,2741,2742],"thead",{},[2743,2744,2745,2749,2752],"tr",{},[2746,2747,2748],"th",{},"语法糖",[2746,2750,2751],{},"执行条件",[2746,2753,2754],{},"等效表达式",[2756,2757,2758,2771,2786,2799,2814,2829,2844],"tbody",{},[2743,2759,2760,2766,2769],{},[2761,2762,2763],"td",{},[74,2764,2765],{},"@reboot",[2761,2767,2768],{},"开机时候运行",[2761,2770],{},[2743,2772,2773,2778,2781],{},[2761,2774,2775],{},[74,2776,2777],{},"@yearly",[2761,2779,2780],{},"一年一次",[2761,2782,2783],{},[74,2784,2785],{},"0 0 1 1 *",[2743,2787,2788,2793,2795],{},[2761,2789,2790],{},[74,2791,2792],{},"@annually",[2761,2794,2780],{},[2761,2796,2797],{},[74,2798,2785],{},[2743,2800,2801,2806,2809],{},[2761,2802,2803],{},[74,2804,2805],{},"@monthly",[2761,2807,2808],{},"一月一次",[2761,2810,2811],{},[74,2812,2813],{},"0 0 1 * *",[2743,2815,2816,2821,2824],{},[2761,2817,2818],{},[74,2819,2820],{},"@weekly",[2761,2822,2823],{},"一周一次",[2761,2825,2826],{},[74,2827,2828],{},"0 0 * * 0",[2743,2830,2831,2836,2839],{},[2761,2832,2833],{},[74,2834,2835],{},"@daily",[2761,2837,2838],{},"一天一次",[2761,2840,2841],{},[74,2842,2843],{},"0 0 * * *",[2743,2845,2846,2851,2854],{},[2761,2847,2848],{},[74,2849,2850],{},"@hourly",[2761,2852,2853],{},"一小时一次",[2761,2855,2856],{},[74,2857,2858],{},"0 * * * *",[20,2860,2861],{},"这几个简单的语法糖可以满足大部分 crontab 的情况，免去了对使用者学习并记忆 crontab 的表达式的要求。",[20,2863,2864],{},"比如说，如果我希望我的系统在每次开机时都用 TG Bot 发送一条上线信息，那就是",[68,2866,2868],{"className":70,"code":2867,"language":72,"meta":45,"style":45},"@reboot curl -s -X POST https://api.telegram.org/bot{id}:{apikey}/sendMessage -d chat_id={uid} -d text=\"`date`\"\n",[74,2869,2870],{"__ignoreMap":45},[77,2871,2872,2874,2877,2880,2883,2886,2889,2892,2895,2897,2900,2903],{"class":79,"line":80},[77,2873,2765],{"class":95},[77,2875,2876],{"class":91}," curl",[77,2878,2879],{"class":99}," -s",[77,2881,2882],{"class":99}," -X",[77,2884,2885],{"class":91}," POST",[77,2887,2888],{"class":91}," https://api.telegram.org/bot{id}:{apikey}/sendMessage",[77,2890,2891],{"class":99}," -d",[77,2893,2894],{"class":91}," chat_id={uid}",[77,2896,2891],{"class":99},[77,2898,2899],{"class":91}," text=\"`",[77,2901,2902],{"class":95},"date",[77,2904,2905],{"class":91},"`\"\n",[172,2907,2908],{},"html pre.shiki code .sAdtL, html code.shiki .sAdtL{--shiki-default:#4078F2;--shiki-dark:#61AFEF}html pre.shiki code .sDhpE, html code.shiki .sDhpE{--shiki-default:#50A14F;--shiki-dark:#98C379}html pre.shiki code .sAGMh, html code.shiki .sAGMh{--shiki-default:#986801;--shiki-dark:#D19A66}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":45,"searchDepth":176,"depth":176,"links":2910},[],"/en/archives/",131,1765307269954]