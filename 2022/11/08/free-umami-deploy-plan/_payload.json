[{"data":1,"prerenderedAt":198},["ShallowReactive",2],{"post-2022-11-08-free-umami-deploy-plan-zh":3,"surround-2022-11-08-free-umami-deploy-plan-zh":184,"randomIndex/2022/11/08/free-umami-deploy-plan/":196,"language-switch-/2022/11/08/free-umami-deploy-plan/-en":197},{"title":4,"date":5,"path":6,"tags":7,"body":12,"description":181},"【已过期】使用 vercel+supabase 免费部署 umami","2022-11-08 13:37:53","/2022/11/08/free-umami-deploy-plan",[8,9,10,11],"Network","umami","OpenSource Project","Vercel",{"type":13,"value":14,"toc":180},"minimark",[15,30,33,36,39,46,56,71,77,80,86,92,98,104,116,122,125,131,143,149,155,161,164,170],[16,17,18,27],"blockquote",{},[19,20,21,22,26],"p",{},"讲起静态网站的访客统计，我最先使用的是百度统计，但后来转到了 umeng，发现后续的几天百度爬虫的光顾次数反而多了起来。好家伙，使用百度统计相当于把自己网站访问量向百度全盘托出，",[23,24,25],"del",{},"我说我的博客怎么还不被百度收录呢","。",[19,28,29],{},"后来，umeng 推出了新的服务条款，好像是说不再向未备案的站点提供服务，随后不得不转向自部署的开源网站统计程序。",[19,31,32],{},"umami 提供了多种部署方式，在 vps 上可以非常轻松地使用 docker 一键部署，但上次 vps 到期时用 1Mbps 的小水管拖了好久都没有把博客前几个月的访客数据拖下来，一气之下我选择直接丢掉了这些可有可无的数据。",[19,34,35],{},"所以这一次，我决定放弃在自己的 vps 上部署，转去探索免费的部署方案。",[19,37,38],{},"umami 的官方文档上提供了非常多的部署方案，我个人比较喜欢 vercel，本站的随机图片 api 就是挂在 vercel 上的，界面比较简洁，且境内访问还算OK。",[19,40,41],{},[42,43],"img",{"alt":44,"src":45},"umami官方文档提供的部署方案","https://static.031130.xyz/uploads/2024/08/12/6369ee9308dc3.webp",[19,47,48,49,26],{},"但问题在于 vercel 本身并不提供免费的数据库，所以我们不得不去寻找一些长期免费提供数据库的供应商，我选择了 ",[50,51,55],"a",{"href":52,"rel":53},"https://supabase.com/pricing",[54],"nofollow","supabase",[19,57,58,59,63,64,67,68],{},"在下图中选择顶栏的 ",[60,61,62],"strong",{},"Pricing"," 后看到这个 ",[60,65,66],{},"$0/month"," 就",[23,69,70],{},"疯狂戳烂这个 Get Started",[19,72,73],{},[42,74],{"alt":75,"src":76},"supabase价目表","https://static.031130.xyz/uploads/2024/08/12/6369ef8d3451e.webp",[19,78,79],{},"随便填写个项目名然后输入一个足够强大的密码，地区选择美国就行，东部西部无所谓（毕竟我也不知道 vercel 的机房是在东部还是西部）",[19,81,82],{},[42,83],{"alt":84,"src":85},"创建项目ing","https://static.031130.xyz/uploads/2024/08/12/6369f03faba15.webp",[19,87,88,89],{},"看到这个小小的绿标就说明数据库正在初始化(",[23,90,91],{},"你先别急，让我先急",[19,93,94],{},[42,95],{"alt":96,"src":97},"项目初始化中","https://static.031130.xyz/uploads/2024/08/12/6369f0d98a59c.webp",[19,99,100],{},[42,101],{"alt":102,"src":103},"进行一通设置，把网站关闭后直接打入冷宫（x","https://static.031130.xyz/uploads/2024/08/12/6369f209c27aa.webp",[19,105,106,107,112,113],{},"随后打开官方文档，点击其",[50,108,111],{"href":109,"rel":110},"https://umami.is/docs/running-on-vercel",[54],"描述 vercel 那一页","中大大的 ",[60,114,115],{},"Deploy",[19,117,118],{},[42,119],{"alt":120,"src":121},"vercel on Document","https://static.031130.xyz/uploads/2024/08/12/6369f2bda5f78.webp",[19,123,124],{},"初始化过程中，vercel 会要求你创建一个 git 仓库，一般私有库就够了。",[19,126,127],{},[42,128],{"alt":129,"src":130},"创建仓库","https://static.031130.xyz/uploads/2024/08/12/6369f33ccf6d0.webp",[19,132,133,134,138,139,142],{},"随后需要我们设置两个环境变量，第一个 ",[135,136,137],"code",{},"DATABASE_URL"," 就是我们刚刚从 supabase 中复制下来并替换好 password 的 url，第二个 ",[135,140,141],{},"HASH_SALT","需要你随意生成一长串字符串~~（比如你可以找一个新手让他帮你退出 vim~~",[19,144,145],{},[42,146],{"alt":147,"src":148},"设置环境变量","https://static.031130.xyz/uploads/2024/08/12/6369f3adbd34d.webp",[19,150,151,152,154],{},"点击 ",[60,153,115],{}," 并等上两分钟，我们就部署完啦（首页没东西，白屏是正常的",[19,156,157],{},[42,158],{"alt":159,"src":160},"部署成功","https://static.031130.xyz/uploads/2024/08/12/6369f58f6acd4.webp",[19,162,163],{},"来到项目首页，点击任意域名即可访问到我们部署的 umami，不过 vercel 的域名近年来也有被污染的情况，建议在设置里绑定自己的域名。",[19,165,166],{},[42,167],{"alt":168,"src":169},"项目首页","https://static.031130.xyz/uploads/2024/08/12/6369f5ec7a0e2.webp",[19,171,172,173,176,177,179],{},"哦对了，别忘了 umami 的默认用户名密码是",[135,174,175],{},"admin","和",[135,178,9],{},"，别到时候点击进去看到登陆框一脸懵，这是在文档里写过的。",{"title":181,"searchDepth":182,"depth":182,"links":183},"",2,[],[185,191],{"title":186,"path":187,"stem":188,"date":189,"lang":190,"children":-1},"【翻译】关于2022年11月的事件的一些话[Z-Library]","/2022/11/21/a-few-words-about-the-events-of-november-2022","posts/zh/a-few-words-about-the-events-of-november-2022","2022-11-21 13:24:33","zh-CN",{"title":192,"path":193,"stem":194,"date":195,"lang":190,"children":-1},"我的博客部署方案","/2022/11/04/my-blog-plan","posts/zh/my-blog-plan","2022-11-04 16:41:28",0,null,1766437464758]