[{"data":1,"prerenderedAt":205},["ShallowReactive",2],{"post-2022-11-08-free-umami-deploy-plan":3,"surround-2022-11-08-free-umami-deploy-plan":193,"randomIndex/2022/11/08/free-umami-deploy-plan/":204},{"id":4,"title":5,"body":6,"date":179,"description":176,"extension":180,"meta":181,"navigation":182,"path":183,"rawbody":184,"seo":185,"stem":186,"sticky":187,"tags":188,"__hash__":192},"posts/posts/free-umami-deploy-plan.md","【已过期】使用 vercel+supabase 免费部署 umami",{"type":7,"value":8,"toc":175},"minimark",[9,24,27,30,33,40,50,65,71,74,80,86,92,98,110,116,119,125,137,143,149,155,158,164],[10,11,12,21],"blockquote",{},[13,14,15,16,20],"p",{},"讲起静态网站的访客统计，我最先使用的是百度统计，但后来转到了 umeng，发现后续的几天百度爬虫的光顾次数反而多了起来。好家伙，使用百度统计相当于把自己网站访问量向百度全盘托出，",[17,18,19],"del",{},"我说我的博客怎么还不被百度收录呢","。",[13,22,23],{},"后来，umeng 推出了新的服务条款，好像是说不再向未备案的站点提供服务，随后不得不转向自部署的开源网站统计程序。",[13,25,26],{},"umami 提供了多种部署方式，在 vps 上可以非常轻松地使用 docker 一键部署，但上次 vps 到期时用 1Mbps 的小水管拖了好久都没有把博客前几个月的访客数据拖下来，一气之下我选择直接丢掉了这些可有可无的数据。",[13,28,29],{},"所以这一次，我决定放弃在自己的 vps 上部署，转去探索免费的部署方案。",[13,31,32],{},"umami 的官方文档上提供了非常多的部署方案，我个人比较喜欢 vercel，本站的随机图片 api 就是挂在 vercel 上的，界面比较简洁，且境内访问还算OK。",[13,34,35],{},[36,37],"img",{"alt":38,"src":39},"umami官方文档提供的部署方案","https://static.031130.xyz/uploads/2024/08/12/6369ee9308dc3.webp",[13,41,42,43,20],{},"但问题在于 vercel 本身并不提供免费的数据库，所以我们不得不去寻找一些长期免费提供数据库的供应商，我选择了 ",[44,45,49],"a",{"href":46,"rel":47},"https://supabase.com/pricing",[48],"nofollow","supabase",[13,51,52,53,57,58,61,62],{},"在下图中选择顶栏的 ",[54,55,56],"strong",{},"Pricing"," 后看到这个 ",[54,59,60],{},"$0/month"," 就",[17,63,64],{},"疯狂戳烂这个 Get Started",[13,66,67],{},[36,68],{"alt":69,"src":70},"supabase价目表","https://static.031130.xyz/uploads/2024/08/12/6369ef8d3451e.webp",[13,72,73],{},"随便填写个项目名然后输入一个足够强大的密码，地区选择美国就行，东部西部无所谓（毕竟我也不知道 vercel 的机房是在东部还是西部）",[13,75,76],{},[36,77],{"alt":78,"src":79},"创建项目ing","https://static.031130.xyz/uploads/2024/08/12/6369f03faba15.webp",[13,81,82,83],{},"看到这个小小的绿标就说明数据库正在初始化(",[17,84,85],{},"你先别急，让我先急",[13,87,88],{},[36,89],{"alt":90,"src":91},"项目初始化中","https://static.031130.xyz/uploads/2024/08/12/6369f0d98a59c.webp",[13,93,94],{},[36,95],{"alt":96,"src":97},"进行一通设置，把网站关闭后直接打入冷宫（x","https://static.031130.xyz/uploads/2024/08/12/6369f209c27aa.webp",[13,99,100,101,106,107],{},"随后打开官方文档，点击其",[44,102,105],{"href":103,"rel":104},"https://umami.is/docs/running-on-vercel",[48],"描述 vercel 那一页","中大大的 ",[54,108,109],{},"Deploy",[13,111,112],{},[36,113],{"alt":114,"src":115},"vercel on Document","https://static.031130.xyz/uploads/2024/08/12/6369f2bda5f78.webp",[13,117,118],{},"初始化过程中，vercel 会要求你创建一个 git 仓库，一般私有库就够了。",[13,120,121],{},[36,122],{"alt":123,"src":124},"创建仓库","https://static.031130.xyz/uploads/2024/08/12/6369f33ccf6d0.webp",[13,126,127,128,132,133,136],{},"随后需要我们设置两个环境变量，第一个 ",[129,130,131],"code",{},"DATABASE_URL"," 就是我们刚刚从 supabase 中复制下来并替换好 password 的 url，第二个 ",[129,134,135],{},"HASH_SALT","需要你随意生成一长串字符串~~（比如你可以找一个新手让他帮你退出 vim~~",[13,138,139],{},[36,140],{"alt":141,"src":142},"设置环境变量","https://static.031130.xyz/uploads/2024/08/12/6369f3adbd34d.webp",[13,144,145,146,148],{},"点击 ",[54,147,109],{}," 并等上两分钟，我们就部署完啦（首页没东西，白屏是正常的",[13,150,151],{},[36,152],{"alt":153,"src":154},"部署成功","https://static.031130.xyz/uploads/2024/08/12/6369f58f6acd4.webp",[13,156,157],{},"来到项目首页，点击任意域名即可访问到我们部署的 umami，不过 vercel 的域名近年来也有被污染的情况，建议在设置里绑定自己的域名。",[13,159,160],{},[36,161],{"alt":162,"src":163},"项目首页","https://static.031130.xyz/uploads/2024/08/12/6369f5ec7a0e2.webp",[13,165,166,167,170,171,174],{},"哦对了，别忘了 umami 的默认用户名密码是",[129,168,169],{},"admin","和",[129,172,173],{},"umami","，别到时候点击进去看到登陆框一脸懵，这是在文档里写过的。",{"title":176,"searchDepth":177,"depth":177,"links":178},"",2,[],"2022-11-08 13:37:53","md",{},true,"/2022/11/08/free-umami-deploy-plan","---\ntitle: 【已过期】使用 vercel+supabase 免费部署 umami\ndate: 2022-11-08 13:37:53\nsticky:\ntags:\n- Network\n- umami\n- OpenSource Project\n- vercel\n---\n\n> 讲起静态网站的访客统计，我最先使用的是百度统计，但后来转到了 umeng，发现后续的几天百度爬虫的光顾次数反而多了起来。好家伙，使用百度统计相当于把自己网站访问量向百度全盘托出，~~我说我的博客怎么还不被百度收录呢~~。\n>\n> 后来，umeng 推出了新的服务条款，好像是说不再向未备案的站点提供服务，随后不得不转向自部署的开源网站统计程序。\n\numami 提供了多种部署方式，在 vps 上可以非常轻松地使用 docker 一键部署，但上次 vps 到期时用 1Mbps 的小水管拖了好久都没有把博客前几个月的访客数据拖下来，一气之下我选择直接丢掉了这些可有可无的数据。\n\n所以这一次，我决定放弃在自己的 vps 上部署，转去探索免费的部署方案。\n\numami 的官方文档上提供了非常多的部署方案，我个人比较喜欢 vercel，本站的随机图片 api 就是挂在 vercel 上的，界面比较简洁，且境内访问还算OK。\n\n![umami官方文档提供的部署方案](https://static.031130.xyz/uploads/2024/08/12/6369ee9308dc3.webp)\n\n但问题在于 vercel 本身并不提供免费的数据库，所以我们不得不去寻找一些长期免费提供数据库的供应商，我选择了 [supabase](https://supabase.com/pricing)。\n\n在下图中选择顶栏的 **Pricing** 后看到这个 **$0/month** 就~~疯狂戳烂这个 Get Started~~\n\n![supabase价目表](https://static.031130.xyz/uploads/2024/08/12/6369ef8d3451e.webp)\n\n随便填写个项目名然后输入一个足够强大的密码，地区选择美国就行，东部西部无所谓（毕竟我也不知道 vercel 的机房是在东部还是西部）\n\n![创建项目ing](https://static.031130.xyz/uploads/2024/08/12/6369f03faba15.webp)\n\n看到这个小小的绿标就说明数据库正在初始化(~~你先别急，让我先急~~\n\n![项目初始化中](https://static.031130.xyz/uploads/2024/08/12/6369f0d98a59c.webp)\n\n![进行一通设置，把网站关闭后直接打入冷宫（x](https://static.031130.xyz/uploads/2024/08/12/6369f209c27aa.webp)\n\n随后打开官方文档，点击其[描述 vercel 那一页](https://umami.is/docs/running-on-vercel)中大大的 **Deploy**\n\n![vercel on Document](https://static.031130.xyz/uploads/2024/08/12/6369f2bda5f78.webp)\n\n初始化过程中，vercel 会要求你创建一个 git 仓库，一般私有库就够了。\n\n![创建仓库](https://static.031130.xyz/uploads/2024/08/12/6369f33ccf6d0.webp)\n\n随后需要我们设置两个环境变量，第一个 `DATABASE_URL` 就是我们刚刚从 supabase 中复制下来并替换好 password 的 url，第二个 `HASH_SALT`需要你随意生成一长串字符串~~（比如你可以找一个新手让他帮你退出 vim~~\n\n![设置环境变量](https://static.031130.xyz/uploads/2024/08/12/6369f3adbd34d.webp)\n\n点击 **Deploy** 并等上两分钟，我们就部署完啦（首页没东西，白屏是正常的\n\n![部署成功](https://static.031130.xyz/uploads/2024/08/12/6369f58f6acd4.webp)\n\n来到项目首页，点击任意域名即可访问到我们部署的 umami，不过 vercel 的域名近年来也有被污染的情况，建议在设置里绑定自己的域名。\n\n![项目首页](https://static.031130.xyz/uploads/2024/08/12/6369f5ec7a0e2.webp)\n\n哦对了，别忘了 umami 的默认用户名密码是`admin`和`umami`，别到时候点击进去看到登陆框一脸懵，这是在文档里写过的。\n",{"title":5,"description":176},"posts/free-umami-deploy-plan",false,[189,173,190,191],"Network","OpenSource Project","vercel","osl0yHkjy4rAYiAxbeZgdxKY06Tnbv32HIeiGGMmtLw",[194,199],{"title":195,"path":196,"stem":197,"date":198,"children":-1},"【翻译】关于2022年11月的事件的一些话[Z-Library]","/2022/11/21/a-few-words-about-the-events-of-november-2022","posts/a-few-words-about-the-events-of-november-2022","2022-11-21 13:24:33",{"title":200,"path":201,"stem":202,"date":203,"children":-1},"我的博客部署方案","/2022/11/04/my-blog-plan","posts/my-blog-plan","2022-11-04 16:41:28",0,1761738549682]