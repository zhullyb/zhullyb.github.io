[{"data":1,"prerenderedAt":2208},["ShallowReactive",2],{"randomIndex/page/9/":3,"language-switch-/page/9/-en":4,"index-page-9-zh":5,"posts-total-zh":2207},0,"/en/",[6,100,581,657,847,1189,1423,1529,1846,2106],{"title":7,"date":8,"path":9,"tags":10,"body":13},"好软推荐——FastOCR","2022-04-14 05:55:18","/2022/04/14/fastocr-experience",[11,12],"Experience","OpenSource Project",{"type":14,"value":15,"toc":96},"minimark",[16,20,36,59,66,81,87,90],[17,18,19],"p",{},"前两天在 PC 端有 OCR 的需求，需求如下",[21,22,23,27,30,33],"ul",{},[24,25,26],"li",{},"自带框选功能或者图片上传前的编辑功能",[24,28,29],{},"硬盘占用小，不要 electron (((已经受够了",[24,31,32],{},"支持系统托盘或者快捷键快速调出",[24,34,35],{},"免费",[17,37,38,39,46,47,52,53,58],{},"在",[40,41,45],"a",{"href":42,"rel":43},"https://liolok.com/",[44],"nofollow","李皓奇","的推荐下试用了 Arch 群",[40,48,51],{"href":49,"rel":50},"https://github.com/BruceZhang1993",[44],"兔兔","拿 python 和 qt 写的 ",[40,54,57],{"href":55,"rel":56},"https://github.com/BruceZhang1993/FastOCR",[44],"fastocr","，体验可以说是相当不错了。四个要求基本都能完美满足！",[17,60,61],{},[62,63],"img",{"alt":64,"src":65},"操作简单快捷","https://static.031130.xyz/uploads/2024/08/12/a4ddb3b05e19c.gif",[17,67,68,69,73,74,73,77,80],{},"支持 ",[70,71,72],"em",{},"百度","、",[70,75,76],{},"有道",[70,78,79],{},"旷视Face++"," 三家的接口，免费额度绝对够我试用的（大不了一家用完了换一家嘛",[17,82,83],{},[62,84],{"alt":85,"src":86},"设置界面","https://static.031130.xyz/uploads/2024/08/12/488835757d5e3.webp",[17,88,89],{},"此外，空间占用小，算上依赖也不过 31MB 的硬盘空间占用，连半个 electron 都不到，运行起来反而更加流畅 \u003C^_^>",[17,91,92],{},[62,93],{"alt":94,"src":95},"诶？哪里来的atpoossfl","https://static.031130.xyz/uploads/2024/08/12/a404346841d02.webp",{"title":97,"searchDepth":98,"depth":98,"links":99},"",2,[],{"title":101,"date":102,"path":103,"tags":104,"body":108},"抛弃PicGo，直接使用curl将图片上传到LskyPro","2022-03-31 19:19:14","/2022/03/31/upload-pic-to-lskypro-with-curl",[105,106,107],"Shell Script","Image Hosting","Lsky Pro",{"type":14,"value":109,"toc":579},[110,118,137,150,159,164,167,170,181,184,558,564,567,570,575],[17,111,112,113,117],{},"前一阵子为了图床折腾了好长一段时间。刚开始用的是 cloudinary，虽然每月有限制，但强在境内访问速度还不错，可惜后来 ",[114,115,116],"code",{},"res.cloudinary.com"," 这个域名在某些地方被 DNS 污染了，而自定义域名是付费版的功能，就不得不放弃了。",[17,119,120,121,124,125,130,131,136],{},"后来也尝试过 npm图床 的方案，可惜面对这种滥用公共资源的行为我无法接受~~（肯定不是因为受不了那繁琐的上传步骤，随便传张图都得 bump 下版本号的原因）~~，而且现在境内的能作为图床使用的 npm 镜像似乎也就只剩下 ",[114,122,123],{},"npm.elemecdn.com"," 这一个能够正常回源了，没准哪天就用不了了，所以就去投奔了",[40,126,129],{"href":127,"rel":128},"https://dusays.com/",[44],"杜老师","的",[40,132,135],{"href":133,"rel":134},"https://7bu.top/",[44],"去不图床","。",[17,138,139,140,144,145,149],{},"去不图床采用开源图床程序 ",[40,141,107],{"href":142,"rel":143},"https://www.lsky.pro/",[44]," 搭建，没有免费服务，且配置了鉴黄服务，看起来就是打算长久做下去的图床站点。境内使用腾讯云cdn，境外采用 cloudflare cdn，速度都挺让我满意的。",[146,147,148],"del",{},"（杜老师看见请给我打钱，或者多送我点空间也行","（x",[17,151,152,153,158],{},"Typora 一直是我写博客的主用 Markdown 编辑器，之前我采用 Typora 调用 ",[40,154,157],{"href":155,"rel":156},"https://github.com/xiebruce/PicUploader",[44],"PicUploader(php)"," 自动上传图片的方案写博客，体验相当不错，如图:",[17,160,161],{},[62,162],{"alt":97,"src":163},"https://static.031130.xyz/uploads/2024/08/12/62f3b881e3c4c.gif",[17,165,166],{},"可惜 PicUploader 目前仍然没有支持 LskyPro 的上传，我采用的是现在烂大街的 Typora+PicGo+LskyPro插件 的方案去实现 Typora 的自动上传图片功能。",[17,168,169],{},"这个方案有明显的弊端：",[21,171,172,175,178],{},[24,173,174],{},"PicGo 运行依赖于 electron，极大地消耗了系统资源。",[24,176,177],{},"PicGo 面对多张图片( >=4张 )同时上传时容易报错。",[24,179,180],{},"PicGo 对于 Linux 的支持比较有限，作者可能不熟悉 Linux，直到半个月前我去交了一个 pr 才支持 wayland 下使用 wl-clipboard 将图片链接复制到粘贴版。",[17,182,183],{},"正好 LskyPro 有详细的文档，应该可以用 curl 手糊一段 Shell 脚本实现直接上传，资源占用小，唯一的弊端是上传完成后的图片不容易管理。脚本如下",[185,186,190],"pre",{"className":187,"code":188,"language":189,"meta":97,"style":97},"language-bash shiki shiki-themes one-light one-dark-pro","#!/bin/bash\n\nAPI_URL=\"https://7bu.top/api/v1\"\n\nAUTH_TOKEN=\"\"\n\nmarkdown=false\nwhile [[ \"$#\" -gt 0 ]]; do\n    case $1 in\n        -m|--markdown) markdown=true; shift ;;\n        *) break ;;\n    esac\ndone\n\nfor images in \"$@\"; do\n    UPLOAD_RESPONSE=$(curl -s -X POST \"$API_URL/upload\" \\\n        -H 'Content-Type: multipart/form-data' \\\n        -H \"Authorization: Bearer $AUTH_TOKEN\" \\\n        -F \"file=@$images\")\n\n    if [ \"$markdown\" = true ]; then\n        echo \"$UPLOAD_RESPONSE\" | jq -r .data.links.markdown\n    else\n        echo \"$UPLOAD_RESPONSE\" | jq -r .data.links.url\n    fi\ndone\n","bash",[114,191,192,201,207,222,227,238,243,254,287,300,333,344,350,356,361,385,420,431,446,463,468,496,521,527,547,553],{"__ignoreMap":97},[193,194,197],"span",{"class":195,"line":196},"line",1,[193,198,200],{"class":199},"sW2Sy","#!/bin/bash\n",[193,202,203],{"class":195,"line":98},[193,204,206],{"emptyLinePlaceholder":205},true,"\n",[193,208,210,214,218],{"class":195,"line":209},3,[193,211,213],{"class":212},"sJa8x","API_URL",[193,215,217],{"class":216},"sknuh","=",[193,219,221],{"class":220},"sDhpE","\"https://7bu.top/api/v1\"\n",[193,223,225],{"class":195,"line":224},4,[193,226,206],{"emptyLinePlaceholder":205},[193,228,230,233,235],{"class":195,"line":229},5,[193,231,232],{"class":212},"AUTH_TOKEN",[193,234,217],{"class":216},[193,236,237],{"class":220},"\"\"\n",[193,239,241],{"class":195,"line":240},6,[193,242,206],{"emptyLinePlaceholder":205},[193,244,246,249,251],{"class":195,"line":245},7,[193,247,248],{"class":212},"markdown",[193,250,217],{"class":216},[193,252,253],{"class":220},"false\n",[193,255,257,261,265,268,272,274,277,281,284],{"class":195,"line":256},8,[193,258,260],{"class":259},"sLKXg","while",[193,262,264],{"class":263},"s5ixo"," [[ ",[193,266,267],{"class":220},"\"",[193,269,271],{"class":270},"s2QsP","$#",[193,273,267],{"class":220},[193,275,276],{"class":216}," -gt",[193,278,280],{"class":279},"sAGMh"," 0",[193,282,283],{"class":263}," ]]; ",[193,285,286],{"class":259},"do\n",[193,288,290,293,297],{"class":195,"line":289},9,[193,291,292],{"class":259},"    case",[193,294,296],{"class":295},"s8iYz"," $1",[193,298,299],{"class":259}," in\n",[193,301,303,307,310,313,316,318,320,323,326,330],{"class":195,"line":302},10,[193,304,306],{"class":305},"sDaw7","        -m",[193,308,309],{"class":263},"|",[193,311,312],{"class":305},"--markdown",[193,314,315],{"class":263},") ",[193,317,248],{"class":212},[193,319,217],{"class":216},[193,321,322],{"class":220},"true",[193,324,325],{"class":263},"; ",[193,327,329],{"class":328},"s_Sar","shift",[193,331,332],{"class":263}," ;;\n",[193,334,336,339,342],{"class":195,"line":335},11,[193,337,338],{"class":263},"        *) ",[193,340,341],{"class":259},"break",[193,343,332],{"class":263},[193,345,347],{"class":195,"line":346},12,[193,348,349],{"class":259},"    esac\n",[193,351,353],{"class":195,"line":352},13,[193,354,355],{"class":259},"done\n",[193,357,359],{"class":195,"line":358},14,[193,360,206],{"emptyLinePlaceholder":205},[193,362,364,367,370,373,376,379,381,383],{"class":195,"line":363},15,[193,365,366],{"class":259},"for",[193,368,369],{"class":212}," images",[193,371,372],{"class":259}," in",[193,374,375],{"class":220}," \"",[193,377,378],{"class":295},"$@",[193,380,267],{"class":220},[193,382,325],{"class":263},[193,384,286],{"class":259},[193,386,388,391,393,396,400,403,406,409,411,414,417],{"class":195,"line":387},16,[193,389,390],{"class":212},"    UPLOAD_RESPONSE",[193,392,217],{"class":216},[193,394,395],{"class":263},"$(",[193,397,399],{"class":398},"sAdtL","curl",[193,401,402],{"class":279}," -s",[193,404,405],{"class":279}," -X",[193,407,408],{"class":220}," POST",[193,410,375],{"class":220},[193,412,413],{"class":212},"$API_URL",[193,415,416],{"class":220},"/upload\"",[193,418,419],{"class":328}," \\\n",[193,421,423,426,429],{"class":195,"line":422},17,[193,424,425],{"class":279},"        -H",[193,427,428],{"class":220}," 'Content-Type: multipart/form-data'",[193,430,419],{"class":328},[193,432,434,436,439,442,444],{"class":195,"line":433},18,[193,435,425],{"class":279},[193,437,438],{"class":220}," \"Authorization: Bearer ",[193,440,441],{"class":212},"$AUTH_TOKEN",[193,443,267],{"class":220},[193,445,419],{"class":328},[193,447,449,452,455,458,460],{"class":195,"line":448},19,[193,450,451],{"class":279},"        -F",[193,453,454],{"class":220}," \"file=@",[193,456,457],{"class":212},"$images",[193,459,267],{"class":220},[193,461,462],{"class":263},")\n",[193,464,466],{"class":195,"line":465},20,[193,467,206],{"emptyLinePlaceholder":205},[193,469,471,474,477,479,482,484,487,490,493],{"class":195,"line":470},21,[193,472,473],{"class":259},"    if",[193,475,476],{"class":263}," [ ",[193,478,267],{"class":220},[193,480,481],{"class":212},"$markdown",[193,483,267],{"class":220},[193,485,486],{"class":216}," =",[193,488,489],{"class":279}," true",[193,491,492],{"class":263}," ]; ",[193,494,495],{"class":259},"then\n",[193,497,499,502,504,507,509,512,515,518],{"class":195,"line":498},22,[193,500,501],{"class":328},"        echo",[193,503,375],{"class":220},[193,505,506],{"class":212},"$UPLOAD_RESPONSE",[193,508,267],{"class":220},[193,510,511],{"class":263}," | ",[193,513,514],{"class":398},"jq",[193,516,517],{"class":279}," -r",[193,519,520],{"class":220}," .data.links.markdown\n",[193,522,524],{"class":195,"line":523},23,[193,525,526],{"class":259},"    else\n",[193,528,530,532,534,536,538,540,542,544],{"class":195,"line":529},24,[193,531,501],{"class":328},[193,533,375],{"class":220},[193,535,506],{"class":212},[193,537,267],{"class":220},[193,539,511],{"class":263},[193,541,514],{"class":398},[193,543,517],{"class":279},[193,545,546],{"class":220}," .data.links.url\n",[193,548,550],{"class":195,"line":549},25,[193,551,552],{"class":259},"    fi\n",[193,554,556],{"class":195,"line":555},26,[193,557,355],{"class":259},[559,560,561],"blockquote",{},[17,562,563],{},"2022/04/02更新: 第六行 $@ - \"$@\"，解决文件名中出现空格时导致的上传失败问题。",[17,565,566],{},"需要借助 jq 来读取返回的 json，各 Linux 发行版源内应该都有打包，自行安装即可。",[17,568,569],{},"授予x可执行权限后，Typora 内直接填写自定义命令输入脚本所在位置即可实现 Typora 自动上传图片了。",[559,571,572],{},[17,573,574],{},"2023/12/12更新: 支持 -m 或 --markdown 参数，使脚本输出 markdown 格式的链接。",[576,577,578],"style",{},"html pre.shiki code .sW2Sy, html code.shiki .sW2Sy{--shiki-default:#A0A1A7;--shiki-default-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic}html pre.shiki code .sJa8x, html code.shiki .sJa8x{--shiki-default:#E45649;--shiki-dark:#E06C75}html pre.shiki code .sknuh, html code.shiki .sknuh{--shiki-default:#383A42;--shiki-dark:#56B6C2}html pre.shiki code .sDhpE, html code.shiki .sDhpE{--shiki-default:#50A14F;--shiki-dark:#98C379}html pre.shiki code .sLKXg, html code.shiki .sLKXg{--shiki-default:#A626A4;--shiki-dark:#C678DD}html pre.shiki code .s5ixo, html code.shiki .s5ixo{--shiki-default:#383A42;--shiki-dark:#ABB2BF}html pre.shiki code .s2QsP, html code.shiki .s2QsP{--shiki-default:#E45649;--shiki-dark:#E5C07B}html pre.shiki code .sAGMh, html code.shiki .sAGMh{--shiki-default:#986801;--shiki-dark:#D19A66}html pre.shiki code .s8iYz, html code.shiki .s8iYz{--shiki-default:#383A42;--shiki-default-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic}html pre.shiki code .sDaw7, html code.shiki .sDaw7{--shiki-default:#0184BC;--shiki-dark:#E06C75}html pre.shiki code .s_Sar, html code.shiki .s_Sar{--shiki-default:#0184BC;--shiki-dark:#56B6C2}html pre.shiki code .sAdtL, html code.shiki .sAdtL{--shiki-default:#4078F2;--shiki-dark:#61AFEF}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":97,"searchDepth":98,"depth":98,"links":580},[],{"title":582,"date":583,"path":584,"tags":585,"body":589},"使用 Github Action 跑 rpmbuild","2022-03-06 16:02:54","/2022/03/06/run-rpmbuild-with-github-action",[586,587,588],"Fedora","RPM Package","Github Action",{"type":14,"value":590,"toc":655},[591,594,597,612,615,632,637,646],[17,592,593],{},"一直打算用 Github Action 跑 rpmbuild 构建 rpm 包，然后传到 Action 的 Artifacts 里面，用户就可以在登陆 Github 帐号的情况下进行下载。只要不发 Release，应该就不算「再分发」的行为，也就自然规避了再分发闭源软件的法律风险。",[17,595,596],{},"然而，现有的那些 Action 几乎全都是针对 CentOS 老古董定制的，，有些甚至连 buildrequires 都不帮你安装，而且大部分情况下都不支持 Source 直接填写一个链接，需要你直接提供 Source 文件。我自己又不可能在 Github 的仓库里用 lfs 强行存一个 200MB+ 的二进制文件，显然是不符合我要求的。还有几个项目使用 mock 去构建的，但使用 mock 构建需要提前用 rpmbuild 生成 srpm，在我们的个人电脑上可以理解为用一个干净的 chroot 打包防止自己的环境受污染，但在一个全新的、用完一次就要扔掉的 docker 里面还要防止环境被污染似乎有些画蛇添足的嫌疑。",[17,598,599,600,605,606,611],{},"最终，我选择了 ",[40,601,604],{"href":602,"rel":603},"https://github.com/marketplace/actions/rpm-build",[44],"naveenrajm7/rpmbuild"," 这个项目。（虽然我并不理解为什么他要用 nodejs 去调用系统命令去执行 rpmbuild 等一系列步骤，我也没学过这类语言。不过项目的 ",[40,607,610],{"href":608,"rel":609},"https://github.com/naveenrajm7/rpmbuild/blob/master/src/main.ts",[44],"main.ts"," 我还是能仿写的。）",[17,613,614],{},"在经过三四个小时的摸爬滚打下，我还是成功地将这个项目按照我的想法改完了。",[21,616,617,620,623,626,629],{},[24,618,619],{},"采用 Fedora 35 作为 host 进行 rpmbuild",[24,621,622],{},"自动安装 buildrequires",[24,624,625],{},"自动下载 source",[24,627,628],{},"允许仓库内自带本地 source",[24,630,631],{},"移除针对 srpm 的构建",[17,633,634],{},[62,635],{"alt":97,"src":636},"https://static.031130.xyz/uploads/2024/08/12/bb263c91c7bf4.webp",[17,638,639,640,645],{},"改完后的 action 在 ",[40,641,644],{"href":642,"rel":643},"https://github.com/zhullyb/rpmbuild-github-action",[44],"zhullyb/rpmbuild-github-action","，欢迎使用。",[17,647,648,649,654],{},"最终是在 ",[40,650,653],{"href":651,"rel":652},"https://github.com/zhullyb/dingtalk-for-fedora",[44],"zhullyb/dingtalk-for-fedora"," 项目成功实装了，有兴趣的访客们可以去尝试着一起来白嫖 Github Action 呀！ >_\u003C",{"title":97,"searchDepth":98,"depth":98,"links":656},[],{"title":658,"date":659,"path":660,"tags":661,"body":662},"如何打出一个「-git」的rpm包","2022-02-07 10:23:29","/2022/02/07/how-to-package-a-git-rpm-package",[586,587],{"type":14,"value":663,"toc":839},[664,671,676,683,703,707,714,718,733,737,754,758,781,789,795,815,819,825],[17,665,666,667,670],{},"本文中，笔者通过 github api 获取最新的 commit_id ，以一种曲线救国的方式成功为 rpm 打下了一个 ",[114,668,669],{},"-git"," 包。",[672,673,675],"h2",{"id":674},"on-archlinux","On Archlinux",[17,677,678,679,682],{},"用过 AUR 的 Arch 用户应该知道，makepkg 支持 \"-git\" 包。当我们执行 makepkg 时，PKGBUILD 中的 ",[114,680,681],{},"pkgver"," 函数会自动被运行，并将输出的结果作为本次打包的版本号。这是一个非常棒的设计，我们不需要去手动更新 PKGBUILD，就可以直接从 git 服务区拉取最新的 master 分支编译打包，对于跟进开发进度而言非常方便。",[17,684,685,686,688,689,692,693,696,697,699,700,702],{},"一般来说，一个 ",[114,687,669],{}," 包的版本号会分成 2~4 个部分，最为核心的是 ",[114,690,691],{},"count"," 和 ",[114,694,695],{},"commit_id","：",[114,698,691],{},"用于记录这是第几次提交，通过提交的次数作为版本号的靠前部分可以帮助包管理器比较版本号的新旧，比如第21次提交的代码一定比第18次的更加新，而21也正好比18大，包管理器也就凭借着这个数字来保证其可以在用户在更新的时候为用户选择一个更新版本的包；而 ",[114,701,695],{},"则可以帮助人类更快定位这个包是在哪一次代码提交以后编译的，以帮助 开发者/用户 定位问题。",[672,704,706],{"id":705},"on-fedora","On Fedora",[17,708,709,710,713],{},"然而，这个思路在 rpm 上似乎无法实现。rpmbuild 执行的时候会事先根据版本号在 BUILDROOT 路径下创造一个 ",[114,711,712],{},"%{name}-%{version}-%{release}-%{arch}","的目录，如此一来，就必须先确定版本号，无法像 PKGBUILD 那样使用一个 pkgver 的函数去自动更新版本号。此外，rpm 似乎专注于软件包的 Reproducibility，也就是希望拿到了指导 rpmbuild 打包的 specfile 以后打出一个相同包的能力，因此，使用同一份 specfile 在不同时间打出一个不同包的这种行为似乎并不符合 Fedora/Redhat 的哲学，所以我们怕是等不到 rpm 支持这个功能的那一天了。",[672,715,717],{"id":716},"turn-of-events","Turn of events",[17,719,720,721,726,727,732],{},"当然，这也并非不可能完成的任务，在 ",[40,722,725],{"href":723,"rel":724},"https://yanqiyu.info/",[44],"西木野羰基"," 的指引下，我在 Fedora Docs 找到了",[40,728,731],{"href":729,"rel":730},"https://docs.fedoraproject.org/en-US/packaging-guidelines/SourceURL/#_branch_example",[44],"对于某个 Branch 的打包样版","。其实也就是直接从 github 下载 master 分支的 master.tar.gz 压缩包来获取最新的源码，这样就确保了每一次 rpmbuild 的时候都能获取最新的源码。接下来需要处理的就是版本号的问题。",[672,734,736],{"id":735},"sad-story","Sad Story",[17,738,739,740,743,744,747,748,750,751,753],{},"很可惜，master.tar.gz 压缩包中并不包括 ",[114,741,742],{},".git"," 文件，我们无法通过 ",[114,745,746],{},"git rev-list --count HEAD"," 来获取 ",[114,749,691],{}," 计数，此外，最新的 ",[114,752,695],{}," 我们也不得而知。即使我们知道这些参数，也无法在 rpmbuild 执行之前自动把这些参数填进 specfile 中。",[672,755,757],{"id":756},"improvement","Improvement",[17,759,760,761,766,767,770,771,774,775,780],{},"好在天无绝人之路，在 Liu Sen 的 ",[40,762,765],{"href":763,"rel":764},"https://forum.suse.org.cn/t/topic/13626",[44],"RPM 中宏的简单介绍"," 一文中发现宏其实也可以类似 bash 中的 ",[114,768,769],{},"$()"," 一样定义成系统运行某些命令后的结果，通过仿写 copr 上 ",[70,772,773],{},"atim/fractal"," 的 ",[40,776,779],{"href":777,"rel":778},"https://download.copr.fedorainfracloud.org/results/atim/fractal/fedora-35-x86_64/03000082-fractal-master/fractal-master.spec",[44],"specfile"," 定义了下面两个宏。",[185,782,787],{"className":783,"code":785,"language":786},[784],"language-text","%global timenow %(echo $(date +%Y%m%d.%H%M))\n%global commit_short_id %(api_result=$(curl -s https://api.github.com/repos/\u003Cusername>/\u003Creponame>/branches/master | head -n 4 | tail -n 1); echo ${api_result:12:7})\n","text",[114,788,785],{"__ignoreMap":97},[17,790,791,792],{},"版本号就可以直接写成 ",[114,793,794],{},"%{timenow}.%{commit_id_short}",[21,796,797,806],{},[24,798,799,802,803,805],{},[114,800,801],{},"%{timenow}"," 是直接通过运行系统的 date 命令获得一个精确到分钟的时间来当作 ",[114,804,691],{}," 给 dnf 判断版本号大小使用",[24,807,808,811,812,814],{},[114,809,810],{},"%{commit_id_short}"," 从 api.github.com 获取到该仓库最新的 commit 号，配合粗制滥造的 shell 命令做切片，提取前7 位，帮助用户和开发者快速定位源码版本使用。当然，也可以选择直接使用 ",[114,813,514],{}," 作为 json 的解释器，不过 copr 大概率没有预装，生成 srpm 的时候估计就会报错。",[672,816,818],{"id":817},"review","Review",[17,820,821,822,824],{},"至此，我们成功解决了在 rpm 上打 ",[114,823,669],{}," 包的问题，不过仍然有以下缺点",[21,826,827,830,833,836],{},[24,828,829],{},"仅支持 github 上的项目，对于其他的 git 托管服务商还需要去查阅他们的 api 文档",[24,831,832],{},"粗制滥造的 shell 命令可能不足以应对以后的 github api 变更",[24,834,835],{},"使用了精确到分钟的时间作为计数器，导致版本号过长",[24,837,838],{},"使用 copr 打包的时候，有概率出现 srpm 与 rpm 之间版本号出现分钟级的差异",{"title":97,"searchDepth":98,"depth":98,"links":840},[841,842,843,844,845,846],{"id":674,"depth":98,"text":675},{"id":705,"depth":98,"text":706},{"id":716,"depth":98,"text":717},{"id":735,"depth":98,"text":736},{"id":756,"depth":98,"text":757},{"id":817,"depth":98,"text":818},{"title":848,"date":849,"path":850,"tags":851,"body":852},"雪藏在开源镜像站点中的那些常用却不为人知的软件","2022-01-19 13:01:30","/2022/01/19/the-common-software-hidden-in-mirrors",null,{"type":14,"value":853,"toc":1187},[854,857,863],[17,855,856],{},"前两天在下载 微PE 的时候眼睛突然一瞥，发现了山东大学的开源镜像站。突然间才发现在各个开源镜像站点中提供了许多那些我们误以为只能顶着断断续续的 Github  网络才能下载的软件。",[17,858,859,860],{},"下面这张列表主要来自山东大学的镜像站中的「常用软件」和南京大学的「github-release」。",[146,861,862],{},"我严重怀疑南京大学就是把整个 tuna 给搬了一遍过来。",[864,865,866,896],"table",{},[867,868,869],"thead",{},[870,871,872,875,882,889],"tr",{},[873,874],"th",{},[873,876,877],{},[40,878,881],{"href":879,"rel":880},"https://mirrors.sdu.edu.cn",[44],"山东大学",[873,883,884],{},[40,885,888],{"href":886,"rel":887},"https://mirrors.nju.edu.cn",[44],"南京大学",[873,890,891],{},[40,892,895],{"href":893,"rel":894},"https://mirrors.tuna.tsinghua.edu.cn",[44],"清华大学",[897,898,899,919,934,957,972,987,1006,1021,1044,1059,1074,1093,1115,1134,1153,1172],"tbody",{},[870,900,901,905,907,913],{},[902,903,904],"td",{},"balena-io/etcher",[902,906],{},[902,908,909],{},[40,910,911],{"href":911,"rel":912},"https://mirrors.nju.edu.cn/github-release/balena-io/etcher/LatestRelease/",[44],[902,914,915],{},[40,916,917],{"href":917,"rel":918},"https://mirrors.tuna.tsinghua.edu.cn/github-release/balena-io/etcher/LatestRelease/",[44],[870,920,921,924,930,932],{},[902,922,923],{},"drawio-desktop",[902,925,926],{},[40,927,928],{"href":928,"rel":929},"https://mirrors.sdu.edu.cn/github-release/jgraph_drawio-desktop/",[44],[902,931],{},[902,933],{},[870,935,936,939,945,951],{},[902,937,938],{},"git-for-windows",[902,940,941],{},[40,942,943],{"href":943,"rel":944},"https://mirrors.sdu.edu.cn/github-release/git-for-windows_git/",[44],[902,946,947],{},[40,948,949],{"href":949,"rel":950},"https://mirrors.nju.edu.cn/github-release/git-for-windows/git/LatestRelease/",[44],[902,952,953],{},[40,954,955],{"href":955,"rel":956},"https://mirrors.tuna.tsinghua.edu.cn/github-release/git-for-windows/git/LatestRelease/",[44],[870,958,959,962,964,970],{},[902,960,961],{},"Krita",[902,963],{},[902,965,966],{},[40,967,968],{"href":968,"rel":969},"https://mirrors.nju.edu.cn/kde/stable/krita/",[44],[902,971],{},[870,973,974,977,979,981],{},[902,975,976],{},"libreoffice",[902,978],{},[902,980],{},[902,982,983],{},[40,984,985],{"href":985,"rel":986},"https://mirrors.tuna.tsinghua.edu.cn/libreoffice/libreoffice/",[44],[870,988,989,992,994,1000],{},[902,990,991],{},"Magisk",[902,993],{},[902,995,996],{},[40,997,998],{"href":998,"rel":999},"https://mirrors.nju.edu.cn/github-release/topjohnwu/Magisk/LatestRelease/",[44],[902,1001,1002],{},[40,1003,1004],{"href":1004,"rel":1005},"https://mirrors.tuna.tsinghua.edu.cn/github-release/topjohnwu/Magisk/LatestRelease/",[44],[870,1007,1008,1011,1017,1019],{},[902,1009,1010],{},"Motrix",[902,1012,1013],{},[40,1014,1015],{"href":1015,"rel":1016},"https://mirrors.sdu.edu.cn/github-release/agalwood_Motrix/",[44],[902,1018],{},[902,1020],{},[870,1022,1023,1026,1032,1038],{},[902,1024,1025],{},"obs-studio",[902,1027,1028],{},[40,1029,1030],{"href":1030,"rel":1031},"https://mirrors.sdu.edu.cn/github-release/obsproject_obs-studio/https://mirrors.sdu.edu.cn/software/Windows/OBS%20Studio/",[44],[902,1033,1034],{},[40,1035,1036],{"href":1036,"rel":1037},"https://mirrors.nju.edu.cn/github-release/obsproject/obs-studio/LatestRelease/",[44],[902,1039,1040],{},[40,1041,1042],{"href":1042,"rel":1043},"https://mirrors.tuna.tsinghua.edu.cn/github-release/obsproject/obs-studio/LatestRelease/",[44],[870,1045,1046,1049,1055,1057],{},[902,1047,1048],{},"office tool plus",[902,1050,1051],{},[40,1052,1053],{"href":1053,"rel":1054},"https://mirrors.sdu.edu.cn/github-release/YerongAI_Office-Tool/",[44],[902,1056],{},[902,1058],{},[870,1060,1061,1064,1070,1072],{},[902,1062,1063],{},"picgo",[902,1065,1066],{},[40,1067,1068],{"href":1068,"rel":1069},"https://mirrors.sdu.edu.cn/github-release/pbatard_rufus/",[44],[902,1071],{},[902,1073],{},[870,1075,1076,1079,1085,1091],{},[902,1077,1078],{},"rufus",[902,1080,1081],{},[40,1082,1083],{"href":1083,"rel":1084},"https://mirrors.sdu.edu.cn/software/Windows/Rufus/",[44],[902,1086,1087],{},[40,1088,1089],{"href":1089,"rel":1090},"https://mirrors.nju.edu.cn/github-release/pbatard/rufus/LatestRelease/",[44],[902,1092],{},[870,1094,1095,1101,1107,1113],{},[902,1096,1097],{},[40,1098,1099],{"href":1099,"rel":1100},"https://mirrors.sdu.edu.cn/software/Windows/WePE/ventoy",[44],[902,1102,1103],{},[40,1104,1105],{"href":1105,"rel":1106},"https://mirrors.sdu.edu.cn/github-release/ventoy_Ventoy/",[44],[902,1108,1109],{},[40,1110,1111],{"href":1111,"rel":1112},"https://mirrors.nju.edu.cn/github-release/ventoy/Ventoy/LatestRelease/",[44],[902,1114],{},[870,1116,1117,1120,1122,1128],{},[902,1118,1119],{},"virtualbox",[902,1121],{},[902,1123,1124],{},[40,1125,1126],{"href":1126,"rel":1127},"https://mirrors.nju.edu.cn/virtualbox/",[44],[902,1129,1130],{},[40,1131,1132],{"href":1132,"rel":1133},"https://mirrors.tuna.tsinghua.edu.cn/virtualbox/",[44],[870,1135,1136,1139,1141,1147],{},[902,1137,1138],{},"vlc",[902,1140],{},[902,1142,1143],{},[40,1144,1145],{"href":1145,"rel":1146},"https://mirrors.nju.edu.cn/videolan-ftp/",[44],[902,1148,1149],{},[40,1150,1151],{"href":1151,"rel":1152},"https://mirrors.tuna.tsinghua.edu.cn/videolan-ftp/",[44],[870,1154,1155,1158,1160,1166],{},[902,1156,1157],{},"winehq",[902,1159],{},[902,1161,1162],{},[40,1163,1164],{"href":1164,"rel":1165},"https://mirrors.nju.edu.cn/winehq/",[44],[902,1167,1168],{},[40,1169,1170],{"href":1170,"rel":1171},"https://mirrors.bfsu.edu.cn/winehq/",[44],[870,1173,1174,1177,1183,1185],{},[902,1175,1176],{},"wepe",[902,1178,1179],{},[40,1180,1181],{"href":1181,"rel":1182},"https://mirrors.sdu.edu.cn/software/Windows/WePE/",[44],[902,1184],{},[902,1186],{},{"title":97,"searchDepth":98,"depth":98,"links":1188},[],{"title":1190,"date":1191,"path":1192,"tags":1193,"body":1194},"在Fedora搭建jekyll环境——dnf module","2022-01-12 22:11:42","/2022/01/12/dnf-module-in-setting-up-the-jekyll",[586],{"type":14,"value":1195,"toc":1415},[1196,1199,1216,1219,1223,1235,1238,1242,1245,1264,1267,1286,1289,1308,1312,1366,1376,1382,1385,1391,1398,1412],[672,1197,1198],{"id":1198},"起因",[17,1200,1201,1202,1207,1208,1211,1212,1215],{},"我之前的博客一直用的是",[40,1203,1206],{"href":1204,"rel":1205},"https://github.com/qiubaiying/qiubaiying.github.io",[44],"这个主题","，直接使用 Fedora 官方源里的 ",[114,1209,1210],{},"rubygem-jekyll"," 似乎无法正常安装 Gemfile 中的依赖。之前使用 Archlinux 的时候，我是直接从 AUR 安装了一个 ",[114,1213,1214],{},"ruby-2.6"," 来使用的，但最近转到 Fedora 以后似乎就没法用这样的方案来解决了。",[17,1217,1218],{},"好在天无绝人之路，Fedora 也提供了安装老版本的 ruby 的方案——使用 dnf 的 module 功能。",[672,1220,1222],{"id":1221},"关于-dnf-module","关于 dnf module",[17,1224,1225,1226,1231,1232,136],{},"关于 dnf 的 module 功能到底是用来做什么的，其实我并不清楚。虽说 Fedora 提供了",[40,1227,1230],{"href":1228,"rel":1229},"https://docs.fedoraproject.org/en-US/modularity/",[44],"文档","，但就凭我的读中文文档都吃力的水准，似乎没有办法通过英文文档来理解这个全新的概念，",[146,1233,1234],{},"所以我选择直接莽过去",[17,1236,1237],{},"就我目前的理解而言，dnf 的 module 似乎并不致力于帮助用户完成系统内某一程序的新老版本共存的难题，而仅仅是给用户提供了停留在老版本软件的权利。module 所负责的，是保证老版本的程序能在你的系统上正常运行起来，而不会因为其他组件的更新而导致老版本的程序无法正常使用。",[1239,1240,1241],"h3",{"id":1241},"基本的使用方法",[17,1243,1244],{},"通过下列命令可以查看目前所支持的 module",[185,1246,1248],{"className":187,"code":1247,"language":189,"meta":97,"style":97},"sudo dnf module list\n",[114,1249,1250],{"__ignoreMap":97},[193,1251,1252,1255,1258,1261],{"class":195,"line":196},[193,1253,1254],{"class":398},"sudo",[193,1256,1257],{"class":220}," dnf",[193,1259,1260],{"class":220}," module",[193,1262,1263],{"class":220}," list\n",[17,1265,1266],{},"通过下列命令可以选择 module 所要停留的版本( 以 ruby 2.7 为例 )",[185,1268,1270],{"className":187,"code":1269,"language":189,"meta":97,"style":97},"sudo dnf module enable ruby:2.7\n",[114,1271,1272],{"__ignoreMap":97},[193,1273,1274,1276,1278,1280,1283],{"class":195,"line":196},[193,1275,1254],{"class":398},[193,1277,1257],{"class":220},[193,1279,1260],{"class":220},[193,1281,1282],{"class":220}," enable",[193,1284,1285],{"class":220}," ruby:2.7\n",[17,1287,1288],{},"通过下列命令可以取消锁定 module 程序所要停留的版本( 以 ruby 为例 )",[185,1290,1292],{"className":187,"code":1291,"language":189,"meta":97,"style":97},"sudo dnf module reset ruby\n",[114,1293,1294],{"__ignoreMap":97},[193,1295,1296,1298,1300,1302,1305],{"class":195,"line":196},[193,1297,1254],{"class":398},[193,1299,1257],{"class":220},[193,1301,1260],{"class":220},[193,1303,1304],{"class":220}," reset",[193,1306,1307],{"class":220}," ruby\n",[672,1309,1311],{"id":1310},"开始配置该-jekyll-主题的运行环境","开始配置该 jekyll 主题的运行环境",[185,1313,1315],{"className":187,"code":1314,"language":189,"meta":97,"style":97},"sudo dnf module install ruby:2.7\nsudo dnf install ruby-devel\n\ncd /path/to/the/jekyll-blog/\nbundle install --path vendor/bundle\n",[114,1316,1317,1330,1341,1345,1353],{"__ignoreMap":97},[193,1318,1319,1321,1323,1325,1328],{"class":195,"line":196},[193,1320,1254],{"class":398},[193,1322,1257],{"class":220},[193,1324,1260],{"class":220},[193,1326,1327],{"class":220}," install",[193,1329,1285],{"class":220},[193,1331,1332,1334,1336,1338],{"class":195,"line":98},[193,1333,1254],{"class":398},[193,1335,1257],{"class":220},[193,1337,1327],{"class":220},[193,1339,1340],{"class":220}," ruby-devel\n",[193,1342,1343],{"class":195,"line":209},[193,1344,206],{"emptyLinePlaceholder":205},[193,1346,1347,1350],{"class":195,"line":224},[193,1348,1349],{"class":328},"cd",[193,1351,1352],{"class":220}," /path/to/the/jekyll-blog/\n",[193,1354,1355,1358,1360,1363],{"class":195,"line":229},[193,1356,1357],{"class":398},"bundle",[193,1359,1327],{"class":220},[193,1361,1362],{"class":279}," --path",[193,1364,1365],{"class":220}," vendor/bundle\n",[17,1367,1368,1369,1372,1373],{},"完成后，我们即可在 jekyll-blog 目录下 使用 ",[114,1370,1371],{},"bundle exec jekyll"," 来正常运行 jekyll 了。试着跑一下 ",[114,1374,1375],{},"bundle exec jekyll server",[17,1377,1378],{},[62,1379],{"alt":1380,"src":1381},"成功，彻彻底底！","https://static.031130.xyz/uploads/2024/08/12/62f3caeec8ef6.webp",[672,1383,1384],{"id":1384},"参考材料",[17,1386,1387],{},[40,1388,1390],{"href":1228,"rel":1389},[44],"Fedora Docs",[17,1392,1393],{},[40,1394,1397],{"href":1395,"rel":1396},"https://github.com/openSUSE-zh/page-opensuse-zh/blob/main/CONTRIBUTING.md",[44],"openSUSE 中文社区主页贡献指南",[17,1399,1400,1405,1406,1411],{},[40,1401,1404],{"href":1402,"rel":1403},"https://blog.kagesenshi.org/2021/05/ruby24-fedora34.html",[44],"Switching to use Ruby 2.7 (or older) in Fedora 34 using DNF Modules"," 「",[40,1407,1410],{"href":1408,"rel":1409},"https://web.archive.org/web/20220112143005/https://blog.kagesenshi.org/2021/05/ruby24-fedora34.html",[44],"WebArchive","」",[576,1413,1414],{},"html pre.shiki code .sAdtL, html code.shiki .sAdtL{--shiki-default:#4078F2;--shiki-dark:#61AFEF}html pre.shiki code .sDhpE, html code.shiki .sDhpE{--shiki-default:#50A14F;--shiki-dark:#98C379}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .s_Sar, html code.shiki .s_Sar{--shiki-default:#0184BC;--shiki-dark:#56B6C2}html pre.shiki code .sAGMh, html code.shiki .sAGMh{--shiki-default:#986801;--shiki-dark:#D19A66}",{"title":97,"searchDepth":98,"depth":98,"links":1416},[1417,1418,1421,1422],{"id":1198,"depth":98,"text":1198},{"id":1221,"depth":98,"text":1222,"children":1419},[1420],{"id":1241,"depth":209,"text":1241},{"id":1310,"depth":98,"text":1311},{"id":1384,"depth":98,"text":1384},{"title":1424,"date":1425,"path":1426,"tags":1427,"body":1429},"pacman更新时遇到「GPGME 错误：无数据」","2022-01-01 23:42:09","/2022/01/01/pacman-gpgme-error-no-data",[1428],"Archlinux",{"type":14,"value":1430,"toc":1524},[1431,1434,1437,1443,1446,1452,1455,1461,1464,1467,1478,1489,1496,1499,1505,1518],[672,1432,1433],{"id":1433},"情景再现",[17,1435,1436],{},"当初是使用 pacman 更新时遇上了「GPGME 错误：无数据」的问题，我尝试复现了下，大概是下面这样的情况。",[185,1438,1441],{"className":1439,"code":1440,"language":786},[784],"[zhullyb@Archlinux ~]$ sudo pacman -Syu\n错误：GPGME 错误：无数据\n错误：GPGME 错误：无数据\n错误：GPGME 错误：无数据\n:: 正在同步软件包数据库...\n core                                137.6 KiB   598 KiB/s 00:00 [------------------------------------] 100%\n extra                              1566.0 KiB  6.12 MiB/s 00:00 [------------------------------------] 100%\n community                             6.0 MiB  20.6 MiB/s 00:00 [------------------------------------] 100%\n错误：GPGME 错误：无数据\n错误：GPGME 错误：无数据\n错误：GPGME 错误：无数据\n错误：未能同步所有数据库（无效或已损坏的数据库 (PGP 签名)）\n",[114,1442,1440],{"__ignoreMap":97},[17,1444,1445],{},"英文版的提示应该是长成下面这个样子",[185,1447,1450],{"className":1448,"code":1449,"language":786},[784],"[zhullyb@Archlinux ~]$ sudo pacman -Syu\nerror: GPGME error: No data\nerror: GPGME error: No data\nerror: GPGME error: No data\n:: Synchronizing package databases...\n core                                137.6 KiB   574 KiB/s 00:00 [------------------------------------] 100%\n extra                              1566.0 KiB  5.66 MiB/s 00:00 [------------------------------------] 100%\n community                             6.0 MiB  18.1 MiB/s 00:00 [------------------------------------] 100%\nerror: GPGME error: No data\nerror: GPGME error: No data\nerror: GPGME error: No data\nerror: failed to synchronize all databases (invalid or corrupted database (PGP signature))\n",[114,1451,1449],{"__ignoreMap":97},[672,1453,1454],{"id":1454},"解决方案",[185,1456,1459],{"className":1457,"code":1458,"language":786},[784],"sudo rm /var/lib/pacman/sync/*.sig\n",[114,1460,1458],{"__ignoreMap":97},[17,1462,1463],{},"很简单，就这一条命令就够了。",[672,1465,1466],{"id":1466},"问题原因",[17,1468,1469,1470,1473,1474,1477],{},"pacman在更新数据库文件时也会尝试下载",[114,1471,1472],{},"$repo.db.sig","，这里的",[114,1475,1476],{},"$repo","可以是 core、extra、community、archlinuxcn 等仓库名。",[17,1479,1480,1481,1485,1486,136],{},"但是无论是官方源还是 archlinuxcn 源，",[1482,1483,1484],"strong",{},"大多数源的数据库文件","都不会被签名，也就",[1482,1487,1488],{},"不会存在 .db.sig 文件",[17,1490,1491,1492,1495],{},"pacman 尝试下载时这些数据库文件的签名文件时，镜像站就会返回 ",[1482,1493,1494],{},"404 的 http 状态码","告诉pacman: “你个傻叉，神他妈没有这个文件！”",[17,1497,1498],{},"pacman 挨了一顿骂，也就善罢甘休，没有再动这个念头，所以我们每次更新也都相安无事。",[17,1500,1501,1502,136],{},"而出现这种错误的情况大多是发生在 校园网、酒店免费 WIFI 这种",[1482,1503,1504],{},"需要登陆以后才能上网的网络环境",[17,1506,1507,1508,1511,1512,1514,1515,1517],{},"因为 pacman 尝试下载 ",[114,1509,1510],{},".db.sig"," 文件时被登陆网页劫持了（这点你们应该深有感受，如果你在这种网络环境下没有登陆，你无论访问什么网页都会被重定向到登录界面，http 的状态码此时是200，不是404）。从没见过 ",[114,1513,1510],{},"的 pacman 此时两眼放光，由于没有挨骂，他就迅速地把登录界面当成是",[114,1516,1510],{},"下载下来了。",[17,1519,1520,1521,1523],{},"下载下来以后，pacman 激动地摆弄起 ",[114,1522,1510],{},"，甚至发现里面没有自己期待已久的 GPG签名数据并开始报错时仍然不愿意撒手，因此此时无论再怎么同步源码、再怎么 Syyu 也不会有效果，必须人工干预。",{"title":97,"searchDepth":98,"depth":98,"links":1525},[1526,1527,1528],{"id":1433,"depth":98,"text":1433},{"id":1454,"depth":98,"text":1454},{"id":1466,"depth":98,"text":1466},{"title":1530,"date":1531,"path":1532,"tags":1533,"body":1534},"Cutefish的前世今生","2021-12-12 00:10:34","/2021/12/12/the-history-of-cutefish",[12],{"type":14,"value":1535,"toc":1834},[1536,1541,1544,1547,1550,1553,1557,1561,1564,1570,1581,1585,1588,1617,1620,1629,1633,1641,1650,1654,1672,1675,1684,1688,1693,1696,1745,1748,1762,1764],[559,1537,1538],{},[17,1539,1540],{},"CutefishOS是由我们国内的开发者主导（目前也主要是他们在开发）的桌面环境。不过似乎对于他的前世今生，似乎很多人都有误解。尤其是很多人认为他是一个Archlinux-based发行版；部分用户分不清他到底是基于Debian还是基于Ubuntu；还有人把它和 JingOS 弄混了。",[17,1542,1543],{},"先把这些问题的回答写在最前面:",[17,1545,1546],{},"CutefishOS 是一个基于Debian的发行版，他的前身 CyberOS 是一个基于 Archlinux 的发行版。但要注意: Cutefish （不加OS）可以单独指代 CutefishOS 所使用的桌面环境，为了避免混淆，本文中我将使用CutefishDE来指代他的桌面环境。",[17,1548,1549],{},"CutefishOS 和 JingOS 目前只是官网互加友链的关系，并不是相同的东西。Cutefish的开发方向是基于qt重写一套UI，而JingOS则更像是在开发一套KDE的主题。",[1551,1552],"hr",{},[672,1554,1556],{"id":1555},"cutefish的历史","Cutefish的历史",[1239,1558,1560],{"id":1559},"cyberos的故事","CyberOS的故事",[17,1562,1563],{},"第一次体验到这个UI其实是在21年的3月，在Archlinux的QQ群里，群主向我们推荐了 CyberOS ，这是一个基于 Archlinux 的发行版。",[17,1565,1566],{},[62,1567],{"alt":1568,"src":1569},"QQ群公告","https://static.031130.xyz/uploads/2024/08/12/62f3cae911901.webp",[17,1571,1572,1573],{},"由于基于 Archlinux，我直接就添加了CyberOS的源作为第三方源安装上了CyberDE，",[146,1574,1575,1576,136],{},"那会儿还顺手水了篇博客，由于后来事情发展太快，这篇博客早就不适用了，就干脆删了，现在在我的Github还能找到那会儿的",[40,1577,1580],{"href":1578,"rel":1579},"https://github.com/zhullyb/blog/blob/20210430/_posts/2021-03-21-install-cyber-desktop-on-your-archlinux.md",[44],"存档",[1239,1582,1584],{"id":1583},"更名cutefishos","更名CutefishOS",[17,1586,1587],{},"后来根据 CutefishOS 的QQ群的群主所说，是因为当时没注重海外平台的宣发，导致 CyberOS 的用户名在 Twitter 被抢注，因此决定改名 CutefishOS 。由于时间较为久远，QQ群的聊天记录已经几乎找不到了，我无法放出。",[17,1589,1590,1591,1601,1609],{},"关于CutefishOS的创始时间我已经记不清了，但是可以推测是在21年的4~5月份左右。",[1592,1593,1594],"sup",{},[40,1595,1600],{"href":1596,"ariaDescribedBy":1597,"dataFootnoteRef":97,"id":1599},"#user-content-fn-1",[1598],"footnote-label","user-content-fnref-1","1",[1592,1602,1603],{},[40,1604,1608],{"href":1605,"ariaDescribedBy":1606,"dataFootnoteRef":97,"id":1607},"#user-content-fn-2",[1598],"user-content-fnref-2","2",[1592,1610,1611],{},[40,1612,1616],{"href":1613,"ariaDescribedBy":1614,"dataFootnoteRef":97,"id":1615},"#user-content-fn-3",[1598],"user-content-fnref-3","3",[1239,1618,1619],{"id":1619},"官网上线",[17,1621,1622,1623,1628],{},"21年5月12日，",[40,1624,1627],{"href":1625,"rel":1626},"https://cutefishos.com",[44],"cutefishos.com"," 上线，暂时不提供安装镜像。",[1239,1630,1632],{"id":1631},"进军arch系","进军Arch系",[17,1634,1635,1636,136],{},"5月26日，CutefishDE进入 ",[40,1637,1640],{"href":1638,"rel":1639},"https://archlinux.org/groups/x86_64/cutefish/",[44],"Archlinux官方源",[17,1642,1643,1644,1649],{},"同日，Github 组织 manjaro-cutefish 放出了使用 CutefishDE 的 ",[40,1645,1648],{"href":1646,"rel":1647},"https://github.com/manjaro-cutefish/download/releases",[44],"manjaro安装镜像","。这个组织和官方的 github.com/cutefishos 没有共同维护者，因此可以基本断定是第三方打包的。",[1239,1651,1653],{"id":1652},"ubuntu第三方打包版的跟进","Ubuntu第三方打包版的跟进",[17,1655,1656,1657,1665,1666,1671],{},"大约在7月中旬左右",[1592,1658,1659],{},[40,1660,1664],{"href":1661,"ariaDescribedBy":1662,"dataFootnoteRef":97,"id":1663},"#user-content-fn-4",[1598],"user-content-fnref-4","4","，Github出现了一位名为 cutefish-ubuntu 的用户，开始在 Ubutnu 上编译 CutefishDE ，并通过 ",[40,1667,1670],{"href":1668,"rel":1669},"https://cutefish-ubuntu.github.io/",[44],"GithubPages"," 发布安装镜像，依然是第三方打包的安装镜像。",[1239,1673,1674],{"id":1674},"官方版本释出",[17,1676,1677,1678,1683],{},"21年国庆长假期间，cutefishos.com 释出由 Cutefish官方发布的",[40,1679,1682],{"href":1680,"rel":1681},"https://cutefishos.com/download",[44],"基于Debian的CutefishOS镜像","，搭载的DE是 0.5 版本的，英文版网页提供 Google Drive 和 Mega 的下载链接，中文版本网页非常贴心地添加了使用飞书下载的方式方便国内用户下载。",[1239,1685,1687],{"id":1686},"rpm系的跟进","RPM系的跟进",[1689,1690,1692],"h4",{"id":1691},"copr","COPR",[17,1694,1695],{},"copr上分别有三名用户打包了CutefishDE/CyberDE，我以表格形式简单罗列一下",[864,1697,1698,1711],{},[867,1699,1700],{},[870,1701,1702,1705,1708],{},[873,1703,1704],{},"用户名",[873,1706,1707],{},"打包的DE",[873,1709,1710],{},"第一次打包日期",[897,1712,1713,1724,1735],{},[870,1714,1715,1718,1721],{},[902,1716,1717],{},"rmnscnce",[902,1719,1720],{},"cutefish",[902,1722,1723],{},"2021.8.19",[870,1725,1726,1729,1732],{},[902,1727,1728],{},"cappyishihara",[902,1730,1731],{},"cyber",[902,1733,1734],{},"2021.11.17",[870,1736,1737,1740,1742],{},[902,1738,1739],{},"jesonlay",[902,1741,1720],{},[902,1743,1744],{},"2021.12.06",[1689,1746,1747],{"id":1747},"论坛用户",[17,1749,1750,1751,1756,1757,136],{},"21年12月2日，一为名为",[40,1752,1755],{"href":1753,"rel":1754},"https://bbs.cutefishos.com/u/gesangtome",[44],"gesangtome","的网友在CutefishOS的论坛上",[40,1758,1761],{"href":1759,"rel":1760},"https://bbs.cutefishos.com/d/331-fedoracutefish",[44],"发布了自己编译的CutefishDE",[1551,1763],{},[1765,1766,1769,1774],"section",{"className":1767,"dataFootnotes":97},[1768],"footnotes",[672,1770,1773],{"className":1771,"id":1598},[1772],"sr-only","Footnotes",[1775,1776,1777,1791,1805,1819],"ol",{},[24,1778,1780,1781,1783,1784],{"id":1779},"user-content-fn-1","通过whois查询得知",[114,1782,1627],{}," 这个域名注册时间为21年3月31日 ",[40,1785,1790],{"href":1786,"ariaLabel":1787,"className":1788,"dataFootnoteBackref":97},"#user-content-fnref-1","Back to reference 1",[1789],"data-footnote-backref","↩",[24,1792,1794,1799,1800],{"id":1793},"user-content-fn-2",[40,1795,1798],{"href":1796,"rel":1797},"https://github.com/archlinux/svntogit-community/commit/b92bb9ae8fd35178cdfebb6f56b55f20722aa7dd",[44],"Cutefish进入Archlinux官方源","是在5月26日 ",[40,1801,1790],{"href":1802,"ariaLabel":1803,"className":1804,"dataFootnoteBackref":97},"#user-content-fnref-2","Back to reference 2",[1789],[24,1806,1808,1813,1814],{"id":1807},"user-content-fn-3",[40,1809,1812],{"href":1810,"rel":1811},"https://github.com/cyberos",[44],"CyberOS的Github仓库","最后一次内容变更是在21年的5月23日 ",[40,1815,1790],{"href":1816,"ariaLabel":1817,"className":1818,"dataFootnoteBackref":97},"#user-content-fnref-3","Back to reference 3",[1789],[24,1820,1822,1823,1828,1829],{"id":1821},"user-content-fn-4","这里参考的是 cutefish-ubuntu/cutefish-ubuntu.github.io 仓库的",[40,1824,1827],{"href":1825,"rel":1826},"https://github.com/cutefish-ubuntu/cutefish-ubuntu.github.io/commit/237a480992a74d8c75c1f4ec51511550ce97c64b",[44],"第一个commit","的时间 ",[40,1830,1790],{"href":1831,"ariaLabel":1832,"className":1833,"dataFootnoteBackref":97},"#user-content-fnref-4","Back to reference 4",[1789],{"title":97,"searchDepth":98,"depth":98,"links":1835},[1836,1845],{"id":1555,"depth":98,"text":1556,"children":1837},[1838,1839,1840,1841,1842,1843,1844],{"id":1559,"depth":209,"text":1560},{"id":1583,"depth":209,"text":1584},{"id":1619,"depth":209,"text":1619},{"id":1631,"depth":209,"text":1632},{"id":1652,"depth":209,"text":1653},{"id":1674,"depth":209,"text":1674},{"id":1686,"depth":209,"text":1687},{"id":1598,"depth":98,"text":1773},{"title":1847,"date":1848,"path":1849,"tags":1850,"body":1852},"wolai再打包遇到的问题--electron应用的dev判断机制","2021-12-03 22:53:25","/2021/12/03/dev-app-update-in-wolai",[1428,1851],"electron",{"type":14,"value":1853,"toc":2103},[1854,1867,1873,1876,1888,1891,1899,1904,1911,1920,1965,1968,1971,2052,2055,2061,2064,2100],[17,1855,1856,1857,1862,1863,1866],{},"之前对于electron懵懵懂懂的时候就把 ",[40,1858,1861],{"href":1859,"rel":1860},"https://www.wolai.com/",[44],"wolai"," 给打包上了 AUR ，那会儿年少无知，也不懂得把内置的 electron 拆开来换成系统内置的以节省空间。前一阵子给CN源打完 Motrix 以后突然想起来自己在 AUR 上还有维护一个叫 wolai 的electron 应用，于是打算把软件内置的 electron 拆出来。尝试使用 ",[114,1864,1865],{},"electron /path/to/app.asar"," 命令启动的时候发现了以下的问题。",[17,1868,1869],{},[62,1870],{"alt":1871,"src":1872},"报错了","https://static.031130.xyz/uploads/2024/08/12/62f3caf822bec.webp",[17,1874,1875],{},"虽然这个报错无关紧要，直接右上角叉掉也不影响软件正常使用，但是就这样推上 AUR 似乎有些不太妥当。于是使用搜索引擎查找答案。",[17,1877,1878,1879,1882,1883],{},"发现是使用系统自带的 electron 启动时，app.asar 内置的一个叫 ",[114,1880,1881],{},"electron-updater"," 的模块在自动检测更新时会误认为我们此时处于开发模式，于是会尝试读取 app.asar 内部的 dev-app-update.yml 以查询更新。",[1592,1884,1885],{},[40,1886,1600],{"href":1596,"ariaDescribedBy":1887,"dataFootnoteRef":97,"id":1599},[1598],[17,1889,1890],{},"但问题在于这个 app.asar 并不是 wolai 开发者在开发时使用 development 模式打出来的包，应该是 production ，所以内置的那个文件名叫 app-update.yml ，少了个dev 前缀，就很尴尬。",[17,1892,1893,1894],{},"以下内容来自一篇简书的文章",[1592,1895,1896],{},[40,1897,1608],{"href":1605,"ariaDescribedBy":1898,"dataFootnoteRef":97,"id":1607},[1598],[559,1900,1901],{},[17,1902,1903],{},"所以调试的时候可以建一个default-app.yml文件放在D:\\hzhh123\\workspace\\vue-work\\electron-demo1\\node_modules\\electron\\dist\\resources\\default_app.asar 下，这里就涉及到asar解压缩，但是这样会很麻烦，打包后也需要这样替换，麻烦，所幸electron-updater中提供了这个文件的属性配置updateConfigPath，可以通过设置这个属性来解决这个问题",[17,1905,1906,1907,1910],{},"很遗憾，我们并不是该应用的开发者，并不能指定",[114,1908,1909],{},"electron-uploader","构建时的参数，所以只能考虑解压缩 app.asar 手动放入 dev-app-update.yml 的方案。",[17,1912,1913,1914,1919],{},"根据又一篇简书的文章",[1592,1915,1916],{},[40,1917,1616],{"href":1613,"ariaDescribedBy":1918,"dataFootnoteRef":97,"id":1615},[1598],"，我们了解到 npm 中有一个叫 asar 的程序可以帮助我们解压缩 app.asar。我这里直接将内容搬过来",[559,1921,1922,1925,1944,1947],{},[17,1923,1924],{},"解压",[185,1926,1928],{"className":187,"code":1927,"language":189,"meta":97,"style":97},"asar extract 压缩文件  解压文件夹\n",[114,1929,1930],{"__ignoreMap":97},[193,1931,1932,1935,1938,1941],{"class":195,"line":196},[193,1933,1934],{"class":398},"asar",[193,1936,1937],{"class":220}," extract",[193,1939,1940],{"class":220}," 压缩文件",[193,1942,1943],{"class":220},"  解压文件夹\n",[17,1945,1946],{},"压缩：如果压缩文件存在，则会被替换",[185,1948,1950],{"className":187,"code":1949,"language":189,"meta":97,"style":97},"asar pack 文件夹  压缩文件名\n",[114,1951,1952],{"__ignoreMap":97},[193,1953,1954,1956,1959,1962],{"class":195,"line":196},[193,1955,1934],{"class":398},[193,1957,1958],{"class":220}," pack",[193,1960,1961],{"class":220}," 文件夹",[193,1963,1964],{"class":220},"  压缩文件名\n",[17,1966,1967],{},"原文是让我们直接使用 npm 下载安装 asar 程序，然而这就会让打包过程变得很复杂，所幸 Archlinux 官方源中已经将这个程序打完了，我们可以直接将 asar 写入 makedepends。",[17,1969,1970],{},"大概就写成了这个样子。",[185,1972,1974],{"className":187,"code":1973,"language":189,"meta":97,"style":97},"asar extract ${srcdir}/squashfs-root/resources/app.asar ${srcdir}/new_app\nmv  ${srcdir}/squashfs-root/resources/app-update.yml ${srcdir}/new_app/dev-app-update.yml\nasar pack ${srcdir}/new_app ${srcdir}/squashfs-root/resources/app.asar\n",[114,1975,1976,2004,2028],{"__ignoreMap":97},[193,1977,1978,1980,1982,1986,1989,1992,1995,1997,1999,2001],{"class":195,"line":196},[193,1979,1934],{"class":398},[193,1981,1937],{"class":220},[193,1983,1985],{"class":1984},"sr1Ac"," ${",[193,1987,1988],{"class":212},"srcdir",[193,1990,1991],{"class":1984},"}",[193,1993,1994],{"class":220},"/squashfs-root/resources/app.asar",[193,1996,1985],{"class":1984},[193,1998,1988],{"class":212},[193,2000,1991],{"class":1984},[193,2002,2003],{"class":220},"/new_app\n",[193,2005,2006,2009,2012,2014,2016,2019,2021,2023,2025],{"class":195,"line":98},[193,2007,2008],{"class":398},"mv",[193,2010,2011],{"class":1984},"  ${",[193,2013,1988],{"class":212},[193,2015,1991],{"class":1984},[193,2017,2018],{"class":220},"/squashfs-root/resources/app-update.yml",[193,2020,1985],{"class":1984},[193,2022,1988],{"class":212},[193,2024,1991],{"class":1984},[193,2026,2027],{"class":220},"/new_app/dev-app-update.yml\n",[193,2029,2030,2032,2034,2036,2038,2040,2043,2045,2047,2049],{"class":195,"line":209},[193,2031,1934],{"class":398},[193,2033,1958],{"class":220},[193,2035,1985],{"class":1984},[193,2037,1988],{"class":212},[193,2039,1991],{"class":1984},[193,2041,2042],{"class":220},"/new_app",[193,2044,1985],{"class":1984},[193,2046,1988],{"class":212},[193,2048,1991],{"class":1984},[193,2050,2051],{"class":220},"/squashfs-root/resources/app.asar\n",[17,2053,2054],{},"程序正常启动，没有弹出之前的对话框了。",[17,2056,2057],{},[62,2058],{"alt":2059,"src":2060},"成功啦","https://static.031130.xyz/uploads/2024/08/12/62f3cafb6b04d.webp",[17,2062,2063],{},"参考:",[1765,2065,2067,2070],{"className":2066,"dataFootnotes":97},[1768],[672,2068,1773],{"className":2069,"id":1598},[1772],[1775,2071,2072,2082,2091],{},[24,2073,2074,2078,2079],{"id":1779},[40,2075,2076],{"href":2076,"rel":2077},"https://github.com/electron-userland/electron-builder/issues/1505",[44]," ",[40,2080,1790],{"href":1786,"ariaLabel":1787,"className":2081,"dataFootnoteBackref":97},[1789],[24,2083,2084,2078,2088],{"id":1793},[40,2085,2086],{"href":2086,"rel":2087},"https://www.jianshu.com/p/15bde714e198",[44],[40,2089,1790],{"href":1802,"ariaLabel":1803,"className":2090,"dataFootnoteBackref":97},[1789],[24,2092,2093,2078,2097],{"id":1807},[40,2094,2095],{"href":2095,"rel":2096},"https://www.jianshu.com/p/17d97e6bf174",[44],[40,2098,1790],{"href":1816,"ariaLabel":1817,"className":2099,"dataFootnoteBackref":97},[1789],[576,2101,2102],{},"html pre.shiki code .sAdtL, html code.shiki .sAdtL{--shiki-default:#4078F2;--shiki-dark:#61AFEF}html pre.shiki code .sDhpE, html code.shiki .sDhpE{--shiki-default:#50A14F;--shiki-dark:#98C379}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .sr1Ac, html code.shiki .sr1Ac{--shiki-default:#E45649;--shiki-dark:#ABB2BF}html pre.shiki code .sJa8x, html code.shiki .sJa8x{--shiki-default:#E45649;--shiki-dark:#E06C75}",{"title":97,"searchDepth":98,"depth":98,"links":2104},[2105],{"id":1598,"depth":98,"text":1773},{"title":2107,"date":2108,"path":2109,"tags":2110,"body":2112},"Typora与我","2021-11-26 23:05:05","/2021/11/26/typora-and-me",[2111],"Casual Talk",{"type":14,"value":2113,"toc":2204},[2114,2117,2120,2123,2125,2128,2136,2139,2144,2151,2153,2164,2167,2177,2180,2190],[17,2115,2116],{},"Typora 要收费了，$14.9 买断制，支持三设备激活。而且尚且不知道这里买断的是单个大版本更新还是多个大版本更新。",[17,2118,2119],{},"很多人说，不要紧，我们有VsCode、我们有Vnote、我们有MarkText。。。",[17,2121,2122],{},"但我还是不习惯。",[1551,2124],{},[17,2126,2127],{},"Typora真的就是个非常纯粹的Markdown编辑器，他有所见即所得的视觉效果，同时为我提供了沉浸式的写作体验。",[17,2129,2130,2131,2135],{},"当我在使用Typora写文章的时候，我就是个非常单纯的内容创作者，我不需要去考虑各种Markdown的语法格式，我只需要用文字写下我所想的，然后通过右键菜单把文字的样式调整到一个能够合理突出主次的程度，便完成了。若是用的时间长了，记住了打开菜单时旁边现实的快捷键，那速度便更快了。即使有插入图片/视频的需求，我也只需要将图片复制进 Typora 的编辑框，我在Typora预先设置好的自定义上传命令会自动调用我部署在本地的",[40,2132,2134],{"href":155,"rel":2133},[44],"PicUploader","完成上传，并将媒体文件以 Markdown/html 语法呈现在编辑框中。",[17,2137,2138],{},"这样一来，我的行文思路就是连贯、不受打断的。即使需要从系统中截取一些图片作说明用途，我也可以通过 Flameshot 截取图片并简单画几个箭头、标几个序号或者框几个按钮后复制到剪切板，并最终粘贴到Typora的编辑框中，整个过程就像是我在和别人QQ聊天时截个图发过去一般简单。",[17,2140,2141],{},[62,2142],{"alt":2143,"src":163},"gif缩略图有点小，建议是点开来看",[17,2145,2146,2147,2150],{},"倘若我使用别的Markdown编辑器，我便需要将图片保存到本地、手动上传到图床、手动写markdown的",[114,2148,2149],{},"![]()","语法，如此一来，我的精力就被分散了，那我也就不会有为文章插入图片的兴趣，抑或是插入完某张图片以后深感心力憔悴，便把写了一半的文章束之高阁，欺骗自己将来有一天我会继续完成这篇文章。",[1551,2152],{},[17,2154,2155],{},[146,2156,2157,2158,2163],{},"总而言之，Typora对于我而言确实是非常有用的工具，而我将在接下来的半年到一年时间中过渡到其他的开源Markdown编辑器中。即使改变我的使用习惯将是一件非常痛苦的事情，但我不得不这么做。Typora内置的electron在Archlinux的滚动更新下不知道过多久会出现与系统不兼容的情况",[1592,2159,2160],{},[40,2161,1600],{"href":1596,"ariaDescribedBy":2162,"dataFootnoteRef":97,"id":1599},[1598],"，所以这意味着继续使用老版本的Typora并不是长久之策，我需要在此之前尽快切换到其他的Markdown编辑器。而我不是个商业公司的Markdown工程师，单纯为了个人兴趣而花大价钱去买这一款生产力工具却无法得到经济回馈似乎并不是一个明智的选择。",[17,2165,2166],{},"反转了，仔细阅读Typora官网的Q&A后发现了这么一条:",[559,2168,2169,2174],{},[17,2170,2171],{},[1482,2172,2173],{},"Can I use Typora for free ?",[17,2175,2176],{},"You will have a 15 days free trial before the purchase. If you use  dev version or Linux version, you will have unlimited trial time if you  keep Typora updated. But we may show “trial button” or disable certain  features to encourage you to purchase our app, but basic and most  functions will be kept.",[17,2178,2179],{},"看起来 Dev 版和 Linux版本在最新版本可以无限试用下去，那我不考虑改变我的写作习惯了。",[559,2181,2182],{},[17,2183,2184,2185],{},"注: Dev 版藏得有点深，在",[40,2186,2189],{"href":2187,"rel":2188},"https://typora.io/releases/dev",[44],"这里",[1765,2191,2193,2196],{"className":2192,"dataFootnotes":97},[1768],[672,2194,1773],{"className":2195,"id":1598},[1772],[1775,2197,2198],{},[24,2199,2200,2201],{"id":1779},"baidunetdisk-bin内置的electron已经无法在如今的Archlinux上跑起来了，目前唯一的解决方案是拆包、并使用系统级的electron去启动百度网盘，也就是AUR的baidunetdisk-electron。但是typora运用了一些混淆/加密的手段，使得只有他内置的electron才可以正确启动程序。 ",[40,2202,1790],{"href":1786,"ariaLabel":1787,"className":2203,"dataFootnoteBackref":97},[1789],{"title":97,"searchDepth":98,"depth":98,"links":2205},[2206],{"id":1598,"depth":98,"text":1773},129,1763661237628]