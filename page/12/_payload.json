[{"data":1,"prerenderedAt":1014},["ShallowReactive",2],{"randomIndex/page/12/":3,"language-switch-/page/12/-en":4,"index-page-12-zh":5,"posts-total-zh":1013},0,"/en/",[6,130,240,397,515,576,655,704,929,968],{"title":7,"date":8,"path":9,"tags":10,"body":13},"请给 tuna/ustc 镜像站减压","2021-05-27 21:25:48","/2021/05/27/relieve-the-pressure-of-tuna-mirror-site-please",[11,12],"Linux","Mirror Site",{"type":14,"value":15,"toc":120},"minimark",[16,28,35,38,50,53,61,69,77,80,87,90,97,100,107,110,117],[17,18,19,20,27],"p",{},"不知道从什么时候开始，我总觉得tuna的镜像站提供的下载速度越来越慢，直到我前几天翻开tuna镜像站的「",[21,22,26],"a",{"href":23,"rel":24},"https://mirrors.tuna.tsinghua.edu.cn/status/#server-status",[25],"nofollow","服务器状态","」，我被眼前的景象给震惊到了。",[17,29,30],{},[31,32],"img",{"alt":33,"src":34},"本图截于2021年5月27日晚","https://static.031130.xyz/uploads/2024/08/12/62f3baac63cd2.webp",[17,36,37],{},"我在这里大致观察了一下这张图：服务器流量主要是由四个部分组成，「http-ipv4」、「https-ipv4」、「http-ipv6」和「https-ipv6」。光是从过去24小时的平均出站流量来计算的话，大约就是2.4Gb/s，如果观察图中的流量高峰期的话，大概是4Gb/s的一个速率。这个流量大小是什么概念呢？根据我个人浅薄的建站经验来讲，这个流量可以让大部分供应商把你的网站判断为正在遭受攻击，你将被强制进入黑洞模式。然而对于tuna的镜像站而言，这个流量速率确是日常。换句话说，tuna的服务器都相当于每时每刻都在被来自全国的开发者“攻击”。",[39,40,41,44],"blockquote",{},[17,42,43],{},"来自 2022 年的竹林: 我是真没想到去年 tuna 的网络负载只有这点的。2022 年的负载图在下面附上，已经翻了一倍不止了",[17,45,46],{},[31,47],{"alt":48,"src":49},"本图截于2022年8月10日晚","https://static.031130.xyz/uploads/2024/08/12/62f3ba4204ecb.webp",[17,51,52],{},"因此，我们也就不难理解为什么tuna近些年来经常出现断流等一系列问题了。",[39,54,55,58],{},[17,56,57],{},"客观上 TUNA 和 UTSC 是国内知名度和镜像项目数量以及同步速度都靠前的镜像站，但也因为如此，这两个镜像站每日的带宽负载是很大的；能跑满我的本地带宽速度是较理想的情况，但是那么大的负载，时间跨度长了体验到的波动差异也就多了起来。至少在我这里，长时间使用两个镜像站的速度波动挺大的。TUNA 也曾微言过带宽日益不堪重负，所以从道德情感和技术理论等角度上，尽管他们是理想的镜像站点，我个人不会优先使用这两个镜像站，也不会优先推荐别人使用。",[17,59,60],{},"——WPlanck",[17,62,63,64,68],{},"国内的开源镜像站我大多都已经收集到",[21,65,67],{"href":66},"/2020/07/11/china-mainland-mirrorlist/","这一篇博客中","了，以下几个镜像站是我重点推荐的。",[70,71,73],"h3",{"id":72},"bfsu",[21,74,72],{"href":75,"rel":76},"https://mirrors.bfsu.edu.cn/",[25],[17,78,79],{},"tuna的姊妹站，通俗来讲就是tuna派人维护，北京外国语大学出钱。人少、稳定、涵盖项目较广。",[70,81,83],{"id":82},"sjtug",[21,84,82],{"href":85,"rel":86},"https://mirrors.sjtug.sjtu.edu.cn/",[25],[17,88,89],{},"上海交大的站点，也有不少项目，据说sjtug上的manjaro镜像是国内几个开源镜像站中同步最勤快的，用的人也不多。",[70,91,93],{"id":92},"opentuna",[21,94,92],{"href":95,"rel":96},"https://opentuna.cn/",[25],[17,98,99],{},"tuna那边用国内aws服务器搭的站点，速度超快，不过比较可惜的是现在同步的项目不多，同步频率低，大概是一天一次的样子。",[70,101,103],{"id":102},"pku",[21,104,102],{"href":105,"rel":106},"https://mirrors.pku.edu.cn/Mirrors",[25],[17,108,109],{},"是不是没想到北大也有镜像站？没记错的话是今年三四月左右刚开的，和opentuna情况差不多，用的人少、速度快、同步的项目不多。",[70,111,113],{"id":112},"hit",[21,114,112],{"href":115,"rel":116},"https://mirrors.hit.edu.cn/",[25],[17,118,119],{},"哈尔滨工业大学的镜像站，速度我跑下来感觉一般，不是特别亮眼，不过同步频率高。",{"title":121,"searchDepth":122,"depth":122,"links":123},"",2,[124,126,127,128,129],{"id":72,"depth":125,"text":72},3,{"id":82,"depth":125,"text":82},{"id":92,"depth":125,"text":92},{"id":102,"depth":125,"text":102},{"id":112,"depth":125,"text":112},{"title":131,"date":132,"path":133,"tags":134,"body":136},"我为什么选择Archlinux？","2021-05-23","/2021/05/23/why-i-use-archlinux",[135],"Archlinux",{"type":14,"value":137,"toc":231},[138,141,144,148,156,159,166,169,172,176,179,182,185,188,191,194,197,200,208,212,215,218,222,225,228],[17,139,140],{},"对于我而言，我用Archlinux主要的原因就是实用主义。我可以很负责的说，Arch真的是在我所有用过的发行版当中最符合实用主义的一个了。",[17,142,143],{},"很多大佬一提到Archlinux就扯些什么kiss原则，在我看来则不然。",[145,146,147],"h2",{"id":147},"整洁规范的系统",[17,149,150,151,155],{},"规范代码为的不是为了什么",[152,153,154],"strong",{},"Art of Code","，而是可读性的提升；遵循kiss原则亦是如此。",[17,157,158],{},"配置文件的路径写好了，符合规范，我们就能一下子找到，我们是为了实用主义而遵守kiss原则。",[17,160,161,162],{},"同样的，我同样可以为了实用主义而破坏kiss原则。",[163,164,165],"del",{},"比如在我的archiso-zhullyb中，我添加了一个pacman的hook将我的定制内核重命名为linux以确保其能够正确被ventoy所识别，这也是为了实用主义。",[17,167,168],{},"那么，什么时候我会破坏kiss原则呢？当我认为破坏kiss原则所带来的利大于弊时，我就会考虑以一个并不规范但却有效的方法来处理问题。",[17,170,171],{},"但很有趣的是，由于Archlinux的官方总是将kiss奉为圣旨，这就给我们提供了一个非常nice的环境了——在一个非常规范的系统内，破坏kiss原则所带来的代价并不会很大，这就好比在一个布线整齐的机房内临时私拉两三根线并不会给维护带来多大的困难。",[145,173,175],{"id":174},"archlinux对上游软件包的发行策略","Archlinux对上游软件包的发行策略",[17,177,178],{},"不同于apt在源内提供了统一软件的多个版本供用户选择，pacman剑走偏锋，默认用户系统内所有软件都是最新的。",[17,180,181],{},"由此带来了一个好处——不会出现由于版本过高/过低导致的依赖问题。只要我保证系统内的所有软件都是最新的，就不会出问题，非常的简单粗暴。",[17,183,184],{},"此外，不考虑依赖版本这一特点对于打包人来说也是一种解脱。",[145,186,187],{"id":187},"pacman简单的打包方式",[17,189,190],{},"不同于deb以及rpm，pacman的软件包应该是所有发行版中最省事儿的。",[17,192,193],{},"打包软件时，我们只需要写（改）一份PKGBUILD，就可以仅仅通过在PKGBUILD所在的路径执行makepkg命令来完成一次打包，这相比起deb而言可谓是天差地别。如此简单有效的打包方式注定其将被实用主义者所青睐。",[145,195,196],{"id":196},"超低的社区贡献成本",[17,198,199],{},"很多发行版社区开发与贡献其实并不容易参与进去，我拿Ubuntu来做个比较。",[39,201,202,205],{},[17,203,204],{},"附: Archwiki是先斩后奏类型的文档，在你按下保存按钮的那一刻，wiki将立即被更新，所有访客都将看到你改动后的内容。wiki文档拥有变更记录，不担心有人恶意搞破坏，向wiki管理员提出举报后破坏者的账号会被及时封禁，wiki可以非常简单地回滚到之前的状态。",[17,206,207],{},"AUR同样也是，你可以随意上传自己的PKGBUILD，可以被别的用户及时看到。如果上传恶意脚本，在别的用户举报后你将迅速被封号。",[70,209,211],{"id":210},"wiki方面","Wiki方面",[17,213,214],{},"Ubuntu其实是我第一个上手的Linux发行版，在为期半年的Ubuntu体验中，我对于社区做出的贡献为0。这倒也不是我不热衷于参与社区贡献，而是对Ubuntu社区的贡献成本太高了。去贡献文档翻译，需要等待漫长的审核过程，在第一篇汉化文章正式展现在别的用户眼前后，我一定会被激发出继续翻译第二篇的热情。然而，面对太长的审核周期，再高涨的热情恐怕也会被浇灭。",[17,216,217],{},"Arch的社区则不一样，他并不像别的社区那样严谨——只要注册个wiki的账号便可以开始贡献文档。你可以随意地编辑一篇文章或者是新增一篇自己的文章，编辑后的文章将能够立即被别的用户所阅读到，没有任何审核过程，有了这份热情，我便继续翻译别的文档，我想，这应该就是archwiki为何涵盖面如此之广的原因。",[70,219,221],{"id":220},"aur方面","AUR方面",[17,223,224],{},"同样也是拿Ubuntu对比。",[17,226,227],{},"在Archlinux下，我只需要简单的写一个PKGBUILD即可轻松构建一个软件包，同时，我也可以将这份有我攥写的PKGBUILD上传到AUR供别的用户使用。AUR作为一个公开的储存库，任何Arch用户都可以通过AUR Helper轻松得从AUR中获取我写的PKGBUILD并在本地打成自己的包。与此同时，我也可以创建一个私人源，直接发行我构建的二进制包。",[17,229,230],{},"Ubutnu则不然，他的打包方式则要麻烦得多，同时也没有类似PKGBUILD一样的东西便于用户分享自己的打包脚本。唯一能够分享自己的劳动成果的方式无非就是直接分享自己打出来的deb包，最多也不过是建立自己的ppa，这对于用户来说是极为麻烦的。用户需要处心积虑地寻找自己所需要的deb包或是含有目标包的ppa地址并手动添加，不像Archlinux有AUR这种东西能够让我们知道在哪里能够找到我们所需要的包。",{"title":121,"searchDepth":122,"depth":122,"links":232},[233,234,235,236],{"id":147,"depth":122,"text":147},{"id":174,"depth":122,"text":175},{"id":187,"depth":122,"text":187},{"id":196,"depth":122,"text":196,"children":237},[238,239],{"id":210,"depth":125,"text":211},{"id":220,"depth":125,"text":221},{"title":241,"date":242,"path":243,"tags":244,"body":247},"使用vercel创建一个随机图片api","2021-05-21","/2021/05/21/create-a-random-picture-api-with-vercel",[245,246],"Network","Vercel",{"type":14,"value":248,"toc":395},[249,260,271,274,277,288,291,296,309,319,322,328,391],[17,250,251,252,259],{},"如果你的网络环境不算太差的话，你在访问我博客的时候应该可以看到顶部有一张背景图。假如你访问我的博客时留心观察，你或许会发现每次你访问我博客时的背景都是不一样的。如果你没玩够，或许你可以尝试",[21,253,256],{"href":254,"rel":255},"https://randompic.zhul.in/api/randomtoppic.php",[25],[152,257,258],{},"点击这里","，我总共搜集了20张壁纸供诸位赏玩。",[17,261,262,263,270],{},"是的，这是使用php实现的随机图片api，托管于vercel，你可以在",[21,264,267],{"href":265,"rel":266},"https://note.aya1.top/#/4-phpapi",[25],[152,268,269],{},"aya的博客","上找到我使用的代码。具体配置方式我不再赘述。",[17,272,273],{},"然而，我们还需要解决一个问题: php在哪里运行？",[17,275,276],{},"如果你拥有自己的服务器，在国内访问速度毫不逊色，那就好办了，直接扔自己服务器上即可。然而，我并没有。我需要找到一个在国内访问速度给力的地方来部署我的api，以确保访客在打开我的博客时可以在第一时间获取到图片的真实链接并开始加载。",[17,278,279,280,283,284,287],{},"起初，我将其部署在我的好朋友(",[163,281,282],{},"你可以猜猜他是谁",")的国内vps上，访问速度自然不用说。然而，他的服务器",[152,285,286],{},"不支持https","，这就导致使用chrome访问的时候chrome不会自动访问我的api，博客顶部一片惨蓝。。。",[17,289,290],{},"随后，我使用的是000webhost提供的虚拟主机，国内访问起来也还不错，大概正常运行了半个月左右的时间，然后莫名开始502了。我懂，作为不交钱的白嫖用户应该自觉滚蛋了，这点觉悟咱还是有。",[17,292,293],{},[152,294,295],{},"随后，我找到了目前的方案——vercel",[17,297,298,299,302,303,308],{},"vercel是被我用来部署静态网页的，但我没想到他也能",[152,300,301],{},"支持php","。参考了",[21,304,307],{"href":305,"rel":306},"https://github.com/juicyfx/vercel-php",[25],"vercel-php","项目后，我大致了解了整个仓库结构。",[310,311,316],"pre",{"className":312,"code":314,"language":315},[313],"language-text","project\n├── api\n│   └── index.php\n└── vercel.json\n","text",[317,318,314],"code",{"__ignoreMap":121},[17,320,321],{},"php和附带的资源文件(如果有的话)一定要放到api文件夹下才能够正常被vercel识别。",[17,323,324,325],{},"以下附",[317,326,327],{},"vercel.json",[310,329,333],{"className":330,"code":331,"language":332,"meta":121,"style":121},"language-json shiki shiki-themes one-light one-dark-pro","{\n  \"functions\": {\n    \"api/index.php\": {\n      \"runtime\": \"vercel-php@0.4.0\"\n    }\n  }\n}\n","json",[317,334,335,344,353,360,373,379,385],{"__ignoreMap":121},[336,337,340],"span",{"class":338,"line":339},"line",1,[336,341,343],{"class":342},"s5ixo","{\n",[336,345,346,350],{"class":338,"line":122},[336,347,349],{"class":348},"sJa8x","  \"functions\"",[336,351,352],{"class":342},": {\n",[336,354,355,358],{"class":338,"line":125},[336,356,357],{"class":348},"    \"api/index.php\"",[336,359,352],{"class":342},[336,361,363,366,369],{"class":338,"line":362},4,[336,364,365],{"class":348},"      \"runtime\"",[336,367,368],{"class":342},": ",[336,370,372],{"class":371},"sDhpE","\"vercel-php@0.4.0\"\n",[336,374,376],{"class":338,"line":375},5,[336,377,378],{"class":342},"    }\n",[336,380,382],{"class":338,"line":381},6,[336,383,384],{"class":342},"  }\n",[336,386,388],{"class":338,"line":387},7,[336,389,390],{"class":342},"}\n",[392,393,394],"style",{},"html pre.shiki code .s5ixo, html code.shiki .s5ixo{--shiki-default:#383A42;--shiki-dark:#ABB2BF}html pre.shiki code .sJa8x, html code.shiki .sJa8x{--shiki-default:#E45649;--shiki-dark:#E06C75}html pre.shiki code .sDhpE, html code.shiki .sDhpE{--shiki-default:#50A14F;--shiki-dark:#98C379}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":121,"searchDepth":122,"depth":122,"links":396},[],{"title":398,"date":399,"path":400,"tags":401,"body":403},"禁止deepin-wine-tim使用simsun字体渲染","2021-04-27","/2021/04/27/hide-simsun-from-deepin-wine-tim",[135,11,402],"Bwrap",{"type":14,"value":404,"toc":513},[405,418,421,424,429,432,435,446,453,459,462,476,482,488,491,496,499,504,507],[39,406,407],{},[17,408,409,410,413,414,417],{},"本文中，我通过bwrap命令对运行Tim的wine程序屏蔽了simsun字体以获得了一个更为舒适的字体渲染效果。我所使用的Tim为",[317,411,412],{},"deepin-wine-tim","，至于",[317,415,416],{},"deepin-wine-qq","通过相同的方式应该也能达到相同的效果，spark商店的Tim我自己测试下来似乎是没法达到这样的效果，而使用其他方法安装simsun字体的网友们则需要注意灵活变通，不要照抄我给出的字体路径。",[17,419,420],{},"在Archlinux下，我们通常会使用deepin-wine5来运行QQ/Tim.",[17,422,423],{},"但是当我们在系统中倒入simsun字体时，无论使用什么奇迹淫巧似乎都无法阻止deepin-wine5找到simsun并优先使用它。于是，字体渲染就会变成如图这样奇奇怪怪的画风:",[17,425,426],{},[31,427],{"alt":121,"src":428},"https://static.031130.xyz/uploads/2024/08/12/62f3c887040ff.webp",[17,430,431],{},"但是我并不喜欢这样的渲染效果，使用simsun渲染出来的字体总感觉有一种上世纪的风格，况且，在我的1080p小屏下显示并不清晰。",[17,433,434],{},"于是，在尝试了更改注册表、在wine容器的系统路径下直接塞入字体文件等等方式无果后，我选择了逃避——直接让wine程序读取不到simsun。",[17,436,437,438,441,442,445],{},"我的simsun是通过",[317,439,440],{},"ttf-ms-win10-zh_cn","这个包安装上去的，被安装在",[317,443,444],{},"/usr/share/fonts/TTF/","路径下。",[17,447,448,449,452],{},"使用",[317,450,451],{},"pacman -Qo /usr/share/fonts/TTF/","命令查找这个路径下所安装的字体包，我这里的输出如下:",[310,454,457],{"className":455,"code":456,"language":315},[313],"[zhullyb@Archlinux ~]$ pacman -Qo /usr/share/fonts/TTF/\n/usr/share/fonts/TTF/ is owned by ttf-cascadia-code 2102.25-1\n/usr/share/fonts/TTF/ is owned by ttf-fira-code 5.2-1\n/usr/share/fonts/TTF/ is owned by ttf-hack 3.003-3\n/usr/share/fonts/TTF/ is owned by ttf-monaco 6.1-6\n/usr/share/fonts/TTF/ is owned by ttf-ms-win10-zh_cn 2019ltsc-1\n/usr/share/fonts/TTF/ is owned by ttf-opensans 1.101-2\n",[317,458,456],{"__ignoreMap":121},[17,460,461],{},"可以看到，并没有什么对wine程序运行特别重要的字体包，于是我计划通过bwrap命令对运行Tim的wine程序直接屏蔽这个路径。",[17,463,464,465,468,469,472,473],{},"首先安装提供",[317,466,467],{},"bwrap","命令的",[317,470,471],{},"bubblewrap","程序: ",[317,474,475],{},"sudo pacman -S bubblewrap --needed",[17,477,478,479],{},"通过查找deepin-wine-tim的desktop文件发现Tim的启动命令是",[317,480,481],{},"/opt/apps/com.qq.office.deepin/files/run.sh",[17,483,484,485],{},"在终端中输入命令进行测试",[317,486,487],{},"bwrap --dev-bind / / --tmpfs /usr/share/fonts/TTF/ /opt/apps/com.qq.office.deepin/files/run.sh",[17,489,490],{},"出现如下界面，看来方法是可行的。",[17,492,493],{},[31,494],{"alt":121,"src":495},"https://static.031130.xyz/uploads/2024/08/12/62f3c88b119f8.webp",[17,497,498],{},"于是，我们进一步更改deepin-wine-tim的desktop文件，以方便我们不需要每次都在Terminal中执行这么一大长串命令。需要更改的地方如下图红色方框圈出部分",[17,500,501],{},[31,502],{"alt":121,"src":503},"https://static.031130.xyz/uploads/2024/08/12/62f3c88f41790.webp",[17,505,506],{},"我这里附一下图中的命令方便诸位复制粘贴。",[310,508,511],{"className":509,"code":510,"language":315},[313],"[zhullyb@Archlinux ~]$ cat /usr/share/applications/com.qq.office.deepin.desktop \n#!/usr/bin/env xdg-open\n\n[Desktop Entry]\nEncoding=UTF-8\nType=Application\nX-Created-By=Deepin WINE Team\nCategories=chat;Network;\nIcon=com.qq.office.deepin\nExec=bwrap --dev-bind / / --tmpfs /usr/share/fonts/TTF/ /opt/apps/com.qq.office.deepin/files/run.sh\nName=TIM\nName[zh_CN]=TIM\nComment=Tencent TIM Client on Deepin Wine\nStartupWMClass=tim.exe\nMimeType=\n",[317,512,510],{"__ignoreMap":121},{"title":121,"searchDepth":122,"depth":122,"links":514},[],{"title":516,"date":517,"path":518,"tags":519,"body":522},"在系统使用暗色主题时禁用Firefox的夜间模式","2021-04-23","/2021/04/23/disable-firefox-nightmode-when-your-system-is-using-that",[520,521],"Notes","Firefox",{"type":14,"value":523,"toc":574},[524,527,530,537,540,546,553,559,565],[17,525,526],{},"在我使用Archlinux的时候经常会使用一些暗色主题，但是我并不希望我浏览网页时一些自作聪明的网页自动切换成夜间模式。",[17,528,529],{},"这个设置我找了好久，每次在谷歌上检索都会跳出来一堆教我改Firefox主题的、用插件开夜间模式的，却都不是我的目的。",[17,531,532,533,536],{},"我们所需要做的是在浏览器地址栏输入",[317,534,535],{},"about:config","进入高级设置",[17,538,539],{},"搜索并添加一个值",[310,541,544],{"className":542,"code":543,"language":315},[313],"ui.systemUsesDarkTheme\n",[317,545,543],{"__ignoreMap":121},[17,547,548,549,552],{},"将这个选项的",[152,550,551],{},"数值","设置为0即可。",[17,554,555],{},[31,556],{"alt":557,"src":558},"步骤1","https://static.031130.xyz/uploads/2024/08/12/62f36c8f05efd.webp",[17,560,561],{},[31,562],{"alt":563,"src":564},"步骤2","https://static.031130.xyz/uploads/2024/08/12/62f36cce30773.webp",[17,566,567,568,573],{},"2021.12.13更新: Firefox 更新 95.0 以后，如果遇到原方案失效的问题，可以参考 ",[21,569,572],{"href":570,"rel":571},"https://blog.cubercsl.site/post/%E5%9C%A8%E7%B3%BB%E7%BB%9F%E4%BD%BF%E7%94%A8%E6%9A%97%E8%89%B2%E4%B8%BB%E9%A2%98%E6%97%B6%E7%A6%81%E6%AD%A2%E7%94%A8-firefox-%E7%9A%84%E5%A4%9C%E9%97%B4%E6%A8%A1%E5%BC%8F/",[25],"CSL的博客","。",{"title":121,"searchDepth":122,"depth":122,"links":575},[],{"title":577,"date":578,"path":579,"tags":580,"body":581},"记一次在Gitlab部署Jekyll博客时遇到的jekyll-github-metadata报错问题","2021-04-16","/2021/04/16/fuck-jekyll-github-metadata-on-gitlab",[520],{"type":14,"value":582,"toc":653},[583,586,589,594,597,603,612,638,648],[17,584,585],{},"我的博客是挂在GitlabPages上的，在为博客更换主题的时候遇到了一点点小麻烦。",[17,587,588],{},"报错如图：",[17,590,591],{},[31,592],{"alt":121,"src":593},"https://static.031130.xyz/uploads/2024/08/12/62f3caf233039.webp",[17,595,596],{},"当然，我这边也会附上详细的报错日志，以便后人能够通过关键词搜索到。",[310,598,601],{"className":599,"code":600,"language":315},[313],"Configuration file: /builds/zhullyb/test/_config.yml\n            Source: /builds/zhullyb/test\n       Destination: public\n Incremental build: disabled. Enable with --incremental\n      Generating...\n       Jekyll Feed: Generating feed for posts\n   GitHub Metadata: No GitHub API authentication could be found. Some fields may be missing or have incorrect data.\n   GitHub Metadata: Error processing value 'url':\n             ERROR: YOUR SITE COULD NOT BE BUILT:\n                    ------------------------------------\n                    No repo name found. Specify using PAGES_REPO_NWO environment variables, 'repository' in your configuration, or set up an 'origin' git remote pointing to your github.com repository.\nCleaning up file based variables 00:01\nERROR: Job failed: exit code 1\n",[317,602,600],{"__ignoreMap":121},[17,604,605,606,611],{},"经过了一番瞎折腾以后，我依然没有解决问题，而每次push都要等待gitlab的ci构建两三分钟，实在磨不动的我去看了",[21,607,610],{"href":608,"rel":609},"https://github.com/jekyll/github-metadata",[25],"jekyll-github-metadata","的README，结合上文的报错，我一下子就看懂了。",[17,613,614,616,617,620,621,620,624,620,627,630,631,634,635],{},[317,615,610],{},"可以通过github中的信息自动为jekyll提供",[317,618,619],{},"site.github","、",[317,622,623],{},"site.title",[317,625,626],{},"site.description",[317,628,629],{},"site.url","和",[317,632,633],{},"site.baseurl","。而由于我们在用的是Gitlab，所以jekyll-github-metadata就无法获取到这些信息，需要我们手动指定。报错中缺少的就是",[317,636,637],{},"url",[17,639,640,641,644,645,647],{},"于是打开",[317,642,643],{},"_config.yml","，把",[317,646,637],{},"给补上，顺便把别的变量一同加上，如图：",[17,649,650],{},[31,651],{"alt":121,"src":652},"https://static.031130.xyz/uploads/2024/08/12/62f3caf51bdb5.webp",{"title":121,"searchDepth":122,"depth":122,"links":654},[],{"title":656,"date":578,"path":657,"tags":658,"body":659},"我在Archlinux上的常用软件","/2021/04/16/the-software-i-use-on-archlinux",[520,135],{"type":14,"value":660,"toc":702},[661,669,672,675,678,681,684,687,690,693,696,699],[39,662,663,666],{},[17,664,665],{},"最近基本固定了在Archlinux上的常用软件，也供各位参考一下。",[17,667,668],{},"我是KDE用户，所以KDE家的软件会用得比较多。",[17,670,671],{},"浏览器：Firefox，Chromium备用（主要是使用chromium的网页翻译功能，还有就是打开一些对Firefox不太友好的网站）",[17,673,674],{},"下载器：curl，wget，motrix\t根据不同使用场景更换下载器",[17,676,677],{},"终端：konsole",[17,679,680],{},"输入法：fcitx5-chinese-addons",[17,682,683],{},"即时通讯：telegram，deepin-wine-tim，deepin-wine-wechat，electron-qq，wechat-uos，linuxqq",[17,685,686],{},"播放器：vlc",[17,688,689],{},"编辑器：nano，kate，visual-studio-code-bin，typora，wps",[17,691,692],{},"图形类：pinta，drawio-desktop-bin，imagemagick",[17,694,695],{},"文件管理器：dolphin",[17,697,698],{},"文件传输：sftp（命令行里的），filezilla",[17,700,701],{},"系统、网络工具：latte-dock-git，v2raya，htop，gtop",{"title":121,"searchDepth":122,"depth":122,"links":703},[],{"title":705,"date":706,"path":707,"tags":708,"body":709},"使用Chrome的同步api为chromium开启同步功能","2021-04-15","/2021/04/15/login-chromium-with-the-api-of-chrome",[520],{"type":14,"value":710,"toc":927},[711,714,721,731,758,761,766,777,855,869,875,924],[17,712,713],{},"今年两三月的时候，Google限制了chromium的同步api次数，导致各个发行版内置的chromium将不再能继续使用Google的数据同步功能。",[17,715,716,717],{},"今天在翻 archlinuxcn 的群组的时候翻到了一段脚本: ",[21,718,719],{"href":719,"rel":720},"https://gist.github.com/foutrelis/14e339596b89813aa9c37fd1b4e5d9d5",[25],[17,722,723,724,630,727,730],{},"大意就是说，由于Archlinux特殊的chromium启动方式导致我们可以在设置",[317,725,726],{},"oauth2-client-id",[317,728,729],{},"oauth2-client-secret","的情况下通过chrome的同步api继续使用Google的同步服务，说得太多了也没必要，毕竟原文就在那里，看不看取决于你，我这里直接给命令吧。",[310,732,736],{"className":733,"code":734,"language":735,"meta":121,"style":121},"language-shell shiki shiki-themes one-light one-dark-pro","echo \"--oauth2-client-id=77185425430.apps.googleusercontent.com\n--oauth2-client-secret=OTJgUOQcT7lO7GsGZq2G4IlT\" >> ~/.config/chromium-flags.conf\n","shell",[317,737,738,747],{"__ignoreMap":121},[336,739,740,744],{"class":338,"line":339},[336,741,743],{"class":742},"s_Sar","echo",[336,745,746],{"class":371}," \"--oauth2-client-id=77185425430.apps.googleusercontent.com\n",[336,748,749,752,755],{"class":338,"line":122},[336,750,751],{"class":371},"--oauth2-client-secret=OTJgUOQcT7lO7GsGZq2G4IlT\"",[336,753,754],{"class":342}," >> ",[336,756,757],{"class":371},"~/.config/chromium-flags.conf\n",[17,759,760],{},"再次打开chromium,你就会发现你心心念念的同步功能回来了。",[17,762,763],{},[31,764],{"alt":121,"src":765},"https://static.031130.xyz/uploads/2024/08/12/62f3cafe4a5ec.webp",[17,767,768],{},[163,769,770,771,776],{},"然而，并不是所有的发行版都像 Archlinux 这样考虑到 oauth，我们也不可能像 Archlinux 官方那样有这个闲情雅致为没一个 Chromium 去添加这个 ",[21,772,775],{"href":773,"rel":774},"https://github.com/archlinux/svntogit-packages/blob/packages/chromium/trunk/use-oauth2-client-switches-as-default.patch",[25],"patch"," 以后重新编译一遍，大部分人都是直接用发行版源里的。针对这种情况，我们可以直接手写一个脚本",[310,778,782],{"className":779,"code":780,"language":781,"meta":121,"style":121},"language-bash shiki shiki-themes one-light one-dark-pro","#!/usr/bin/bash\nexport GOOGLE_DEFAULT_CLIENT_ID=77185425430.apps.googleusercontent.com\nexport GOOGLE_DEFAULT_CLIENT_SECRET=OTJgUOQcT7lO7GsGZq2G4IlT\nexec /usr/bin/chromium-browser \"$@\"     # 我用的 Fedora 的启动命令是 chromium-browser，别的发行版用户还请自行调整\n","bash",[317,783,784,790,822,834],{"__ignoreMap":121},[336,785,786],{"class":338,"line":339},[336,787,789],{"class":788},"sW2Sy","#!/usr/bin/bash\n",[336,791,792,796,799,803,806,809,812,814,817,819],{"class":338,"line":122},[336,793,795],{"class":794},"sLKXg","export",[336,797,798],{"class":348}," GOOGLE_DEFAULT_CLIENT_ID",[336,800,802],{"class":801},"sknuh","=",[336,804,805],{"class":348},"77185425430",[336,807,808],{"class":342},".",[336,810,811],{"class":348},"apps",[336,813,808],{"class":342},[336,815,816],{"class":348},"googleusercontent",[336,818,808],{"class":342},[336,820,821],{"class":348},"com\n",[336,823,824,826,829,831],{"class":338,"line":125},[336,825,795],{"class":794},[336,827,828],{"class":348}," GOOGLE_DEFAULT_CLIENT_SECRET",[336,830,802],{"class":801},[336,832,833],{"class":348},"OTJgUOQcT7lO7GsGZq2G4IlT\n",[336,835,836,839,842,845,849,852],{"class":338,"line":362},[336,837,838],{"class":742},"exec",[336,840,841],{"class":371}," /usr/bin/chromium-browser",[336,843,844],{"class":371}," \"",[336,846,848],{"class":847},"s8iYz","$@",[336,850,851],{"class":371},"\"",[336,853,854],{"class":788},"     # 我用的 Fedora 的启动命令是 chromium-browser，别的发行版用户还请自行调整\n",[17,856,857,858,861,862,865,866,868],{},"当我满心欢喜地把脚本扔进 ",[317,859,860],{},"$HOME/.local/bin"," 后，我却突然发现 Fedora 官方源中把 chromium 的启动命令写死在了 ",[317,863,864],{},"/usr/bin/chromium-browser","，如果直接去改 ",[317,867,864],{}," 的话，每次更新都会被覆盖。",[17,870,871,874],{},[152,872,873],{},"正确的做法","应该是把 desktop 文件复制一份到桌面，再去改内容。",[310,876,878],{"className":779,"code":877,"language":781,"meta":121,"style":121},"mkdir -p $HOME/.local/share/applications/\ncp /usr/share/applications/chromium-browser.desktop $HOME/.local/share/applications/\nsed -i \"s|/usr/bin/chromium-browser|GOOGLE_DEFAULT_CLIENT_ID=77185425430.apps.googleusercontent.com GOOGLE_DEFAULT_CLIENT_SECRET=OTJgUOQcT7lO7GsGZq2G4IlT /usr/bin/chromium-browser|g\" $HOME/.local/share/applications/chromium-browser.desktop\n",[317,879,880,896,908],{"__ignoreMap":121},[336,881,882,886,890,893],{"class":338,"line":339},[336,883,885],{"class":884},"sAdtL","mkdir",[336,887,889],{"class":888},"sAGMh"," -p",[336,891,892],{"class":348}," $HOME",[336,894,895],{"class":371},"/.local/share/applications/\n",[336,897,898,901,904,906],{"class":338,"line":122},[336,899,900],{"class":884},"cp",[336,902,903],{"class":371}," /usr/share/applications/chromium-browser.desktop",[336,905,892],{"class":348},[336,907,895],{"class":371},[336,909,910,913,916,919,921],{"class":338,"line":125},[336,911,912],{"class":884},"sed",[336,914,915],{"class":888}," -i",[336,917,918],{"class":371}," \"s|/usr/bin/chromium-browser|GOOGLE_DEFAULT_CLIENT_ID=77185425430.apps.googleusercontent.com GOOGLE_DEFAULT_CLIENT_SECRET=OTJgUOQcT7lO7GsGZq2G4IlT /usr/bin/chromium-browser|g\"",[336,920,892],{"class":348},[336,922,923],{"class":371},"/.local/share/applications/chromium-browser.desktop\n",[392,925,926],{},"html pre.shiki code .s_Sar, html code.shiki .s_Sar{--shiki-default:#0184BC;--shiki-dark:#56B6C2}html pre.shiki code .sDhpE, html code.shiki .sDhpE{--shiki-default:#50A14F;--shiki-dark:#98C379}html pre.shiki code .s5ixo, html code.shiki .s5ixo{--shiki-default:#383A42;--shiki-dark:#ABB2BF}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .sW2Sy, html code.shiki .sW2Sy{--shiki-default:#A0A1A7;--shiki-default-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic}html pre.shiki code .sLKXg, html code.shiki .sLKXg{--shiki-default:#A626A4;--shiki-dark:#C678DD}html pre.shiki code .sJa8x, html code.shiki .sJa8x{--shiki-default:#E45649;--shiki-dark:#E06C75}html pre.shiki code .sknuh, html code.shiki .sknuh{--shiki-default:#383A42;--shiki-dark:#56B6C2}html pre.shiki code .s8iYz, html code.shiki .s8iYz{--shiki-default:#383A42;--shiki-default-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic}html pre.shiki code .sAdtL, html code.shiki .sAdtL{--shiki-default:#4078F2;--shiki-dark:#61AFEF}html pre.shiki code .sAGMh, html code.shiki .sAGMh{--shiki-default:#986801;--shiki-dark:#D19A66}",{"title":121,"searchDepth":122,"depth":122,"links":928},[],{"title":930,"date":931,"path":932,"tags":933,"body":934},"Appimage的文件储存在哪里","2021-04-13","/2021/04/13/where-will-appimage-put-its-file",[520],{"type":14,"value":935,"toc":966},[936,939,944,947,952,955],[17,937,938],{},"我不饿：",[39,940,941],{},[17,942,943],{},"有人知道怎么删除appimage的用户数据吗？",[17,945,946],{},"liolok | 李皓奇:",[39,948,949],{},[17,950,951],{},"还是可以在用户的家目录下面乱写的吧",[17,953,954],{},"Lipis Apple:",[39,956,957,960,963],{},[17,958,959],{},"不太讲武德：~/.local/share/(app)",[17,961,962],{},"算讲武德：~/.config/(app)",[17,964,965],{},"不讲武德：~/.(app)",{"title":121,"searchDepth":122,"depth":122,"links":967},[],{"title":969,"date":970,"path":971,"tags":972,"body":973},"使用Motrix接管Firefox的下载","2021-04-11","/2021/04/11/use-motrix-install-of-firefox-to-download",[520],{"type":14,"value":974,"toc":1011},[975,980,983,986,989,998,1001],[39,976,977],{},[17,978,979],{},"本文是一篇个人笔记，不具有太强的技术性，仅仅是为后来者指个方向。",[17,981,982],{},"熟悉我的人都知道，我是一个Firefox的忠实用户，原因有二：",[17,984,985],{},"​\t一/ Firefox国际版同步功能国内可用",[17,987,988],{},"​\t二/ moz://a（Firefox用户应该能在地址栏直接访问这个链接）",[17,990,991,992,997],{},"但是Motrix没有推出适用于Firefox的接管浏览器下载功能的插件，于是只能用",[21,993,996],{"href":994,"rel":995},"https://addons.mozilla.org/firefox/addon/aria2-integration",[25],"aria2的插件","。这个插件内置了AriaNG,对于aria2用户来说会比较实用，但是对于Motrix用户而言其实功能有些多余且不兼容，比如什么自动启动aria2什么的是无法实现的。",[17,999,1000],{},"主要的配置过程我就图解了，退出前记得保存配置。",[17,1002,1003,1007],{},[31,1004],{"alt":1005,"src":1006},"step 1","https://static.031130.xyz/uploads/2024/08/12/62f36d3a79438.webp",[31,1008],{"alt":1009,"src":1010},"step 2","https://static.031130.xyz/uploads/2024/08/12/62f36d3d08a23.webp",{"title":121,"searchDepth":122,"depth":122,"links":1012},[],134,1771553316863]