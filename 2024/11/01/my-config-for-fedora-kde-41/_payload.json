[{"data":1,"prerenderedAt":903},["ShallowReactive",2],{"post-2024-11-01-my-config-for-fedora-kde-41":3,"surround-2024-11-01-my-config-for-fedora-kde-41":892,"randomIndex/2024/11/01/my-config-for-fedora-kde-41":578},{"id":4,"title":5,"body":6,"date":876,"description":37,"extension":877,"meta":878,"navigation":505,"path":879,"rawbody":880,"seo":881,"stem":882,"sticky":883,"tags":884,"__hash__":891},"posts/posts/my-config-for-fedora-kde-41.md","给家里云装上 Fedora 41 KDE 后，我是如何配置的",{"type":7,"value":8,"toc":848},"minimark",[9,16,20,31,72,76,84,87,143,146,211,218,236,239,243,264,268,287,290,306,310,330,334,359,362,378,381,384,400,405,409,425,429,448,451,473,477,484,606,610,632,635,638,644,650,654,660,739,742,746,804,807,810,813,834,838,844],[10,11,12],"blockquote",{},[13,14,15],"p",{},"前两天给自己的 N100 小主机重装成了最近发布的 Fedora 41 ( KDE )，也是花了不少时间把整个系统调成自己熟悉的样子，因此开一篇博客记录一下。以下仅为我个人的 HomeServer 小主机使用，不具有普适性。",[17,18,19],"h2",{"id":19},"换官方源",[13,21,22,23,30],{},"我这里比较适合用上交的源，直接参考",[24,25,29],"a",{"href":26,"rel":27},"https://mirrors.sjtug.sjtu.edu.cn/docs/fedora/linux",[28],"nofollow","他们的文档","。",[32,33,38],"pre",{"className":34,"code":35,"language":36,"meta":37,"style":37},"language-bash shiki shiki-themes github-light github-dark","sudo sed -e 's/^metalink=/#metalink=/g' -e 's|^#baseurl=http://download.example/pub/|baseurl=https://mirror.sjtu.edu.cn/|g' -i.bak /etc/yum.repos.d/{fedora.repo,fedora-updates.repo}\n","bash","",[39,40,41],"code",{"__ignoreMap":37},[42,43,46,50,54,58,61,63,66,69],"span",{"class":44,"line":45},"line",1,[42,47,49],{"class":48},"sScJk","sudo",[42,51,53],{"class":52},"sZZnC"," sed",[42,55,57],{"class":56},"sj4cs"," -e",[42,59,60],{"class":52}," 's/^metalink=/#metalink=/g'",[42,62,57],{"class":56},[42,64,65],{"class":52}," 's|^#baseurl=http://download.example/pub/|baseurl=https://mirror.sjtu.edu.cn/|g'",[42,67,68],{"class":56}," -i.bak",[42,70,71],{"class":52}," /etc/yum.repos.d/{fedora.repo,fedora-updates.repo}\n",[17,73,75],{"id":74},"加-rpmfusion-源","加 rpmfusion 源",[13,77,78,79],{},"参考 ",[24,80,83],{"href":81,"rel":82},"https://help.mirrors.cernet.edu.cn/rpmfusion/?mirror=SJTUG-Siyuan",[28],"help.cernet.edu.cn 提供的文档",[13,85,86],{},"安装源配置文件",[32,88,90],{"className":34,"code":89,"language":36,"meta":37,"style":37},"sudo yum install --nogpgcheck https://mirror.sjtu.edu.cn/rpmfusion/free/fedora/rpmfusion-free-release-$(rpm -E %fedora).noarch.rpm https://mirror.sjtu.edu.cn/rpmfusion/nonfree/fedora/rpmfusion-nonfree-release-$(rpm -E %fedora).noarch.rpm\n",[39,91,92],{"__ignoreMap":37},[42,93,94,96,99,102,105,108,112,115,118,121,124,127,130,132,134,136,138,140],{"class":44,"line":45},[42,95,49],{"class":48},[42,97,98],{"class":52}," yum",[42,100,101],{"class":52}," install",[42,103,104],{"class":56}," --nogpgcheck",[42,106,107],{"class":52}," https://mirror.sjtu.edu.cn/rpmfusion/free/fedora/rpmfusion-free-release-",[42,109,111],{"class":110},"sVt8B","$(",[42,113,114],{"class":48},"rpm",[42,116,117],{"class":56}," -E",[42,119,120],{"class":52}," %fedora",[42,122,123],{"class":110},")",[42,125,126],{"class":52},".noarch.rpm",[42,128,129],{"class":52}," https://mirror.sjtu.edu.cn/rpmfusion/nonfree/fedora/rpmfusion-nonfree-release-",[42,131,111],{"class":110},[42,133,114],{"class":48},[42,135,117],{"class":56},[42,137,120],{"class":52},[42,139,123],{"class":110},[42,141,142],{"class":52},".noarch.rpm\n",[13,144,145],{},"换源",[32,147,149],{"className":34,"code":148,"language":36,"meta":37,"style":37},"sudo sed -e 's!^metalink=!#metalink=!g' \\\n         -e 's!^mirrorlist=!#mirrorlist=!g' \\\n         -e 's!^#baseurl=!baseurl=!g' \\\n         -e 's!https\\?://download1\\.rpmfusion\\.org/!https://mirror.sjtu.edu.cn/rpmfusion/!g' \\\n         -i.bak /etc/yum.repos.d/rpmfusion*.repo\n",[39,150,151,165,176,186,196],{"__ignoreMap":37},[42,152,153,155,157,159,162],{"class":44,"line":45},[42,154,49],{"class":48},[42,156,53],{"class":52},[42,158,57],{"class":56},[42,160,161],{"class":52}," 's!^metalink=!#metalink=!g'",[42,163,164],{"class":56}," \\\n",[42,166,168,171,174],{"class":44,"line":167},2,[42,169,170],{"class":56},"         -e",[42,172,173],{"class":52}," 's!^mirrorlist=!#mirrorlist=!g'",[42,175,164],{"class":56},[42,177,179,181,184],{"class":44,"line":178},3,[42,180,170],{"class":56},[42,182,183],{"class":52}," 's!^#baseurl=!baseurl=!g'",[42,185,164],{"class":56},[42,187,189,191,194],{"class":44,"line":188},4,[42,190,170],{"class":56},[42,192,193],{"class":52}," 's!https\\?://download1\\.rpmfusion\\.org/!https://mirror.sjtu.edu.cn/rpmfusion/!g'",[42,195,164],{"class":56},[42,197,199,202,205,208],{"class":44,"line":198},5,[42,200,201],{"class":56},"         -i.bak",[42,203,204],{"class":52}," /etc/yum.repos.d/rpmfusion",[42,206,207],{"class":56},"*",[42,209,210],{"class":52},".repo\n",[17,212,214,215],{"id":213},"dnf-操作默认使用-yn","dnf 操作默认使用 ",[42,216,217],{},"Y/n",[32,219,221],{"className":34,"code":220,"language":36,"meta":37,"style":37},"sudo sh -c \"echo 'defaultyes=True' >> /etc/dnf/dnf.conf\"\n",[39,222,223],{"__ignoreMap":37},[42,224,225,227,230,233],{"class":44,"line":45},[42,226,49],{"class":48},[42,228,229],{"class":52}," sh",[42,231,232],{"class":56}," -c",[42,234,235],{"class":52}," \"echo 'defaultyes=True' >> /etc/dnf/dnf.conf\"\n",[17,237,238],{"id":238},"移除不想要的软件",[240,241,242],"h3",{"id":242},"libreoffice",[32,244,246],{"className":34,"code":245,"language":36,"meta":37,"style":37},"sudo dnf remove libreoffice*\n",[39,247,248],{"__ignoreMap":37},[42,249,250,252,255,258,261],{"class":44,"line":45},[42,251,49],{"class":48},[42,253,254],{"class":52}," dnf",[42,256,257],{"class":52}," remove",[42,259,260],{"class":52}," libreoffice",[42,262,263],{"class":56},"*\n",[240,265,267],{"id":266},"discover-flatpak","discover, flatpak",[32,269,271],{"className":34,"code":270,"language":36,"meta":37,"style":37},"sudo dnf remove discover flatpak\n",[39,272,273],{"__ignoreMap":37},[42,274,275,277,279,281,284],{"class":44,"line":45},[42,276,49],{"class":48},[42,278,254],{"class":52},[42,280,257],{"class":52},[42,282,283],{"class":52}," discover",[42,285,286],{"class":52}," flatpak\n",[240,288,289],{"id":289},"podman",[32,291,293],{"className":34,"code":292,"language":36,"meta":37,"style":37},"sudo dnf remove podman\n",[39,294,295],{"__ignoreMap":37},[42,296,297,299,301,303],{"class":44,"line":45},[42,298,49],{"class":48},[42,300,254],{"class":52},[42,302,257],{"class":52},[42,304,305],{"class":52}," podman\n",[17,307,309],{"id":308},"关闭-selinux","关闭 selinux",[32,311,313],{"className":34,"code":312,"language":36,"meta":37,"style":37},"sudo sed -i \"s|SELINUX=enforcing|SELINUX=disabled|\" /etc/selinux/config\n",[39,314,315],{"__ignoreMap":37},[42,316,317,319,321,324,327],{"class":44,"line":45},[42,318,49],{"class":48},[42,320,53],{"class":52},[42,322,323],{"class":56}," -i",[42,325,326],{"class":52}," \"s|SELINUX=enforcing|SELINUX=disabled|\"",[42,328,329],{"class":52}," /etc/selinux/config\n",[17,331,333],{"id":332},"vlcmpvffmpeg-补全大部分编码器","vlc，mpv，ffmpeg （补全大部分编码器）",[32,335,337],{"className":34,"code":336,"language":36,"meta":37,"style":37},"sudo dnf install vlc mpv ffmpeg --allowerasing\n",[39,338,339],{"__ignoreMap":37},[42,340,341,343,345,347,350,353,356],{"class":44,"line":45},[42,342,49],{"class":48},[42,344,254],{"class":52},[42,346,101],{"class":52},[42,348,349],{"class":52}," vlc",[42,351,352],{"class":52}," mpv",[42,354,355],{"class":52}," ffmpeg",[42,357,358],{"class":56}," --allowerasing\n",[17,360,361],{"id":361},"docker",[32,363,365],{"className":34,"code":364,"language":36,"meta":37,"style":37},"sudo dnf install docker\n",[39,366,367],{"__ignoreMap":37},[42,368,369,371,373,375],{"class":44,"line":45},[42,370,49],{"class":48},[42,372,254],{"class":52},[42,374,101],{"class":52},[42,376,377],{"class":52}," docker\n",[17,379,380],{"id":380},"rustdesk",[13,382,383],{},"直接去官方的 Github Release 下载安装包",[32,385,387],{"className":34,"code":386,"language":36,"meta":37,"style":37},"sudo dnf install https://github.com/rustdesk/rustdesk/releases/download/1.3.2/rustdesk-1.3.2-0.x86_64.rpm\n",[39,388,389],{"__ignoreMap":37},[42,390,391,393,395,397],{"class":44,"line":45},[42,392,49],{"class":48},[42,394,254],{"class":52},[42,396,101],{"class":52},[42,398,399],{"class":52}," https://github.com/rustdesk/rustdesk/releases/download/1.3.2/rustdesk-1.3.2-0.x86_64.rpm\n",[10,401,402],{},[13,403,404],{},"尽管 Rustdesk 支持被控端使用 wayland，但因为权限原因需要被控端手动选择被控区域，不适合无人值守的环境，因此还是要换 x11。",[240,406,408],{"id":407},"安装-x11-支持","安装 x11 支持",[32,410,412],{"className":34,"code":411,"language":36,"meta":37,"style":37},"sudo dnf install plasma-workspace-x11\n",[39,413,414],{"__ignoreMap":37},[42,415,416,418,420,422],{"class":44,"line":45},[42,417,49],{"class":48},[42,419,254],{"class":52},[42,421,101],{"class":52},[42,423,424],{"class":52}," plasma-workspace-x11\n",[240,426,428],{"id":427},"使用-x11-启动-sddm","使用 x11 启动 sddm",[32,430,432],{"className":34,"code":431,"language":36,"meta":37,"style":37},"sudo sed -i \"s|^#DisplayServer=wayland|DisplayServer=x11|\" /etc/sddm.conf\n",[39,433,434],{"__ignoreMap":37},[42,435,436,438,440,442,445],{"class":44,"line":45},[42,437,49],{"class":48},[42,439,53],{"class":52},[42,441,323],{"class":56},[42,443,444],{"class":52}," \"s|^#DisplayServer=wayland|DisplayServer=x11|\"",[42,446,447],{"class":52}," /etc/sddm.conf\n",[17,449,450],{"id":450},"开发相关",[32,452,454],{"className":34,"code":453,"language":36,"meta":37,"style":37},"sudo dnf install gcc g++ python3-devel\n",[39,455,456],{"__ignoreMap":37},[42,457,458,460,462,464,467,470],{"class":44,"line":45},[42,459,49],{"class":48},[42,461,254],{"class":52},[42,463,101],{"class":52},[42,465,466],{"class":52}," gcc",[42,468,469],{"class":52}," g++",[42,471,472],{"class":52}," python3-devel\n",[17,474,476],{"id":475},"解除-systemd-resolved-53-端口占用","解除 systemd-resolved 53 端口占用",[13,478,479,480,483],{},"编辑 ",[39,481,482],{},"/usr/lib/systemd/resolved.conf","，取消注释，yes 改 no",[32,485,489],{"className":486,"code":487,"language":488,"meta":37,"style":37},"language-diff shiki shiki-themes github-light github-dark","[Resolve]\n# Some examples of DNS servers which may be used for DNS= and FallbackDNS=:\n\n//...\n\n#DNS=\n#FallbackDNS=\n#Domains=\n#DNSSEC=no\n#DNSOverTLS=no\n#MulticastDNS=yes\n#LLMNR=yes\n#Cache=yes\n#CacheFromLocalhost=no\n-#DNSStubListener=yes\n+DNSStubListener=no\n#DNSStubListenerExtra=\n#ReadEtcHosts=yes\n#ResolveUnicastSingleLabel=no\n#StaleRetentionSec=0\n","diff",[39,490,491,496,501,507,512,516,522,528,534,540,546,552,558,564,570,576,582,588,594,600],{"__ignoreMap":37},[42,492,493],{"class":44,"line":45},[42,494,495],{},"[Resolve]\n",[42,497,498],{"class":44,"line":167},[42,499,500],{},"# Some examples of DNS servers which may be used for DNS= and FallbackDNS=:\n",[42,502,503],{"class":44,"line":178},[42,504,506],{"emptyLinePlaceholder":505},true,"\n",[42,508,509],{"class":44,"line":188},[42,510,511],{},"//...\n",[42,513,514],{"class":44,"line":198},[42,515,506],{"emptyLinePlaceholder":505},[42,517,519],{"class":44,"line":518},6,[42,520,521],{},"#DNS=\n",[42,523,525],{"class":44,"line":524},7,[42,526,527],{},"#FallbackDNS=\n",[42,529,531],{"class":44,"line":530},8,[42,532,533],{},"#Domains=\n",[42,535,537],{"class":44,"line":536},9,[42,538,539],{},"#DNSSEC=no\n",[42,541,543],{"class":44,"line":542},10,[42,544,545],{},"#DNSOverTLS=no\n",[42,547,549],{"class":44,"line":548},11,[42,550,551],{},"#MulticastDNS=yes\n",[42,553,555],{"class":44,"line":554},12,[42,556,557],{},"#LLMNR=yes\n",[42,559,561],{"class":44,"line":560},13,[42,562,563],{},"#Cache=yes\n",[42,565,567],{"class":44,"line":566},14,[42,568,569],{},"#CacheFromLocalhost=no\n",[42,571,573],{"class":44,"line":572},15,[42,574,575],{},"-#DNSStubListener=yes\n",[42,577,579],{"class":44,"line":578},16,[42,580,581],{},"+DNSStubListener=no\n",[42,583,585],{"class":44,"line":584},17,[42,586,587],{},"#DNSStubListenerExtra=\n",[42,589,591],{"class":44,"line":590},18,[42,592,593],{},"#ReadEtcHosts=yes\n",[42,595,597],{"class":44,"line":596},19,[42,598,599],{},"#ResolveUnicastSingleLabel=no\n",[42,601,603],{"class":44,"line":602},20,[42,604,605],{},"#StaleRetentionSec=0\n",[17,607,609],{"id":608},"配置-fcitx5","配置 fcitx5",[32,611,613],{"className":34,"code":612,"language":36,"meta":37,"style":37},"sudo dnf install fcitx5-chinese-addons kcm-fcitx5 fcitx5-autostart\n",[39,614,615],{"__ignoreMap":37},[42,616,617,619,621,623,626,629],{"class":44,"line":45},[42,618,49],{"class":48},[42,620,254],{"class":52},[42,622,101],{"class":52},[42,624,625],{"class":52}," fcitx5-chinese-addons",[42,627,628],{"class":52}," kcm-fcitx5",[42,630,631],{"class":52}," fcitx5-autostart\n",[13,633,634],{},"在 设置 - 输入法 中添加拼音",[240,636,637],{"id":637},"安装词库",[13,639,640],{},[24,641,642],{"href":642,"rel":643},"https://github.com/felixonmars/fcitx5-pinyin-zhwiki",[28],[13,645,646],{},[24,647,648],{"href":648,"rel":649},"https://github.com/outloudvi/mw2fcitx",[28],[240,651,653],{"id":652},"在-wayland-下使用","在 wayland 下使用",[13,655,78,656],{},[24,657,659],{"href":658},"/2022/07/03/fcitx5-blinking-on-tg-under-wayland-kde/","处理 fcitx5 的文字候选框在 tg 客户端上闪烁的问题",[32,661,663],{"className":486,"code":662,"language":488,"meta":37,"style":37},"if [ ! \"$XDG_SESSION_TYPE\" = \"tty\" ]   # if this is a gui session (not tty)\nthen\n    # let's use fcitx instead of fcitx5 to make flatpak happy\n    # this may break behavior for users who have installed both\n    # fcitx and fcitx5, let then change the file on their own\n\n    export INPUT_METHOD=fcitx\n    export GTK_IM_MODULE=fcitx\n    export QT_IM_MODULE=fcitx\n    export XMODIFIERS=@im=fcitx\nfi\n+if [ \"$XDG_SESSION_TYPE\" = \"wayland\" ]\n+then\n+        unset QT_IM_MODULE\n+fi\n",[39,664,665,670,675,680,685,690,694,699,704,709,714,719,724,729,734],{"__ignoreMap":37},[42,666,667],{"class":44,"line":45},[42,668,669],{},"if [ ! \"$XDG_SESSION_TYPE\" = \"tty\" ]   # if this is a gui session (not tty)\n",[42,671,672],{"class":44,"line":167},[42,673,674],{},"then\n",[42,676,677],{"class":44,"line":178},[42,678,679],{},"    # let's use fcitx instead of fcitx5 to make flatpak happy\n",[42,681,682],{"class":44,"line":188},[42,683,684],{},"    # this may break behavior for users who have installed both\n",[42,686,687],{"class":44,"line":198},[42,688,689],{},"    # fcitx and fcitx5, let then change the file on their own\n",[42,691,692],{"class":44,"line":518},[42,693,506],{"emptyLinePlaceholder":505},[42,695,696],{"class":44,"line":524},[42,697,698],{},"    export INPUT_METHOD=fcitx\n",[42,700,701],{"class":44,"line":530},[42,702,703],{},"    export GTK_IM_MODULE=fcitx\n",[42,705,706],{"class":44,"line":536},[42,707,708],{},"    export QT_IM_MODULE=fcitx\n",[42,710,711],{"class":44,"line":542},[42,712,713],{},"    export XMODIFIERS=@im=fcitx\n",[42,715,716],{"class":44,"line":548},[42,717,718],{},"fi\n",[42,720,721],{"class":44,"line":554},[42,722,723],{},"+if [ \"$XDG_SESSION_TYPE\" = \"wayland\" ]\n",[42,725,726],{"class":44,"line":560},[42,727,728],{},"+then\n",[42,730,731],{"class":44,"line":566},[42,732,733],{},"+        unset QT_IM_MODULE\n",[42,735,736],{"class":44,"line":572},[42,737,738],{},"+fi\n",[13,740,741],{},"然后仍然要去 设置 - 键盘 - 虚拟键盘 中选中 fcitx5",[17,743,745],{"id":744},"安装-vscode","安装 vscode",[32,747,749],{"className":34,"code":748,"language":36,"meta":37,"style":37},"sudo rpm --import https://packages.microsoft.com/keys/microsoft.asc\necho -e \"[code]\\nname=Visual Studio Code\\nbaseurl=https://packages.microsoft.com/yumrepos/vscode\\nenabled=1\\ngpgcheck=1\\ngpgkey=https://packages.microsoft.com/keys/microsoft.asc\" | sudo tee /etc/yum.repos.d/vscode.repo > /dev/null\nsudo dnf install code\n",[39,750,751,764,793],{"__ignoreMap":37},[42,752,753,755,758,761],{"class":44,"line":45},[42,754,49],{"class":48},[42,756,757],{"class":52}," rpm",[42,759,760],{"class":56}," --import",[42,762,763],{"class":52}," https://packages.microsoft.com/keys/microsoft.asc\n",[42,765,766,769,771,774,778,781,784,787,790],{"class":44,"line":167},[42,767,768],{"class":56},"echo",[42,770,57],{"class":56},[42,772,773],{"class":52}," \"[code]\\nname=Visual Studio Code\\nbaseurl=https://packages.microsoft.com/yumrepos/vscode\\nenabled=1\\ngpgcheck=1\\ngpgkey=https://packages.microsoft.com/keys/microsoft.asc\"",[42,775,777],{"class":776},"szBVR"," |",[42,779,780],{"class":48}," sudo",[42,782,783],{"class":52}," tee",[42,785,786],{"class":52}," /etc/yum.repos.d/vscode.repo",[42,788,789],{"class":776}," >",[42,791,792],{"class":52}," /dev/null\n",[42,794,795,797,799,801],{"class":44,"line":178},[42,796,49],{"class":48},[42,798,254],{"class":52},[42,800,101],{"class":52},[42,802,803],{"class":52}," code\n",[17,805,806],{"id":806},"网络优化工具",[13,808,809],{},"略",[17,811,812],{"id":812},"禁用防火墙",[32,814,816],{"className":34,"code":815,"language":36,"meta":37,"style":37},"sudo systemctl disable firewalld --now\n",[39,817,818],{"__ignoreMap":37},[42,819,820,822,825,828,831],{"class":44,"line":45},[42,821,49],{"class":48},[42,823,824],{"class":52}," systemctl",[42,826,827],{"class":52}," disable",[42,829,830],{"class":52}," firewalld",[42,832,833],{"class":56}," --now\n",[17,835,837],{"id":836},"rpm-构建","RPM 构建",[13,839,78,840],{},[24,841,843],{"href":842},"/2024/05/03/open-rpmbuild-in-the-way-of-archlinux-makepkg/","以 Archlinux 中 makepkg 的方式打开 rpmbuild",[845,846,847],"style",{},"html pre.shiki code .sScJk, html code.shiki .sScJk{--shiki-default:#6F42C1;--shiki-dark:#B392F0}html pre.shiki code .sZZnC, html code.shiki .sZZnC{--shiki-default:#032F62;--shiki-dark:#9ECBFF}html pre.shiki code .sj4cs, html code.shiki .sj4cs{--shiki-default:#005CC5;--shiki-dark:#79B8FF}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .sVt8B, html code.shiki .sVt8B{--shiki-default:#24292E;--shiki-dark:#E1E4E8}html pre.shiki code .szBVR, html code.shiki .szBVR{--shiki-default:#D73A49;--shiki-dark:#F97583}",{"title":37,"searchDepth":167,"depth":167,"links":849},[850,851,852,854,859,860,861,862,866,867,868,872,873,874,875],{"id":19,"depth":167,"text":19},{"id":74,"depth":167,"text":75},{"id":213,"depth":167,"text":853},"dnf 操作默认使用 Y/n",{"id":238,"depth":167,"text":238,"children":855},[856,857,858],{"id":242,"depth":178,"text":242},{"id":266,"depth":178,"text":267},{"id":289,"depth":178,"text":289},{"id":308,"depth":167,"text":309},{"id":332,"depth":167,"text":333},{"id":361,"depth":167,"text":361},{"id":380,"depth":167,"text":380,"children":863},[864,865],{"id":407,"depth":178,"text":408},{"id":427,"depth":178,"text":428},{"id":450,"depth":167,"text":450},{"id":475,"depth":167,"text":476},{"id":608,"depth":167,"text":609,"children":869},[870,871],{"id":637,"depth":178,"text":637},{"id":652,"depth":178,"text":653},{"id":744,"depth":167,"text":745},{"id":806,"depth":167,"text":806},{"id":812,"depth":167,"text":812},{"id":836,"depth":167,"text":837},"2024-11-01 23:35:08","md",{},"/2024/11/01/my-config-for-fedora-kde-41","---\ntitle: 给家里云装上 Fedora 41 KDE 后，我是如何配置的\ndate: 2024-11-01 23:35:08\nsticky:\ntags:\n- Linux\n- Fedora\n- KDE\n- HomeServer\n- Rustdesk\n- 笔记\n---\n\n> 前两天给自己的 N100 小主机重装成了最近发布的 Fedora 41 ( KDE )，也是花了不少时间把整个系统调成自己熟悉的样子，因此开一篇博客记录一下。以下仅为我个人的 HomeServer 小主机使用，不具有普适性。\n\n## 换官方源\n\n我这里比较适合用上交的源，直接参考[他们的文档](https://mirrors.sjtug.sjtu.edu.cn/docs/fedora/linux)。\n\n```bash\nsudo sed -e 's/^metalink=/#metalink=/g' -e 's|^#baseurl=http://download.example/pub/|baseurl=https://mirror.sjtu.edu.cn/|g' -i.bak /etc/yum.repos.d/{fedora.repo,fedora-updates.repo}\n```\n\n## 加 rpmfusion 源\n\n参考 [help.cernet.edu.cn 提供的文档](https://help.mirrors.cernet.edu.cn/rpmfusion/?mirror=SJTUG-Siyuan)\n\n安装源配置文件\n\n```bash\nsudo yum install --nogpgcheck https://mirror.sjtu.edu.cn/rpmfusion/free/fedora/rpmfusion-free-release-$(rpm -E %fedora).noarch.rpm https://mirror.sjtu.edu.cn/rpmfusion/nonfree/fedora/rpmfusion-nonfree-release-$(rpm -E %fedora).noarch.rpm\n```\n\n换源\n\n```bash\nsudo sed -e 's!^metalink=!#metalink=!g' \\\n         -e 's!^mirrorlist=!#mirrorlist=!g' \\\n         -e 's!^#baseurl=!baseurl=!g' \\\n         -e 's!https\\?://download1\\.rpmfusion\\.org/!https://mirror.sjtu.edu.cn/rpmfusion/!g' \\\n         -i.bak /etc/yum.repos.d/rpmfusion*.repo\n```\n\n## dnf 操作默认使用 [Y/n]\n\n```bash\nsudo sh -c \"echo 'defaultyes=True' >> /etc/dnf/dnf.conf\"\n```\n\n## 移除不想要的软件\n\n### libreoffice\n\n```bash\nsudo dnf remove libreoffice*\n```\n\n### discover, flatpak\n\n```bash\nsudo dnf remove discover flatpak\n```\n\n### podman\n\n```bash\nsudo dnf remove podman\n```\n\n## 关闭 selinux\n\n```bash\nsudo sed -i \"s|SELINUX=enforcing|SELINUX=disabled|\" /etc/selinux/config\n```\n\n## vlc，mpv，ffmpeg （补全大部分编码器）\n\n```bash\nsudo dnf install vlc mpv ffmpeg --allowerasing\n```\n\n## docker\n\n```bash\nsudo dnf install docker\n```\n\n## rustdesk\n\n直接去官方的 Github Release 下载安装包\n\n```bash\nsudo dnf install https://github.com/rustdesk/rustdesk/releases/download/1.3.2/rustdesk-1.3.2-0.x86_64.rpm\n```\n\n> 尽管 Rustdesk 支持被控端使用 wayland，但因为权限原因需要被控端手动选择被控区域，不适合无人值守的环境，因此还是要换 x11。\n\n### 安装 x11 支持\n\n```bash\nsudo dnf install plasma-workspace-x11\n```\n\n### 使用 x11 启动 sddm\n\n```bash\nsudo sed -i \"s|^#DisplayServer=wayland|DisplayServer=x11|\" /etc/sddm.conf\n```\n\n## 开发相关\n\n```bash\nsudo dnf install gcc g++ python3-devel\n```\n\n## 解除 systemd-resolved 53 端口占用\n\n编辑 `/usr/lib/systemd/resolved.conf`，取消注释，yes 改 no\n\n```diff\n[Resolve]\n# Some examples of DNS servers which may be used for DNS= and FallbackDNS=:\n\n//...\n\n#DNS=\n#FallbackDNS=\n#Domains=\n#DNSSEC=no\n#DNSOverTLS=no\n#MulticastDNS=yes\n#LLMNR=yes\n#Cache=yes\n#CacheFromLocalhost=no\n-#DNSStubListener=yes\n+DNSStubListener=no\n#DNSStubListenerExtra=\n#ReadEtcHosts=yes\n#ResolveUnicastSingleLabel=no\n#StaleRetentionSec=0\n```\n\n## 配置 fcitx5\n\n```bash\nsudo dnf install fcitx5-chinese-addons kcm-fcitx5 fcitx5-autostart\n```\n\n在 设置 - 输入法 中添加拼音\n\n### 安装词库\n\nhttps://github.com/felixonmars/fcitx5-pinyin-zhwiki\n\nhttps://github.com/outloudvi/mw2fcitx\n\n### 在 wayland 下使用\n\n参考 [处理 fcitx5 的文字候选框在 tg 客户端上闪烁的问题](/2022/07/03/fcitx5-blinking-on-tg-under-wayland-kde/)\n\n```diff\nif [ ! \"$XDG_SESSION_TYPE\" = \"tty\" ]   # if this is a gui session (not tty)\nthen\n    # let's use fcitx instead of fcitx5 to make flatpak happy\n    # this may break behavior for users who have installed both\n    # fcitx and fcitx5, let then change the file on their own\n\n    export INPUT_METHOD=fcitx\n    export GTK_IM_MODULE=fcitx\n    export QT_IM_MODULE=fcitx\n    export XMODIFIERS=@im=fcitx\nfi\n+if [ \"$XDG_SESSION_TYPE\" = \"wayland\" ]\n+then\n+        unset QT_IM_MODULE\n+fi\n```\n\n然后仍然要去 设置 - 键盘 - 虚拟键盘 中选中 fcitx5\n\n## 安装 vscode\n\n```bash\nsudo rpm --import https://packages.microsoft.com/keys/microsoft.asc\necho -e \"[code]\\nname=Visual Studio Code\\nbaseurl=https://packages.microsoft.com/yumrepos/vscode\\nenabled=1\\ngpgcheck=1\\ngpgkey=https://packages.microsoft.com/keys/microsoft.asc\" | sudo tee /etc/yum.repos.d/vscode.repo > /dev/null\nsudo dnf install code\n```\n\n## 网络优化工具\n\n略\n\n## 禁用防火墙\n\n```bash\nsudo systemctl disable firewalld --now\n```\n\n## RPM 构建\n\n参考 [以 Archlinux 中 makepkg 的方式打开 rpmbuild](/2024/05/03/open-rpmbuild-in-the-way-of-archlinux-makepkg/)",{"title":5,"description":37},"posts/my-config-for-fedora-kde-41",false,[885,886,887,888,889,890],"Linux","Fedora","KDE","HomeServer","Rustdesk","笔记","oQ5D_CGFUOxva00PG8z_cJX8BbAEI8E1k8CACkZE79U",[893,898],{"title":894,"path":895,"stem":896,"date":897,"children":-1},"将博客从 waline v2 更新到 waline v3","/2024/11/15/upgrade-waline-from-v2-to-v3","posts/upgrade-waline-from-v2-to-v3","2024-11-15 23:49:43",{"title":899,"path":900,"stem":901,"date":902,"children":-1},"为 Hexo 添加 follow 认证","/2024/10/23/follow-cert-for-hexo-feed","posts/follow-cert-for-hexo-feed","2024-10-23 23:11:32",1761696666129]