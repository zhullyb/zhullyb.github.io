[{"data":1,"prerenderedAt":903},["ShallowReactive",2],{"post-2024-11-01-my-config-for-fedora-kde-41":3,"surround-2024-11-01-my-config-for-fedora-kde-41":892,"randomIndex/2024/11/01/my-config-for-fedora-kde-41/":199},{"id":4,"title":5,"body":6,"date":876,"description":37,"extension":877,"meta":878,"navigation":507,"path":879,"rawbody":880,"seo":881,"stem":882,"sticky":883,"tags":884,"__hash__":891},"posts/posts/my-config-for-fedora-kde-41.md","给家里云装上 Fedora 41 KDE 后，我是如何配置的",{"type":7,"value":8,"toc":848},"minimark",[9,16,20,31,72,76,84,87,143,146,213,220,238,241,245,266,270,289,292,308,312,332,336,361,364,380,383,386,402,407,411,427,431,450,453,475,479,486,608,612,634,637,640,646,652,656,662,741,744,748,804,807,810,813,834,838,844],[10,11,12],"blockquote",{},[13,14,15],"p",{},"前两天给自己的 N100 小主机重装成了最近发布的 Fedora 41 ( KDE )，也是花了不少时间把整个系统调成自己熟悉的样子，因此开一篇博客记录一下。以下仅为我个人的 HomeServer 小主机使用，不具有普适性。",[17,18,19],"h2",{"id":19},"换官方源",[13,21,22,23,30],{},"我这里比较适合用上交的源，直接参考",[24,25,29],"a",{"href":26,"rel":27},"https://mirrors.sjtug.sjtu.edu.cn/docs/fedora/linux",[28],"nofollow","他们的文档","。",[32,33,38],"pre",{"className":34,"code":35,"language":36,"meta":37,"style":37},"language-bash shiki shiki-themes one-light one-dark-pro","sudo sed -e 's/^metalink=/#metalink=/g' -e 's|^#baseurl=http://download.example/pub/|baseurl=https://mirror.sjtu.edu.cn/|g' -i.bak /etc/yum.repos.d/{fedora.repo,fedora-updates.repo}\n","bash","",[39,40,41],"code",{"__ignoreMap":37},[42,43,46,50,54,58,61,63,66,69],"span",{"class":44,"line":45},"line",1,[42,47,49],{"class":48},"sAdtL","sudo",[42,51,53],{"class":52},"sDhpE"," sed",[42,55,57],{"class":56},"sAGMh"," -e",[42,59,60],{"class":52}," 's/^metalink=/#metalink=/g'",[42,62,57],{"class":56},[42,64,65],{"class":52}," 's|^#baseurl=http://download.example/pub/|baseurl=https://mirror.sjtu.edu.cn/|g'",[42,67,68],{"class":56}," -i.bak",[42,70,71],{"class":52}," /etc/yum.repos.d/{fedora.repo,fedora-updates.repo}\n",[17,73,75],{"id":74},"加-rpmfusion-源","加 rpmfusion 源",[13,77,78,79],{},"参考 ",[24,80,83],{"href":81,"rel":82},"https://help.mirrors.cernet.edu.cn/rpmfusion/?mirror=SJTUG-Siyuan",[28],"help.cernet.edu.cn 提供的文档",[13,85,86],{},"安装源配置文件",[32,88,90],{"className":34,"code":89,"language":36,"meta":37,"style":37},"sudo yum install --nogpgcheck https://mirror.sjtu.edu.cn/rpmfusion/free/fedora/rpmfusion-free-release-$(rpm -E %fedora).noarch.rpm https://mirror.sjtu.edu.cn/rpmfusion/nonfree/fedora/rpmfusion-nonfree-release-$(rpm -E %fedora).noarch.rpm\n",[39,91,92],{"__ignoreMap":37},[42,93,94,96,99,102,105,108,112,115,118,121,124,127,130,132,134,136,138,140],{"class":44,"line":45},[42,95,49],{"class":48},[42,97,98],{"class":52}," yum",[42,100,101],{"class":52}," install",[42,103,104],{"class":56}," --nogpgcheck",[42,106,107],{"class":52}," https://mirror.sjtu.edu.cn/rpmfusion/free/fedora/rpmfusion-free-release-",[42,109,111],{"class":110},"s5ixo","$(",[42,113,114],{"class":48},"rpm",[42,116,117],{"class":56}," -E",[42,119,120],{"class":52}," %fedora",[42,122,123],{"class":110},")",[42,125,126],{"class":52},".noarch.rpm",[42,128,129],{"class":52}," https://mirror.sjtu.edu.cn/rpmfusion/nonfree/fedora/rpmfusion-nonfree-release-",[42,131,111],{"class":110},[42,133,114],{"class":48},[42,135,117],{"class":56},[42,137,120],{"class":52},[42,139,123],{"class":110},[42,141,142],{"class":52},".noarch.rpm\n",[13,144,145],{},"换源",[32,147,149],{"className":34,"code":148,"language":36,"meta":37,"style":37},"sudo sed -e 's!^metalink=!#metalink=!g' \\\n         -e 's!^mirrorlist=!#mirrorlist=!g' \\\n         -e 's!^#baseurl=!baseurl=!g' \\\n         -e 's!https\\?://download1\\.rpmfusion\\.org/!https://mirror.sjtu.edu.cn/rpmfusion/!g' \\\n         -i.bak /etc/yum.repos.d/rpmfusion*.repo\n",[39,150,151,166,177,187,197],{"__ignoreMap":37},[42,152,153,155,157,159,162],{"class":44,"line":45},[42,154,49],{"class":48},[42,156,53],{"class":52},[42,158,57],{"class":56},[42,160,161],{"class":52}," 's!^metalink=!#metalink=!g'",[42,163,165],{"class":164},"s_Sar"," \\\n",[42,167,169,172,175],{"class":44,"line":168},2,[42,170,171],{"class":56},"         -e",[42,173,174],{"class":52}," 's!^mirrorlist=!#mirrorlist=!g'",[42,176,165],{"class":164},[42,178,180,182,185],{"class":44,"line":179},3,[42,181,171],{"class":56},[42,183,184],{"class":52}," 's!^#baseurl=!baseurl=!g'",[42,186,165],{"class":164},[42,188,190,192,195],{"class":44,"line":189},4,[42,191,171],{"class":56},[42,193,194],{"class":52}," 's!https\\?://download1\\.rpmfusion\\.org/!https://mirror.sjtu.edu.cn/rpmfusion/!g'",[42,196,165],{"class":164},[42,198,200,203,206,210],{"class":44,"line":199},5,[42,201,202],{"class":56},"         -i.bak",[42,204,205],{"class":52}," /etc/yum.repos.d/rpmfusion",[42,207,209],{"class":208},"s2QsP","*",[42,211,212],{"class":52},".repo\n",[17,214,216,217],{"id":215},"dnf-操作默认使用-yn","dnf 操作默认使用 ",[42,218,219],{},"Y/n",[32,221,223],{"className":34,"code":222,"language":36,"meta":37,"style":37},"sudo sh -c \"echo 'defaultyes=True' >> /etc/dnf/dnf.conf\"\n",[39,224,225],{"__ignoreMap":37},[42,226,227,229,232,235],{"class":44,"line":45},[42,228,49],{"class":48},[42,230,231],{"class":52}," sh",[42,233,234],{"class":56}," -c",[42,236,237],{"class":52}," \"echo 'defaultyes=True' >> /etc/dnf/dnf.conf\"\n",[17,239,240],{"id":240},"移除不想要的软件",[242,243,244],"h3",{"id":244},"libreoffice",[32,246,248],{"className":34,"code":247,"language":36,"meta":37,"style":37},"sudo dnf remove libreoffice*\n",[39,249,250],{"__ignoreMap":37},[42,251,252,254,257,260,263],{"class":44,"line":45},[42,253,49],{"class":48},[42,255,256],{"class":52}," dnf",[42,258,259],{"class":52}," remove",[42,261,262],{"class":52}," libreoffice",[42,264,265],{"class":208},"*\n",[242,267,269],{"id":268},"discover-flatpak","discover, flatpak",[32,271,273],{"className":34,"code":272,"language":36,"meta":37,"style":37},"sudo dnf remove discover flatpak\n",[39,274,275],{"__ignoreMap":37},[42,276,277,279,281,283,286],{"class":44,"line":45},[42,278,49],{"class":48},[42,280,256],{"class":52},[42,282,259],{"class":52},[42,284,285],{"class":52}," discover",[42,287,288],{"class":52}," flatpak\n",[242,290,291],{"id":291},"podman",[32,293,295],{"className":34,"code":294,"language":36,"meta":37,"style":37},"sudo dnf remove podman\n",[39,296,297],{"__ignoreMap":37},[42,298,299,301,303,305],{"class":44,"line":45},[42,300,49],{"class":48},[42,302,256],{"class":52},[42,304,259],{"class":52},[42,306,307],{"class":52}," podman\n",[17,309,311],{"id":310},"关闭-selinux","关闭 selinux",[32,313,315],{"className":34,"code":314,"language":36,"meta":37,"style":37},"sudo sed -i \"s|SELINUX=enforcing|SELINUX=disabled|\" /etc/selinux/config\n",[39,316,317],{"__ignoreMap":37},[42,318,319,321,323,326,329],{"class":44,"line":45},[42,320,49],{"class":48},[42,322,53],{"class":52},[42,324,325],{"class":56}," -i",[42,327,328],{"class":52}," \"s|SELINUX=enforcing|SELINUX=disabled|\"",[42,330,331],{"class":52}," /etc/selinux/config\n",[17,333,335],{"id":334},"vlcmpvffmpeg-补全大部分编码器","vlc，mpv，ffmpeg （补全大部分编码器）",[32,337,339],{"className":34,"code":338,"language":36,"meta":37,"style":37},"sudo dnf install vlc mpv ffmpeg --allowerasing\n",[39,340,341],{"__ignoreMap":37},[42,342,343,345,347,349,352,355,358],{"class":44,"line":45},[42,344,49],{"class":48},[42,346,256],{"class":52},[42,348,101],{"class":52},[42,350,351],{"class":52}," vlc",[42,353,354],{"class":52}," mpv",[42,356,357],{"class":52}," ffmpeg",[42,359,360],{"class":56}," --allowerasing\n",[17,362,363],{"id":363},"docker",[32,365,367],{"className":34,"code":366,"language":36,"meta":37,"style":37},"sudo dnf install docker\n",[39,368,369],{"__ignoreMap":37},[42,370,371,373,375,377],{"class":44,"line":45},[42,372,49],{"class":48},[42,374,256],{"class":52},[42,376,101],{"class":52},[42,378,379],{"class":52}," docker\n",[17,381,382],{"id":382},"rustdesk",[13,384,385],{},"直接去官方的 Github Release 下载安装包",[32,387,389],{"className":34,"code":388,"language":36,"meta":37,"style":37},"sudo dnf install https://github.com/rustdesk/rustdesk/releases/download/1.3.2/rustdesk-1.3.2-0.x86_64.rpm\n",[39,390,391],{"__ignoreMap":37},[42,392,393,395,397,399],{"class":44,"line":45},[42,394,49],{"class":48},[42,396,256],{"class":52},[42,398,101],{"class":52},[42,400,401],{"class":52}," https://github.com/rustdesk/rustdesk/releases/download/1.3.2/rustdesk-1.3.2-0.x86_64.rpm\n",[10,403,404],{},[13,405,406],{},"尽管 Rustdesk 支持被控端使用 wayland，但因为权限原因需要被控端手动选择被控区域，不适合无人值守的环境，因此还是要换 x11。",[242,408,410],{"id":409},"安装-x11-支持","安装 x11 支持",[32,412,414],{"className":34,"code":413,"language":36,"meta":37,"style":37},"sudo dnf install plasma-workspace-x11\n",[39,415,416],{"__ignoreMap":37},[42,417,418,420,422,424],{"class":44,"line":45},[42,419,49],{"class":48},[42,421,256],{"class":52},[42,423,101],{"class":52},[42,425,426],{"class":52}," plasma-workspace-x11\n",[242,428,430],{"id":429},"使用-x11-启动-sddm","使用 x11 启动 sddm",[32,432,434],{"className":34,"code":433,"language":36,"meta":37,"style":37},"sudo sed -i \"s|^#DisplayServer=wayland|DisplayServer=x11|\" /etc/sddm.conf\n",[39,435,436],{"__ignoreMap":37},[42,437,438,440,442,444,447],{"class":44,"line":45},[42,439,49],{"class":48},[42,441,53],{"class":52},[42,443,325],{"class":56},[42,445,446],{"class":52}," \"s|^#DisplayServer=wayland|DisplayServer=x11|\"",[42,448,449],{"class":52}," /etc/sddm.conf\n",[17,451,452],{"id":452},"开发相关",[32,454,456],{"className":34,"code":455,"language":36,"meta":37,"style":37},"sudo dnf install gcc g++ python3-devel\n",[39,457,458],{"__ignoreMap":37},[42,459,460,462,464,466,469,472],{"class":44,"line":45},[42,461,49],{"class":48},[42,463,256],{"class":52},[42,465,101],{"class":52},[42,467,468],{"class":52}," gcc",[42,470,471],{"class":52}," g++",[42,473,474],{"class":52}," python3-devel\n",[17,476,478],{"id":477},"解除-systemd-resolved-53-端口占用","解除 systemd-resolved 53 端口占用",[13,480,481,482,485],{},"编辑 ",[39,483,484],{},"/usr/lib/systemd/resolved.conf","，取消注释，yes 改 no",[32,487,491],{"className":488,"code":489,"language":490,"meta":37,"style":37},"language-diff shiki shiki-themes one-light one-dark-pro","[Resolve]\n# Some examples of DNS servers which may be used for DNS= and FallbackDNS=:\n\n//...\n\n#DNS=\n#FallbackDNS=\n#Domains=\n#DNSSEC=no\n#DNSOverTLS=no\n#MulticastDNS=yes\n#LLMNR=yes\n#Cache=yes\n#CacheFromLocalhost=no\n-#DNSStubListener=yes\n+DNSStubListener=no\n#DNSStubListenerExtra=\n#ReadEtcHosts=yes\n#ResolveUnicastSingleLabel=no\n#StaleRetentionSec=0\n","diff",[39,492,493,498,503,509,514,518,524,530,536,542,548,554,560,566,572,578,584,590,596,602],{"__ignoreMap":37},[42,494,495],{"class":44,"line":45},[42,496,497],{},"[Resolve]\n",[42,499,500],{"class":44,"line":168},[42,501,502],{},"# Some examples of DNS servers which may be used for DNS= and FallbackDNS=:\n",[42,504,505],{"class":44,"line":179},[42,506,508],{"emptyLinePlaceholder":507},true,"\n",[42,510,511],{"class":44,"line":189},[42,512,513],{},"//...\n",[42,515,516],{"class":44,"line":199},[42,517,508],{"emptyLinePlaceholder":507},[42,519,521],{"class":44,"line":520},6,[42,522,523],{},"#DNS=\n",[42,525,527],{"class":44,"line":526},7,[42,528,529],{},"#FallbackDNS=\n",[42,531,533],{"class":44,"line":532},8,[42,534,535],{},"#Domains=\n",[42,537,539],{"class":44,"line":538},9,[42,540,541],{},"#DNSSEC=no\n",[42,543,545],{"class":44,"line":544},10,[42,546,547],{},"#DNSOverTLS=no\n",[42,549,551],{"class":44,"line":550},11,[42,552,553],{},"#MulticastDNS=yes\n",[42,555,557],{"class":44,"line":556},12,[42,558,559],{},"#LLMNR=yes\n",[42,561,563],{"class":44,"line":562},13,[42,564,565],{},"#Cache=yes\n",[42,567,569],{"class":44,"line":568},14,[42,570,571],{},"#CacheFromLocalhost=no\n",[42,573,575],{"class":44,"line":574},15,[42,576,577],{},"-#DNSStubListener=yes\n",[42,579,581],{"class":44,"line":580},16,[42,582,583],{},"+DNSStubListener=no\n",[42,585,587],{"class":44,"line":586},17,[42,588,589],{},"#DNSStubListenerExtra=\n",[42,591,593],{"class":44,"line":592},18,[42,594,595],{},"#ReadEtcHosts=yes\n",[42,597,599],{"class":44,"line":598},19,[42,600,601],{},"#ResolveUnicastSingleLabel=no\n",[42,603,605],{"class":44,"line":604},20,[42,606,607],{},"#StaleRetentionSec=0\n",[17,609,611],{"id":610},"配置-fcitx5","配置 fcitx5",[32,613,615],{"className":34,"code":614,"language":36,"meta":37,"style":37},"sudo dnf install fcitx5-chinese-addons kcm-fcitx5 fcitx5-autostart\n",[39,616,617],{"__ignoreMap":37},[42,618,619,621,623,625,628,631],{"class":44,"line":45},[42,620,49],{"class":48},[42,622,256],{"class":52},[42,624,101],{"class":52},[42,626,627],{"class":52}," fcitx5-chinese-addons",[42,629,630],{"class":52}," kcm-fcitx5",[42,632,633],{"class":52}," fcitx5-autostart\n",[13,635,636],{},"在 设置 - 输入法 中添加拼音",[242,638,639],{"id":639},"安装词库",[13,641,642],{},[24,643,644],{"href":644,"rel":645},"https://github.com/felixonmars/fcitx5-pinyin-zhwiki",[28],[13,647,648],{},[24,649,650],{"href":650,"rel":651},"https://github.com/outloudvi/mw2fcitx",[28],[242,653,655],{"id":654},"在-wayland-下使用","在 wayland 下使用",[13,657,78,658],{},[24,659,661],{"href":660},"/2022/07/03/fcitx5-blinking-on-tg-under-wayland-kde/","处理 fcitx5 的文字候选框在 tg 客户端上闪烁的问题",[32,663,665],{"className":488,"code":664,"language":490,"meta":37,"style":37},"if [ ! \"$XDG_SESSION_TYPE\" = \"tty\" ]   # if this is a gui session (not tty)\nthen\n    # let's use fcitx instead of fcitx5 to make flatpak happy\n    # this may break behavior for users who have installed both\n    # fcitx and fcitx5, let then change the file on their own\n\n    export INPUT_METHOD=fcitx\n    export GTK_IM_MODULE=fcitx\n    export QT_IM_MODULE=fcitx\n    export XMODIFIERS=@im=fcitx\nfi\n+if [ \"$XDG_SESSION_TYPE\" = \"wayland\" ]\n+then\n+        unset QT_IM_MODULE\n+fi\n",[39,666,667,672,677,682,687,692,696,701,706,711,716,721,726,731,736],{"__ignoreMap":37},[42,668,669],{"class":44,"line":45},[42,670,671],{},"if [ ! \"$XDG_SESSION_TYPE\" = \"tty\" ]   # if this is a gui session (not tty)\n",[42,673,674],{"class":44,"line":168},[42,675,676],{},"then\n",[42,678,679],{"class":44,"line":179},[42,680,681],{},"    # let's use fcitx instead of fcitx5 to make flatpak happy\n",[42,683,684],{"class":44,"line":189},[42,685,686],{},"    # this may break behavior for users who have installed both\n",[42,688,689],{"class":44,"line":199},[42,690,691],{},"    # fcitx and fcitx5, let then change the file on their own\n",[42,693,694],{"class":44,"line":520},[42,695,508],{"emptyLinePlaceholder":507},[42,697,698],{"class":44,"line":526},[42,699,700],{},"    export INPUT_METHOD=fcitx\n",[42,702,703],{"class":44,"line":532},[42,704,705],{},"    export GTK_IM_MODULE=fcitx\n",[42,707,708],{"class":44,"line":538},[42,709,710],{},"    export QT_IM_MODULE=fcitx\n",[42,712,713],{"class":44,"line":544},[42,714,715],{},"    export XMODIFIERS=@im=fcitx\n",[42,717,718],{"class":44,"line":550},[42,719,720],{},"fi\n",[42,722,723],{"class":44,"line":556},[42,724,725],{},"+if [ \"$XDG_SESSION_TYPE\" = \"wayland\" ]\n",[42,727,728],{"class":44,"line":562},[42,729,730],{},"+then\n",[42,732,733],{"class":44,"line":568},[42,734,735],{},"+        unset QT_IM_MODULE\n",[42,737,738],{"class":44,"line":574},[42,739,740],{},"+fi\n",[13,742,743],{},"然后仍然要去 设置 - 键盘 - 虚拟键盘 中选中 fcitx5",[17,745,747],{"id":746},"安装-vscode","安装 vscode",[32,749,751],{"className":34,"code":750,"language":36,"meta":37,"style":37},"sudo rpm --import https://packages.microsoft.com/keys/microsoft.asc\necho -e \"[code]\\nname=Visual Studio Code\\nbaseurl=https://packages.microsoft.com/yumrepos/vscode\\nenabled=1\\ngpgcheck=1\\ngpgkey=https://packages.microsoft.com/keys/microsoft.asc\" | sudo tee /etc/yum.repos.d/vscode.repo > /dev/null\nsudo dnf install code\n",[39,752,753,766,793],{"__ignoreMap":37},[42,754,755,757,760,763],{"class":44,"line":45},[42,756,49],{"class":48},[42,758,759],{"class":52}," rpm",[42,761,762],{"class":56}," --import",[42,764,765],{"class":52}," https://packages.microsoft.com/keys/microsoft.asc\n",[42,767,768,771,773,776,779,781,784,787,790],{"class":44,"line":168},[42,769,770],{"class":164},"echo",[42,772,57],{"class":56},[42,774,775],{"class":52}," \"[code]\\nname=Visual Studio Code\\nbaseurl=https://packages.microsoft.com/yumrepos/vscode\\nenabled=1\\ngpgcheck=1\\ngpgkey=https://packages.microsoft.com/keys/microsoft.asc\"",[42,777,778],{"class":110}," | ",[42,780,49],{"class":48},[42,782,783],{"class":52}," tee",[42,785,786],{"class":52}," /etc/yum.repos.d/vscode.repo",[42,788,789],{"class":110}," > ",[42,791,792],{"class":52},"/dev/null\n",[42,794,795,797,799,801],{"class":44,"line":179},[42,796,49],{"class":48},[42,798,256],{"class":52},[42,800,101],{"class":52},[42,802,803],{"class":52}," code\n",[17,805,806],{"id":806},"网络优化工具",[13,808,809],{},"略",[17,811,812],{"id":812},"禁用防火墙",[32,814,816],{"className":34,"code":815,"language":36,"meta":37,"style":37},"sudo systemctl disable firewalld --now\n",[39,817,818],{"__ignoreMap":37},[42,819,820,822,825,828,831],{"class":44,"line":45},[42,821,49],{"class":48},[42,823,824],{"class":52}," systemctl",[42,826,827],{"class":52}," disable",[42,829,830],{"class":52}," firewalld",[42,832,833],{"class":56}," --now\n",[17,835,837],{"id":836},"rpm-构建","RPM 构建",[13,839,78,840],{},[24,841,843],{"href":842},"/2024/05/03/open-rpmbuild-in-the-way-of-archlinux-makepkg/","以 Archlinux 中 makepkg 的方式打开 rpmbuild",[845,846,847],"style",{},"html pre.shiki code .sAdtL, html code.shiki .sAdtL{--shiki-default:#4078F2;--shiki-dark:#61AFEF}html pre.shiki code .sDhpE, html code.shiki .sDhpE{--shiki-default:#50A14F;--shiki-dark:#98C379}html pre.shiki code .sAGMh, html code.shiki .sAGMh{--shiki-default:#986801;--shiki-dark:#D19A66}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .s5ixo, html code.shiki .s5ixo{--shiki-default:#383A42;--shiki-dark:#ABB2BF}html pre.shiki code .s_Sar, html code.shiki .s_Sar{--shiki-default:#0184BC;--shiki-dark:#56B6C2}html pre.shiki code .s2QsP, html code.shiki .s2QsP{--shiki-default:#E45649;--shiki-dark:#E5C07B}",{"title":37,"searchDepth":168,"depth":168,"links":849},[850,851,852,854,859,860,861,862,866,867,868,872,873,874,875],{"id":19,"depth":168,"text":19},{"id":74,"depth":168,"text":75},{"id":215,"depth":168,"text":853},"dnf 操作默认使用 Y/n",{"id":240,"depth":168,"text":240,"children":855},[856,857,858],{"id":244,"depth":179,"text":244},{"id":268,"depth":179,"text":269},{"id":291,"depth":179,"text":291},{"id":310,"depth":168,"text":311},{"id":334,"depth":168,"text":335},{"id":363,"depth":168,"text":363},{"id":382,"depth":168,"text":382,"children":863},[864,865],{"id":409,"depth":179,"text":410},{"id":429,"depth":179,"text":430},{"id":452,"depth":168,"text":452},{"id":477,"depth":168,"text":478},{"id":610,"depth":168,"text":611,"children":869},[870,871],{"id":639,"depth":179,"text":639},{"id":654,"depth":179,"text":655},{"id":746,"depth":168,"text":747},{"id":806,"depth":168,"text":806},{"id":812,"depth":168,"text":812},{"id":836,"depth":168,"text":837},"2024-11-01 23:35:08","md",{},"/2024/11/01/my-config-for-fedora-kde-41","---\ntitle: 给家里云装上 Fedora 41 KDE 后，我是如何配置的\ndate: 2024-11-01 23:35:08\nsticky:\ntags:\n- Linux\n- Fedora\n- KDE\n- HomeServer\n- Rustdesk\n- 笔记\n---\n\n> 前两天给自己的 N100 小主机重装成了最近发布的 Fedora 41 ( KDE )，也是花了不少时间把整个系统调成自己熟悉的样子，因此开一篇博客记录一下。以下仅为我个人的 HomeServer 小主机使用，不具有普适性。\n\n## 换官方源\n\n我这里比较适合用上交的源，直接参考[他们的文档](https://mirrors.sjtug.sjtu.edu.cn/docs/fedora/linux)。\n\n```bash\nsudo sed -e 's/^metalink=/#metalink=/g' -e 's|^#baseurl=http://download.example/pub/|baseurl=https://mirror.sjtu.edu.cn/|g' -i.bak /etc/yum.repos.d/{fedora.repo,fedora-updates.repo}\n```\n\n## 加 rpmfusion 源\n\n参考 [help.cernet.edu.cn 提供的文档](https://help.mirrors.cernet.edu.cn/rpmfusion/?mirror=SJTUG-Siyuan)\n\n安装源配置文件\n\n```bash\nsudo yum install --nogpgcheck https://mirror.sjtu.edu.cn/rpmfusion/free/fedora/rpmfusion-free-release-$(rpm -E %fedora).noarch.rpm https://mirror.sjtu.edu.cn/rpmfusion/nonfree/fedora/rpmfusion-nonfree-release-$(rpm -E %fedora).noarch.rpm\n```\n\n换源\n\n```bash\nsudo sed -e 's!^metalink=!#metalink=!g' \\\n         -e 's!^mirrorlist=!#mirrorlist=!g' \\\n         -e 's!^#baseurl=!baseurl=!g' \\\n         -e 's!https\\?://download1\\.rpmfusion\\.org/!https://mirror.sjtu.edu.cn/rpmfusion/!g' \\\n         -i.bak /etc/yum.repos.d/rpmfusion*.repo\n```\n\n## dnf 操作默认使用 [Y/n]\n\n```bash\nsudo sh -c \"echo 'defaultyes=True' >> /etc/dnf/dnf.conf\"\n```\n\n## 移除不想要的软件\n\n### libreoffice\n\n```bash\nsudo dnf remove libreoffice*\n```\n\n### discover, flatpak\n\n```bash\nsudo dnf remove discover flatpak\n```\n\n### podman\n\n```bash\nsudo dnf remove podman\n```\n\n## 关闭 selinux\n\n```bash\nsudo sed -i \"s|SELINUX=enforcing|SELINUX=disabled|\" /etc/selinux/config\n```\n\n## vlc，mpv，ffmpeg （补全大部分编码器）\n\n```bash\nsudo dnf install vlc mpv ffmpeg --allowerasing\n```\n\n## docker\n\n```bash\nsudo dnf install docker\n```\n\n## rustdesk\n\n直接去官方的 Github Release 下载安装包\n\n```bash\nsudo dnf install https://github.com/rustdesk/rustdesk/releases/download/1.3.2/rustdesk-1.3.2-0.x86_64.rpm\n```\n\n> 尽管 Rustdesk 支持被控端使用 wayland，但因为权限原因需要被控端手动选择被控区域，不适合无人值守的环境，因此还是要换 x11。\n\n### 安装 x11 支持\n\n```bash\nsudo dnf install plasma-workspace-x11\n```\n\n### 使用 x11 启动 sddm\n\n```bash\nsudo sed -i \"s|^#DisplayServer=wayland|DisplayServer=x11|\" /etc/sddm.conf\n```\n\n## 开发相关\n\n```bash\nsudo dnf install gcc g++ python3-devel\n```\n\n## 解除 systemd-resolved 53 端口占用\n\n编辑 `/usr/lib/systemd/resolved.conf`，取消注释，yes 改 no\n\n```diff\n[Resolve]\n# Some examples of DNS servers which may be used for DNS= and FallbackDNS=:\n\n//...\n\n#DNS=\n#FallbackDNS=\n#Domains=\n#DNSSEC=no\n#DNSOverTLS=no\n#MulticastDNS=yes\n#LLMNR=yes\n#Cache=yes\n#CacheFromLocalhost=no\n-#DNSStubListener=yes\n+DNSStubListener=no\n#DNSStubListenerExtra=\n#ReadEtcHosts=yes\n#ResolveUnicastSingleLabel=no\n#StaleRetentionSec=0\n```\n\n## 配置 fcitx5\n\n```bash\nsudo dnf install fcitx5-chinese-addons kcm-fcitx5 fcitx5-autostart\n```\n\n在 设置 - 输入法 中添加拼音\n\n### 安装词库\n\nhttps://github.com/felixonmars/fcitx5-pinyin-zhwiki\n\nhttps://github.com/outloudvi/mw2fcitx\n\n### 在 wayland 下使用\n\n参考 [处理 fcitx5 的文字候选框在 tg 客户端上闪烁的问题](/2022/07/03/fcitx5-blinking-on-tg-under-wayland-kde/)\n\n```diff\nif [ ! \"$XDG_SESSION_TYPE\" = \"tty\" ]   # if this is a gui session (not tty)\nthen\n    # let's use fcitx instead of fcitx5 to make flatpak happy\n    # this may break behavior for users who have installed both\n    # fcitx and fcitx5, let then change the file on their own\n\n    export INPUT_METHOD=fcitx\n    export GTK_IM_MODULE=fcitx\n    export QT_IM_MODULE=fcitx\n    export XMODIFIERS=@im=fcitx\nfi\n+if [ \"$XDG_SESSION_TYPE\" = \"wayland\" ]\n+then\n+        unset QT_IM_MODULE\n+fi\n```\n\n然后仍然要去 设置 - 键盘 - 虚拟键盘 中选中 fcitx5\n\n## 安装 vscode\n\n```bash\nsudo rpm --import https://packages.microsoft.com/keys/microsoft.asc\necho -e \"[code]\\nname=Visual Studio Code\\nbaseurl=https://packages.microsoft.com/yumrepos/vscode\\nenabled=1\\ngpgcheck=1\\ngpgkey=https://packages.microsoft.com/keys/microsoft.asc\" | sudo tee /etc/yum.repos.d/vscode.repo > /dev/null\nsudo dnf install code\n```\n\n## 网络优化工具\n\n略\n\n## 禁用防火墙\n\n```bash\nsudo systemctl disable firewalld --now\n```\n\n## RPM 构建\n\n参考 [以 Archlinux 中 makepkg 的方式打开 rpmbuild](/2024/05/03/open-rpmbuild-in-the-way-of-archlinux-makepkg/)",{"title":5,"description":37},"posts/my-config-for-fedora-kde-41",false,[885,886,887,888,889,890],"Linux","Fedora","KDE","HomeServer","Rustdesk","笔记","X5Q4moW_KxqcFnNcxX7TyJMtpSYSlEX-_6D0MmvvmKg",[893,898],{"title":894,"path":895,"stem":896,"date":897,"children":-1},"将博客从 waline v2 更新到 waline v3","/2024/11/15/upgrade-waline-from-v2-to-v3","posts/upgrade-waline-from-v2-to-v3","2024-11-15 23:49:43",{"title":899,"path":900,"stem":901,"date":902,"children":-1},"为 Hexo 添加 follow 认证","/2024/10/23/follow-cert-for-hexo-feed","posts/follow-cert-for-hexo-feed","2024-10-23 23:11:32",1761738200523]