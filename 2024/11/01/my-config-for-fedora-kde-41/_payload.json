[{"data":1,"prerenderedAt":906},["ShallowReactive",2],{"post-2024-11-01-my-config-for-fedora-kde-41-zh":3,"surround-2024-11-01-my-config-for-fedora-kde-41-zh":895,"randomIndex/2024/11/01/my-config-for-fedora-kde-41/":551},{"id":4,"title":5,"body":6,"date":878,"description":37,"extension":879,"lang":880,"meta":881,"navigation":508,"path":882,"rawbody":883,"seo":884,"stem":885,"sticky":886,"tags":887,"__hash__":894},"posts/posts/zh/my-config-for-fedora-kde-41.md","给家里云装上 Fedora 41 KDE 后，我是如何配置的",{"type":7,"value":8,"toc":850},"minimark",[9,16,20,31,72,76,84,87,143,146,213,220,238,241,245,266,270,289,292,308,312,332,336,361,364,380,383,386,402,407,411,427,431,450,453,475,479,486,610,614,636,639,642,648,654,658,664,743,746,750,806,809,812,815,836,840,846],[10,11,12],"blockquote",{},[13,14,15],"p",{},"前两天给自己的 N100 小主机重装成了最近发布的 Fedora 41 ( KDE )，也是花了不少时间把整个系统调成自己熟悉的样子，因此开一篇博客记录一下。以下仅为我个人的 HomeServer 小主机使用，不具有普适性。",[17,18,19],"h2",{"id":19},"换官方源",[13,21,22,23,30],{},"我这里比较适合用上交的源，直接参考",[24,25,29],"a",{"href":26,"rel":27},"https://mirrors.sjtug.sjtu.edu.cn/docs/fedora/linux",[28],"nofollow","他们的文档","。",[32,33,38],"pre",{"className":34,"code":35,"language":36,"meta":37,"style":37},"language-bash shiki shiki-themes one-light one-dark-pro","sudo sed -e 's/^metalink=/#metalink=/g' -e 's|^#baseurl=http://download.example/pub/|baseurl=https://mirror.sjtu.edu.cn/|g' -i.bak /etc/yum.repos.d/{fedora.repo,fedora-updates.repo}\n","bash","",[39,40,41],"code",{"__ignoreMap":37},[42,43,46,50,54,58,61,63,66,69],"span",{"class":44,"line":45},"line",1,[42,47,49],{"class":48},"sAdtL","sudo",[42,51,53],{"class":52},"sDhpE"," sed",[42,55,57],{"class":56},"sAGMh"," -e",[42,59,60],{"class":52}," 's/^metalink=/#metalink=/g'",[42,62,57],{"class":56},[42,64,65],{"class":52}," 's|^#baseurl=http://download.example/pub/|baseurl=https://mirror.sjtu.edu.cn/|g'",[42,67,68],{"class":56}," -i.bak",[42,70,71],{"class":52}," /etc/yum.repos.d/{fedora.repo,fedora-updates.repo}\n",[17,73,75],{"id":74},"加-rpmfusion-源","加 rpmfusion 源",[13,77,78,79],{},"参考 ",[24,80,83],{"href":81,"rel":82},"https://help.mirrors.cernet.edu.cn/rpmfusion/?mirror=SJTUG-Siyuan",[28],"help.cernet.edu.cn 提供的文档",[13,85,86],{},"安装源配置文件",[32,88,90],{"className":34,"code":89,"language":36,"meta":37,"style":37},"sudo yum install --nogpgcheck https://mirror.sjtu.edu.cn/rpmfusion/free/fedora/rpmfusion-free-release-$(rpm -E %fedora).noarch.rpm https://mirror.sjtu.edu.cn/rpmfusion/nonfree/fedora/rpmfusion-nonfree-release-$(rpm -E %fedora).noarch.rpm\n",[39,91,92],{"__ignoreMap":37},[42,93,94,96,99,102,105,108,112,115,118,121,124,127,130,132,134,136,138,140],{"class":44,"line":45},[42,95,49],{"class":48},[42,97,98],{"class":52}," yum",[42,100,101],{"class":52}," install",[42,103,104],{"class":56}," --nogpgcheck",[42,106,107],{"class":52}," https://mirror.sjtu.edu.cn/rpmfusion/free/fedora/rpmfusion-free-release-",[42,109,111],{"class":110},"s5ixo","$(",[42,113,114],{"class":48},"rpm",[42,116,117],{"class":56}," -E",[42,119,120],{"class":52}," %fedora",[42,122,123],{"class":110},")",[42,125,126],{"class":52},".noarch.rpm",[42,128,129],{"class":52}," https://mirror.sjtu.edu.cn/rpmfusion/nonfree/fedora/rpmfusion-nonfree-release-",[42,131,111],{"class":110},[42,133,114],{"class":48},[42,135,117],{"class":56},[42,137,120],{"class":52},[42,139,123],{"class":110},[42,141,142],{"class":52},".noarch.rpm\n",[13,144,145],{},"换源",[32,147,149],{"className":34,"code":148,"language":36,"meta":37,"style":37},"sudo sed -e 's!^metalink=!#metalink=!g' \\\n         -e 's!^mirrorlist=!#mirrorlist=!g' \\\n         -e 's!^#baseurl=!baseurl=!g' \\\n         -e 's!https\\?://download1\\.rpmfusion\\.org/!https://mirror.sjtu.edu.cn/rpmfusion/!g' \\\n         -i.bak /etc/yum.repos.d/rpmfusion*.repo\n",[39,150,151,166,177,187,197],{"__ignoreMap":37},[42,152,153,155,157,159,162],{"class":44,"line":45},[42,154,49],{"class":48},[42,156,53],{"class":52},[42,158,57],{"class":56},[42,160,161],{"class":52}," 's!^metalink=!#metalink=!g'",[42,163,165],{"class":164},"s_Sar"," \\\n",[42,167,169,172,175],{"class":44,"line":168},2,[42,170,171],{"class":56},"         -e",[42,173,174],{"class":52}," 's!^mirrorlist=!#mirrorlist=!g'",[42,176,165],{"class":164},[42,178,180,182,185],{"class":44,"line":179},3,[42,181,171],{"class":56},[42,183,184],{"class":52}," 's!^#baseurl=!baseurl=!g'",[42,186,165],{"class":164},[42,188,190,192,195],{"class":44,"line":189},4,[42,191,171],{"class":56},[42,193,194],{"class":52}," 's!https\\?://download1\\.rpmfusion\\.org/!https://mirror.sjtu.edu.cn/rpmfusion/!g'",[42,196,165],{"class":164},[42,198,200,203,206,210],{"class":44,"line":199},5,[42,201,202],{"class":56},"         -i.bak",[42,204,205],{"class":52}," /etc/yum.repos.d/rpmfusion",[42,207,209],{"class":208},"s2QsP","*",[42,211,212],{"class":52},".repo\n",[17,214,216,217],{"id":215},"dnf-操作默认使用-yn","dnf 操作默认使用 ",[42,218,219],{},"Y/n",[32,221,223],{"className":34,"code":222,"language":36,"meta":37,"style":37},"sudo sh -c \"echo 'defaultyes=True' >> /etc/dnf/dnf.conf\"\n",[39,224,225],{"__ignoreMap":37},[42,226,227,229,232,235],{"class":44,"line":45},[42,228,49],{"class":48},[42,230,231],{"class":52}," sh",[42,233,234],{"class":56}," -c",[42,236,237],{"class":52}," \"echo 'defaultyes=True' >> /etc/dnf/dnf.conf\"\n",[17,239,240],{"id":240},"移除不想要的软件",[242,243,244],"h3",{"id":244},"libreoffice",[32,246,248],{"className":34,"code":247,"language":36,"meta":37,"style":37},"sudo dnf remove libreoffice*\n",[39,249,250],{"__ignoreMap":37},[42,251,252,254,257,260,263],{"class":44,"line":45},[42,253,49],{"class":48},[42,255,256],{"class":52}," dnf",[42,258,259],{"class":52}," remove",[42,261,262],{"class":52}," libreoffice",[42,264,265],{"class":208},"*\n",[242,267,269],{"id":268},"discover-flatpak","discover, flatpak",[32,271,273],{"className":34,"code":272,"language":36,"meta":37,"style":37},"sudo dnf remove discover flatpak\n",[39,274,275],{"__ignoreMap":37},[42,276,277,279,281,283,286],{"class":44,"line":45},[42,278,49],{"class":48},[42,280,256],{"class":52},[42,282,259],{"class":52},[42,284,285],{"class":52}," discover",[42,287,288],{"class":52}," flatpak\n",[242,290,291],{"id":291},"podman",[32,293,295],{"className":34,"code":294,"language":36,"meta":37,"style":37},"sudo dnf remove podman\n",[39,296,297],{"__ignoreMap":37},[42,298,299,301,303,305],{"class":44,"line":45},[42,300,49],{"class":48},[42,302,256],{"class":52},[42,304,259],{"class":52},[42,306,307],{"class":52}," podman\n",[17,309,311],{"id":310},"关闭-selinux","关闭 selinux",[32,313,315],{"className":34,"code":314,"language":36,"meta":37,"style":37},"sudo sed -i \"s|SELINUX=enforcing|SELINUX=disabled|\" /etc/selinux/config\n",[39,316,317],{"__ignoreMap":37},[42,318,319,321,323,326,329],{"class":44,"line":45},[42,320,49],{"class":48},[42,322,53],{"class":52},[42,324,325],{"class":56}," -i",[42,327,328],{"class":52}," \"s|SELINUX=enforcing|SELINUX=disabled|\"",[42,330,331],{"class":52}," /etc/selinux/config\n",[17,333,335],{"id":334},"vlcmpvffmpeg-补全大部分编码器","vlc，mpv，ffmpeg （补全大部分编码器）",[32,337,339],{"className":34,"code":338,"language":36,"meta":37,"style":37},"sudo dnf install vlc mpv ffmpeg --allowerasing\n",[39,340,341],{"__ignoreMap":37},[42,342,343,345,347,349,352,355,358],{"class":44,"line":45},[42,344,49],{"class":48},[42,346,256],{"class":52},[42,348,101],{"class":52},[42,350,351],{"class":52}," vlc",[42,353,354],{"class":52}," mpv",[42,356,357],{"class":52}," ffmpeg",[42,359,360],{"class":56}," --allowerasing\n",[17,362,363],{"id":363},"docker",[32,365,367],{"className":34,"code":366,"language":36,"meta":37,"style":37},"sudo dnf install docker\n",[39,368,369],{"__ignoreMap":37},[42,370,371,373,375,377],{"class":44,"line":45},[42,372,49],{"class":48},[42,374,256],{"class":52},[42,376,101],{"class":52},[42,378,379],{"class":52}," docker\n",[17,381,382],{"id":382},"rustdesk",[13,384,385],{},"直接去官方的 Github Release 下载安装包",[32,387,389],{"className":34,"code":388,"language":36,"meta":37,"style":37},"sudo dnf install https://github.com/rustdesk/rustdesk/releases/download/1.3.2/rustdesk-1.3.2-0.x86_64.rpm\n",[39,390,391],{"__ignoreMap":37},[42,392,393,395,397,399],{"class":44,"line":45},[42,394,49],{"class":48},[42,396,256],{"class":52},[42,398,101],{"class":52},[42,400,401],{"class":52}," https://github.com/rustdesk/rustdesk/releases/download/1.3.2/rustdesk-1.3.2-0.x86_64.rpm\n",[10,403,404],{},[13,405,406],{},"尽管 Rustdesk 支持被控端使用 wayland，但因为权限原因需要被控端手动选择被控区域，不适合无人值守的环境，因此还是要换 x11。",[242,408,410],{"id":409},"安装-x11-支持","安装 x11 支持",[32,412,414],{"className":34,"code":413,"language":36,"meta":37,"style":37},"sudo dnf install plasma-workspace-x11\n",[39,415,416],{"__ignoreMap":37},[42,417,418,420,422,424],{"class":44,"line":45},[42,419,49],{"class":48},[42,421,256],{"class":52},[42,423,101],{"class":52},[42,425,426],{"class":52}," plasma-workspace-x11\n",[242,428,430],{"id":429},"使用-x11-启动-sddm","使用 x11 启动 sddm",[32,432,434],{"className":34,"code":433,"language":36,"meta":37,"style":37},"sudo sed -i \"s|^#DisplayServer=wayland|DisplayServer=x11|\" /etc/sddm.conf\n",[39,435,436],{"__ignoreMap":37},[42,437,438,440,442,444,447],{"class":44,"line":45},[42,439,49],{"class":48},[42,441,53],{"class":52},[42,443,325],{"class":56},[42,445,446],{"class":52}," \"s|^#DisplayServer=wayland|DisplayServer=x11|\"",[42,448,449],{"class":52}," /etc/sddm.conf\n",[17,451,452],{"id":452},"开发相关",[32,454,456],{"className":34,"code":455,"language":36,"meta":37,"style":37},"sudo dnf install gcc g++ python3-devel\n",[39,457,458],{"__ignoreMap":37},[42,459,460,462,464,466,469,472],{"class":44,"line":45},[42,461,49],{"class":48},[42,463,256],{"class":52},[42,465,101],{"class":52},[42,467,468],{"class":52}," gcc",[42,470,471],{"class":52}," g++",[42,473,474],{"class":52}," python3-devel\n",[17,476,478],{"id":477},"解除-systemd-resolved-53-端口占用","解除 systemd-resolved 53 端口占用",[13,480,481,482,485],{},"编辑 ",[39,483,484],{},"/usr/lib/systemd/resolved.conf","，取消注释，yes 改 no",[32,487,491],{"className":488,"code":489,"language":490,"meta":37,"style":37},"language-diff shiki shiki-themes one-light one-dark-pro","[Resolve]\n# Some examples of DNS servers which may be used for DNS= and FallbackDNS=:\n\n//...\n\n#DNS=\n#FallbackDNS=\n#Domains=\n#DNSSEC=no\n#DNSOverTLS=no\n#MulticastDNS=yes\n#LLMNR=yes\n#Cache=yes\n#CacheFromLocalhost=no\n-#DNSStubListener=yes\n+DNSStubListener=no\n#DNSStubListenerExtra=\n#ReadEtcHosts=yes\n#ResolveUnicastSingleLabel=no\n#StaleRetentionSec=0\n","diff",[39,492,493,498,504,510,515,519,525,531,537,543,549,555,561,567,573,580,586,592,598,604],{"__ignoreMap":37},[42,494,495],{"class":44,"line":45},[42,496,497],{"class":110},"[Resolve]\n",[42,499,500],{"class":44,"line":168},[42,501,503],{"class":502},"sW2Sy","# Some examples of DNS servers which may be used for DNS= and FallbackDNS=:\n",[42,505,506],{"class":44,"line":179},[42,507,509],{"emptyLinePlaceholder":508},true,"\n",[42,511,512],{"class":44,"line":189},[42,513,514],{"class":110},"//...\n",[42,516,517],{"class":44,"line":199},[42,518,509],{"emptyLinePlaceholder":508},[42,520,522],{"class":44,"line":521},6,[42,523,524],{"class":502},"#DNS=\n",[42,526,528],{"class":44,"line":527},7,[42,529,530],{"class":502},"#FallbackDNS=\n",[42,532,534],{"class":44,"line":533},8,[42,535,536],{"class":502},"#Domains=\n",[42,538,540],{"class":44,"line":539},9,[42,541,542],{"class":502},"#DNSSEC=no\n",[42,544,546],{"class":44,"line":545},10,[42,547,548],{"class":502},"#DNSOverTLS=no\n",[42,550,552],{"class":44,"line":551},11,[42,553,554],{"class":502},"#MulticastDNS=yes\n",[42,556,558],{"class":44,"line":557},12,[42,559,560],{"class":502},"#LLMNR=yes\n",[42,562,564],{"class":44,"line":563},13,[42,565,566],{"class":502},"#Cache=yes\n",[42,568,570],{"class":44,"line":569},14,[42,571,572],{"class":502},"#CacheFromLocalhost=no\n",[42,574,576],{"class":44,"line":575},15,[42,577,579],{"class":578},"sJa8x","-#DNSStubListener=yes\n",[42,581,583],{"class":44,"line":582},16,[42,584,585],{"class":52},"+DNSStubListener=no\n",[42,587,589],{"class":44,"line":588},17,[42,590,591],{"class":502},"#DNSStubListenerExtra=\n",[42,593,595],{"class":44,"line":594},18,[42,596,597],{"class":502},"#ReadEtcHosts=yes\n",[42,599,601],{"class":44,"line":600},19,[42,602,603],{"class":502},"#ResolveUnicastSingleLabel=no\n",[42,605,607],{"class":44,"line":606},20,[42,608,609],{"class":502},"#StaleRetentionSec=0\n",[17,611,613],{"id":612},"配置-fcitx5","配置 fcitx5",[32,615,617],{"className":34,"code":616,"language":36,"meta":37,"style":37},"sudo dnf install fcitx5-chinese-addons kcm-fcitx5 fcitx5-autostart\n",[39,618,619],{"__ignoreMap":37},[42,620,621,623,625,627,630,633],{"class":44,"line":45},[42,622,49],{"class":48},[42,624,256],{"class":52},[42,626,101],{"class":52},[42,628,629],{"class":52}," fcitx5-chinese-addons",[42,631,632],{"class":52}," kcm-fcitx5",[42,634,635],{"class":52}," fcitx5-autostart\n",[13,637,638],{},"在 设置 - 输入法 中添加拼音",[242,640,641],{"id":641},"安装词库",[13,643,644],{},[24,645,646],{"href":646,"rel":647},"https://github.com/felixonmars/fcitx5-pinyin-zhwiki",[28],[13,649,650],{},[24,651,652],{"href":652,"rel":653},"https://github.com/outloudvi/mw2fcitx",[28],[242,655,657],{"id":656},"在-wayland-下使用","在 wayland 下使用",[13,659,78,660],{},[24,661,663],{"href":662},"/2022/07/03/fcitx5-blinking-on-tg-under-wayland-kde/","处理 fcitx5 的文字候选框在 tg 客户端上闪烁的问题",[32,665,667],{"className":488,"code":666,"language":490,"meta":37,"style":37},"if [ ! \"$XDG_SESSION_TYPE\" = \"tty\" ]   # if this is a gui session (not tty)\nthen\n    # let's use fcitx instead of fcitx5 to make flatpak happy\n    # this may break behavior for users who have installed both\n    # fcitx and fcitx5, let then change the file on their own\n\n    export INPUT_METHOD=fcitx\n    export GTK_IM_MODULE=fcitx\n    export QT_IM_MODULE=fcitx\n    export XMODIFIERS=@im=fcitx\nfi\n+if [ \"$XDG_SESSION_TYPE\" = \"wayland\" ]\n+then\n+        unset QT_IM_MODULE\n+fi\n",[39,668,669,674,679,684,689,694,698,703,708,713,718,723,728,733,738],{"__ignoreMap":37},[42,670,671],{"class":44,"line":45},[42,672,673],{"class":110},"if [ ! \"$XDG_SESSION_TYPE\" = \"tty\" ]   # if this is a gui session (not tty)\n",[42,675,676],{"class":44,"line":168},[42,677,678],{"class":110},"then\n",[42,680,681],{"class":44,"line":179},[42,682,683],{"class":110},"    # let's use fcitx instead of fcitx5 to make flatpak happy\n",[42,685,686],{"class":44,"line":189},[42,687,688],{"class":110},"    # this may break behavior for users who have installed both\n",[42,690,691],{"class":44,"line":199},[42,692,693],{"class":110},"    # fcitx and fcitx5, let then change the file on their own\n",[42,695,696],{"class":44,"line":521},[42,697,509],{"emptyLinePlaceholder":508},[42,699,700],{"class":44,"line":527},[42,701,702],{"class":110},"    export INPUT_METHOD=fcitx\n",[42,704,705],{"class":44,"line":533},[42,706,707],{"class":110},"    export GTK_IM_MODULE=fcitx\n",[42,709,710],{"class":44,"line":539},[42,711,712],{"class":110},"    export QT_IM_MODULE=fcitx\n",[42,714,715],{"class":44,"line":545},[42,716,717],{"class":110},"    export XMODIFIERS=@im=fcitx\n",[42,719,720],{"class":44,"line":551},[42,721,722],{"class":110},"fi\n",[42,724,725],{"class":44,"line":557},[42,726,727],{"class":52},"+if [ \"$XDG_SESSION_TYPE\" = \"wayland\" ]\n",[42,729,730],{"class":44,"line":563},[42,731,732],{"class":52},"+then\n",[42,734,735],{"class":44,"line":569},[42,736,737],{"class":52},"+        unset QT_IM_MODULE\n",[42,739,740],{"class":44,"line":575},[42,741,742],{"class":52},"+fi\n",[13,744,745],{},"然后仍然要去 设置 - 键盘 - 虚拟键盘 中选中 fcitx5",[17,747,749],{"id":748},"安装-vscode","安装 vscode",[32,751,753],{"className":34,"code":752,"language":36,"meta":37,"style":37},"sudo rpm --import https://packages.microsoft.com/keys/microsoft.asc\necho -e \"[code]\\nname=Visual Studio Code\\nbaseurl=https://packages.microsoft.com/yumrepos/vscode\\nenabled=1\\ngpgcheck=1\\ngpgkey=https://packages.microsoft.com/keys/microsoft.asc\" | sudo tee /etc/yum.repos.d/vscode.repo > /dev/null\nsudo dnf install code\n",[39,754,755,768,795],{"__ignoreMap":37},[42,756,757,759,762,765],{"class":44,"line":45},[42,758,49],{"class":48},[42,760,761],{"class":52}," rpm",[42,763,764],{"class":56}," --import",[42,766,767],{"class":52}," https://packages.microsoft.com/keys/microsoft.asc\n",[42,769,770,773,775,778,781,783,786,789,792],{"class":44,"line":168},[42,771,772],{"class":164},"echo",[42,774,57],{"class":56},[42,776,777],{"class":52}," \"[code]\\nname=Visual Studio Code\\nbaseurl=https://packages.microsoft.com/yumrepos/vscode\\nenabled=1\\ngpgcheck=1\\ngpgkey=https://packages.microsoft.com/keys/microsoft.asc\"",[42,779,780],{"class":110}," | ",[42,782,49],{"class":48},[42,784,785],{"class":52}," tee",[42,787,788],{"class":52}," /etc/yum.repos.d/vscode.repo",[42,790,791],{"class":110}," > ",[42,793,794],{"class":52},"/dev/null\n",[42,796,797,799,801,803],{"class":44,"line":179},[42,798,49],{"class":48},[42,800,256],{"class":52},[42,802,101],{"class":52},[42,804,805],{"class":52}," code\n",[17,807,808],{"id":808},"网络优化工具",[13,810,811],{},"略",[17,813,814],{"id":814},"禁用防火墙",[32,816,818],{"className":34,"code":817,"language":36,"meta":37,"style":37},"sudo systemctl disable firewalld --now\n",[39,819,820],{"__ignoreMap":37},[42,821,822,824,827,830,833],{"class":44,"line":45},[42,823,49],{"class":48},[42,825,826],{"class":52}," systemctl",[42,828,829],{"class":52}," disable",[42,831,832],{"class":52}," firewalld",[42,834,835],{"class":56}," --now\n",[17,837,839],{"id":838},"rpm-构建","RPM 构建",[13,841,78,842],{},[24,843,845],{"href":844},"/2024/05/03/open-rpmbuild-in-the-way-of-archlinux-makepkg/","以 Archlinux 中 makepkg 的方式打开 rpmbuild",[847,848,849],"style",{},"html pre.shiki code .sAdtL, html code.shiki .sAdtL{--shiki-default:#4078F2;--shiki-dark:#61AFEF}html pre.shiki code .sDhpE, html code.shiki .sDhpE{--shiki-default:#50A14F;--shiki-dark:#98C379}html pre.shiki code .sAGMh, html code.shiki .sAGMh{--shiki-default:#986801;--shiki-dark:#D19A66}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .s5ixo, html code.shiki .s5ixo{--shiki-default:#383A42;--shiki-dark:#ABB2BF}html pre.shiki code .s_Sar, html code.shiki .s_Sar{--shiki-default:#0184BC;--shiki-dark:#56B6C2}html pre.shiki code .s2QsP, html code.shiki .s2QsP{--shiki-default:#E45649;--shiki-dark:#E5C07B}html pre.shiki code .sW2Sy, html code.shiki .sW2Sy{--shiki-default:#A0A1A7;--shiki-default-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic}html pre.shiki code .sJa8x, html code.shiki .sJa8x{--shiki-default:#E45649;--shiki-dark:#E06C75}",{"title":37,"searchDepth":168,"depth":168,"links":851},[852,853,854,856,861,862,863,864,868,869,870,874,875,876,877],{"id":19,"depth":168,"text":19},{"id":74,"depth":168,"text":75},{"id":215,"depth":168,"text":855},"dnf 操作默认使用 Y/n",{"id":240,"depth":168,"text":240,"children":857},[858,859,860],{"id":244,"depth":179,"text":244},{"id":268,"depth":179,"text":269},{"id":291,"depth":179,"text":291},{"id":310,"depth":168,"text":311},{"id":334,"depth":168,"text":335},{"id":363,"depth":168,"text":363},{"id":382,"depth":168,"text":382,"children":865},[866,867],{"id":409,"depth":179,"text":410},{"id":429,"depth":179,"text":430},{"id":452,"depth":168,"text":452},{"id":477,"depth":168,"text":478},{"id":612,"depth":168,"text":613,"children":871},[872,873],{"id":641,"depth":179,"text":641},{"id":656,"depth":179,"text":657},{"id":748,"depth":168,"text":749},{"id":808,"depth":168,"text":808},{"id":814,"depth":168,"text":814},{"id":838,"depth":168,"text":839},"2024-11-01 23:35:08","md","zh-CN",{},"/2024/11/01/my-config-for-fedora-kde-41","---\ntitle: 给家里云装上 Fedora 41 KDE 后，我是如何配置的\ndate: 2024-11-01 23:35:08\nsticky:\ntags:\n- Linux\n- Fedora\n- KDE\n- HomeServer\n- Rustdesk\n- Notes\n---\n\n> 前两天给自己的 N100 小主机重装成了最近发布的 Fedora 41 ( KDE )，也是花了不少时间把整个系统调成自己熟悉的样子，因此开一篇博客记录一下。以下仅为我个人的 HomeServer 小主机使用，不具有普适性。\n\n## 换官方源\n\n我这里比较适合用上交的源，直接参考[他们的文档](https://mirrors.sjtug.sjtu.edu.cn/docs/fedora/linux)。\n\n```bash\nsudo sed -e 's/^metalink=/#metalink=/g' -e 's|^#baseurl=http://download.example/pub/|baseurl=https://mirror.sjtu.edu.cn/|g' -i.bak /etc/yum.repos.d/{fedora.repo,fedora-updates.repo}\n```\n\n## 加 rpmfusion 源\n\n参考 [help.cernet.edu.cn 提供的文档](https://help.mirrors.cernet.edu.cn/rpmfusion/?mirror=SJTUG-Siyuan)\n\n安装源配置文件\n\n```bash\nsudo yum install --nogpgcheck https://mirror.sjtu.edu.cn/rpmfusion/free/fedora/rpmfusion-free-release-$(rpm -E %fedora).noarch.rpm https://mirror.sjtu.edu.cn/rpmfusion/nonfree/fedora/rpmfusion-nonfree-release-$(rpm -E %fedora).noarch.rpm\n```\n\n换源\n\n```bash\nsudo sed -e 's!^metalink=!#metalink=!g' \\\n         -e 's!^mirrorlist=!#mirrorlist=!g' \\\n         -e 's!^#baseurl=!baseurl=!g' \\\n         -e 's!https\\?://download1\\.rpmfusion\\.org/!https://mirror.sjtu.edu.cn/rpmfusion/!g' \\\n         -i.bak /etc/yum.repos.d/rpmfusion*.repo\n```\n\n## dnf 操作默认使用 [Y/n]\n\n```bash\nsudo sh -c \"echo 'defaultyes=True' >> /etc/dnf/dnf.conf\"\n```\n\n## 移除不想要的软件\n\n### libreoffice\n\n```bash\nsudo dnf remove libreoffice*\n```\n\n### discover, flatpak\n\n```bash\nsudo dnf remove discover flatpak\n```\n\n### podman\n\n```bash\nsudo dnf remove podman\n```\n\n## 关闭 selinux\n\n```bash\nsudo sed -i \"s|SELINUX=enforcing|SELINUX=disabled|\" /etc/selinux/config\n```\n\n## vlc，mpv，ffmpeg （补全大部分编码器）\n\n```bash\nsudo dnf install vlc mpv ffmpeg --allowerasing\n```\n\n## docker\n\n```bash\nsudo dnf install docker\n```\n\n## rustdesk\n\n直接去官方的 Github Release 下载安装包\n\n```bash\nsudo dnf install https://github.com/rustdesk/rustdesk/releases/download/1.3.2/rustdesk-1.3.2-0.x86_64.rpm\n```\n\n> 尽管 Rustdesk 支持被控端使用 wayland，但因为权限原因需要被控端手动选择被控区域，不适合无人值守的环境，因此还是要换 x11。\n\n### 安装 x11 支持\n\n```bash\nsudo dnf install plasma-workspace-x11\n```\n\n### 使用 x11 启动 sddm\n\n```bash\nsudo sed -i \"s|^#DisplayServer=wayland|DisplayServer=x11|\" /etc/sddm.conf\n```\n\n## 开发相关\n\n```bash\nsudo dnf install gcc g++ python3-devel\n```\n\n## 解除 systemd-resolved 53 端口占用\n\n编辑 `/usr/lib/systemd/resolved.conf`，取消注释，yes 改 no\n\n```diff\n[Resolve]\n# Some examples of DNS servers which may be used for DNS= and FallbackDNS=:\n\n//...\n\n#DNS=\n#FallbackDNS=\n#Domains=\n#DNSSEC=no\n#DNSOverTLS=no\n#MulticastDNS=yes\n#LLMNR=yes\n#Cache=yes\n#CacheFromLocalhost=no\n-#DNSStubListener=yes\n+DNSStubListener=no\n#DNSStubListenerExtra=\n#ReadEtcHosts=yes\n#ResolveUnicastSingleLabel=no\n#StaleRetentionSec=0\n```\n\n## 配置 fcitx5\n\n```bash\nsudo dnf install fcitx5-chinese-addons kcm-fcitx5 fcitx5-autostart\n```\n\n在 设置 - 输入法 中添加拼音\n\n### 安装词库\n\nhttps://github.com/felixonmars/fcitx5-pinyin-zhwiki\n\nhttps://github.com/outloudvi/mw2fcitx\n\n### 在 wayland 下使用\n\n参考 [处理 fcitx5 的文字候选框在 tg 客户端上闪烁的问题](/2022/07/03/fcitx5-blinking-on-tg-under-wayland-kde/)\n\n```diff\nif [ ! \"$XDG_SESSION_TYPE\" = \"tty\" ]   # if this is a gui session (not tty)\nthen\n    # let's use fcitx instead of fcitx5 to make flatpak happy\n    # this may break behavior for users who have installed both\n    # fcitx and fcitx5, let then change the file on their own\n\n    export INPUT_METHOD=fcitx\n    export GTK_IM_MODULE=fcitx\n    export QT_IM_MODULE=fcitx\n    export XMODIFIERS=@im=fcitx\nfi\n+if [ \"$XDG_SESSION_TYPE\" = \"wayland\" ]\n+then\n+        unset QT_IM_MODULE\n+fi\n```\n\n然后仍然要去 设置 - 键盘 - 虚拟键盘 中选中 fcitx5\n\n## 安装 vscode\n\n```bash\nsudo rpm --import https://packages.microsoft.com/keys/microsoft.asc\necho -e \"[code]\\nname=Visual Studio Code\\nbaseurl=https://packages.microsoft.com/yumrepos/vscode\\nenabled=1\\ngpgcheck=1\\ngpgkey=https://packages.microsoft.com/keys/microsoft.asc\" | sudo tee /etc/yum.repos.d/vscode.repo > /dev/null\nsudo dnf install code\n```\n\n## 网络优化工具\n\n略\n\n## 禁用防火墙\n\n```bash\nsudo systemctl disable firewalld --now\n```\n\n## RPM 构建\n\n参考 [以 Archlinux 中 makepkg 的方式打开 rpmbuild](/2024/05/03/open-rpmbuild-in-the-way-of-archlinux-makepkg/)\n",{"title":5,"description":37},"posts/zh/my-config-for-fedora-kde-41",false,[888,889,890,891,892,893],"Linux","Fedora","KDE","HomeServer","Rustdesk","Notes","MaVpLgXZ7XjiCXbaw7RIgeAevxE5n-Txe5WPdvzvRnY",[896,901],{"title":897,"path":898,"stem":899,"date":900,"lang":880,"children":-1},"将博客从 waline v2 更新到 waline v3","/2024/11/15/upgrade-waline-from-v2-to-v3","posts/zh/upgrade-waline-from-v2-to-v3","2024-11-15 23:49:43",{"title":902,"path":903,"stem":904,"date":905,"lang":880,"children":-1},"为 Hexo 添加 follow 认证","/2024/10/23/follow-cert-for-hexo-feed","posts/zh/follow-cert-for-hexo-feed","2024-10-23 23:11:32",1763638614642]