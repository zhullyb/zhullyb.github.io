[{"data":1,"prerenderedAt":239},["ShallowReactive",2],{"post-2024-02-08-extra-usage-for-crontab-zh":3,"surround-2024-02-08-extra-usage-for-crontab-zh":225,"randomIndex/2024/02/08/extra-usage-for-crontab/":237,"language-switch-/2024/02/08/extra-usage-for-crontab/-en":238},{"title":4,"date":5,"path":6,"tags":7,"body":10,"description":224},"crontab 中简单的@语法糖","2024-02-08 17:21:31","/2024/02/08/extra-usage-for-crontab",[8,9],"Linux","crontab",{"type":11,"value":12,"toc":221},"minimark",[13,21,37,160,163,166,217],[14,15,16,17],"p",{},"说来惭愧，其实我用了这么久的 Linux，一直没有学会编写 crontab 脚本。一行的开头写上五位莫名其妙的数字或星号，后面跟上需要执行的命令，看上去很 kiss，",[18,19,20],"del",{},"但我确实记不住，以至于我现在每次写 crontab 都是让 ChatGPT 来帮我写。",[14,22,23,24,28,29,36],{},"不过我最近查阅 Linux 下设置开机自启脚本的方案的时候，意外地看到 crontab 中居然可以用 ",[25,26,27],"code",{},"@reboot command"," 的方式去写，这让我意识到 crontab 也是有一些简单的语法糖的。在查阅了 ",[30,31,35],"a",{"href":32,"rel":33},"https://man.archlinux.org/man/crontab.5.en#EXTENSIONS",[34],"nofollow","crontab 的 manual"," 后，我发现一共有下面这么几种 @ 写法的语法糖。这是在全网大部分的 crontab 中文教程中是没有的。",[38,39,40,56],"table",{},[41,42,43],"thead",{},[44,45,46,50,53],"tr",{},[47,48,49],"th",{},"语法糖",[47,51,52],{},"执行条件",[47,54,55],{},"等效表达式",[57,58,59,72,87,100,115,130,145],"tbody",{},[44,60,61,67,70],{},[62,63,64],"td",{},[25,65,66],{},"@reboot",[62,68,69],{},"开机时候运行",[62,71],{},[44,73,74,79,82],{},[62,75,76],{},[25,77,78],{},"@yearly",[62,80,81],{},"一年一次",[62,83,84],{},[25,85,86],{},"0 0 1 1 *",[44,88,89,94,96],{},[62,90,91],{},[25,92,93],{},"@annually",[62,95,81],{},[62,97,98],{},[25,99,86],{},[44,101,102,107,110],{},[62,103,104],{},[25,105,106],{},"@monthly",[62,108,109],{},"一月一次",[62,111,112],{},[25,113,114],{},"0 0 1 * *",[44,116,117,122,125],{},[62,118,119],{},[25,120,121],{},"@weekly",[62,123,124],{},"一周一次",[62,126,127],{},[25,128,129],{},"0 0 * * 0",[44,131,132,137,140],{},[62,133,134],{},[25,135,136],{},"@daily",[62,138,139],{},"一天一次",[62,141,142],{},[25,143,144],{},"0 0 * * *",[44,146,147,152,155],{},[62,148,149],{},[25,150,151],{},"@hourly",[62,153,154],{},"一小时一次",[62,156,157],{},[25,158,159],{},"0 * * * *",[14,161,162],{},"这几个简单的语法糖可以满足大部分 crontab 的情况，免去了对使用者学习并记忆 crontab 的表达式的要求。",[14,164,165],{},"比如说，如果我希望我的系统在每次开机时都用 TG Bot 发送一条上线信息，那就是",[167,168,173],"pre",{"className":169,"code":170,"language":171,"meta":172,"style":172},"language-bash shiki shiki-themes one-light one-dark-pro","@reboot curl -s -X POST https://api.telegram.org/bot{id}:{apikey}/sendMessage -d chat_id={uid} -d text=\"`date`\"\n","bash","",[25,174,175],{"__ignoreMap":172},[176,177,180,183,187,191,194,197,200,203,206,208,211,214],"span",{"class":178,"line":179},"line",1,[176,181,66],{"class":182},"sAdtL",[176,184,186],{"class":185},"sDhpE"," curl",[176,188,190],{"class":189},"sAGMh"," -s",[176,192,193],{"class":189}," -X",[176,195,196],{"class":185}," POST",[176,198,199],{"class":185}," https://api.telegram.org/bot{id}:{apikey}/sendMessage",[176,201,202],{"class":189}," -d",[176,204,205],{"class":185}," chat_id={uid}",[176,207,202],{"class":189},[176,209,210],{"class":185}," text=\"`",[176,212,213],{"class":182},"date",[176,215,216],{"class":185},"`\"\n",[218,219,220],"style",{},"html pre.shiki code .sAdtL, html code.shiki .sAdtL{--shiki-default:#4078F2;--shiki-dark:#61AFEF}html pre.shiki code .sDhpE, html code.shiki .sDhpE{--shiki-default:#50A14F;--shiki-dark:#98C379}html pre.shiki code .sAGMh, html code.shiki .sAGMh{--shiki-default:#986801;--shiki-dark:#D19A66}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":172,"searchDepth":222,"depth":222,"links":223},2,[],"说来惭愧，其实我用了这么久的 Linux，一直没有学会编写 crontab 脚本。一行的开头写上五位莫名其妙的数字或星号，后面跟上需要执行的命令，看上去很 kiss，但我确实记不住，以至于我现在每次写 crontab 都是让 ChatGPT 来帮我写。",[226,232],{"title":227,"path":228,"stem":229,"date":230,"lang":231,"children":-1},"如何使用 docker 部署 onemanager","/2024/02/11/how-to-deploy-onemanager-with-docker","posts/zh/how-to-deploy-onemanager-with-docker","2024-02-11 16:30:29","zh-CN",{"title":233,"path":234,"stem":235,"date":236,"lang":231,"children":-1},"备份 umami 数据库，并使用 TG Bot 保存 dump 文件","/2024/02/01/backup-umami-database-and-send-it-by-tg-bot","posts/zh/backup-umami-database-and-send-it-by-tg-bot","2024-02-01 00:00:01",0,null,1765392894854]