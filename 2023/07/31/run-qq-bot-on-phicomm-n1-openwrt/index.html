<!DOCTYPE html><html  lang="zh-CN"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>在运行OpenWRT的N1盒子上部署 QQBot | 竹林里有冰的博客</title><link rel="preconnect" href="https://static.031130.xyz" crossorigin><link rel="stylesheet" href="https://s4.zstatic.net/ajax/libs/github-markdown-css/5.8.1/github-markdown.min.css"><style>[data-v-6c2349ae] .markdown-body{font-family:inherit;font-size:inherit}[data-v-6c2349ae] .markdown-body h2,[data-v-6c2349ae] .markdown-body h3,[data-v-6c2349ae] .markdown-body h4,[data-v-6c2349ae] .markdown-body h5,[data-v-6c2349ae] .markdown-body h6{scroll-margin-top:78px}[data-v-6c2349ae] .markdown-body h2>a,[data-v-6c2349ae] .markdown-body h3>a,[data-v-6c2349ae] .markdown-body h4>a,[data-v-6c2349ae] .markdown-body h5>a,[data-v-6c2349ae] .markdown-body h6>a{color:unset}@media(prefers-color-scheme:dark){[data-v-6c2349ae] .markdown-body{--bgColor-default:#252d38;--bgColor-muted:#181c27}[data-v-6c2349ae] .markdown-body .shiki,[data-v-6c2349ae] .markdown-body .shiki span{color:var(--shiki-dark)!important}}aside[data-v-6c2349ae]{position:sticky;top:78px}[data-v-6c2349ae] #waline{margin-top:3rem}.article-end-hr[data-v-6c2349ae]{border:none;border-top:1px solid #e1e4e8;margin:1rem 0}@media(prefers-color-scheme:dark){.article-end-hr[data-v-6c2349ae]{border-color:#444c56}}.tags[data-v-6c2349ae]{margin:1rem 0}.tags[data-v-6c2349ae] *{vertical-align:middle}.tags svg[data-v-6c2349ae]{font-size:.9em}.tags a[data-v-6c2349ae]{display:inline-block;margin-left:.2rem}.tags a[data-v-6c2349ae]:hover{color:#007bff}</style><style>.content-wrapper[data-v-40d23075]{margin-bottom:40px;margin-top:40px}@media(min-width:1025px){.content-wrapper[data-v-40d23075]{display:flex;justify-content:space-around}.content-wrapper .side[data-v-40d23075]{width:20%}}@media(max-width:1024px){.content-wrapper[data-v-40d23075]{margin:30px}}main[data-v-40d23075]{min-height:calc(40vh - 120px);width:50%}@media(max-width:1024px){main[data-v-40d23075]{width:unset}}</style><style>header[data-v-c4c9a290]{align-items:center;box-shadow:0 2px 4px #0000001a;display:flex;flex-direction:column;height:62px;justify-content:center;padding-bottom:16px;padding-top:20px;position:fixed;top:0;transition:background-color .3s ease,height .3s ease,padding-top .3s ease,backdrop-filter .3s ease;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:100%;z-index:2}header.scrolled[data-v-c4c9a290]{height:58px;padding-bottom:16px;padding-top:16px}header.scrolled[data-v-c4c9a290],header.show-mobile-menu[data-v-c4c9a290]{-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px);background-color:#3c4658b3}header.show-mobile-menu[data-v-c4c9a290]{height:-moz-fit-content;height:fit-content}.header-container[data-v-c4c9a290]{color:#fff;min-width:70%}@media(max-width:1024px){.header-container[data-v-c4c9a290]{min-width:100%;padding-left:16px;padding-right:16px}}.header-container .header-title[data-v-c4c9a290]{font-weight:700;text-shadow:0 0 10px rgba(0,0,0,.3)}.header[data-v-c4c9a290]{justify-content:space-between}.header[data-v-c4c9a290],.header-right[data-v-c4c9a290]{align-items:center;display:flex}.header-right[data-v-c4c9a290]{gap:16px}.mobile-menu-dropdown[data-v-c4c9a290]{border-radius:8px;display:flex;flex-direction:column;padding:8px 0;width:100%}.mobile-menu-dropdown a[data-v-c4c9a290]{font-size:18px;font-weight:500;padding:12px 24px;text-align:center}.mobile-menu-dropdown a[data-v-c4c9a290],a[data-v-c4c9a290]{color:#fff;text-decoration:none}.lang-switch[data-v-c4c9a290]{align-items:center;background:#ffffff1a;border:1px solid hsla(0,0%,100%,.3);border-radius:999px;color:#fff;cursor:pointer;display:flex;font-size:14px;justify-content:center;padding:6px 12px;transition:background .2s ease,border-color .2s ease}.lang-switch[data-v-c4c9a290]:hover{background:#fff3;border-color:#fff9}.search-trigger[data-v-c4c9a290]{align-items:center;background:#ffffff1a;border:1px solid hsla(0,0%,100%,.3);border-radius:999px;color:#fff;cursor:pointer;display:flex;font-size:14px;gap:6px;padding:6px 12px;transition:background .2s ease,border-color .2s ease}.search-trigger[data-v-c4c9a290]:hover{background:#fff3;border-color:#fff9}.search-trigger span[aria-hidden=true][data-v-c4c9a290]{font-size:16px;line-height:1}@media(max-width:1024px){.search-trigger[data-v-c4c9a290]{display:none}}</style><style>.post-navigation[data-v-a35c130b]{display:flex;flex-wrap:wrap;gap:1rem}.nav-button[data-v-a35c130b]{align-items:center;border:1px solid #e1e4e8;color:#24292e;cursor:pointer;display:flex;flex:0 1 calc(50% - .5rem);gap:1rem;max-width:calc(50% - .5rem);min-width:280px;padding:1.25rem 1.5rem;text-decoration:none;transition:border-color .2s ease}@media(prefers-color-scheme:dark){.nav-button[data-v-a35c130b]{border:1px solid #444c5a;color:#c9d1d9}}.nav-button[data-v-a35c130b]:hover{border-color:#007bff}.nav-button:hover .nav-arrow[data-v-a35c130b],.nav-button:hover .nav-label[data-v-a35c130b],.nav-button:hover .nav-title[data-v-a35c130b]{color:#007bff}.nav-button.prev[data-v-a35c130b]{margin-right:auto}.nav-button.prev .nav-content[data-v-a35c130b]{text-align:left}.nav-button.next[data-v-a35c130b]{flex-direction:row-reverse;margin-left:auto}.nav-button.next .nav-content[data-v-a35c130b]{text-align:right}.nav-arrow[data-v-a35c130b]{color:#6a737d;flex-shrink:0;font-weight:600;line-height:1}.nav-content[data-v-a35c130b]{display:flex;flex:1;flex-direction:column;gap:.5rem;min-width:0}.nav-label[data-v-a35c130b]{color:#6a737d;font-size:.875rem;font-weight:500}.nav-title[data-v-a35c130b]{display:-webkit-box;font-size:1rem;font-weight:600;-webkit-line-clamp:2;line-clamp:2;overflow:hidden;text-overflow:ellipsis;transition:color .2s ease;-webkit-box-orient:vertical;color:#24292e;line-height:1.4}@media(prefers-color-scheme:dark){.nav-title[data-v-a35c130b]{color:#c9d1d9}}@media(max-width:720px){.post-navigation[data-v-a35c130b]{flex-direction:column;gap:.75rem}.nav-button[data-v-a35c130b]{min-width:100%}}</style><style>#waline{--waline-theme-color:#3f72af;--waline-active-color:#173f70}#waline .wl-panel{border-radius:0;margin:0}@media(prefers-color-scheme:dark){#waline .wl-panel{border-color:#444c5a}}#waline .wl-btn{border-radius:0}</style><style>.toc[data-v-bdce45f2]{background:#fafafa;border:1px solid #e5e5e5;max-height:calc(100vh - 120px);overflow-y:auto;padding:1.25rem}@media(prefers-color-scheme:dark){.toc[data-v-bdce45f2]{background:#181c27;border:1px solid #444c5a}}@media(max-width:1024px){.toc[data-v-bdce45f2]{display:none}}.toc-title[data-v-bdce45f2]{border-bottom:1px solid #e5e5e5;color:#333;font-size:1rem;font-weight:600;margin-bottom:1rem;padding-bottom:.5rem}@media(prefers-color-scheme:dark){.toc-title[data-v-bdce45f2]{border-bottom:1px solid #444c5a;color:#fff}}.toc-list[data-v-bdce45f2]{list-style:none;margin:0;padding:0}.toc-item[data-v-bdce45f2]{line-height:1.5;margin:.3rem 0;max-height:100px;opacity:1;overflow:hidden;transition:max-height .25s ease,opacity .25s ease,margin .25s ease}.toc-item.collapsed[data-v-bdce45f2]{margin:0;max-height:0;opacity:0}.toc-item a[data-v-bdce45f2]{color:#666;display:block;font-size:.875rem;padding:.35rem .5rem;text-decoration:none;transition:color .2s,background-color .2s}@media(prefers-color-scheme:dark){.toc-item a[data-v-bdce45f2]{color:#ccc}}.toc-item a[data-v-bdce45f2]:hover{background-color:#3b82f614;color:#007bff}.toc-item.active a[data-v-bdce45f2]{background-color:#3b82f61f;color:#007bff;font-weight:500}.toc-item.toc-level-1[data-v-bdce45f2]{padding-left:0}.toc-item.toc-level-1 a[data-v-bdce45f2]{font-weight:500}.toc-item.toc-level-2[data-v-bdce45f2]{padding-left:.75rem}.toc-item.toc-level-3[data-v-bdce45f2]{padding-left:1.5rem}.toc-item.toc-level-3 a[data-v-bdce45f2]{font-size:.85rem}.toc-item.toc-level-4[data-v-bdce45f2]{padding-left:2.25rem}.toc-item.toc-level-4 a[data-v-bdce45f2]{font-size:.825rem}.toc-item.toc-level-5[data-v-bdce45f2]{padding-left:3rem}.toc-item.toc-level-5 a[data-v-bdce45f2]{font-size:.8rem}.toc-item.toc-level-6[data-v-bdce45f2]{padding-left:3.75rem}.toc-item.toc-level-6 a[data-v-bdce45f2]{font-size:.775rem}.toc[data-v-bdce45f2]::-webkit-scrollbar{width:5px}.toc[data-v-bdce45f2]::-webkit-scrollbar-track{background:transparent}.toc[data-v-bdce45f2]::-webkit-scrollbar-thumb{background:#d1d5db}.toc[data-v-bdce45f2]::-webkit-scrollbar-thumb:hover{background:#9ca3af}</style><style>footer[data-v-cc99c751]{color:#fff;justify-content:center;position:relative;width:100%}.footer-content[data-v-cc99c751],footer[data-v-cc99c751]{align-items:center;display:flex}.footer-content[data-v-cc99c751]{flex-direction:column;gap:12px;padding:20px;z-index:1}.footer-mask[data-v-cc99c751]{background:linear-gradient(180deg,#0000004d,#00000080);inset:0;position:absolute}@media(prefers-color-scheme:dark){.footer-mask[data-v-cc99c751]{background:linear-gradient(180deg,#0009,#000c)}}</style><style>.promo-card[data-v-f771117d]{background:#0003;border:.5px solid #eee;box-sizing:border-box;display:flex;flex-direction:column;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif;gap:16px;max-width:310px;padding:24px;zoom:.8}.card-header[data-v-f771117d]{justify-content:space-between}.card-header[data-v-f771117d],.header-left[data-v-f771117d]{align-items:center;display:flex}.header-left[data-v-f771117d]{gap:8px}.logo-img[data-v-f771117d]{display:block;height:auto;width:100%}.logo-yxvm-container[data-v-f771117d]{margin-left:2px;width:100px}.plus-separator[data-v-f771117d]{color:#fff;font-size:20px;font-weight:700}.logo-nodeseek-container[data-v-f771117d]{width:40px}.github-link[data-v-f771117d]{color:#fff;display:block;transition:color .2s ease-in-out;width:20px}.github-link[data-v-f771117d]:hover{color:#38bdf8}.github-icon[data-v-f771117d]{fill:currentColor;height:100%;width:100%}.card-title[data-v-f771117d]{color:#fff;font-size:18px;font-weight:500;line-height:1.2;margin:0;text-transform:capitalize}.card-description[data-v-f771117d]{color:#94a3b8;font-size:14px;line-height:1.5;margin:0}.card-footer[data-v-f771117d]{color:#e4e4e7;display:flex;font-size:13px;font-weight:500;gap:4px;justify-content:flex-end}</style><style>.prose-heading[data-v-a22a06c0]{position:relative}.prose-heading:hover .heading-anchor[data-v-a22a06c0]{opacity:1}.heading-anchor[data-v-a22a06c0]{color:#3b82f6;font-weight:400;margin-left:.5rem;opacity:0;text-decoration:none;transition:opacity .2s,color .2s}.heading-anchor[data-v-a22a06c0]:hover{color:#007bff}.anchor-icon[data-v-a22a06c0]{display:inline-block}.prose-h2[data-v-a22a06c0]{margin:1.75rem 0 .875rem}</style><style>pre[data-v-a9c19cc1]{font-size:14px}</style><style>@media(max-width:1024px){.pc-nav[data-v-49e970ab]{display:none}}.mobile-nav[data-v-49e970ab]{cursor:pointer;display:none}@media(max-width:1024px){.mobile-nav[data-v-49e970ab]{align-items:center;display:flex;justify-content:center}}.mobile-nav .container[data-v-49e970ab]{align-items:center;display:flex;flex-direction:column;height:20px;justify-content:center;margin:0 auto;width:25px}.mobile-nav-item[data-v-49e970ab]{background:#fff;border-radius:2px;flex-shrink:0;height:2px;margin:2.5px 0;width:100%}a[data-v-49e970ab]{color:#fff;margin-left:16px;margin-right:16px;text-decoration:none}</style><style>.banner[data-v-0f1d2f14]{height:60vh;width:100%}.mask[data-v-0f1d2f14]{align-items:center;background:#0000001a;display:flex;height:100%;justify-content:center;width:100%}@media(prefers-color-scheme:dark){.mask[data-v-0f1d2f14]{background:#00000080}}.title-container[data-v-0f1d2f14]{align-items:center;color:#fff;display:flex;height:100%;justify-content:center;margin:auto;width:50%}@media(max-width:1024px){.title-container[data-v-0f1d2f14]{width:80%}}.title[data-v-0f1d2f14]{color:#fff;margin:auto auto auto 0;padding-top:58px;text-shadow:0 0 5px rgba(0,0,0,.7)}.title h1[data-v-0f1d2f14]{font-size:32px;font-weight:700;margin:0}@media(max-width:720px){.title h1[data-v-0f1d2f14]{font-size:24px}}.title p[data-v-0f1d2f14]{font-size:16px;font-weight:300;margin:8px 0}@media(max-width:1024px){.title[data-v-0f1d2f14]{margin:auto;text-align:center}}</style><style>.search-overlay-enter-active[data-v-63592d71],.search-overlay-leave-active[data-v-63592d71]{transition:opacity .2s ease}.search-overlay-enter-from[data-v-63592d71],.search-overlay-leave-to[data-v-63592d71]{opacity:0}.search-overlay[data-v-63592d71]{align-items:flex-start;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);background:#00000059;display:flex;justify-content:center;inset:0;padding:120px 16px 40px;position:fixed;z-index:2000}.search-overlay__panel[data-v-63592d71]{background:#fffffff2;box-shadow:0 18px 50px #00000040;display:flex;flex-direction:column;max-height:calc(100vh - 160px);overflow:hidden;width:min(720px,100%)}.search-overlay__header[data-v-63592d71]{align-items:center;border-bottom:1px solid rgba(0,0,0,.05);display:flex;gap:12px;padding:16px 20px 16px 16px}.search-overlay__input[data-v-63592d71]{background:#ffffffd9;border:1px solid rgba(0,0,0,.12);flex:1;font-size:16px;padding:12px 16px;transition:border-color .2s ease}.search-overlay__input[data-v-63592d71]:focus{border-color:#007bff;outline:none}.search-overlay__close[data-v-63592d71]{background:transparent;border:none;border-radius:50%;color:#0000008c;cursor:pointer;font-size:24px;height:32px;line-height:24px;width:32px}.search-overlay__close[data-v-63592d71]:hover{color:#000c}.search-overlay__body[data-v-63592d71]{overflow-y:auto;padding:8px 0 20px}.search-overlay__state[data-v-63592d71]{color:#00000094;margin:20px;text-align:center}.search-overlay__count[data-v-63592d71]{color:#000000b3;font-weight:600;margin:12px 24px 0}.search-overlay__list[data-v-63592d71]{display:flex;flex-direction:column;gap:12px;list-style:none;margin:16px 0 0;padding:0 8px 8px}.search-overlay__item[data-v-63592d71]{background:#ffffffe6;border-radius:12px;box-shadow:0 8px 18px #00000014;transition:transform .2s ease}.search-overlay__item[data-v-63592d71]:hover{transform:translateY(-2px)}.search-overlay__link[data-v-63592d71]{color:inherit;display:block;padding:16px 20px;text-decoration:none}.search-overlay__item-title[data-v-63592d71]{color:#007bff;font-size:18px;font-weight:700;margin:0}.search-overlay__item-meta[data-v-63592d71]{color:#0009;font-size:13px;margin:8px 0 0}.search-overlay__item-meta span[data-v-63592d71]{color:#0000008c}.search-overlay__item-snippet[data-v-63592d71]{color:#000c;font-size:14px;line-height:1.6;margin:12px 0 0}@media(max-width:768px){.search-overlay[data-v-63592d71]{padding:80px 12px 20px}.search-overlay__panel[data-v-63592d71]{max-height:calc(100vh - 120px)}}</style><link rel="stylesheet" href="/_nuxt/entry.wK2xKsNV.css" crossorigin><link rel="stylesheet" href="/_nuxt/DefaultLayout.CQ8l3Il9.css" crossorigin><link rel="preload" as="fetch" crossorigin="anonymous" href="/2023/07/31/run-qq-bot-on-phicomm-n1-openwrt/_payload.json?82c6b105-e6bd-4a90-95e3-27d8baeede40"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/Da-wsQMw.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/_hy_lEAl.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BslbcG-S.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BPGXFScA.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/D3d1GDAj.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BxpaPOzc.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CFIPLSlU.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/D1RhzJzs.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/3GILXMj8.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BupRQLPI.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/Pl4E46kt.js"><link rel="preload" as="fetch" fetchpriority="low" crossorigin="anonymous" href="/_nuxt/builds/meta/82c6b105-e6bd-4a90-95e3-27d8baeede40.json"><script src="/js/u.js" defer data-website-id="5346b89b-f4bf-4593-971d-1f41a1118bc1"></script><link rel="prefetch" as="style" href="https://s4.zstatic.net/ajax/libs/github-markdown-css/5.8.1/github-markdown.min.css"><link rel="alternate" type="application/rss+xml" title="竹林里有冰的博客 RSS Feed (Chinese)" href="https://zhul.in/rss.xml"><link rel="alternate" type="application/atom+xml" title="竹林里有冰的博客 Atom Feed (English)" href="https://zhul.in/en/rss.xml"><meta name="description" content="由于学校社团的招新需要，我写了一个依赖于 go-cqhttp 运行的 QQ Bot，并没有实现什么花里胡哨的功能，只是实现了关键词回复和新人入群时的欢迎语。因为没考虑后续维护的问题，代码也写得比较草，但毕竟是能跑。这么一个小型的程序并不会占用的多少的服务器资源，单独为这么一个 Bot 去开一台国内的 vps 似乎是有些大材小用了，刚好我手上有一台运行在 OpenWRT 上的 Phicomm N1 盒子，反正也是 Linux 系统，便打算拿来挂 QQ Bot。"><meta property="og:type" content="website"><meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"><meta name="keywords" content="Linux,Network,Bot"><script type="module" src="/_nuxt/Da-wsQMw.js" crossorigin></script><meta name="twitter:card" content="summary_large_image"><meta property="og:title" data-infer="" content="在运行OpenWRT的N1盒子上部署 QQBot | 竹林里有冰的博客"><meta property="og:description" data-infer="" content="由于学校社团的招新需要，我写了一个依赖于 go-cqhttp 运行的 QQ Bot，并没有实现什么花里胡哨的功能，只是实现了关键词回复和新人入群时的欢迎语。因为没考虑后续维护的问题，代码也写得比较草，但毕竟是能跑。这么一个小型的程序并不会占用的多少的服务器资源，单独为这么一个 Bot 去开一台国内的 vps 似乎是有些大材小用了，刚好我手上有一台运行在 OpenWRT 上的 Phicomm N1 盒子，反正也是 Linux 系统，便打算拿来挂 QQ Bot。"><link rel="canonical" href="https://zhul.in/2023/07/31/run-qq-bot-on-phicomm-n1-openwrt/"><meta property="og:url" content="https://zhul.in/2023/07/31/run-qq-bot-on-phicomm-n1-openwrt/"><meta property="og:locale" content="zh_CN"><meta property="og:site_name" content="竹林里有冰的博客"></head><body><!--teleport start anchor--><!----><!--teleport anchor--><div id="__nuxt"><!--[--><div></div><div data-v-6c2349ae data-v-40d23075><!--[--><header class="" data-v-c4c9a290><div class="header-container" data-v-c4c9a290><div class="header" data-v-c4c9a290><a href="/" class="header-title" data-v-c4c9a290>竹林里有冰的博客</a><div class="header-right" data-v-c4c9a290><nav data-v-c4c9a290 data-v-49e970ab><div class="pc-nav" data-v-49e970ab><!--[--><a href="/" class="" data-v-49e970ab>首页</a><a href="/archives/" class="" data-v-49e970ab>归档</a><a href="/tags/" class="" data-v-49e970ab>标签</a><a href="/links/" class="" data-v-49e970ab>友链</a><a href="/about/" class="" data-v-49e970ab>关于</a><!--]--></div><div class="mobile-nav" data-v-49e970ab><div class="container" data-v-49e970ab><!--[--><div class="mobile-nav-item" data-v-49e970ab></div><div class="mobile-nav-item" data-v-49e970ab></div><div class="mobile-nav-item" data-v-49e970ab></div><!--]--></div></div></nav><button type="button" class="lang-switch" aria-label="Switch Language" data-v-c4c9a290><span class="lang-switch__label" data-v-c4c9a290>En</span></button><button type="button" class="search-trigger" aria-label="Search" data-v-c4c9a290><svg viewBox="0 0 24 24" width="1.2em" height="1.2em" data-v-c4c9a290><path fill="currentColor" d="M15.5 14h-.79l-.28-.27A6.47 6.47 0 0 0 16 9.5A6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5S14 7.01 14 9.5S11.99 14 9.5 14"></path></svg><span class="search-trigger__label" data-v-c4c9a290>搜索</span></button></div></div></div><!----></header><div class="banner" style="background-color:#ff9d00;background-repeat:no-repeat;background-position:center center;background-size:cover;background-image:url(&quot;data:image/svg+xml,%3Csvg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;100%25&#39; height=&#39;100%25&#39; viewBox=&#39;0 0 1600 800&#39;%3E%3Cg stroke=&#39;%23000&#39; stroke-width=&#39;66.7&#39; stroke-opacity=&#39;0.05&#39; %3E%3Ccircle fill=&#39;%23ff9d00&#39; cx=&#39;0&#39; cy=&#39;0&#39; r=&#39;1800&#39;/%3E%3Ccircle fill=&#39;%23fb8d17&#39; cx=&#39;0&#39; cy=&#39;0&#39; r=&#39;1700&#39;/%3E%3Ccircle fill=&#39;%23f47d24&#39; cx=&#39;0&#39; cy=&#39;0&#39; r=&#39;1600&#39;/%3E%3Ccircle fill=&#39;%23ed6e2d&#39; cx=&#39;0&#39; cy=&#39;0&#39; r=&#39;1500&#39;/%3E%3Ccircle fill=&#39;%23e35f34&#39; cx=&#39;0&#39; cy=&#39;0&#39; r=&#39;1400&#39;/%3E%3Ccircle fill=&#39;%23d85239&#39; cx=&#39;0&#39; cy=&#39;0&#39; r=&#39;1300&#39;/%3E%3Ccircle fill=&#39;%23cc453e&#39; cx=&#39;0&#39; cy=&#39;0&#39; r=&#39;1200&#39;/%3E%3Ccircle fill=&#39;%23be3941&#39; cx=&#39;0&#39; cy=&#39;0&#39; r=&#39;1100&#39;/%3E%3Ccircle fill=&#39;%23b02f43&#39; cx=&#39;0&#39; cy=&#39;0&#39; r=&#39;1000&#39;/%3E%3Ccircle fill=&#39;%23a02644&#39; cx=&#39;0&#39; cy=&#39;0&#39; r=&#39;900&#39;/%3E%3Ccircle fill=&#39;%23901e44&#39; cx=&#39;0&#39; cy=&#39;0&#39; r=&#39;800&#39;/%3E%3Ccircle fill=&#39;%23801843&#39; cx=&#39;0&#39; cy=&#39;0&#39; r=&#39;700&#39;/%3E%3Ccircle fill=&#39;%236f1341&#39; cx=&#39;0&#39; cy=&#39;0&#39; r=&#39;600&#39;/%3E%3Ccircle fill=&#39;%235e0f3d&#39; cx=&#39;0&#39; cy=&#39;0&#39; r=&#39;500&#39;/%3E%3Ccircle fill=&#39;%234e0c38&#39; cx=&#39;0&#39; cy=&#39;0&#39; r=&#39;400&#39;/%3E%3Ccircle fill=&#39;%233e0933&#39; cx=&#39;0&#39; cy=&#39;0&#39; r=&#39;300&#39;/%3E%3Ccircle fill=&#39;%232e062c&#39; cx=&#39;0&#39; cy=&#39;0&#39; r=&#39;200&#39;/%3E%3Ccircle fill=&#39;%23210024&#39; cx=&#39;0&#39; cy=&#39;0&#39; r=&#39;100&#39;/%3E%3C/g%3E%3C/svg%3E&quot;);" data-v-c4c9a290 data-v-0f1d2f14><div class="mask" data-v-0f1d2f14><div class="title-container" data-v-0f1d2f14><div class="title" data-v-0f1d2f14><h1 data-v-0f1d2f14>在运行OpenWRT的N1盒子上部署 QQBot</h1><!----></div></div></div></div><!--teleport start--><!--teleport end--><!--]--><div class="content-wrapper" data-v-40d23075><div class="before-main side" data-v-40d23075><!--[--><!--]--></div><main data-v-40d23075><!--[--><article class="markdown-body" data-v-6c2349ae><p><!--[-->由于学校社团的招新需要，我写了一个依赖于 go-cqhttp 运行的 QQ Bot，并没有实现什么花里胡哨的功能，只是实现了关键词回复和新人入群时的欢迎语。因为没考虑后续维护的问题，代码也写得比较草，但毕竟是能跑。这么一个小型的程序并不会占用的多少的服务器资源，单独为这么一个 Bot 去开一台国内的 vps 似乎是有些大材小用了，刚好我手上有一台运行在 OpenWRT 上的 Phicomm N1 盒子，反正也是 Linux 系统，便打算拿来挂 QQ Bot。<!--]--></p><h2 id="安装-jdk" class="prose-heading prose-h2" data-v-a22a06c0><!--[-->安装 JDK<!--]--><a href="#安装-jdk" class="heading-anchor" aria-label="链接到此标题" data-v-a22a06c0><span class="anchor-icon" data-v-a22a06c0>#</span></a></h2><p><!--[-->由于腾讯近几个月对于 Bot 风控非常严格，所以不得不采用 SignServer 项目 <a href="https://github.com/fuqiuluo/unidbg-fetch-qsign" rel="nofollow"><!--[-->fuqiuluo/unidbg-fetch-qsign<!--]--></a> 来确保 Bot 账号不会被风控一次保证 Bot 运行的稳定性。而这个项目又是使用 Java 开发的，因此需要先安装 JDK/JRE。但 OpenWRT 的开发者可能并没有考虑到在路由器设备上运行 Java 程序的需求，因此 OpenWRT 的源里面是没有预先打包 JDK 的，因此我们需要额外安装。我直接 google 搜索了 <code><!--[-->install java on openwrt<!--]--></code> 的关键词，在 Github 找到了这个脚本: <a href="https://gist.github.com/simonswine/64773a80e748f36615e3251234f29d1d%E3%80%82%E4%BD%86%E5%BE%88%E9%81%97%E6%86%BE%EF%BC%8C%E4%BB%A3%E7%A0%81%E8%B7%91%E4%B8%8D%E8%B5%B7%E6%9D%A5%EF%BC%8C%E4%B8%8B%E8%BD%BD%E6%97%B6%E6%8F%90%E7%A4%BA" rel="nofollow"><!--[-->https://gist.github.com/simonswine/64773a80e748f36615e3251234f29d1d。但很遗憾，代码跑不起来，下载时提示<!--]--></a> 404。于是我打开脚本细细一看，脚本中 jdk 的版本号和设备的架构均需要改动。具体改动如下:<!--]--></p><pre class="language-diff shiki shiki-themes one-light one-dark-pro" style="" data-v-a9c19cc1><!--[--><code><span class="line" line="1"><span class="sJa8x">- REVISION=8.212.04-r0
</span></span><span class="line" line="2"><span class="sDhpE">+ REVISION=8.302.08-r1
</span></span><span class="line" line="3"><span class="sW2Sy"># 版本号请自行去仓库内翻最新的
</span></span><span class="line" line="4"><span class="s5ixo">......
</span></span><span class="line" line="5"><span class="sJa8x">- URL=http://dl-cdn.alpinelinux.org/alpine/v3.10/community/armv7/
</span></span><span class="line" line="6"><span class="sDhpE">+ URL=http://dl-cdn.alpinelinux.org/alpine/v3.14/community/aarch64/
</span></span><span class="line" line="7"><span class="s5ixo">......
</span></span><span class="line" line="8"><span class="sJa8x">- # verify packages
</span></span><span class="line" line="9"><span class="sJa8x">- sha256sum -c &lt;&lt;EOF
</span></span><span class="line" line="10"><span class="sJa8x">- e2fce9ee7348e9322c542206c3c3949e40690716d65e9f0e44dbbfca95d59d8c  openjdk8-8.212.04-r0.apk
</span></span><span class="line" line="11"><span class="sJa8x">- 26ad786ff1ebeeb7cd24abee10bc56211a026a2d871cf161bb309563e1fcbabc  openjdk8-jre-8.212.04-r0.apk
</span></span><span class="line" line="12"><span class="sJa8x">- 947d5f72ed2dc367c97d1429158913c9366f9c6ae01b7311dd8546b10ded8743  openjdk8-jre-base-- 8.212.04-r0.apk
</span></span><span class="line" line="13"><span class="sJa8x">- c6a65402bf0a7051c60b45e1c6a8f4277a68a8b7e807078f20db17e0233dea8e  openjdk8-jre-lib-8.212.04-r0.apk
</span></span><span class="line" line="14"><span class="sJa8x">- EOF
</span></span><span class="line" line="15"><span class="sW2Sy"># 我这里直接将 sha256 校验给删除了，有兴趣可以自己去更新这几个文件的文件名和其对应的哈希值
</span></span></code><!--]--></pre><p><!--[-->随后 <code><!--[-->chmod +x<!--]--></code> 授予脚本可执行权限后直接执行，我们就将 alpine linux 上的 openjdk 成功解包并安装到了我们的 OpenWRT 中，我们只需要配置好环境变量即可完成安装。但我又比较懒，我看见 SignServer 的启动脚本里是可以通过读取 <code><!--[-->$JAVA_HOME<!--]--></code> 来获取 Java 二进制可执行文件的代码逻辑，于是我便在每次启动 SignServer 脚本前提前执行 <code><!--[-->export JAVA_HOME=/opt/java-1.8-openjdk<!--]--></code> 即可。<!--]--></p><h2 id="安装-screen" class="prose-heading prose-h2" data-v-a22a06c0><!--[-->安装 screen<!--]--><a href="#安装-screen" class="heading-anchor" aria-label="链接到此标题" data-v-a22a06c0><span class="anchor-icon" data-v-a22a06c0>#</span></a></h2><p><!--[-->相比起前面 JDK 的安装，这一步 screen 的安装反而没有那么麻烦，<a href="https://openwrt.org/packages/pkgdata/screen" rel="nofollow"><!--[-->在最新版本的 OpenWRT 源中，screen 已经被包括进去了<!--]--></a>，我们直接把 OpenWRT 换好源，从源里就可以安装。<!--]--></p><pre class="language-bash shiki shiki-themes one-light one-dark-pro" style="" data-v-a9c19cc1><!--[--><code><span class="line" line="1"><span class="sAdtL">opkg</span><span class="sDhpE"> update
</span></span><span class="line" line="2"><span class="sAdtL">opkg</span><span class="sDhpE"> install</span><span class="sDhpE"> screen
</span></span></code><!--]--></pre><h2 id="下载-fixed-版本的-go-cqhttp" class="prose-heading prose-h2" data-v-a22a06c0><!--[-->下载 fixed 版本的 go-cqhttp<!--]--><a href="#下载-fixed-版本的-go-cqhttp" class="heading-anchor" aria-label="链接到此标题" data-v-a22a06c0><span class="anchor-icon" data-v-a22a06c0>#</span></a></h2><p><!--[-->由于 SignServer 更新，在其请求中多添加了 key 的参数要求，导致原版 go-cqhttp 的最新 release 中释出的二进制文件无法适配最新版的 SignServer，我暂时选用了一个<a href="https://github.com/tomato-aoarasi/go-cqhttp-1.1.0-sign-fixed/" rel="nofollow"><!--[-->修复了这个问题的 fork<!--]--></a> 去运行 Bot。下载到 OpenWRT 后记得也要授予可执行文件。<!--]--></p><h2 id="安装-python-脚本中所需要使用到的库" class="prose-heading prose-h2" data-v-a22a06c0><!--[-->安装 Python 脚本中所需要使用到的库<!--]--><a href="#安装-python-脚本中所需要使用到的库" class="heading-anchor" aria-label="链接到此标题" data-v-a22a06c0><span class="anchor-icon" data-v-a22a06c0>#</span></a></h2><p><!--[-->OpenWRT 自带了 python 和 pip，这让我很欣慰。直接使用 pip 安装 flask 和 xlrd 等库即可，完全没有难度。<!--]--></p><h2 id="运行-signserver" class="prose-heading prose-h2" data-v-a22a06c0><!--[-->运行 SignServer<!--]--><a href="#运行-signserver" class="heading-anchor" aria-label="链接到此标题" data-v-a22a06c0><span class="anchor-icon" data-v-a22a06c0>#</span></a></h2><p><!--[-->这一步很简单，将原项目的 Release 下载下来解压后上传到 OpenWRT 的某个路径后，开个 screen 窗口，设置好 JAVA_HOME 变量后再去调用 SignServer 中自带的 shell 脚本即可<!--]--></p><h2 id="运行-go-cqhttp" class="prose-heading prose-h2" data-v-a22a06c0><!--[-->运行 go-cqhttp<!--]--><a href="#运行-go-cqhttp" class="heading-anchor" aria-label="链接到此标题" data-v-a22a06c0><span class="anchor-icon" data-v-a22a06c0>#</span></a></h2><p><!--[-->这一步也很简单，得益于 go 静态链接的特性，我们不需要为 go-cqhttp 安装任何额外的依赖就可以执行 Release 中的二进制文件，直接将我们在 PC 上登录好的 session、配置好的 device.json、config.yml 等文件上传到 N1 ，开个 screen 窗口运行即可。<!--]--></p><h2 id="运行主程序" class="prose-heading prose-h2" data-v-a22a06c0><!--[-->运行主程序<!--]--><a href="#运行主程序" class="heading-anchor" aria-label="链接到此标题" data-v-a22a06c0><span class="anchor-icon" data-v-a22a06c0>#</span></a></h2><p><!--[-->这个没什么好讲的，同样是开个 screen 窗口运行 <code><!--[-->python main.py<!--]--></code> 的事情<!--]--></p><p><!--[-->python 代码如下:<!--]--></p><pre class="language-python shiki shiki-themes one-light one-dark-pro" style="" data-v-a9c19cc1><!--[--><code><span class="line" line="1"><span class="sLKXg">from</span><span class="s5ixo"> flask </span><span class="sLKXg">import</span><span class="s5ixo"> Flask,request
</span></span><span class="line" line="2"><span class="sLKXg">import</span><span class="s5ixo"> requests
</span></span><span class="line" line="3"><span class="sLKXg">import</span><span class="s5ixo"> xlrd
</span></span><span class="line" line="4"><span emptylineplaceholder="true">
</span></span><span class="line" line="5"><span class="sW2Sy"># 读取 xls 中的关键词以及回应语句，将其加载到 dict 数据结构中
</span></span><span class="line" line="6"><span class="s5ixo">_data2 </span><span class="sknuh">=</span><span class="s5ixo"> xlrd.</span><span class="slOjB">open_workbook</span><span class="s5ixo">(</span><span class="sDhpE">&#39;/root/8yue222.xls&#39;</span><span class="s5ixo">)
</span></span><span class="line" line="7"><span class="s5ixo">main_table2 </span><span class="sknuh">=</span><span class="s5ixo"> _data2.</span><span class="slOjB">sheets</span><span class="s5ixo">()[</span><span class="sAGMh">0</span><span class="s5ixo">]
</span></span><span class="line" line="8"><span class="s5ixo">key_lst2 </span><span class="sknuh">=</span><span class="s5ixo"> main_table2.</span><span class="slOjB">col_values</span><span class="s5ixo">(</span><span class="sAGMh">0</span><span class="s5ixo">)[</span><span class="sAGMh">1</span><span class="s5ixo">:]
</span></span><span class="line" line="9"><span class="s5ixo">value_lst2 </span><span class="sknuh">=</span><span class="s5ixo"> main_table2.</span><span class="slOjB">col_values</span><span class="s5ixo">(</span><span class="sAGMh">1</span><span class="s5ixo">)[</span><span class="sAGMh">1</span><span class="s5ixo">:]
</span></span><span class="line" line="10"><span class="s5ixo">final_dict </span><span class="sknuh">=</span><span class="s_Sar"> dict</span><span class="s5ixo">(</span><span class="s_Sar">zip</span><span class="s5ixo">(key_lst2,value_lst2))
</span></span><span class="line" line="11"><span class="sW2Sy"># 读取第二份 xls，并对相同的关键词做覆盖
</span></span><span class="line" line="12"><span class="s5ixo">_data </span><span class="sknuh">=</span><span class="s5ixo"> xlrd.</span><span class="slOjB">open_workbook</span><span class="s5ixo">(</span><span class="sDhpE">&#39;/root/daihao.xls&#39;</span><span class="s5ixo">)
</span></span><span class="line" line="13"><span class="s5ixo">main_table </span><span class="sknuh">=</span><span class="s5ixo"> _data.</span><span class="slOjB">sheets</span><span class="s5ixo">()[</span><span class="sAGMh">0</span><span class="s5ixo">]
</span></span><span class="line" line="14"><span class="s5ixo">key_lst </span><span class="sknuh">=</span><span class="s5ixo"> main_table.</span><span class="slOjB">col_values</span><span class="s5ixo">(</span><span class="sAGMh">4</span><span class="s5ixo">)[</span><span class="sAGMh">1</span><span class="s5ixo">:]
</span></span><span class="line" line="15"><span class="s5ixo">key_lst </span><span class="sknuh">=</span><span class="s5ixo"> [</span><span class="s_Sar">str</span><span class="s5ixo">(</span><span class="s_Sar">int</span><span class="s5ixo">(item)) </span><span class="sLKXg">if</span><span class="s_Sar"> type</span><span class="s5ixo">(item) </span><span class="sknuh">==</span><span class="s_Sar"> float</span><span class="sLKXg"> else</span><span class="s5ixo"> item </span><span class="sLKXg">for</span><span class="s5ixo"> item </span><span class="sLKXg">in</span><span class="s5ixo"> key_lst </span><span class="sLKXg">if</span><span class="s5ixo"> item </span><span class="sknuh">!=</span><span class="sDhpE"> &#39;&#39;</span><span class="s5ixo">]
</span></span><span class="line" line="16"><span class="s5ixo">key_lst.</span><span class="slOjB">remove</span><span class="s5ixo">(</span><span class="sDhpE">&#39;Gary&#39;</span><span class="s5ixo">)
</span></span><span class="line" line="17"><span class="s5ixo">value_lst </span><span class="sknuh">=</span><span class="s5ixo"> main_table.</span><span class="slOjB">col_values</span><span class="s5ixo">(</span><span class="sAGMh">5</span><span class="s5ixo">)[</span><span class="sAGMh">1</span><span class="s5ixo">:]
</span></span><span class="line" line="18"><span class="s5ixo">value_lst </span><span class="sknuh">=</span><span class="s5ixo"> [</span><span class="s_Sar">str</span><span class="s5ixo">(</span><span class="s_Sar">int</span><span class="s5ixo">(item)) </span><span class="sLKXg">if</span><span class="s_Sar"> type</span><span class="s5ixo">(item) </span><span class="sknuh">==</span><span class="s_Sar"> float</span><span class="sLKXg"> else</span><span class="s5ixo"> item </span><span class="sLKXg">for</span><span class="s5ixo"> item </span><span class="sLKXg">in</span><span class="s5ixo"> value_lst </span><span class="sLKXg">if</span><span class="s5ixo"> item </span><span class="sknuh">!=</span><span class="sDhpE"> &#39;&#39;</span><span class="s5ixo">]
</span></span><span class="line" line="19"><span class="s5ixo">final_dict.</span><span class="slOjB">update</span><span class="s5ixo">(</span><span class="s_Sar">dict</span><span class="s5ixo">(</span><span class="s_Sar">zip</span><span class="s5ixo">(key_lst,value_lst)))
</span></span><span class="line" line="20"><span emptylineplaceholder="true">
</span></span><span class="line" line="21"><span class="s5ixo">app </span><span class="sknuh">=</span><span class="slOjB"> Flask</span><span class="s5ixo">(</span><span class="sJa8x">__name__</span><span class="s5ixo">)
</span></span><span class="line" line="22"><span class="sLKXg">class</span><span class="sC09Y"> API</span><span class="s5ixo">:
</span></span><span class="line" line="23"><span class="sAdtL">        @</span><span class="s_Sar">staticmethod
</span></span><span class="line" line="24"><span class="sLKXg">        def</span><span class="sAdtL"> send</span><span class="s5ixo">(</span><span class="so_Uh">message</span><span class="s5ixo">):
</span></span><span class="line" line="25"><span class="s5ixo">                url </span><span class="sknuh">=</span><span class="sDhpE"> &quot;http://127.0.0.1:5700/send_msg&quot;
</span></span><span class="line" line="26"><span class="s5ixo">                data </span><span class="sknuh">=</span><span class="s5ixo"> request.</span><span class="slOjB">get_json</span><span class="s5ixo">()
</span></span><span class="line" line="27"><span class="s5ixo">                params </span><span class="sknuh">=</span><span class="s5ixo"> {
</span></span><span class="line" line="28"><span class="sDhpE">                        &quot;group_id&quot;</span><span class="s5ixo">:data[</span><span class="sDhpE">&#39;group_id&#39;</span><span class="s5ixo">],
</span></span><span class="line" line="29"><span class="sDhpE">                        &quot;message&quot;</span><span class="s5ixo">:message
</span></span><span class="line" line="30"><span class="s5ixo">                }
</span></span><span class="line" line="31"><span class="s5ixo">                requests.</span><span class="slOjB">get</span><span class="s5ixo">(url,</span><span class="sp7wS">params</span><span class="sknuh">=</span><span class="s5ixo">params)
</span></span><span class="line" line="32"><span emptylineplaceholder="true">
</span></span><span class="line" line="33"><span class="sAdtL">@app</span><span class="siaei">.</span><span class="sAdtL">route</span><span class="s5ixo">(</span><span class="sDhpE">&#39;/&#39;</span><span class="s5ixo">,</span><span class="sp7wS"> methods</span><span class="sknuh">=</span><span class="s5ixo">[</span><span class="sDhpE">&quot;POST&quot;</span><span class="s5ixo">])
</span></span><span class="line" line="34"><span class="sLKXg">def</span><span class="sAdtL"> post_data</span><span class="s5ixo">():
</span></span><span class="line" line="35"><span class="s5ixo">    data </span><span class="sknuh">=</span><span class="s5ixo"> request.</span><span class="slOjB">get_json</span><span class="s5ixo">()
</span></span><span class="line" line="36"><span class="s_Sar">    print</span><span class="s5ixo">(data)
</span></span><span class="line" line="37"><span class="sLKXg">    if</span><span class="s5ixo"> data[</span><span class="sDhpE">&#39;post_type&#39;</span><span class="s5ixo">] </span><span class="sknuh">==</span><span class="sDhpE"> &#39;message&#39;</span><span class="s5ixo">:
</span></span><span class="line" line="38"><span class="s5ixo">        message </span><span class="sknuh">=</span><span class="s5ixo"> data[</span><span class="sDhpE">&#39;message&#39;</span><span class="s5ixo">]
</span></span><span class="line" line="39"><span class="slOjB">        messagex</span><span class="s5ixo">()
</span></span><span class="line" line="40"><span class="sLKXg">    elif</span><span class="s5ixo"> data[</span><span class="sDhpE">&#39;post_type&#39;</span><span class="s5ixo">] </span><span class="sknuh">==</span><span class="sDhpE"> &#39;notice&#39;</span><span class="sLKXg"> and</span><span class="s5ixo"> data[</span><span class="sDhpE">&#39;notice_type&#39;</span><span class="s5ixo">] </span><span class="sknuh">==</span><span class="sDhpE"> &#39;group_increase&#39;</span><span class="s5ixo">:
</span></span><span class="line" line="41"><span class="slOjB">        welcome</span><span class="s5ixo">()
</span></span><span class="line" line="42"><span class="sLKXg">    else</span><span class="s5ixo">:
</span></span><span class="line" line="43"><span class="s_Sar">        print</span><span class="s5ixo">(</span><span class="sDhpE">&quot;忽略消息&quot;</span><span class="s5ixo">)
</span></span><span class="line" line="44"><span emptylineplaceholder="true">
</span></span><span class="line" line="45"><span class="sLKXg">    return</span><span class="sDhpE"> &quot;OK&quot;
</span></span><span class="line" line="46"><span emptylineplaceholder="true">
</span></span><span class="line" line="47"><span class="sLKXg">def</span><span class="sAdtL"> messagex</span><span class="s5ixo">():
</span></span><span class="line" line="48"><span class="s5ixo">        data </span><span class="sknuh">=</span><span class="s5ixo"> request.</span><span class="slOjB">get_json</span><span class="s5ixo">()
</span></span><span class="line" line="49"><span class="s5ixo">        message </span><span class="sknuh">=</span><span class="s5ixo"> data[</span><span class="sDhpE">&#39;message&#39;</span><span class="s5ixo">].</span><span class="slOjB">replace</span><span class="s5ixo">(</span><span class="sDhpE">&#39;％&#39;</span><span class="s5ixo">,</span><span class="sDhpE">&#39;%&#39;</span><span class="s5ixo">)
</span></span><span class="line" line="50"><span class="sLKXg">        for</span><span class="s5ixo"> key </span><span class="sLKXg">in</span><span class="s5ixo"> final_dict.</span><span class="slOjB">keys</span><span class="s5ixo">():
</span></span><span class="line" line="51"><span class="sLKXg">                if</span><span class="s5ixo"> key </span><span class="sknuh">==</span><span class="s5ixo"> message:
</span></span><span class="line" line="52"><span class="sYebD">                        API</span><span class="s5ixo">.</span><span class="slOjB">send</span><span class="s5ixo">(final_dict[key])
</span></span><span class="line" line="53"><span class="sLKXg">                        break
</span></span><span class="line" line="54"><span emptylineplaceholder="true">
</span></span><span class="line" line="55"><span class="sLKXg">def</span><span class="sAdtL"> welcome</span><span class="s5ixo">():
</span></span><span class="line" line="56"><span class="s5ixo">        data </span><span class="sknuh">=</span><span class="s5ixo"> request.</span><span class="slOjB">get_json</span><span class="s5ixo">()
</span></span><span class="line" line="57"><span class="s5ixo">        group_id </span><span class="sknuh">=</span><span class="s5ixo"> data[</span><span class="sDhpE">&#39;group_id&#39;</span><span class="s5ixo">]
</span></span><span class="line" line="58"><span class="s5ixo">        user_id </span><span class="sknuh">=</span><span class="s5ixo"> data[</span><span class="sDhpE">&#39;user_id&#39;</span><span class="s5ixo">]
</span></span><span class="line" line="59"><span class="sYebD">        API</span><span class="s5ixo">.</span><span class="slOjB">send</span><span class="s5ixo">(</span><span class="sDhpE">&quot;[CQ:at,qq=</span><span class="sAGMh">{}</span><span class="sDhpE">] 欢迎来到浙江工业大学，精弘网络欢迎各位的到来！如果想进一步了解我们，请戳精弘首页：www.jh.zjut.edu.cn</span><span class="s_Sar">\n</span><span class="sDhpE">输入 菜单 获取精小弘机器人的菜单 哦！</span><span class="s_Sar">\n</span><span class="sDhpE">请及时修改群名片</span><span class="s_Sar">\n</span><span class="sDhpE">格式如下：姓名+专业/大类&quot;</span><span class="s5ixo">.</span><span class="slOjB">format</span><span class="s5ixo">(user_id))
</span></span><span class="line" line="60"><span emptylineplaceholder="true">
</span></span><span class="line" line="61"><span class="sLKXg">if</span><span class="sJa8x"> __name__</span><span class="sknuh"> ==</span><span class="sDhpE"> &#39;__main__&#39;</span><span class="s5ixo">:
</span></span><span class="line" line="62"><span class="s5ixo">    app.</span><span class="slOjB">run</span><span class="s5ixo">(</span><span class="sp7wS">host</span><span class="sknuh">=</span><span class="sDhpE">&#39;0.0.0.0&#39;</span><span class="s5ixo">, </span><span class="sp7wS">port</span><span class="sknuh">=</span><span class="sAGMh">5701</span><span class="s5ixo">)
</span></span></code><!--]--></pre><blockquote><!--[--><p><!--[-->参考资料:<!--]--></p><p><!--[--><a href="https://gist.github.com/simonswine/64773a80e748f36615e3251234f29d1d" rel="nofollow"><!--[-->https://gist.github.com/simonswine/64773a80e748f36615e3251234f29d1d<!--]--></a><!--]--></p><p><!--[--><a href="https://blog.csdn.net/qq_64126275/article/details/128586651" rel="nofollow"><!--[-->https://blog.csdn.net/qq_64126275/article/details/128586651<!--]--></a><!--]--></p><!--]--></blockquote><style>html pre.shiki code .sJa8x, html code.shiki .sJa8x{--shiki-default:#E45649;--shiki-dark:#E06C75}html pre.shiki code .sDhpE, html code.shiki .sDhpE{--shiki-default:#50A14F;--shiki-dark:#98C379}html pre.shiki code .sW2Sy, html code.shiki .sW2Sy{--shiki-default:#A0A1A7;--shiki-default-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic}html pre.shiki code .s5ixo, html code.shiki .s5ixo{--shiki-default:#383A42;--shiki-dark:#ABB2BF}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .sAdtL, html code.shiki .sAdtL{--shiki-default:#4078F2;--shiki-dark:#61AFEF}html pre.shiki code .sLKXg, html code.shiki .sLKXg{--shiki-default:#A626A4;--shiki-dark:#C678DD}html pre.shiki code .sknuh, html code.shiki .sknuh{--shiki-default:#383A42;--shiki-dark:#56B6C2}html pre.shiki code .slOjB, html code.shiki .slOjB{--shiki-default:#383A42;--shiki-dark:#61AFEF}html pre.shiki code .sAGMh, html code.shiki .sAGMh{--shiki-default:#986801;--shiki-dark:#D19A66}html pre.shiki code .s_Sar, html code.shiki .s_Sar{--shiki-default:#0184BC;--shiki-dark:#56B6C2}html pre.shiki code .sC09Y, html code.shiki .sC09Y{--shiki-default:#C18401;--shiki-dark:#E5C07B}html pre.shiki code .so_Uh, html code.shiki .so_Uh{--shiki-default:#986801;--shiki-default-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic}html pre.shiki code .sp7wS, html code.shiki .sp7wS{--shiki-default:#986801;--shiki-default-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic}html pre.shiki code .siaei, html code.shiki .siaei{--shiki-default:#4078F2;--shiki-dark:#ABB2BF}html pre.shiki code .sYebD, html code.shiki .sYebD{--shiki-default:#383A42;--shiki-dark:#D19A66}</style></article><hr class="article-end-hr" data-v-6c2349ae><div class="tags" data-v-6c2349ae><svg viewBox="0 0 512 512" width="1.2em" height="1.2em" data-v-6c2349ae><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M403.29 32H280.36a14.46 14.46 0 0 0-10.2 4.2L24.4 281.9a28.85 28.85 0 0 0 0 40.7l117 117a28.86 28.86 0 0 0 40.71 0L427.8 194a14.46 14.46 0 0 0 4.2-10.2v-123A28.66 28.66 0 0 0 403.29 32"></path><path fill="currentColor" d="M352 144a32 32 0 1 1 32-32a32 32 0 0 1-32 32"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="m230 480l262-262a13.8 13.8 0 0 0 4-10V80"></path></svg><!--[--><a href="/tags/Linux/" class="" data-v-6c2349ae>#Linux</a><a href="/tags/Network/" class="" data-v-6c2349ae>#Network</a><a href="/tags/Bot/" class="" data-v-6c2349ae>#Bot</a><!--]--></div><nav class="post-navigation" data-v-6c2349ae data-v-a35c130b><a href="/2023/08/04/static-webpage-deployment-for-a-beginner/" class="nav-button prev" data-v-a35c130b><svg viewBox="0 0 24 24" width="1.2em" height="1.2em" class="nav-arrow" data-v-a35c130b><path fill="currentColor" d="M10 22L0 12L10 2l1.775 1.775L3.55 12l8.225 8.225z"></path></svg><div class="nav-content" data-v-a35c130b><span class="nav-label" data-v-a35c130b>上一篇</span><span class="nav-title" data-v-a35c130b>从零开始的静态网页部署（到个人云服务器）</span></div></a><a href="/2023/06/24/connect-china-mobile-with-router-in-zjut-dormitory/" class="nav-button next" data-v-a35c130b><svg viewBox="0 0 24 24" width="1.2em" height="1.2em" class="nav-arrow" data-v-a35c130b><path fill="currentColor" d="M8.025 22L6.25 20.225L14.475 12L6.25 3.775L8.025 2l10 10z"></path></svg><div class="nav-content" data-v-a35c130b><span class="nav-label" data-v-a35c130b>下一篇</span><span class="nav-title" data-v-a35c130b>在浙工大宿舍使用路由器连接移动网络(校园网)</span></div></a></nav><div id="waline" data-v-6c2349ae><span></span></div><!--]--></main><div class="after-main side" data-v-40d23075><!--[--><aside data-v-6c2349ae><nav class="toc" data-v-6c2349ae data-v-bdce45f2><div class="toc-title" data-v-bdce45f2>目录</div><ul class="toc-list" data-v-bdce45f2><!--[--><li class="toc-item toc-level-2" data-v-bdce45f2><a href="#安装-jdk" data-v-bdce45f2>安装 JDK</a></li><li class="toc-item toc-level-2" data-v-bdce45f2><a href="#安装-screen" data-v-bdce45f2>安装 screen</a></li><li class="toc-item toc-level-2" data-v-bdce45f2><a href="#下载-fixed-版本的-go-cqhttp" data-v-bdce45f2>下载 fixed 版本的 go-cqhttp</a></li><li class="toc-item toc-level-2" data-v-bdce45f2><a href="#安装-python-脚本中所需要使用到的库" data-v-bdce45f2>安装 Python 脚本中所需要使用到的库</a></li><li class="toc-item toc-level-2" data-v-bdce45f2><a href="#运行-signserver" data-v-bdce45f2>运行 SignServer</a></li><li class="toc-item toc-level-2" data-v-bdce45f2><a href="#运行-go-cqhttp" data-v-bdce45f2>运行 go-cqhttp</a></li><li class="toc-item toc-level-2" data-v-bdce45f2><a href="#运行主程序" data-v-bdce45f2>运行主程序</a></li><!--]--></ul></nav></aside><!--]--></div></div><footer style="min-height:120px;background-color:#ff9d00;background-repeat:no-repeat;background-position:center center;background-size:cover;background-image:url(&quot;data:image/svg+xml,%3Csvg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;100%25&#39; height=&#39;100%25&#39; viewBox=&#39;0 0 1600 800&#39;%3E%3Cg stroke=&#39;%23000&#39; stroke-width=&#39;66.7&#39; stroke-opacity=&#39;0.05&#39; %3E%3Ccircle fill=&#39;%23ff9d00&#39; cx=&#39;0&#39; cy=&#39;0&#39; r=&#39;1800&#39;/%3E%3Ccircle fill=&#39;%23fb8d17&#39; cx=&#39;0&#39; cy=&#39;0&#39; r=&#39;1700&#39;/%3E%3Ccircle fill=&#39;%23f47d24&#39; cx=&#39;0&#39; cy=&#39;0&#39; r=&#39;1600&#39;/%3E%3Ccircle fill=&#39;%23ed6e2d&#39; cx=&#39;0&#39; cy=&#39;0&#39; r=&#39;1500&#39;/%3E%3Ccircle fill=&#39;%23e35f34&#39; cx=&#39;0&#39; cy=&#39;0&#39; r=&#39;1400&#39;/%3E%3Ccircle fill=&#39;%23d85239&#39; cx=&#39;0&#39; cy=&#39;0&#39; r=&#39;1300&#39;/%3E%3Ccircle fill=&#39;%23cc453e&#39; cx=&#39;0&#39; cy=&#39;0&#39; r=&#39;1200&#39;/%3E%3Ccircle fill=&#39;%23be3941&#39; cx=&#39;0&#39; cy=&#39;0&#39; r=&#39;1100&#39;/%3E%3Ccircle fill=&#39;%23b02f43&#39; cx=&#39;0&#39; cy=&#39;0&#39; r=&#39;1000&#39;/%3E%3Ccircle fill=&#39;%23a02644&#39; cx=&#39;0&#39; cy=&#39;0&#39; r=&#39;900&#39;/%3E%3Ccircle fill=&#39;%23901e44&#39; cx=&#39;0&#39; cy=&#39;0&#39; r=&#39;800&#39;/%3E%3Ccircle fill=&#39;%23801843&#39; cx=&#39;0&#39; cy=&#39;0&#39; r=&#39;700&#39;/%3E%3Ccircle fill=&#39;%236f1341&#39; cx=&#39;0&#39; cy=&#39;0&#39; r=&#39;600&#39;/%3E%3Ccircle fill=&#39;%235e0f3d&#39; cx=&#39;0&#39; cy=&#39;0&#39; r=&#39;500&#39;/%3E%3Ccircle fill=&#39;%234e0c38&#39; cx=&#39;0&#39; cy=&#39;0&#39; r=&#39;400&#39;/%3E%3Ccircle fill=&#39;%233e0933&#39; cx=&#39;0&#39; cy=&#39;0&#39; r=&#39;300&#39;/%3E%3Ccircle fill=&#39;%232e062c&#39; cx=&#39;0&#39; cy=&#39;0&#39; r=&#39;200&#39;/%3E%3Ccircle fill=&#39;%23210024&#39; cx=&#39;0&#39; cy=&#39;0&#39; r=&#39;100&#39;/%3E%3C/g%3E%3C/svg%3E&quot;);" data-v-40d23075 data-v-cc99c751><div class="footer-mask" data-v-cc99c751></div><div class="footer-content" data-v-cc99c751><div data-v-cc99c751>©2020 - 2025 By zhullyb</div><div class="promo-card" data-v-cc99c751 data-v-f771117d><div class="card-header" data-v-f771117d><div class="header-left" data-v-f771117d><div class="logo-yxvm-container" data-v-f771117d><a href="https://yxvm.com/" target="_blank" rel="noopener noreferrer" data-v-f771117d><img src="/static/yxvm-logo.png" alt="yxvm" class="logo-img" data-v-f771117d></a></div><span class="plus-separator" data-v-f771117d>+</span><div class="logo-nodeseek-container" data-v-f771117d><a href="https://www.nodeseek.com" target="_blank" rel="noopener noreferrer" data-v-f771117d><img src="/static/logo2.png" alt="nodeseek" class="logo-img" data-v-f771117d></a></div></div><div data-v-f771117d><a href="https://github.com/NodeSeekDev/NodeSupport" target="_blank" rel="noopener noreferrer" class="github-link" data-v-f771117d><svg class="github-icon" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 20 20" data-v-f771117d><g stroke-width="0" id="SVGRepo_bgCarrier" data-v-f771117d></g><g stroke-linejoin="round" stroke-linecap="round" id="SVGRepo_tracerCarrier" data-v-f771117d></g><g id="SVGRepo_iconCarrier" data-v-f771117d><title data-v-f771117d>github [#142]</title><desc data-v-f771117d>Created with Sketch.</desc><defs data-v-f771117d></defs><g stroke-width="1" stroke="none" id="Page-1" data-v-f771117d><g transform="translate(-140.000000, -7559.000000)" id="Dribbble-Light-Preview" data-v-f771117d><g transform="translate(56.000000, 160.000000)" id="icons" data-v-f771117d><path id="github-[#142]" d="M94,7399 C99.523,7399 104,7403.59 104,7409.253 C104,7413.782 101.138,7417.624 97.167,7418.981 C96.66,7419.082 96.48,7418.762 96.48,7418.489 C96.48,7418.151 96.492,7417.047 96.492,7415.675 C96.492,7414.719 96.172,7414.095 95.813,7413.777 C98.04,7413.523 100.38,7412.656 100.38,7408.718 C100.38,7407.598 99.992,7406.684 99.35,7405.966 C99.454,7405.707 99.797,7404.664 99.252,7403.252 C99.252,7403.252 98.414,7402.977 96.505,7404.303 C95.706,7404.076 94.85,7403.962 94,7403.958 C93.15,7403.962 92.295,7404.076 91.497,7404.303 C89.586,7402.977 88.746,7403.252 88.746,7403.252 C88.203,7404.664 88.546,7405.707 88.649,7405.966 C88.01,7406.684 87.619,7407.598 87.619,7408.718 C87.619,7412.646 89.954,7413.526 92.175,7413.785 C91.889,7414.041 91.63,7414.493 91.54,7415.156 C90.97,7415.418 89.522,7415.871 88.63,7414.304 C88.63,7414.304 88.101,7413.319 87.097,7413.247 C87.097,7413.247 86.122,7413.234 87.029,7413.87 C87.029,7413.87 87.684,7414.185 88.139,7415.37 C88.139,7415.37 88.726,7417.2 91.508,7416.58 C91.513,7417.437 91.522,7418.245 91.522,7418.489 C91.522,7418.76 91.338,7419.077 90.839,7418.982 C86.865,7417.627 84,7413.783 84,7409.253 C84,7403.59 88.478,7399 94,7399" data-v-f771117d></path></g></g></g></g></svg></a></div></div><h1 class="card-title" data-v-f771117d> NodeSupport Project </h1><p class="card-description" data-v-f771117d> Provide free server sponsorship to high-quality blogs, channels, open-source projects, and popular app. </p><div class="card-footer" data-v-f771117d><span data-v-f771117d>Support ID:</span><span data-v-f771117d>61</span></div></div><!----></div></footer></div><!--]--></div><div id="teleports"></div><script type="application/ld+json" data-nuxt-schema-org="true" data-hid="schema-org-graph">{"@context":"https://schema.org","@graph":[{"@id":"https://zhul.in/#website","@type":"WebSite","description":"这里是我的个人博客，专注于分享技术干货、学习心得和生活感悟，涵盖前端开发、后端架构、人工智能、编程技巧、工具推荐等多个领域。我持续更新原创内容，记录成长过程中的思考与收获，致力于帮助更多开发者和技术爱好者提升技能、拓展视野。如果你对技术、产品和互联网行业感兴趣，相信你能在这里找到有价值的知识与灵感。","inLanguage":"zh-CN","name":"竹林里有冰的博客","url":"https://zhul.in/","workTranslation":[{"@id":"https://zhul.in/#website"},{"@id":"https://zhul.in/en/#website"}]},{"@id":"https://zhul.in/2023/07/31/run-qq-bot-on-phicomm-n1-openwrt/#webpage","@type":"WebPage","description":"由于学校社团的招新需要，我写了一个依赖于 go-cqhttp 运行的 QQ Bot，并没有实现什么花里胡哨的功能，只是实现了关键词回复和新人入群时的欢迎语。因为没考虑后续维护的问题，代码也写得比较草，但毕竟是能跑。这么一个小型的程序并不会占用的多少的服务器资源，单独为这么一个 Bot 去开一台国内的 vps 似乎是有些大材小用了，刚好我手上有一台运行在 OpenWRT 上的 Phicomm N1 盒子，反正也是 Linux 系统，便打算拿来挂 QQ Bot。","name":"在运行OpenWRT的N1盒子上部署 QQBot","url":"https://zhul.in/2023/07/31/run-qq-bot-on-phicomm-n1-openwrt/","isPartOf":{"@id":"https://zhul.in/#website"},"potentialAction":[{"@type":"ReadAction","target":["https://zhul.in/2023/07/31/run-qq-bot-on-phicomm-n1-openwrt/"]}]}]}</script><script type="application/json" data-nuxt-data="nuxt-app" data-ssr="true" id="__NUXT_DATA__" data-src="/2023/07/31/run-qq-bot-on-phicomm-n1-openwrt/_payload.json?82c6b105-e6bd-4a90-95e3-27d8baeede40">[{"state":1,"once":21,"_errors":22,"serverRendered":6,"path":24,"prerenderedAt":25},["Reactive",2],{"$si18n:cached-locale-configs":3,"$si18n:resolved-locale":9,"$snuxt-seo-utils:routeRules":10,"$ssite-config":11},{"zh":4,"en":7},{"fallbacks":5,"cacheable":6},[],true,{"fallbacks":8,"cacheable":6},[],"",{"head":-1,"seoMeta":-1},{"_priority":12,"currentLocale":16,"defaultLocale":16,"description":17,"env":18,"name":19,"trailingSlash":6,"url":20},{"name":13,"env":14,"url":13,"description":13,"defaultLocale":15,"trailingSlash":13,"currentLocale":15},-3,-15,-2,"zh-CN","这里是我的个人博客，专注于分享技术干货、学习心得和生活感悟，涵盖前端开发、后端架构、人工智能、编程技巧、工具推荐等多个领域。我持续更新原创内容，记录成长过程中的思考与收获，致力于帮助更多开发者和技术爱好者提升技能、拓展视野。如果你对技术、产品和互联网行业感兴趣，相信你能在这里找到有价值的知识与灵感。","production","竹林里有冰的博客","https://zhul.in/",["Set"],["ShallowReactive",23],{"post-2023-07-31-run-qq-bot-on-phicomm-n1-openwrt-zh":-1,"surround-2023-07-31-run-qq-bot-on-phicomm-n1-openwrt-zh":-1,"randomIndex/2023/07/31/run-qq-bot-on-phicomm-n1-openwrt/":-1,"language-switch-/2023/07/31/run-qq-bot-on-phicomm-n1-openwrt/-en":-1,"posts-search-sections":-1},"/2023/07/31/run-qq-bot-on-phicomm-n1-openwrt/",1763668863091]</script><script>window.__NUXT__={};window.__NUXT__.config={public:{content:{wsUrl:""},mdc:{components:{prose:true,map:{}},headings:{anchorLinks:{h1:false,h2:true,h3:true,h4:true,h5:false,h6:false}}},"seo-utils":{canonicalQueryWhitelist:["page","sort","filter","search","q","category","tag"],canonicalLowercase:true},i18n:{baseUrl:"",defaultLocale:"zh",rootRedirect:"",redirectStatusCode:302,skipSettingLocaleOnNavigate:false,locales:[{code:"zh",language:"zh-CN",name:"简体中文",_hreflang:"zh-CN",_sitemap:"zh-CN"},{code:"en",language:"en-US",name:"English",_hreflang:"en-US",_sitemap:"en-US"}],detectBrowserLanguage:false,experimental:{localeDetector:"",typedPages:true,typedOptionsAndMessages:false,alternateLinkCanonicalQueries:true,devCache:false,cacheLifetime:"",stripMessagesPayload:false,preload:false,strictSeo:false,nitroContextDetection:true,httpCacheDuration:10},domainLocales:{zh:{domain:""},en:{domain:""}}}},app:{baseURL:"/",buildId:"82c6b105-e6bd-4a90-95e3-27d8baeede40",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script></body></html>