[{"data":1,"prerenderedAt":1309},["ShallowReactive",2],{"post-2023-07-31-run-qq-bot-on-phicomm-n1-openwrt-zh":3,"surround-2023-07-31-run-qq-bot-on-phicomm-n1-openwrt-zh":1296,"randomIndex/2023/07/31/run-qq-bot-on-phicomm-n1-openwrt/":79,"language-switch-/2023/07/31/run-qq-bot-on-phicomm-n1-openwrt/-en":1308},{"title":4,"date":5,"path":6,"tags":7,"body":11,"description":17},"在运行OpenWRT的N1盒子上部署 QQBot","2023-07-31 04:11:31","/2023/07/31/run-qq-bot-on-phicomm-n1-openwrt",[8,9,10],"Linux","Network","Bot",{"type":12,"value":13,"toc":1287},"minimark",[14,18,23,45,149,164,168,177,203,207,216,220,223,227,230,234,237,240,247,250,1265,1283],[15,16,17],"p",{},"由于学校社团的招新需要，我写了一个依赖于 go-cqhttp 运行的 QQ Bot，并没有实现什么花里胡哨的功能，只是实现了关键词回复和新人入群时的欢迎语。因为没考虑后续维护的问题，代码也写得比较草，但毕竟是能跑。这么一个小型的程序并不会占用的多少的服务器资源，单独为这么一个 Bot 去开一台国内的 vps 似乎是有些大材小用了，刚好我手上有一台运行在 OpenWRT 上的 Phicomm N1 盒子，反正也是 Linux 系统，便打算拿来挂 QQ Bot。",[19,20,22],"h2",{"id":21},"安装-jdk","安装 JDK",[15,24,25,26,33,34,38,39,44],{},"由于腾讯近几个月对于 Bot 风控非常严格，所以不得不采用 SignServer 项目 ",[27,28,32],"a",{"href":29,"rel":30},"https://github.com/fuqiuluo/unidbg-fetch-qsign",[31],"nofollow","fuqiuluo/unidbg-fetch-qsign"," 来确保 Bot 账号不会被风控一次保证 Bot 运行的稳定性。而这个项目又是使用 Java 开发的，因此需要先安装 JDK/JRE。但 OpenWRT 的开发者可能并没有考虑到在路由器设备上运行 Java 程序的需求，因此 OpenWRT 的源里面是没有预先打包 JDK 的，因此我们需要额外安装。我直接 google 搜索了 ",[35,36,37],"code",{},"install java on openwrt"," 的关键词，在 Github 找到了这个脚本: ",[27,40,43],{"href":41,"rel":42},"https://gist.github.com/simonswine/64773a80e748f36615e3251234f29d1d%E3%80%82%E4%BD%86%E5%BE%88%E9%81%97%E6%86%BE%EF%BC%8C%E4%BB%A3%E7%A0%81%E8%B7%91%E4%B8%8D%E8%B5%B7%E6%9D%A5%EF%BC%8C%E4%B8%8B%E8%BD%BD%E6%97%B6%E6%8F%90%E7%A4%BA",[31],"https://gist.github.com/simonswine/64773a80e748f36615e3251234f29d1d。但很遗憾，代码跑不起来，下载时提示"," 404。于是我打开脚本细细一看，脚本中 jdk 的版本号和设备的架构均需要改动。具体改动如下:",[46,47,52],"pre",{"className":48,"code":49,"language":50,"meta":51,"style":51},"language-diff shiki shiki-themes one-light one-dark-pro","- REVISION=8.212.04-r0\n+ REVISION=8.302.08-r1\n# 版本号请自行去仓库内翻最新的\n......\n- URL=http://dl-cdn.alpinelinux.org/alpine/v3.10/community/armv7/\n+ URL=http://dl-cdn.alpinelinux.org/alpine/v3.14/community/aarch64/\n......\n- # verify packages\n- sha256sum -c \u003C\u003CEOF\n- e2fce9ee7348e9322c542206c3c3949e40690716d65e9f0e44dbbfca95d59d8c  openjdk8-8.212.04-r0.apk\n- 26ad786ff1ebeeb7cd24abee10bc56211a026a2d871cf161bb309563e1fcbabc  openjdk8-jre-8.212.04-r0.apk\n- 947d5f72ed2dc367c97d1429158913c9366f9c6ae01b7311dd8546b10ded8743  openjdk8-jre-base-- 8.212.04-r0.apk\n- c6a65402bf0a7051c60b45e1c6a8f4277a68a8b7e807078f20db17e0233dea8e  openjdk8-jre-lib-8.212.04-r0.apk\n- EOF\n# 我这里直接将 sha256 校验给删除了，有兴趣可以自己去更新这几个文件的文件名和其对应的哈希值\n","diff","",[35,53,54,63,70,77,84,90,96,101,107,113,119,125,131,137,143],{"__ignoreMap":51},[55,56,59],"span",{"class":57,"line":58},"line",1,[55,60,62],{"class":61},"sJa8x","- REVISION=8.212.04-r0\n",[55,64,66],{"class":57,"line":65},2,[55,67,69],{"class":68},"sDhpE","+ REVISION=8.302.08-r1\n",[55,71,73],{"class":57,"line":72},3,[55,74,76],{"class":75},"sW2Sy","# 版本号请自行去仓库内翻最新的\n",[55,78,80],{"class":57,"line":79},4,[55,81,83],{"class":82},"s5ixo","......\n",[55,85,87],{"class":57,"line":86},5,[55,88,89],{"class":61},"- URL=http://dl-cdn.alpinelinux.org/alpine/v3.10/community/armv7/\n",[55,91,93],{"class":57,"line":92},6,[55,94,95],{"class":68},"+ URL=http://dl-cdn.alpinelinux.org/alpine/v3.14/community/aarch64/\n",[55,97,99],{"class":57,"line":98},7,[55,100,83],{"class":82},[55,102,104],{"class":57,"line":103},8,[55,105,106],{"class":61},"- # verify packages\n",[55,108,110],{"class":57,"line":109},9,[55,111,112],{"class":61},"- sha256sum -c \u003C\u003CEOF\n",[55,114,116],{"class":57,"line":115},10,[55,117,118],{"class":61},"- e2fce9ee7348e9322c542206c3c3949e40690716d65e9f0e44dbbfca95d59d8c  openjdk8-8.212.04-r0.apk\n",[55,120,122],{"class":57,"line":121},11,[55,123,124],{"class":61},"- 26ad786ff1ebeeb7cd24abee10bc56211a026a2d871cf161bb309563e1fcbabc  openjdk8-jre-8.212.04-r0.apk\n",[55,126,128],{"class":57,"line":127},12,[55,129,130],{"class":61},"- 947d5f72ed2dc367c97d1429158913c9366f9c6ae01b7311dd8546b10ded8743  openjdk8-jre-base-- 8.212.04-r0.apk\n",[55,132,134],{"class":57,"line":133},13,[55,135,136],{"class":61},"- c6a65402bf0a7051c60b45e1c6a8f4277a68a8b7e807078f20db17e0233dea8e  openjdk8-jre-lib-8.212.04-r0.apk\n",[55,138,140],{"class":57,"line":139},14,[55,141,142],{"class":61},"- EOF\n",[55,144,146],{"class":57,"line":145},15,[55,147,148],{"class":75},"# 我这里直接将 sha256 校验给删除了，有兴趣可以自己去更新这几个文件的文件名和其对应的哈希值\n",[15,150,151,152,155,156,159,160,163],{},"随后 ",[35,153,154],{},"chmod +x"," 授予脚本可执行权限后直接执行，我们就将 alpine linux 上的 openjdk 成功解包并安装到了我们的 OpenWRT 中，我们只需要配置好环境变量即可完成安装。但我又比较懒，我看见 SignServer 的启动脚本里是可以通过读取 ",[35,157,158],{},"$JAVA_HOME"," 来获取 Java 二进制可执行文件的代码逻辑，于是我便在每次启动 SignServer 脚本前提前执行 ",[35,161,162],{},"export JAVA_HOME=/opt/java-1.8-openjdk"," 即可。",[19,165,167],{"id":166},"安装-screen","安装 screen",[15,169,170,171,176],{},"相比起前面 JDK 的安装，这一步 screen 的安装反而没有那么麻烦，",[27,172,175],{"href":173,"rel":174},"https://openwrt.org/packages/pkgdata/screen",[31],"在最新版本的 OpenWRT 源中，screen 已经被包括进去了","，我们直接把 OpenWRT 换好源，从源里就可以安装。",[46,178,182],{"className":179,"code":180,"language":181,"meta":51,"style":51},"language-bash shiki shiki-themes one-light one-dark-pro","opkg update\nopkg install screen\n","bash",[35,183,184,193],{"__ignoreMap":51},[55,185,186,190],{"class":57,"line":58},[55,187,189],{"class":188},"sAdtL","opkg",[55,191,192],{"class":68}," update\n",[55,194,195,197,200],{"class":57,"line":65},[55,196,189],{"class":188},[55,198,199],{"class":68}," install",[55,201,202],{"class":68}," screen\n",[19,204,206],{"id":205},"下载-fixed-版本的-go-cqhttp","下载 fixed 版本的 go-cqhttp",[15,208,209,210,215],{},"由于 SignServer 更新，在其请求中多添加了 key 的参数要求，导致原版 go-cqhttp 的最新 release 中释出的二进制文件无法适配最新版的 SignServer，我暂时选用了一个",[27,211,214],{"href":212,"rel":213},"https://github.com/tomato-aoarasi/go-cqhttp-1.1.0-sign-fixed/",[31],"修复了这个问题的 fork"," 去运行 Bot。下载到 OpenWRT 后记得也要授予可执行文件。",[19,217,219],{"id":218},"安装-python-脚本中所需要使用到的库","安装 Python 脚本中所需要使用到的库",[15,221,222],{},"OpenWRT 自带了 python 和 pip，这让我很欣慰。直接使用 pip 安装 flask 和 xlrd 等库即可，完全没有难度。",[19,224,226],{"id":225},"运行-signserver","运行 SignServer",[15,228,229],{},"这一步很简单，将原项目的 Release 下载下来解压后上传到 OpenWRT 的某个路径后，开个 screen 窗口，设置好 JAVA_HOME 变量后再去调用 SignServer 中自带的 shell 脚本即可",[19,231,233],{"id":232},"运行-go-cqhttp","运行 go-cqhttp",[15,235,236],{},"这一步也很简单，得益于 go 静态链接的特性，我们不需要为 go-cqhttp 安装任何额外的依赖就可以执行 Release 中的二进制文件，直接将我们在 PC 上登录好的 session、配置好的 device.json、config.yml 等文件上传到 N1 ，开个 screen 窗口运行即可。",[19,238,239],{"id":239},"运行主程序",[15,241,242,243,246],{},"这个没什么好讲的，同样是开个 screen 窗口运行 ",[35,244,245],{},"python main.py"," 的事情",[15,248,249],{},"python 代码如下:",[46,251,255],{"className":252,"code":253,"language":254,"meta":51,"style":51},"language-python shiki shiki-themes one-light one-dark-pro","from flask import Flask,request\nimport requests\nimport xlrd\n\n# 读取 xls 中的关键词以及回应语句，将其加载到 dict 数据结构中\n_data2 = xlrd.open_workbook('/root/8yue222.xls')\nmain_table2 = _data2.sheets()[0]\nkey_lst2 = main_table2.col_values(0)[1:]\nvalue_lst2 = main_table2.col_values(1)[1:]\nfinal_dict = dict(zip(key_lst2,value_lst2))\n# 读取第二份 xls，并对相同的关键词做覆盖\n_data = xlrd.open_workbook('/root/daihao.xls')\nmain_table = _data.sheets()[0]\nkey_lst = main_table.col_values(4)[1:]\nkey_lst = [str(int(item)) if type(item) == float else item for item in key_lst if item != '']\nkey_lst.remove('Gary')\nvalue_lst = main_table.col_values(5)[1:]\nvalue_lst = [str(int(item)) if type(item) == float else item for item in value_lst if item != '']\nfinal_dict.update(dict(zip(key_lst,value_lst)))\n\napp = Flask(__name__)\nclass API:\n        @staticmethod\n        def send(message):\n                url = \"http://127.0.0.1:5700/send_msg\"\n                data = request.get_json()\n                params = {\n                        \"group_id\":data['group_id'],\n                        \"message\":message\n                }\n                requests.get(url,params=params)\n\n@app.route('/', methods=[\"POST\"])\ndef post_data():\n    data = request.get_json()\n    print(data)\n    if data['post_type'] == 'message':\n        message = data['message']\n        messagex()\n    elif data['post_type'] == 'notice' and data['notice_type'] == 'group_increase':\n        welcome()\n    else:\n        print(\"忽略消息\")\n\n    return \"OK\"\n\ndef messagex():\n        data = request.get_json()\n        message = data['message'].replace('％','%')\n        for key in final_dict.keys():\n                if key == message:\n                        API.send(final_dict[key])\n                        break\n\ndef welcome():\n        data = request.get_json()\n        group_id = data['group_id']\n        user_id = data['user_id']\n        API.send(\"[CQ:at,qq={}] 欢迎来到浙江工业大学，精弘网络欢迎各位的到来！如果想进一步了解我们，请戳精弘首页：www.jh.zjut.edu.cn\\n输入 菜单 获取精小弘机器人的菜单 哦！\\n请及时修改群名片\\n格式如下：姓名+专业/大类\".format(user_id))\n\nif __name__ == '__main__':\n    app.run(host='0.0.0.0', port=5701)\n","python",[35,256,257,272,279,286,292,297,322,345,371,392,411,416,434,452,475,539,555,578,628,649,654,672,685,694,712,723,740,751,766,775,781,802,807,842,854,868,877,899,914,922,956,964,972,985,990,999,1004,1014,1028,1057,1076,1089,1104,1110,1115,1125,1138,1152,1167,1212,1217,1233],{"__ignoreMap":51},[55,258,259,263,266,269],{"class":57,"line":58},[55,260,262],{"class":261},"sLKXg","from",[55,264,265],{"class":82}," flask ",[55,267,268],{"class":261},"import",[55,270,271],{"class":82}," Flask,request\n",[55,273,274,276],{"class":57,"line":65},[55,275,268],{"class":261},[55,277,278],{"class":82}," requests\n",[55,280,281,283],{"class":57,"line":72},[55,282,268],{"class":261},[55,284,285],{"class":82}," xlrd\n",[55,287,288],{"class":57,"line":79},[55,289,291],{"emptyLinePlaceholder":290},true,"\n",[55,293,294],{"class":57,"line":86},[55,295,296],{"class":75},"# 读取 xls 中的关键词以及回应语句，将其加载到 dict 数据结构中\n",[55,298,299,302,306,309,313,316,319],{"class":57,"line":92},[55,300,301],{"class":82},"_data2 ",[55,303,305],{"class":304},"sknuh","=",[55,307,308],{"class":82}," xlrd.",[55,310,312],{"class":311},"slOjB","open_workbook",[55,314,315],{"class":82},"(",[55,317,318],{"class":68},"'/root/8yue222.xls'",[55,320,321],{"class":82},")\n",[55,323,324,327,329,332,335,338,342],{"class":57,"line":98},[55,325,326],{"class":82},"main_table2 ",[55,328,305],{"class":304},[55,330,331],{"class":82}," _data2.",[55,333,334],{"class":311},"sheets",[55,336,337],{"class":82},"()[",[55,339,341],{"class":340},"sAGMh","0",[55,343,344],{"class":82},"]\n",[55,346,347,350,352,355,358,360,362,365,368],{"class":57,"line":103},[55,348,349],{"class":82},"key_lst2 ",[55,351,305],{"class":304},[55,353,354],{"class":82}," main_table2.",[55,356,357],{"class":311},"col_values",[55,359,315],{"class":82},[55,361,341],{"class":340},[55,363,364],{"class":82},")[",[55,366,367],{"class":340},"1",[55,369,370],{"class":82},":]\n",[55,372,373,376,378,380,382,384,386,388,390],{"class":57,"line":109},[55,374,375],{"class":82},"value_lst2 ",[55,377,305],{"class":304},[55,379,354],{"class":82},[55,381,357],{"class":311},[55,383,315],{"class":82},[55,385,367],{"class":340},[55,387,364],{"class":82},[55,389,367],{"class":340},[55,391,370],{"class":82},[55,393,394,397,399,403,405,408],{"class":57,"line":115},[55,395,396],{"class":82},"final_dict ",[55,398,305],{"class":304},[55,400,402],{"class":401},"s_Sar"," dict",[55,404,315],{"class":82},[55,406,407],{"class":401},"zip",[55,409,410],{"class":82},"(key_lst2,value_lst2))\n",[55,412,413],{"class":57,"line":121},[55,414,415],{"class":75},"# 读取第二份 xls，并对相同的关键词做覆盖\n",[55,417,418,421,423,425,427,429,432],{"class":57,"line":127},[55,419,420],{"class":82},"_data ",[55,422,305],{"class":304},[55,424,308],{"class":82},[55,426,312],{"class":311},[55,428,315],{"class":82},[55,430,431],{"class":68},"'/root/daihao.xls'",[55,433,321],{"class":82},[55,435,436,439,441,444,446,448,450],{"class":57,"line":133},[55,437,438],{"class":82},"main_table ",[55,440,305],{"class":304},[55,442,443],{"class":82}," _data.",[55,445,334],{"class":311},[55,447,337],{"class":82},[55,449,341],{"class":340},[55,451,344],{"class":82},[55,453,454,457,459,462,464,466,469,471,473],{"class":57,"line":139},[55,455,456],{"class":82},"key_lst ",[55,458,305],{"class":304},[55,460,461],{"class":82}," main_table.",[55,463,357],{"class":311},[55,465,315],{"class":82},[55,467,468],{"class":340},"4",[55,470,364],{"class":82},[55,472,367],{"class":340},[55,474,370],{"class":82},[55,476,477,479,481,484,487,489,492,495,498,501,504,507,510,513,516,519,521,524,527,529,531,534,537],{"class":57,"line":145},[55,478,456],{"class":82},[55,480,305],{"class":304},[55,482,483],{"class":82}," [",[55,485,486],{"class":401},"str",[55,488,315],{"class":82},[55,490,491],{"class":401},"int",[55,493,494],{"class":82},"(item)) ",[55,496,497],{"class":261},"if",[55,499,500],{"class":401}," type",[55,502,503],{"class":82},"(item) ",[55,505,506],{"class":304},"==",[55,508,509],{"class":401}," float",[55,511,512],{"class":261}," else",[55,514,515],{"class":82}," item ",[55,517,518],{"class":261},"for",[55,520,515],{"class":82},[55,522,523],{"class":261},"in",[55,525,526],{"class":82}," key_lst ",[55,528,497],{"class":261},[55,530,515],{"class":82},[55,532,533],{"class":304},"!=",[55,535,536],{"class":68}," ''",[55,538,344],{"class":82},[55,540,542,545,548,550,553],{"class":57,"line":541},16,[55,543,544],{"class":82},"key_lst.",[55,546,547],{"class":311},"remove",[55,549,315],{"class":82},[55,551,552],{"class":68},"'Gary'",[55,554,321],{"class":82},[55,556,558,561,563,565,567,569,572,574,576],{"class":57,"line":557},17,[55,559,560],{"class":82},"value_lst ",[55,562,305],{"class":304},[55,564,461],{"class":82},[55,566,357],{"class":311},[55,568,315],{"class":82},[55,570,571],{"class":340},"5",[55,573,364],{"class":82},[55,575,367],{"class":340},[55,577,370],{"class":82},[55,579,581,583,585,587,589,591,593,595,597,599,601,603,605,607,609,611,613,615,618,620,622,624,626],{"class":57,"line":580},18,[55,582,560],{"class":82},[55,584,305],{"class":304},[55,586,483],{"class":82},[55,588,486],{"class":401},[55,590,315],{"class":82},[55,592,491],{"class":401},[55,594,494],{"class":82},[55,596,497],{"class":261},[55,598,500],{"class":401},[55,600,503],{"class":82},[55,602,506],{"class":304},[55,604,509],{"class":401},[55,606,512],{"class":261},[55,608,515],{"class":82},[55,610,518],{"class":261},[55,612,515],{"class":82},[55,614,523],{"class":261},[55,616,617],{"class":82}," value_lst ",[55,619,497],{"class":261},[55,621,515],{"class":82},[55,623,533],{"class":304},[55,625,536],{"class":68},[55,627,344],{"class":82},[55,629,631,634,637,639,642,644,646],{"class":57,"line":630},19,[55,632,633],{"class":82},"final_dict.",[55,635,636],{"class":311},"update",[55,638,315],{"class":82},[55,640,641],{"class":401},"dict",[55,643,315],{"class":82},[55,645,407],{"class":401},[55,647,648],{"class":82},"(key_lst,value_lst)))\n",[55,650,652],{"class":57,"line":651},20,[55,653,291],{"emptyLinePlaceholder":290},[55,655,657,660,662,665,667,670],{"class":57,"line":656},21,[55,658,659],{"class":82},"app ",[55,661,305],{"class":304},[55,663,664],{"class":311}," Flask",[55,666,315],{"class":82},[55,668,669],{"class":61},"__name__",[55,671,321],{"class":82},[55,673,675,678,682],{"class":57,"line":674},22,[55,676,677],{"class":261},"class",[55,679,681],{"class":680},"sC09Y"," API",[55,683,684],{"class":82},":\n",[55,686,688,691],{"class":57,"line":687},23,[55,689,690],{"class":188},"        @",[55,692,693],{"class":401},"staticmethod\n",[55,695,697,700,703,705,709],{"class":57,"line":696},24,[55,698,699],{"class":261},"        def",[55,701,702],{"class":188}," send",[55,704,315],{"class":82},[55,706,708],{"class":707},"so_Uh","message",[55,710,711],{"class":82},"):\n",[55,713,715,718,720],{"class":57,"line":714},25,[55,716,717],{"class":82},"                url ",[55,719,305],{"class":304},[55,721,722],{"class":68}," \"http://127.0.0.1:5700/send_msg\"\n",[55,724,726,729,731,734,737],{"class":57,"line":725},26,[55,727,728],{"class":82},"                data ",[55,730,305],{"class":304},[55,732,733],{"class":82}," request.",[55,735,736],{"class":311},"get_json",[55,738,739],{"class":82},"()\n",[55,741,743,746,748],{"class":57,"line":742},27,[55,744,745],{"class":82},"                params ",[55,747,305],{"class":304},[55,749,750],{"class":82}," {\n",[55,752,754,757,760,763],{"class":57,"line":753},28,[55,755,756],{"class":68},"                        \"group_id\"",[55,758,759],{"class":82},":data[",[55,761,762],{"class":68},"'group_id'",[55,764,765],{"class":82},"],\n",[55,767,769,772],{"class":57,"line":768},29,[55,770,771],{"class":68},"                        \"message\"",[55,773,774],{"class":82},":message\n",[55,776,778],{"class":57,"line":777},30,[55,779,780],{"class":82},"                }\n",[55,782,784,787,790,793,797,799],{"class":57,"line":783},31,[55,785,786],{"class":82},"                requests.",[55,788,789],{"class":311},"get",[55,791,792],{"class":82},"(url,",[55,794,796],{"class":795},"sp7wS","params",[55,798,305],{"class":304},[55,800,801],{"class":82},"params)\n",[55,803,805],{"class":57,"line":804},32,[55,806,291],{"emptyLinePlaceholder":290},[55,808,810,813,817,820,822,825,828,831,833,836,839],{"class":57,"line":809},33,[55,811,812],{"class":188},"@app",[55,814,816],{"class":815},"siaei",".",[55,818,819],{"class":188},"route",[55,821,315],{"class":82},[55,823,824],{"class":68},"'/'",[55,826,827],{"class":82},",",[55,829,830],{"class":795}," methods",[55,832,305],{"class":304},[55,834,835],{"class":82},"[",[55,837,838],{"class":68},"\"POST\"",[55,840,841],{"class":82},"])\n",[55,843,845,848,851],{"class":57,"line":844},34,[55,846,847],{"class":261},"def",[55,849,850],{"class":188}," post_data",[55,852,853],{"class":82},"():\n",[55,855,857,860,862,864,866],{"class":57,"line":856},35,[55,858,859],{"class":82},"    data ",[55,861,305],{"class":304},[55,863,733],{"class":82},[55,865,736],{"class":311},[55,867,739],{"class":82},[55,869,871,874],{"class":57,"line":870},36,[55,872,873],{"class":401},"    print",[55,875,876],{"class":82},"(data)\n",[55,878,880,883,886,889,892,894,897],{"class":57,"line":879},37,[55,881,882],{"class":261},"    if",[55,884,885],{"class":82}," data[",[55,887,888],{"class":68},"'post_type'",[55,890,891],{"class":82},"] ",[55,893,506],{"class":304},[55,895,896],{"class":68}," 'message'",[55,898,684],{"class":82},[55,900,902,905,907,909,912],{"class":57,"line":901},38,[55,903,904],{"class":82},"        message ",[55,906,305],{"class":304},[55,908,885],{"class":82},[55,910,911],{"class":68},"'message'",[55,913,344],{"class":82},[55,915,917,920],{"class":57,"line":916},39,[55,918,919],{"class":311},"        messagex",[55,921,739],{"class":82},[55,923,925,928,930,932,934,936,939,942,944,947,949,951,954],{"class":57,"line":924},40,[55,926,927],{"class":261},"    elif",[55,929,885],{"class":82},[55,931,888],{"class":68},[55,933,891],{"class":82},[55,935,506],{"class":304},[55,937,938],{"class":68}," 'notice'",[55,940,941],{"class":261}," and",[55,943,885],{"class":82},[55,945,946],{"class":68},"'notice_type'",[55,948,891],{"class":82},[55,950,506],{"class":304},[55,952,953],{"class":68}," 'group_increase'",[55,955,684],{"class":82},[55,957,959,962],{"class":57,"line":958},41,[55,960,961],{"class":311},"        welcome",[55,963,739],{"class":82},[55,965,967,970],{"class":57,"line":966},42,[55,968,969],{"class":261},"    else",[55,971,684],{"class":82},[55,973,975,978,980,983],{"class":57,"line":974},43,[55,976,977],{"class":401},"        print",[55,979,315],{"class":82},[55,981,982],{"class":68},"\"忽略消息\"",[55,984,321],{"class":82},[55,986,988],{"class":57,"line":987},44,[55,989,291],{"emptyLinePlaceholder":290},[55,991,993,996],{"class":57,"line":992},45,[55,994,995],{"class":261},"    return",[55,997,998],{"class":68}," \"OK\"\n",[55,1000,1002],{"class":57,"line":1001},46,[55,1003,291],{"emptyLinePlaceholder":290},[55,1005,1007,1009,1012],{"class":57,"line":1006},47,[55,1008,847],{"class":261},[55,1010,1011],{"class":188}," messagex",[55,1013,853],{"class":82},[55,1015,1017,1020,1022,1024,1026],{"class":57,"line":1016},48,[55,1018,1019],{"class":82},"        data ",[55,1021,305],{"class":304},[55,1023,733],{"class":82},[55,1025,736],{"class":311},[55,1027,739],{"class":82},[55,1029,1031,1033,1035,1037,1039,1042,1045,1047,1050,1052,1055],{"class":57,"line":1030},49,[55,1032,904],{"class":82},[55,1034,305],{"class":304},[55,1036,885],{"class":82},[55,1038,911],{"class":68},[55,1040,1041],{"class":82},"].",[55,1043,1044],{"class":311},"replace",[55,1046,315],{"class":82},[55,1048,1049],{"class":68},"'％'",[55,1051,827],{"class":82},[55,1053,1054],{"class":68},"'%'",[55,1056,321],{"class":82},[55,1058,1060,1063,1066,1068,1071,1074],{"class":57,"line":1059},50,[55,1061,1062],{"class":261},"        for",[55,1064,1065],{"class":82}," key ",[55,1067,523],{"class":261},[55,1069,1070],{"class":82}," final_dict.",[55,1072,1073],{"class":311},"keys",[55,1075,853],{"class":82},[55,1077,1079,1082,1084,1086],{"class":57,"line":1078},51,[55,1080,1081],{"class":261},"                if",[55,1083,1065],{"class":82},[55,1085,506],{"class":304},[55,1087,1088],{"class":82}," message:\n",[55,1090,1092,1096,1098,1101],{"class":57,"line":1091},52,[55,1093,1095],{"class":1094},"sYebD","                        API",[55,1097,816],{"class":82},[55,1099,1100],{"class":311},"send",[55,1102,1103],{"class":82},"(final_dict[key])\n",[55,1105,1107],{"class":57,"line":1106},53,[55,1108,1109],{"class":261},"                        break\n",[55,1111,1113],{"class":57,"line":1112},54,[55,1114,291],{"emptyLinePlaceholder":290},[55,1116,1118,1120,1123],{"class":57,"line":1117},55,[55,1119,847],{"class":261},[55,1121,1122],{"class":188}," welcome",[55,1124,853],{"class":82},[55,1126,1128,1130,1132,1134,1136],{"class":57,"line":1127},56,[55,1129,1019],{"class":82},[55,1131,305],{"class":304},[55,1133,733],{"class":82},[55,1135,736],{"class":311},[55,1137,739],{"class":82},[55,1139,1141,1144,1146,1148,1150],{"class":57,"line":1140},57,[55,1142,1143],{"class":82},"        group_id ",[55,1145,305],{"class":304},[55,1147,885],{"class":82},[55,1149,762],{"class":68},[55,1151,344],{"class":82},[55,1153,1155,1158,1160,1162,1165],{"class":57,"line":1154},58,[55,1156,1157],{"class":82},"        user_id ",[55,1159,305],{"class":304},[55,1161,885],{"class":82},[55,1163,1164],{"class":68},"'user_id'",[55,1166,344],{"class":82},[55,1168,1170,1173,1175,1177,1179,1182,1185,1188,1191,1194,1196,1199,1201,1204,1206,1209],{"class":57,"line":1169},59,[55,1171,1172],{"class":1094},"        API",[55,1174,816],{"class":82},[55,1176,1100],{"class":311},[55,1178,315],{"class":82},[55,1180,1181],{"class":68},"\"[CQ:at,qq=",[55,1183,1184],{"class":340},"{}",[55,1186,1187],{"class":68},"] 欢迎来到浙江工业大学，精弘网络欢迎各位的到来！如果想进一步了解我们，请戳精弘首页：www.jh.zjut.edu.cn",[55,1189,1190],{"class":401},"\\n",[55,1192,1193],{"class":68},"输入 菜单 获取精小弘机器人的菜单 哦！",[55,1195,1190],{"class":401},[55,1197,1198],{"class":68},"请及时修改群名片",[55,1200,1190],{"class":401},[55,1202,1203],{"class":68},"格式如下：姓名+专业/大类\"",[55,1205,816],{"class":82},[55,1207,1208],{"class":311},"format",[55,1210,1211],{"class":82},"(user_id))\n",[55,1213,1215],{"class":57,"line":1214},60,[55,1216,291],{"emptyLinePlaceholder":290},[55,1218,1220,1222,1225,1228,1231],{"class":57,"line":1219},61,[55,1221,497],{"class":261},[55,1223,1224],{"class":61}," __name__",[55,1226,1227],{"class":304}," ==",[55,1229,1230],{"class":68}," '__main__'",[55,1232,684],{"class":82},[55,1234,1236,1239,1242,1244,1247,1249,1252,1255,1258,1260,1263],{"class":57,"line":1235},62,[55,1237,1238],{"class":82},"    app.",[55,1240,1241],{"class":311},"run",[55,1243,315],{"class":82},[55,1245,1246],{"class":795},"host",[55,1248,305],{"class":304},[55,1250,1251],{"class":68},"'0.0.0.0'",[55,1253,1254],{"class":82},", ",[55,1256,1257],{"class":795},"port",[55,1259,305],{"class":304},[55,1261,1262],{"class":340},"5701",[55,1264,321],{"class":82},[1266,1267,1268,1271,1277],"blockquote",{},[15,1269,1270],{},"参考资料:",[15,1272,1273],{},[27,1274,1275],{"href":1275,"rel":1276},"https://gist.github.com/simonswine/64773a80e748f36615e3251234f29d1d",[31],[15,1278,1279],{},[27,1280,1281],{"href":1281,"rel":1282},"https://blog.csdn.net/qq_64126275/article/details/128586651",[31],[1284,1285,1286],"style",{},"html pre.shiki code .sJa8x, html code.shiki .sJa8x{--shiki-default:#E45649;--shiki-dark:#E06C75}html pre.shiki code .sDhpE, html code.shiki .sDhpE{--shiki-default:#50A14F;--shiki-dark:#98C379}html pre.shiki code .sW2Sy, html code.shiki .sW2Sy{--shiki-default:#A0A1A7;--shiki-default-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic}html pre.shiki code .s5ixo, html code.shiki .s5ixo{--shiki-default:#383A42;--shiki-dark:#ABB2BF}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .sAdtL, html code.shiki .sAdtL{--shiki-default:#4078F2;--shiki-dark:#61AFEF}html pre.shiki code .sLKXg, html code.shiki .sLKXg{--shiki-default:#A626A4;--shiki-dark:#C678DD}html pre.shiki code .sknuh, html code.shiki .sknuh{--shiki-default:#383A42;--shiki-dark:#56B6C2}html pre.shiki code .slOjB, html code.shiki .slOjB{--shiki-default:#383A42;--shiki-dark:#61AFEF}html pre.shiki code .sAGMh, html code.shiki .sAGMh{--shiki-default:#986801;--shiki-dark:#D19A66}html pre.shiki code .s_Sar, html code.shiki .s_Sar{--shiki-default:#0184BC;--shiki-dark:#56B6C2}html pre.shiki code .sC09Y, html code.shiki .sC09Y{--shiki-default:#C18401;--shiki-dark:#E5C07B}html pre.shiki code .so_Uh, html code.shiki .so_Uh{--shiki-default:#986801;--shiki-default-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic}html pre.shiki code .sp7wS, html code.shiki .sp7wS{--shiki-default:#986801;--shiki-default-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic}html pre.shiki code .siaei, html code.shiki .siaei{--shiki-default:#4078F2;--shiki-dark:#ABB2BF}html pre.shiki code .sYebD, html code.shiki .sYebD{--shiki-default:#383A42;--shiki-dark:#D19A66}",{"title":51,"searchDepth":65,"depth":65,"links":1288},[1289,1290,1291,1292,1293,1294,1295],{"id":21,"depth":65,"text":22},{"id":166,"depth":65,"text":167},{"id":205,"depth":65,"text":206},{"id":218,"depth":65,"text":219},{"id":225,"depth":65,"text":226},{"id":232,"depth":65,"text":233},{"id":239,"depth":65,"text":239},[1297,1303],{"title":1298,"path":1299,"stem":1300,"date":1301,"lang":1302,"children":-1},"从零开始的静态网页部署（到个人云服务器）","/2023/08/04/static-webpage-deployment-for-a-beginner","posts/zh/static-webpage-deployment-for-a-beginner","2023-08-04 01:19:22","zh-CN",{"title":1304,"path":1305,"stem":1306,"date":1307,"lang":1302,"children":-1},"在浙工大宿舍使用路由器连接移动网络(校园网)","/2023/06/24/connect-china-mobile-with-router-in-zjut-dormitory","posts/zh/connect-china-mobile-with-router-in-zjut-dormitory","2023-06-24 14:30:24",null,1765307308050]