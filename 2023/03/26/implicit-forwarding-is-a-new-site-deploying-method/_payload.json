[{"data":1,"prerenderedAt":286},["ShallowReactive",2],{"post-2023-03-26-implicit-forwarding-is-a-new-site-deploying-method-zh":3,"surround-2023-03-26-implicit-forwarding-is-a-new-site-deploying-method-zh":272,"randomIndex/2023/03/26/implicit-forwarding-is-a-new-site-deploying-method/":284,"language-switch-/2023/03/26/implicit-forwarding-is-a-new-site-deploying-method/-en":285},{"title":4,"date":5,"path":6,"tags":7,"body":9,"description":15},"隐式转发——骚套路建站方案","2023-03-26 00:10:02","/2023/03/26/implicit-forwarding-is-a-new-site-deploying-method",[8],"Network",{"type":10,"value":11,"toc":269},"minimark",[12,16,23,26,36,58,61,158,161,167,174,179,182,189,194,198,201,204,220,223,241,244,265],[13,14,15],"p",{},"其实很久以前就接触到了国内 DNS 解析服务商提供的这个「隐式 URL」 这种 “DNS 记录类型”了，但我域名没有备案，一直没有机会去体验。",[13,17,18],{},[19,20],"img",{"alt":21,"src":22},"DNSPOD 的解析面板中提供的记录类型","https://static.031130.xyz/uploads/2024/08/12/641f1e2cd8809.webp",[13,24,25],{},"今天社团内某个同学在折腾自己博客的时候又用到了「隐式 URL」，于是就借此机会了解了一下相关内容。",[13,27,28,35],{},[29,30,34],"a",{"href":31,"rel":32},"https://docs.dnspod.cn/dns/help-redirect-url/",[33],"nofollow","DNSPOD 文档的描述","如下",[37,38,39],"blockquote",{},[13,40,41,45,46,50,51,54,55,57],{},[42,43,44],"strong",{},"隐性转发","：用的是 iframe 框架技术、非重定向技术，效果为浏览器地址栏输入 ",[47,48,49],"code",{},"http://www.dnspod.cn"," 回车，打开网站内容是目标地址 ",[47,52,53],{},"http://cloud.tencent.com/"," 的网站内容，但地址栏显示当前地址 ",[47,56,49],{}," 。",[13,59,60],{},"也就是说，所谓「隐式 URL」，只不过是域名解析的服务商用他们的服务器去响应了访客的请求，并回应了一段使用了 iframe 的 html 。这段代码打开了一个大小为 100% 的窗口去请求了被“隐式代理”的站点。我这位同学域名是备案在阿里云下的，阿里云所使用的 html 代码如下:",[62,63,68],"pre",{"className":64,"code":65,"language":66,"meta":67,"style":67},"language-html shiki shiki-themes one-light one-dark-pro","\u003C!doctype html>\u003Chtml>\u003Cframeset rows=\"100%\">\u003Cframe src=\"http://example.com\">\u003Cnoframes>\u003Ca href=\"http://example.com\">Click here\u003C/a>\u003C/noframes>\u003C/frameset>\u003C/html>\n","html","",[47,69,70],{"__ignoreMap":67},[71,72,75,79,83,87,90,92,94,98,101,104,108,110,113,116,118,121,123,126,128,130,133,135,137,140,142,145,147,149,151,153,155],"span",{"class":73,"line":74},"line",1,[71,76,78],{"class":77},"s5ixo","\u003C!",[71,80,82],{"class":81},"sJa8x","doctype",[71,84,86],{"class":85},"sAGMh"," html",[71,88,89],{"class":77},">\u003C",[71,91,66],{"class":81},[71,93,89],{"class":77},[71,95,97],{"class":96},"s-dj3","frameset",[71,99,100],{"class":85}," rows",[71,102,103],{"class":77},"=",[71,105,107],{"class":106},"sDhpE","\"100%\"",[71,109,89],{"class":77},[71,111,112],{"class":96},"frame",[71,114,115],{"class":85}," src",[71,117,103],{"class":77},[71,119,120],{"class":106},"\"http://example.com\"",[71,122,89],{"class":77},[71,124,125],{"class":96},"noframes",[71,127,89],{"class":77},[71,129,29],{"class":81},[71,131,132],{"class":85}," href",[71,134,103],{"class":77},[71,136,120],{"class":106},[71,138,139],{"class":77},">Click here\u003C/",[71,141,29],{"class":81},[71,143,144],{"class":77},">\u003C/",[71,146,125],{"class":96},[71,148,144],{"class":77},[71,150,97],{"class":96},[71,152,144],{"class":77},[71,154,66],{"class":81},[71,156,157],{"class":77},">\n",[13,159,160],{},"在下图中，我通过更改 hosts 文件实现将百度的域名在本地被解析到 localhost，并使用 iframe 标签将 b 站嵌入到页面中。当然，这并不能说明什么事情，不过是我个人的恶趣味罢了。",[13,162,163],{},[19,164],{"alt":165,"src":166},"example","https://static.031130.xyz/uploads/2024/08/12/641f2272ab7fb.webp",[13,168,169,170,173],{},"将 ",[47,171,172],{},"http://example.com","改为目标站点，我们完全可以摆脱国内云服务商，在自己的服务器上直接实现「隐式代理」的效果。",[13,175,176],{},[42,177,178],{},"而这种方案，恰巧可以用于在境内机子上建站，尤其是针对未备案的域名。",[13,180,181],{},"碍于 Github Pages 在境内的访问体验并不好，所以直接把博客部署在 Github Pages 下一直都不是首选，因此很多人都会选择去购买一台境内的小鸡，带宽虽然不大，但跑个博客什么的其实没什么大问题，但备案就很麻烦了。",[13,183,184,185,188],{},"我们可以通过在 Github Pages（或者其他境外的服务器） 上挂一个 ",[47,186,187],{},"index.html"," ，html 中使用 iframe 嵌套一个部署在境内小鸡上的网页来规避掉备案的问题。而境内小鸡可以选用非标准端口去监听请求。",[19,190],{"src":191,"alt":192,"style":193},"https://static.031130.xyz/uploads/2024/08/12/642014b05bb43.webp","使用隐式转发","zoom:67%;",[19,195],{"src":196,"alt":197,"style":193},"https://static.031130.xyz/uploads/2024/08/12/642014519ce2a.webp","2.drawio.png",[13,199,200],{},"这样带来的好处是访客只需要从境外的服务器上获取一个不到 1 KB 大小的 html ，随后的所有请求都是指向境内云服务器的，所以网页打开时的体验会得到改善。",[13,202,203],{},"隐式转发拥有以下优势：",[205,206,207,211,214,217],"ul",{},[208,209,210],"li",{},"直接向境内的云服务器发送请求，速度会得到改善 （相比于直接部署在境外服务器上的方案）",[208,212,213],{},"不怎么消耗境外服务器的流量 （相比于使用境外服务器反向代理的方案）",[208,215,216],{},"浏览器的地址栏不会直接显示 ip 或端口号（相比于未备案使用境内服务器的非标准端口的方案）",[208,218,219],{},"不需要备案（相比于备案后使用境内服务器的 80/443 端口的方案）",[13,221,222],{},"但也存在以下劣势：",[205,224,225,228,235,238],{},[208,226,227],{},"移动端设备访问时好像还是会展示 PC 端的界面（存疑",[208,229,230,231,234],{},"现代浏览器访问时可能会有 ",[47,232,233],{},"strict-origin-when-cross-origin"," 的问题（一般好像是出现在 iframe 的 html 是 https 访问，而目标站点是 http 访问的情况？）",[208,236,237],{},"一些古老的浏览器可能不支持 iframe （？",[208,239,240],{},"访问目标站点的其他路径时，浏览器地址栏的显示的地址不会变",[242,243],"hr",{},[13,245,246,247,252,253,258,259,264],{},"那么应",[29,248,251],{"href":249,"rel":250},"https://static.031130.xyz/uploads/2024/08/12/64201607999e3.webp",[33],"某些群友的要求","，本文的第二作者为 ",[29,254,257],{"href":255,"rel":256},"https://blog.f1nley.xyz",[33],"Finley","，通信作者为 ",[29,260,263],{"href":261,"rel":262},"https://blog.chordvers.com/",[33],"LanStarD","。",[266,267,268],"style",{},"html pre.shiki code .s5ixo, html code.shiki .s5ixo{--shiki-default:#383A42;--shiki-dark:#ABB2BF}html pre.shiki code .sJa8x, html code.shiki .sJa8x{--shiki-default:#E45649;--shiki-dark:#E06C75}html pre.shiki code .sAGMh, html code.shiki .sAGMh{--shiki-default:#986801;--shiki-dark:#D19A66}html pre.shiki code .s-dj3, html code.shiki .s-dj3{--shiki-default:#000000;--shiki-dark:#FFFFFF}html pre.shiki code .sDhpE, html code.shiki .sDhpE{--shiki-default:#50A14F;--shiki-dark:#98C379}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":67,"searchDepth":270,"depth":270,"links":271},2,[],[273,279],{"title":274,"path":275,"stem":276,"date":277,"lang":278,"children":-1},"执行 repo sync 后将 git-lfs 中的资源文件 checkout","/2023/05/03/checkout-lfs-file-after-repo-sync","posts/zh/checkout-lfs-file-after-repo-sync","2023-05-03 01:15:35","zh-CN",{"title":280,"path":281,"stem":282,"date":283,"lang":278,"children":-1},"在 vps 上配合 caddy 部署 siteproxy","/2023/02/01/deploy-siteproxy-with-caddy-on-vps","posts/zh/deploy-siteproxy-with-caddy-on-vps","2023-02-01 22:33:53",6,null,1766566744572]