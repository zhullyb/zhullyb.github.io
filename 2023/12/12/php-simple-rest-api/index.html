<!DOCTYPE html><html  lang="zh-CN"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>【翻译】使用 PHP 构建简单的 REST API | 竹林里有冰的博客</title><link rel="preconnect" href="https://static.031130.xyz" crossorigin><link rel="stylesheet" href="https://s4.zstatic.net/ajax/libs/github-markdown-css/5.8.1/github-markdown.min.css"><style>[data-v-6c2349ae] .markdown-body{font-family:inherit;font-size:inherit}[data-v-6c2349ae] .markdown-body h2,[data-v-6c2349ae] .markdown-body h3,[data-v-6c2349ae] .markdown-body h4,[data-v-6c2349ae] .markdown-body h5,[data-v-6c2349ae] .markdown-body h6{scroll-margin-top:78px}[data-v-6c2349ae] .markdown-body h2>a,[data-v-6c2349ae] .markdown-body h3>a,[data-v-6c2349ae] .markdown-body h4>a,[data-v-6c2349ae] .markdown-body h5>a,[data-v-6c2349ae] .markdown-body h6>a{color:unset}@media(prefers-color-scheme:dark){[data-v-6c2349ae] .markdown-body{--bgColor-default:#252d38;--bgColor-muted:#181c27}[data-v-6c2349ae] .markdown-body .shiki,[data-v-6c2349ae] .markdown-body .shiki span{color:var(--shiki-dark)!important}}aside[data-v-6c2349ae]{position:sticky;top:78px}[data-v-6c2349ae] #waline{margin-top:3rem}.article-end-hr[data-v-6c2349ae]{border:none;border-top:1px solid #e1e4e8;margin:1rem 0}@media(prefers-color-scheme:dark){.article-end-hr[data-v-6c2349ae]{border-color:#444c56}}.tags[data-v-6c2349ae]{margin:1rem 0}.tags[data-v-6c2349ae] *{vertical-align:middle}.tags svg[data-v-6c2349ae]{font-size:.9em}.tags a[data-v-6c2349ae]{display:inline-block;margin-left:.2rem}.tags a[data-v-6c2349ae]:hover{color:#007bff}</style><style>.content-wrapper[data-v-40d23075]{margin-bottom:40px;margin-top:40px}@media(min-width:1025px){.content-wrapper[data-v-40d23075]{display:flex;justify-content:space-around}.content-wrapper .side[data-v-40d23075]{width:20%}}@media(max-width:1024px){.content-wrapper[data-v-40d23075]{margin:30px}}main[data-v-40d23075]{min-height:calc(40vh - 120px);width:50%}@media(max-width:1024px){main[data-v-40d23075]{width:unset}}</style><style>header[data-v-c4c9a290]{align-items:center;box-shadow:0 2px 4px #0000001a;display:flex;flex-direction:column;height:62px;justify-content:center;padding-bottom:16px;padding-top:20px;position:fixed;top:0;transition:background-color .3s ease,height .3s ease,padding-top .3s ease,backdrop-filter .3s ease;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:100%;z-index:2}header.scrolled[data-v-c4c9a290]{height:58px;padding-bottom:16px;padding-top:16px}header.scrolled[data-v-c4c9a290],header.show-mobile-menu[data-v-c4c9a290]{-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px);background-color:#3c4658b3}header.show-mobile-menu[data-v-c4c9a290]{height:-moz-fit-content;height:fit-content}.header-container[data-v-c4c9a290]{color:#fff;min-width:70%}@media(max-width:1024px){.header-container[data-v-c4c9a290]{min-width:100%;padding-left:16px;padding-right:16px}}.header-container .header-title[data-v-c4c9a290]{font-weight:700;text-shadow:0 0 10px rgba(0,0,0,.3)}.header[data-v-c4c9a290]{justify-content:space-between}.header[data-v-c4c9a290],.header-right[data-v-c4c9a290]{align-items:center;display:flex}.header-right[data-v-c4c9a290]{gap:16px}.mobile-menu-dropdown[data-v-c4c9a290]{border-radius:8px;display:flex;flex-direction:column;padding:8px 0;width:100%}.mobile-menu-dropdown a[data-v-c4c9a290]{font-size:18px;font-weight:500;padding:12px 24px;text-align:center}.mobile-menu-dropdown a[data-v-c4c9a290],a[data-v-c4c9a290]{color:#fff;text-decoration:none}.lang-switch[data-v-c4c9a290]{align-items:center;background:#ffffff1a;border:1px solid hsla(0,0%,100%,.3);border-radius:999px;color:#fff;cursor:pointer;display:flex;font-size:14px;justify-content:center;padding:6px 12px;transition:background .2s ease,border-color .2s ease}.lang-switch[data-v-c4c9a290]:hover{background:#fff3;border-color:#fff9}.search-trigger[data-v-c4c9a290]{align-items:center;background:#ffffff1a;border:1px solid hsla(0,0%,100%,.3);border-radius:999px;color:#fff;cursor:pointer;display:flex;font-size:14px;gap:6px;padding:6px 12px;transition:background .2s ease,border-color .2s ease}.search-trigger[data-v-c4c9a290]:hover{background:#fff3;border-color:#fff9}.search-trigger span[aria-hidden=true][data-v-c4c9a290]{font-size:16px;line-height:1}@media(max-width:1024px){.search-trigger[data-v-c4c9a290]{display:none}}</style><style>.post-navigation[data-v-a35c130b]{display:flex;flex-wrap:wrap;gap:1rem}.nav-button[data-v-a35c130b]{align-items:center;border:1px solid #e1e4e8;color:#24292e;cursor:pointer;display:flex;flex:0 1 calc(50% - .5rem);gap:1rem;max-width:calc(50% - .5rem);min-width:280px;padding:1.25rem 1.5rem;text-decoration:none;transition:border-color .2s ease}@media(prefers-color-scheme:dark){.nav-button[data-v-a35c130b]{border:1px solid #444c5a;color:#c9d1d9}}.nav-button[data-v-a35c130b]:hover{border-color:#007bff}.nav-button:hover .nav-arrow[data-v-a35c130b],.nav-button:hover .nav-label[data-v-a35c130b],.nav-button:hover .nav-title[data-v-a35c130b]{color:#007bff}.nav-button.prev[data-v-a35c130b]{margin-right:auto}.nav-button.prev .nav-content[data-v-a35c130b]{text-align:left}.nav-button.next[data-v-a35c130b]{flex-direction:row-reverse;margin-left:auto}.nav-button.next .nav-content[data-v-a35c130b]{text-align:right}.nav-arrow[data-v-a35c130b]{color:#6a737d;flex-shrink:0;font-weight:600;line-height:1}.nav-content[data-v-a35c130b]{display:flex;flex:1;flex-direction:column;gap:.5rem;min-width:0}.nav-label[data-v-a35c130b]{color:#6a737d;font-size:.875rem;font-weight:500}.nav-title[data-v-a35c130b]{display:-webkit-box;font-size:1rem;font-weight:600;-webkit-line-clamp:2;line-clamp:2;overflow:hidden;text-overflow:ellipsis;transition:color .2s ease;-webkit-box-orient:vertical;color:#24292e;line-height:1.4}@media(prefers-color-scheme:dark){.nav-title[data-v-a35c130b]{color:#c9d1d9}}@media(max-width:720px){.post-navigation[data-v-a35c130b]{flex-direction:column;gap:.75rem}.nav-button[data-v-a35c130b]{min-width:100%}}</style><style>#waline{--waline-theme-color:#3f72af;--waline-active-color:#173f70}#waline .wl-panel{border-radius:0;margin:0}@media(prefers-color-scheme:dark){#waline .wl-panel{border-color:#444c5a}}#waline .wl-btn{border-radius:0}</style><style>.toc[data-v-bdce45f2]{background:#fafafa;border:1px solid #e5e5e5;max-height:calc(100vh - 120px);overflow-y:auto;padding:1.25rem}@media(prefers-color-scheme:dark){.toc[data-v-bdce45f2]{background:#181c27;border:1px solid #444c5a}}@media(max-width:1024px){.toc[data-v-bdce45f2]{display:none}}.toc-title[data-v-bdce45f2]{border-bottom:1px solid #e5e5e5;color:#333;font-size:1rem;font-weight:600;margin-bottom:1rem;padding-bottom:.5rem}@media(prefers-color-scheme:dark){.toc-title[data-v-bdce45f2]{border-bottom:1px solid #444c5a;color:#fff}}.toc-list[data-v-bdce45f2]{list-style:none;margin:0;padding:0}.toc-item[data-v-bdce45f2]{line-height:1.5;margin:.3rem 0;max-height:100px;opacity:1;overflow:hidden;transition:max-height .25s ease,opacity .25s ease,margin .25s ease}.toc-item.collapsed[data-v-bdce45f2]{margin:0;max-height:0;opacity:0}.toc-item a[data-v-bdce45f2]{color:#666;display:block;font-size:.875rem;padding:.35rem .5rem;text-decoration:none;transition:color .2s,background-color .2s}@media(prefers-color-scheme:dark){.toc-item a[data-v-bdce45f2]{color:#ccc}}.toc-item a[data-v-bdce45f2]:hover{background-color:#3b82f614;color:#007bff}.toc-item.active a[data-v-bdce45f2]{background-color:#3b82f61f;color:#007bff;font-weight:500}.toc-item.toc-level-1[data-v-bdce45f2]{padding-left:0}.toc-item.toc-level-1 a[data-v-bdce45f2]{font-weight:500}.toc-item.toc-level-2[data-v-bdce45f2]{padding-left:.75rem}.toc-item.toc-level-3[data-v-bdce45f2]{padding-left:1.5rem}.toc-item.toc-level-3 a[data-v-bdce45f2]{font-size:.85rem}.toc-item.toc-level-4[data-v-bdce45f2]{padding-left:2.25rem}.toc-item.toc-level-4 a[data-v-bdce45f2]{font-size:.825rem}.toc-item.toc-level-5[data-v-bdce45f2]{padding-left:3rem}.toc-item.toc-level-5 a[data-v-bdce45f2]{font-size:.8rem}.toc-item.toc-level-6[data-v-bdce45f2]{padding-left:3.75rem}.toc-item.toc-level-6 a[data-v-bdce45f2]{font-size:.775rem}.toc[data-v-bdce45f2]::-webkit-scrollbar{width:5px}.toc[data-v-bdce45f2]::-webkit-scrollbar-track{background:transparent}.toc[data-v-bdce45f2]::-webkit-scrollbar-thumb{background:#d1d5db}.toc[data-v-bdce45f2]::-webkit-scrollbar-thumb:hover{background:#9ca3af}</style><style>footer[data-v-cc99c751]{color:#fff;justify-content:center;position:relative;width:100%}.footer-content[data-v-cc99c751],footer[data-v-cc99c751]{align-items:center;display:flex}.footer-content[data-v-cc99c751]{flex-direction:column;gap:12px;padding:20px;z-index:1}.footer-mask[data-v-cc99c751]{background:linear-gradient(180deg,#0000004d,#00000080);inset:0;position:absolute}@media(prefers-color-scheme:dark){.footer-mask[data-v-cc99c751]{background:linear-gradient(180deg,#0009,#000c)}}</style><style>.promo-card[data-v-a0786609]{background:#0003;border:.5px solid #eee;box-sizing:border-box;display:flex;flex-direction:column;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif;gap:16px;max-width:310px;padding:24px;zoom:.8}.card-header[data-v-a0786609]{justify-content:space-between}.card-header[data-v-a0786609],.header-left[data-v-a0786609]{align-items:center;display:flex}.header-left[data-v-a0786609]{gap:8px}.logo-img[data-v-a0786609]{display:block;height:auto;width:100%}.logo-yxvm-container[data-v-a0786609]{margin-left:2px;width:100px}.plus-separator[data-v-a0786609]{color:#fff;font-size:20px;font-weight:700}.logo-nodeseek-container[data-v-a0786609]{width:40px}.github-link[data-v-a0786609]{color:#94a3b8;display:block;transition:color .2s ease-in-out;width:20px}.github-link[data-v-a0786609]:hover{color:#38bdf8}.github-icon[data-v-a0786609]{fill:currentColor;height:100%;width:100%}.card-title[data-v-a0786609]{color:#fff;font-size:18px;font-weight:500;line-height:1.2;margin:0;text-transform:capitalize}.card-description[data-v-a0786609]{color:#94a3b8;font-size:14px;line-height:1.5;margin:0}.card-footer[data-v-a0786609]{color:#e4e4e7;display:flex;font-size:13px;font-weight:500;gap:4px;justify-content:flex-end}</style><style>.prose-heading[data-v-a22a06c0]{position:relative}.prose-heading:hover .heading-anchor[data-v-a22a06c0]{opacity:1}.heading-anchor[data-v-a22a06c0]{color:#3b82f6;font-weight:400;margin-left:.5rem;opacity:0;text-decoration:none;transition:opacity .2s,color .2s}.heading-anchor[data-v-a22a06c0]:hover{color:#007bff}.anchor-icon[data-v-a22a06c0]{display:inline-block}.prose-h2[data-v-a22a06c0]{margin:1.75rem 0 .875rem}</style><style>.prose-heading[data-v-894c4550]{position:relative}.prose-heading:hover .heading-anchor[data-v-894c4550]{opacity:1}.heading-anchor[data-v-894c4550]{color:#3b82f6;font-weight:400;margin-left:.5rem;opacity:0;text-decoration:none;transition:opacity .2s,color .2s}.heading-anchor[data-v-894c4550]:hover{color:#007bff}.anchor-icon[data-v-894c4550]{display:inline-block}.prose-h3[data-v-894c4550]{margin:1.5rem 0 .75rem}</style><style>pre[data-v-a9c19cc1]{font-size:14px}</style><style>.prose-img-wrapper[data-v-4f488808]{display:inline-block;position:relative}.prose-img[data-v-4f488808]{border-radius:4px;box-shadow:0 1px 4px #00000014;max-width:100%;transition:box-shadow .2s}.prose-img[data-v-4f488808]:hover{box-shadow:0 4px 16px #0000002e}.prose-img-caption[data-v-4f488808]{color:#666;display:block;font-size:.875rem;font-style:italic;margin-top:.25rem;text-align:center}.prose-img-preview-mask[data-v-4f488808]{align-items:center;animation:fadeIn-4f488808 .2s;background:#000000d9;display:flex;justify-content:center;inset:0;position:fixed;z-index:9999}.prose-img-preview-img[data-v-4f488808]{background:#fff;border-radius:8px;box-shadow:0 8px 32px #0006;max-height:90vh;max-width:90vw;will-change:transform}.prose-img-preview-img[data-v-4f488808],.prose-img-preview-scale-indicator[data-v-4f488808]{-webkit-user-select:none;-moz-user-select:none;user-select:none}.prose-img-preview-scale-indicator[data-v-4f488808]{background:#00000080;border-radius:4px;bottom:32px;color:#fff;font-size:1rem;left:50%;padding:2px 10px;pointer-events:none;position:absolute;transform:translate(-50%);z-index:10001}.prose-img-preview-close[data-v-4f488808]{background:none;border:none;color:#fff;cursor:pointer;font-size:2.5rem;line-height:1;padding:0 .5rem;position:absolute;right:48px;top:32px;transition:color .2s;z-index:10000}.prose-img-preview-close[data-v-4f488808]:hover{color:#ffb3b3}@keyframes fadeIn-4f488808{0%{opacity:0}to{opacity:1}}</style><style>@media(max-width:1024px){.pc-nav[data-v-49e970ab]{display:none}}.mobile-nav[data-v-49e970ab]{cursor:pointer;display:none}@media(max-width:1024px){.mobile-nav[data-v-49e970ab]{align-items:center;display:flex;justify-content:center}}.mobile-nav .container[data-v-49e970ab]{align-items:center;display:flex;flex-direction:column;height:20px;justify-content:center;margin:0 auto;width:25px}.mobile-nav-item[data-v-49e970ab]{background:#fff;border-radius:2px;flex-shrink:0;height:2px;margin:2.5px 0;width:100%}a[data-v-49e970ab]{color:#fff;margin-left:16px;margin-right:16px;text-decoration:none}</style><style>.banner[data-v-0f1d2f14]{height:60vh;width:100%}.mask[data-v-0f1d2f14]{align-items:center;background:#0000001a;display:flex;height:100%;justify-content:center;width:100%}@media(prefers-color-scheme:dark){.mask[data-v-0f1d2f14]{background:#00000080}}.title-container[data-v-0f1d2f14]{align-items:center;color:#fff;display:flex;height:100%;justify-content:center;margin:auto;width:50%}@media(max-width:1024px){.title-container[data-v-0f1d2f14]{width:80%}}.title[data-v-0f1d2f14]{color:#fff;margin:auto auto auto 0;padding-top:58px;text-shadow:0 0 5px rgba(0,0,0,.7)}.title h1[data-v-0f1d2f14]{font-size:32px;font-weight:700;margin:0}@media(max-width:720px){.title h1[data-v-0f1d2f14]{font-size:24px}}.title p[data-v-0f1d2f14]{font-size:16px;font-weight:300;margin:8px 0}@media(max-width:1024px){.title[data-v-0f1d2f14]{margin:auto;text-align:center}}</style><style>.search-overlay-enter-active[data-v-63592d71],.search-overlay-leave-active[data-v-63592d71]{transition:opacity .2s ease}.search-overlay-enter-from[data-v-63592d71],.search-overlay-leave-to[data-v-63592d71]{opacity:0}.search-overlay[data-v-63592d71]{align-items:flex-start;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);background:#00000059;display:flex;justify-content:center;inset:0;padding:120px 16px 40px;position:fixed;z-index:2000}.search-overlay__panel[data-v-63592d71]{background:#fffffff2;box-shadow:0 18px 50px #00000040;display:flex;flex-direction:column;max-height:calc(100vh - 160px);overflow:hidden;width:min(720px,100%)}.search-overlay__header[data-v-63592d71]{align-items:center;border-bottom:1px solid rgba(0,0,0,.05);display:flex;gap:12px;padding:16px 20px 16px 16px}.search-overlay__input[data-v-63592d71]{background:#ffffffd9;border:1px solid rgba(0,0,0,.12);flex:1;font-size:16px;padding:12px 16px;transition:border-color .2s ease}.search-overlay__input[data-v-63592d71]:focus{border-color:#007bff;outline:none}.search-overlay__close[data-v-63592d71]{background:transparent;border:none;border-radius:50%;color:#0000008c;cursor:pointer;font-size:24px;height:32px;line-height:24px;width:32px}.search-overlay__close[data-v-63592d71]:hover{color:#000c}.search-overlay__body[data-v-63592d71]{overflow-y:auto;padding:8px 0 20px}.search-overlay__state[data-v-63592d71]{color:#00000094;margin:20px;text-align:center}.search-overlay__count[data-v-63592d71]{color:#000000b3;font-weight:600;margin:12px 24px 0}.search-overlay__list[data-v-63592d71]{display:flex;flex-direction:column;gap:12px;list-style:none;margin:16px 0 0;padding:0 8px 8px}.search-overlay__item[data-v-63592d71]{background:#ffffffe6;border-radius:12px;box-shadow:0 8px 18px #00000014;transition:transform .2s ease}.search-overlay__item[data-v-63592d71]:hover{transform:translateY(-2px)}.search-overlay__link[data-v-63592d71]{color:inherit;display:block;padding:16px 20px;text-decoration:none}.search-overlay__item-title[data-v-63592d71]{color:#007bff;font-size:18px;font-weight:700;margin:0}.search-overlay__item-meta[data-v-63592d71]{color:#0009;font-size:13px;margin:8px 0 0}.search-overlay__item-meta span[data-v-63592d71]{color:#0000008c}.search-overlay__item-snippet[data-v-63592d71]{color:#000c;font-size:14px;line-height:1.6;margin:12px 0 0}@media(max-width:768px){.search-overlay[data-v-63592d71]{padding:80px 12px 20px}.search-overlay__panel[data-v-63592d71]{max-height:calc(100vh - 120px)}}</style><link rel="stylesheet" href="/_nuxt/entry.wK2xKsNV.css" crossorigin><link rel="stylesheet" href="/_nuxt/DefaultLayout.CLW2JBZQ.css" crossorigin><link rel="preload" as="fetch" crossorigin="anonymous" href="/2023/12/12/php-simple-rest-api/_payload.json?7614202b-c42b-475b-9c9f-ec23747eadd1"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/DzIPptdI.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/01QxMyNp.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/eYsbmcEr.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BT3PaOQP.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CfSDnwlJ.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/h0q5Nbny.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/DJYLLMWj.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/OY-YCYvL.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/DqJ5PcCK.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/DCqHRgoC.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/Du6z2elL.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/DxQwdxcU.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/D97QUGug.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BPnXHNG5.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CRJsjJ9J.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/Ca4HhPoc.js"><link rel="preload" as="fetch" fetchpriority="low" crossorigin="anonymous" href="/_nuxt/builds/meta/7614202b-c42b-475b-9c9f-ec23747eadd1.json"><script src="/js/u.js" defer data-website-id="5346b89b-f4bf-4593-971d-1f41a1118bc1"></script><link rel="prefetch" as="style" href="https://s4.zstatic.net/ajax/libs/github-markdown-css/5.8.1/github-markdown.min.css"><link rel="alternate" type="application/rss+xml" title="竹林里有冰的博客 RSS Feed (Chinese)" href="https://zhul.in/rss.xml"><link rel="alternate" type="application/atom+xml" title="竹林里有冰的博客 Atom Feed (English)" href="https://zhul.in/en/rss.xml"><meta name="description" content><meta property="og:type" content="website"><meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"><meta name="keywords" content="Translation,PHP"><script type="module" src="/_nuxt/DzIPptdI.js" crossorigin></script><meta name="twitter:card" content="summary_large_image"><meta property="og:title" data-infer="" content="【翻译】使用 PHP 构建简单的 REST API | 竹林里有冰的博客"><meta property="og:description" data-infer="" content><link rel="canonical" href="https://zhul.in/2023/12/12/php-simple-rest-api/"><meta property="og:url" content="https://zhul.in/2023/12/12/php-simple-rest-api/"><meta property="og:locale" content="zh_CN"><meta property="og:site_name" content="竹林里有冰的博客"></head><body><!--teleport start anchor--><!----><!--teleport anchor--><!--teleport start anchor--><!----><!--teleport anchor--><!--teleport start anchor--><!----><!--teleport anchor--><!--teleport start anchor--><!----><!--teleport anchor--><!--teleport start anchor--><!----><!--teleport anchor--><!--teleport start anchor--><!----><!--teleport anchor--><div id="__nuxt"><!--[--><div></div><div data-v-6c2349ae data-v-40d23075><!--[--><header class="" data-v-c4c9a290><div class="header-container" data-v-c4c9a290><div class="header" data-v-c4c9a290><a href="/" class="header-title" data-v-c4c9a290>竹林里有冰的博客</a><div class="header-right" data-v-c4c9a290><nav data-v-c4c9a290 data-v-49e970ab><div class="pc-nav" data-v-49e970ab><!--[--><a href="/" class="" data-v-49e970ab>首页</a><a href="/archives/" class="" data-v-49e970ab>归档</a><a href="/tags/" class="" data-v-49e970ab>标签</a><a href="/links/" class="" data-v-49e970ab>友链</a><a href="/about/" class="" data-v-49e970ab>关于</a><!--]--></div><div class="mobile-nav" data-v-49e970ab><div class="container" data-v-49e970ab><!--[--><div class="mobile-nav-item" data-v-49e970ab></div><div class="mobile-nav-item" data-v-49e970ab></div><div class="mobile-nav-item" data-v-49e970ab></div><!--]--></div></div></nav><button type="button" class="lang-switch" aria-label="Switch Language" data-v-c4c9a290><span class="lang-switch__label" data-v-c4c9a290>En</span></button><button type="button" class="search-trigger" aria-label="Search" data-v-c4c9a290><svg viewBox="0 0 24 24" width="1.2em" height="1.2em" data-v-c4c9a290><path fill="currentColor" d="M15.5 14h-.79l-.28-.27A6.47 6.47 0 0 0 16 9.5A6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5S14 7.01 14 9.5S11.99 14 9.5 14"></path></svg><span class="search-trigger__label" data-v-c4c9a290>搜索</span></button></div></div></div><!----></header><div class="banner" style="background-color:#000000;background-repeat:no-repeat;background-position:center center;background-size:cover;background-image:url(&quot;data:image/svg+xml,%3Csvg xmlns=&#39;http://www.w3.org/2000/svg&#39; viewBox=&#39;0 0 2000 1500&#39;%3E%3Cdefs%3E%3Ccircle stroke=&#39;%23D60&#39; vector-effect=&#39;non-scaling-stroke&#39; id=&#39;a&#39; fill=&#39;none&#39; stroke-width=&#39;5&#39; r=&#39;315&#39;/%3E%3Cuse id=&#39;f&#39; href=&#39;%23a&#39; stroke-dasharray=&#39;100 100 100 9999&#39;/%3E%3Cuse id=&#39;b&#39; href=&#39;%23a&#39; stroke-dasharray=&#39;250 250 250 250 250 9999&#39;/%3E%3Cuse id=&#39;e&#39; href=&#39;%23a&#39; stroke-dasharray=&#39;1000 500 1000 500 9999&#39;/%3E%3Cuse id=&#39;g&#39; href=&#39;%23a&#39; stroke-dasharray=&#39;1500 9999&#39;/%3E%3Cuse id=&#39;h&#39; href=&#39;%23a&#39; stroke-dasharray=&#39;2000 500 500 9999&#39;/%3E%3Cuse id=&#39;j&#39; href=&#39;%23a&#39; stroke-dasharray=&#39;800 800 800 800 800 9999&#39;/%3E%3Cuse id=&#39;k&#39; href=&#39;%23a&#39; stroke-dasharray=&#39;1200 1200 1200 1200 1200 9999&#39;/%3E%3Cuse id=&#39;l&#39; href=&#39;%23a&#39; stroke-dasharray=&#39;1600 1600 1600 1600 1600 9999&#39;/%3E%3C/defs%3E%3Cg transform=&#39;translate(1000 750)&#39; %3E%3Cg transform=&#39;rotate(0 0 0)&#39; %3E%3Ccircle fill=&#39;%23D60&#39; r=&#39;10&#39;/%3E%3Cg transform=&#39;rotate(0 0 0)&#39;%3E%3Cuse href=&#39;%23f&#39; transform=&#39;scale(.1) rotate(50 0 0)&#39; /%3E%3Cuse href=&#39;%23f&#39; transform=&#39;scale(.2) rotate(100 0 0)&#39; /%3E%3Cuse href=&#39;%23f&#39; transform=&#39;scale(.3) rotate(150 0 0)&#39; /%3E%3C/g%3E%3Cg transform=&#39;rotate(0 0 0)&#39;%3E%3Cuse href=&#39;%23b&#39; transform=&#39;scale(.4) rotate(200 0 0)&#39; /%3E%3Cuse href=&#39;%23z&#39; transform=&#39;scale(.5) rotate(250 0 0)&#39; /%3E%3C/g%3E%3Cg id=&#39;z&#39; transform=&#39;rotate(0 0 0)&#39;%3E%3Cg transform=&#39;rotate(0 0 0)&#39;%3E%3Cuse href=&#39;%23b&#39;/%3E%3Cuse href=&#39;%23b&#39; transform=&#39;scale(1.2) rotate(90 0 0)&#39; /%3E%3Cuse href=&#39;%23b&#39; transform=&#39;scale(1.4) rotate(60 0 0)&#39; /%3E%3Cuse href=&#39;%23e&#39; transform=&#39;scale(1.6) rotate(120 0 0)&#39; /%3E%3Cuse href=&#39;%23e&#39; transform=&#39;scale(1.8) rotate(30 0 0)&#39; /%3E%3C/g%3E%3C/g%3E%3Cg id=&#39;y&#39; transform=&#39;rotate(0 0 0)&#39;%3E%3Cg transform=&#39;rotate(0 0 0)&#39;%3E%3Cuse href=&#39;%23e&#39; transform=&#39;scale(1.1) rotate(20 0 0)&#39; /%3E%3Cuse href=&#39;%23g&#39; transform=&#39;scale(1.3) rotate(-40 0 0)&#39; /%3E%3Cuse href=&#39;%23g&#39; transform=&#39;scale(1.5) rotate(60 0 0)&#39; /%3E%3Cuse href=&#39;%23h&#39; transform=&#39;scale(1.7) rotate(-80 0 0)&#39; /%3E%3Cuse href=&#39;%23j&#39; transform=&#39;scale(1.9) rotate(100 0 0)&#39; /%3E%3C/g%3E%3C/g%3E%3Cg transform=&#39;rotate(0 0 0)&#39;%3E%3Cg transform=&#39;rotate(0 0 0)&#39;%3E%3Cg transform=&#39;rotate(0 0 0)&#39;%3E%3Cuse href=&#39;%23h&#39; transform=&#39;scale(2) rotate(60 0 0)&#39;/%3E%3Cuse href=&#39;%23j&#39; transform=&#39;scale(2.1) rotate(120 0 0)&#39;/%3E%3Cuse href=&#39;%23j&#39; transform=&#39;scale(2.3) rotate(180 0 0)&#39;/%3E%3Cuse href=&#39;%23h&#39; transform=&#39;scale(2.4) rotate(240 0 0)&#39;/%3E%3Cuse href=&#39;%23j&#39; transform=&#39;scale(2.5) rotate(300 0 0)&#39;/%3E%3C/g%3E%3Cuse href=&#39;%23y&#39; transform=&#39;scale(2) rotate(180 0 0)&#39; /%3E%3Cuse href=&#39;%23j&#39; transform=&#39;scale(2.7)&#39;/%3E%3Cuse href=&#39;%23j&#39; transform=&#39;scale(2.8) rotate(45 0 0)&#39;/%3E%3Cuse href=&#39;%23j&#39; transform=&#39;scale(2.9) rotate(90 0 0)&#39;/%3E%3Cuse href=&#39;%23k&#39; transform=&#39;scale(3.1) rotate(135 0 0)&#39;/%3E%3Cuse href=&#39;%23k&#39; transform=&#39;scale(3.2) rotate(180 0 0)&#39;/%3E%3C/g%3E%3Cuse href=&#39;%23k&#39; transform=&#39;scale(3.3) rotate(225 0 0)&#39;/%3E%3Cuse href=&#39;%23k&#39; transform=&#39;scale(3.5) rotate(270 0 0)&#39;/%3E%3Cuse href=&#39;%23k&#39; transform=&#39;scale(3.6) rotate(315 0 0)&#39;/%3E%3Cuse href=&#39;%23k&#39; transform=&#39;scale(3.7)&#39;/%3E%3Cuse href=&#39;%23k&#39; transform=&#39;scale(3.9) rotate(75 0 0)&#39;/%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E&quot;);" data-v-c4c9a290 data-v-0f1d2f14><div class="mask" data-v-0f1d2f14><div class="title-container" data-v-0f1d2f14><div class="title" data-v-0f1d2f14><h1 data-v-0f1d2f14>【翻译】使用 PHP 构建简单的 REST API</h1><!----></div></div></div></div><!--teleport start--><!--teleport end--><!--]--><div class="content-wrapper" data-v-40d23075><div class="before-main side" data-v-40d23075><!--[--><!--]--></div><main data-v-40d23075><!--[--><article class="markdown-body" data-v-6c2349ae><blockquote><!--[--><p><!--[-->我这学期有一门偏向前端的 WEB 课程，期末大作业要求使用 PHP 作为后端语言实现一个简单的影评系统，应该是不允许使用框架，使用中文关键字在搜索引擎上搜了一阵子似乎没有可供参考的案例，后来就找到了这篇博客，当中的许多观点与我不谋而合，因此我将这篇博客翻译成中文，原文戳这里: <a href="https://amirkamizi.com/blog/php-simple-rest-api" rel="nofollow"><!--[-->https://amirkamizi.com/blog/php-simple-rest-api<!--]--></a><!--]--></p><!--]--></blockquote><h2 id="介绍" class="prose-heading prose-h2" data-v-a22a06c0><!--[-->介绍<!--]--><a href="#介绍" class="heading-anchor" aria-label="链接到此标题" data-v-a22a06c0><span class="anchor-icon" data-v-a22a06c0>#</span></a></h2><p><!--[-->上周 @rapid_api 发了一个非常好的关于<a href="https://twitter.com/Rapid_API/status/1486423046424563714" rel="nofollow"><!--[-->使用 nodejs 和 express 创建 REST API<!--]--></a> 的教程帖子。我想要帮助你使用 PHP 开发同样简单的 REST API。<!--]--></p><p><!--[-->首先，如果你不了解 REST API，请务必查看这个 <a href="https://twitter.com/Rapid_API/status/1452932706967461890" rel="nofollow"><!--[-->Twitter 帖子<!--]--></a>。<!--]--></p><h2 id="目标" class="prose-heading prose-h2" data-v-a22a06c0><!--[-->目标<!--]--><a href="#目标" class="heading-anchor" aria-label="链接到此标题" data-v-a22a06c0><span class="anchor-icon" data-v-a22a06c0>#</span></a></h2><p><!--[-->在我们开始之前，我想提一句，当我写这篇帖子的时候，我想确保：<!--]--></p><ol><!--[--><li><!--[-->我使用单纯的 PHP，不使用框架<!--]--></li><li><!--[-->我使用最简单的函数和结构体以便所有人都可以理解并跟上<!--]--></li><li><!--[-->我将主体部分分开<!--]--></li><!--]--></ol><p><!--[-->现在让我们开始吧<!--]--></p><h2 id="准备" class="prose-heading prose-h2" data-v-a22a06c0><!--[-->准备<!--]--><a href="#准备" class="heading-anchor" aria-label="链接到此标题" data-v-a22a06c0><span class="anchor-icon" data-v-a22a06c0>#</span></a></h2><p><!--[-->在我本地的机器上，我创建了一个叫 api 的文件夹于 xampp &gt; htdocs，在里面有一个叫 index.php 的文件<!--]--></p><p><!--[-->如果你没有 xampp 或者你不知道如何把 php 跑起来，请务必查看<a href="https://amirkamizi.com/blog/introduction-to-php" rel="nofollow"><!--[-->这篇文章<!--]--></a><!--]--></p><p><!--[-->现在，如果你尝试访问 localhost/api，你将得到一个空的响应，因为 index.php 文件是空的<!--]--></p><h2 id="优雅的-url" class="prose-heading prose-h2" data-v-a22a06c0><!--[-->优雅的 URL<!--]--><a href="#优雅的-url" class="heading-anchor" aria-label="链接到此标题" data-v-a22a06c0><span class="anchor-icon" data-v-a22a06c0>#</span></a></h2><p><!--[-->项目中，我们需要处理的第一件事是 url<!--]--></p><p><!--[-->REST API 的关键特性之一是每一个 url 负责一个资源和一个操作<!--]--></p><h3 id="问题" class="prose-heading prose-h3" data-v-894c4550><!--[-->问题<!--]--><a href="#问题" class="heading-anchor" aria-label="链接到此标题" data-v-894c4550><span class="anchor-icon" data-v-894c4550>#</span></a></h3><p><!--[-->这时候如果我创建一个 users.php，我需要访问<!--]--></p><pre class="language-text" data-v-a9c19cc1><!--[--><code>localhost/api/users.php
</code><!--]--></pre><p><!--[-->我需要为每一个 user id 创建一个新的文件<!--]--></p><pre class="language-text" data-v-a9c19cc1><!--[--><code>localhost/api/users/1.php
localhost/api/users/2.php
</code><!--]--></pre><p><!--[-->以此类推。<!--]--></p><p><!--[-->这种方案有两个问题<!--]--></p><ol><!--[--><li><!--[-->为每个用户创建一个新文件是非常无聊和耗时的<!--]--></li><li><!--[-->路由不优雅，每个路径后面都带有 .php<!--]--></li><!--]--></ol><h3 id="解决方案" class="prose-heading prose-h3" data-v-894c4550><!--[-->解决方案<!--]--><a href="#解决方案" class="heading-anchor" aria-label="链接到此标题" data-v-894c4550><span class="anchor-icon" data-v-894c4550>#</span></a></h3><p><!--[-->让我们解决这个问题。<!--]--></p><p><!--[-->正如我所提到的，我不想使用任何框架，并且我想使用最简单的、最让人能够理解的方案<!--]--></p><p><!--[-->让我们看看如何解决这个问题<!--]--></p><p><!--[-->在 api 文件夹下创建一个叫 .htaccess 的文件，并且将下面的文本复制进去<!--]--></p><pre class="language-htaccess shiki shiki-themes one-light one-dark-pro" style="" data-v-a9c19cc1><!--[--><code><span class="line" line="1"><span>RewriteEngine On
</span></span><span class="line" line="2"><span>RewriteBase /api
</span></span><span class="line" line="3"><span>RewriteCond %{REQUEST_FILENAME} !-d
</span></span><span class="line" line="4"><span>RewriteCond %{REQUEST_FILENAME} !-f
</span></span><span class="line" line="5"><span>RewriteRule ^(.+)$ index.php [QSA,L]
</span></span></code><!--]--></pre><p><!--[-->我们告诉服务器，将所有指向 /api 的请求都转发到 index.php 文件<!--]--></p><p><!--[-->现在，所有的 url 都指向 index.php 了，比如下面的 url 都是指向 index.php 的<!--]--></p><pre class="language-text" data-v-a9c19cc1><!--[--><code>api/users
api/users/10
api/users/5
</code><!--]--></pre><p><!--[-->现在我们同时解决了这两个问题<!--]--></p><ol><!--[--><li><!--[-->所有的 url 都被一个文件处理<!--]--></li><li><!--[-->url 都很优雅，结尾处没有 .php<!--]--></li><!--]--></ol><h2 id="uri" class="prose-heading prose-h2" data-v-a22a06c0><!--[-->URI<!--]--><a href="#uri" class="heading-anchor" aria-label="链接到此标题" data-v-a22a06c0><span class="anchor-icon" data-v-a22a06c0>#</span></a></h2><p><!--[-->但如何知道用户请求的是哪个 uri 呢？<!--]--></p><p><!--[-->很简单，使用 $_SERVER 超全局变量<!--]--></p><p><!--[-->让我们来看一些例子<!--]--></p><pre class="language-php shiki shiki-themes one-light one-dark-pro" style="" data-v-a9c19cc1><!--[--><code><span class="line" line="1"><span class="sW2Sy">// url api/users
</span></span><span class="line" line="2"><span class="s_Sar">echo</span><span class="sJa8x"> $_SERVER</span><span class="s5ixo">[</span><span class="sDhpE">&#39;REQUEST_URI&#39;</span><span class="s5ixo">];
</span></span><span class="line" line="3"><span class="sW2Sy">// /api/users
</span></span><span class="line" line="4"><span emptylineplaceholder="true">
</span></span><span class="line" line="5"><span class="sW2Sy">// url api/users/5
</span></span><span class="line" line="6"><span class="s_Sar">echo</span><span class="sJa8x"> $_SERVER</span><span class="s5ixo">[</span><span class="sDhpE">&#39;REQUEST_URI&#39;</span><span class="s5ixo">];
</span></span><span class="line" line="7"><span class="sW2Sy">// /api/users/5
</span></span><span class="line" line="8"><span emptylineplaceholder="true">
</span></span><span class="line" line="9"><span class="sW2Sy">// url api
</span></span><span class="line" line="10"><span class="s_Sar">echo</span><span class="sJa8x"> $_SERVER</span><span class="s5ixo">[</span><span class="sDhpE">&#39;REQUEST_URI&#39;</span><span class="s5ixo">];
</span></span><span class="line" line="11"><span class="sW2Sy">// /api
</span></span></code><!--]--></pre><p><!--[-->看见了吗？这就是我们所需要的<!--]--></p><p><!--[-->现在，使用一个简单的 if 或者 switch 语句，我们就可以处理不同的路径了<!--]--></p><p><!--[-->如果你从来没有用过这些语句，去读<a href="https://amirkamizi.com/blog/php-conditionals" rel="nofollow"><!--[-->这篇文章<!--]--></a>。<!--]--></p><h2 id="请求方法" class="prose-heading prose-h2" data-v-a22a06c0><!--[-->请求方法<!--]--><a href="#请求方法" class="heading-anchor" aria-label="链接到此标题" data-v-a22a06c0><span class="anchor-icon" data-v-a22a06c0>#</span></a></h2><p><!--[-->接下来，我们需要从请求中获取请求的方法，以查看它是GET、POST、PUT、PATCH还是DELETE。<!--]--></p><p><!--[-->你可以从 $_SERVER 超全局数组中获取这个信息。<!--]--></p><pre class="language-php shiki shiki-themes one-light one-dark-pro" style="" data-v-a9c19cc1><!--[--><code><span class="line" line="1"><span class="sJa8x">$_SERVER</span><span class="s5ixo">[</span><span class="sDhpE">&#39;REQUEST_METHOD&#39;</span><span class="s5ixo">]
</span></span></code><!--]--></pre><p><!--[-->让我们将这两个值存储在变量中：<!--]--></p><pre class="language-php shiki shiki-themes one-light one-dark-pro" style="" data-v-a9c19cc1><!--[--><code><span class="line" line="1"><span class="sJa8x">$uri</span><span class="sknuh"> =</span><span class="sJa8x"> $_SERVER</span><span class="s5ixo">[</span><span class="sDhpE">&#39;REQUEST_URI&#39;</span><span class="s5ixo">];
</span></span><span class="line" line="2"><span class="sJa8x">$method</span><span class="sknuh"> =</span><span class="sJa8x"> $_SERVER</span><span class="s5ixo">[</span><span class="sDhpE">&#39;REQUEST_METHOD&#39;</span><span class="s5ixo">];
</span></span></code><!--]--></pre><p><!--[-->我们可以在一个简单的 switch 语句中使用这两个变量来处理不同的请求。<!--]--></p><p><!--[-->我们需要判断以下请求<!--]--></p><ul><!--[--><li><!--[-->api/users 的 GET 请求<!--]--></li><li><!--[-->api/users/{id} 的 GET 请求<!--]--></li><li><!--[-->api/users 的 POST 请求<!--]--></li><li><!--[-->api/users/{id} 的 PUT 请求<!--]--></li><li><!--[-->api/users/{id} 的 DELETE 请求<!--]--></li><!--]--></ul><p><!--[-->让我们编写针对上述请求的 switch 语句<!--]--></p><pre class="language-php shiki shiki-themes one-light one-dark-pro" style="" data-v-a9c19cc1><!--[--><code><span class="line" line="1"><span class="sLKXg">switch</span><span class="s5ixo"> (</span><span class="sJa8x">$method</span><span class="sknuh"> |</span><span class="sJa8x"> $uri</span><span class="s5ixo">) {
</span></span><span class="line" line="2"><span class="sW2Sy">   /*
</span></span><span class="line" line="3"><span class="sW2Sy">   * Path: GET /api/users
</span></span><span class="line" line="4"><span class="sW2Sy">   * Task: show all the users
</span></span><span class="line" line="5"><span class="sW2Sy">   */
</span></span><span class="line" line="6"><span class="sLKXg">   case</span><span class="s5ixo"> (</span><span class="sJa8x">$method</span><span class="sknuh"> ==</span><span class="sDhpE"> &#39;GET&#39;</span><span class="sknuh"> &amp;&amp;</span><span class="sJa8x"> $uri</span><span class="sknuh"> ==</span><span class="sDhpE"> &#39;/api/users&#39;</span><span class="s5ixo">):
</span></span><span class="line" line="7"><span class="sLKXg">       break</span><span class="s5ixo">;
</span></span><span class="line" line="8"><span class="sW2Sy">   /*
</span></span><span class="line" line="9"><span class="sW2Sy">   * Path: GET /api/users/{id}
</span></span><span class="line" line="10"><span class="sW2Sy">   * Task: get one user
</span></span><span class="line" line="11"><span class="sW2Sy">   */
</span></span><span class="line" line="12"><span class="sLKXg">   case</span><span class="s5ixo"> (</span><span class="sJa8x">$method</span><span class="sknuh"> ==</span><span class="sDhpE"> &#39;GET&#39;</span><span class="sknuh"> &amp;&amp;</span><span class="s_Sar"> preg_match</span><span class="s5ixo">(</span><span class="sDaw7">&#39;/</span><span class="s_Sar">\/</span><span class="sDaw7">api</span><span class="s_Sar">\/</span><span class="sDaw7">users</span><span class="s_Sar">\/</span><span class="sDaw7">[1-9]/&#39;</span><span class="s5ixo">,</span><span class="sJa8x"> $uri</span><span class="s5ixo">)):
</span></span><span class="line" line="13"><span class="sLKXg">       break</span><span class="s5ixo">;
</span></span><span class="line" line="14"><span class="sW2Sy">   /*
</span></span><span class="line" line="15"><span class="sW2Sy">   * Path: POST /api/users
</span></span><span class="line" line="16"><span class="sW2Sy">   * Task: store one user
</span></span><span class="line" line="17"><span class="sW2Sy">   */
</span></span><span class="line" line="18"><span class="sLKXg">   case</span><span class="s5ixo"> (</span><span class="sJa8x">$method</span><span class="sknuh"> ==</span><span class="sDhpE"> &#39;POST&#39;</span><span class="sknuh"> &amp;&amp;</span><span class="sJa8x"> $uri</span><span class="sknuh"> ==</span><span class="sDhpE"> &#39;/api/users&#39;</span><span class="s5ixo">):
</span></span><span class="line" line="19"><span class="sLKXg">       break</span><span class="s5ixo">;
</span></span><span class="line" line="20"><span class="sW2Sy">   /*
</span></span><span class="line" line="21"><span class="sW2Sy">   * Path: PUT /api/users/{id}
</span></span><span class="line" line="22"><span class="sW2Sy">   * Task: update one user
</span></span><span class="line" line="23"><span class="sW2Sy">   */
</span></span><span class="line" line="24"><span class="sLKXg">   case</span><span class="s5ixo"> (</span><span class="sJa8x">$method</span><span class="sknuh"> ==</span><span class="sDhpE"> &#39;PUT&#39;</span><span class="sknuh"> &amp;&amp;</span><span class="s_Sar"> preg_match</span><span class="s5ixo">(</span><span class="sDaw7">&#39;/</span><span class="s_Sar">\/</span><span class="sDaw7">api</span><span class="s_Sar">\/</span><span class="sDaw7">users</span><span class="s_Sar">\/</span><span class="sDaw7">[1-9]/&#39;</span><span class="s5ixo">,</span><span class="sJa8x"> $uri</span><span class="s5ixo">)):
</span></span><span class="line" line="25"><span class="sLKXg">       break</span><span class="s5ixo">;
</span></span><span class="line" line="26"><span class="sW2Sy">   /*
</span></span><span class="line" line="27"><span class="sW2Sy">   * Path: DELETE /api/users/{id}
</span></span><span class="line" line="28"><span class="sW2Sy">   * Task: delete one user
</span></span><span class="line" line="29"><span class="sW2Sy">   */
</span></span><span class="line" line="30"><span class="sLKXg">   case</span><span class="s5ixo"> (</span><span class="sJa8x">$method</span><span class="sknuh"> ==</span><span class="sDhpE"> &#39;</span><span class="sLKXg">DELETE</span><span class="sDhpE">&#39;</span><span class="sknuh"> &amp;&amp;</span><span class="s_Sar"> preg_match</span><span class="s5ixo">(</span><span class="sDaw7">&#39;/</span><span class="s_Sar">\/</span><span class="sDaw7">api</span><span class="s_Sar">\/</span><span class="sDaw7">users</span><span class="s_Sar">\/</span><span class="sDaw7">[1-9]/&#39;</span><span class="s5ixo">,</span><span class="sJa8x"> $uri</span><span class="s5ixo">)):
</span></span><span class="line" line="31"><span class="sLKXg">       break</span><span class="s5ixo">;
</span></span><span class="line" line="32"><span class="sW2Sy">   /*
</span></span><span class="line" line="33"><span class="sW2Sy">   * Path: ?
</span></span><span class="line" line="34"><span class="sW2Sy">   * Task: this path doesn&#39;t match any of the defined paths
</span></span><span class="line" line="35"><span class="sW2Sy">   *      throw an error
</span></span><span class="line" line="36"><span class="sW2Sy">   */
</span></span><span class="line" line="37"><span class="sLKXg">   default</span><span class="s5ixo">:
</span></span><span class="line" line="38"><span class="sLKXg">       break</span><span class="s5ixo">;
</span></span><span class="line" line="39"><span class="s5ixo">}
</span></span></code><!--]--></pre><p><!--[-->当我们想要在 switch 语句中使用两个变量，我们可以使用 | 符号<!--]--></p><p><!--[-->如果你想知道 preg_match 是如何工作的，看<a href="https://amirkamizi.com/blog/php-regular-expressions" rel="nofollow"><!--[-->这篇文章<!--]--></a>。<!--]--></p><h2 id="数据库" class="prose-heading prose-h2" data-v-a22a06c0><!--[-->数据库<!--]--><a href="#数据库" class="heading-anchor" aria-label="链接到此标题" data-v-a22a06c0><span class="anchor-icon" data-v-a22a06c0>#</span></a></h2><p><!--[-->现在是说说数据。储存数据的最好方法是将数据储存在数据库中。但在这篇教程中，我不想使用数据库。因此，我们使用一个 json 文件当作数据库来保证数据的持久性。<!--]--></p><p><!--[-->我的 json 文件看起来长成这个样子：<!--]--></p><pre class="language-json shiki shiki-themes one-light one-dark-pro" style="" data-v-a9c19cc1><!--[--><code><span class="line" line="1"><span class="s5ixo">{
</span></span><span class="line" line="2"><span class="sJa8x">   &quot;1&quot;</span><span class="s5ixo">: </span><span class="sDhpE">&quot;Pratham&quot;</span><span class="s5ixo">,
</span></span><span class="line" line="3"><span class="sJa8x">   &quot;2&quot;</span><span class="s5ixo">: </span><span class="sDhpE">&quot;Amir&quot;
</span></span><span class="line" line="4"><span class="s5ixo">}
</span></span></code><!--]--></pre><p><!--[-->如果你想知道如何使用 json，看<a href="https://amirkamizi.com/blog/php-xml-and-json" rel="nofollow"><!--[-->这篇文章<!--]--></a><!--]--></p><p><!--[-->我加载 json 数据并将其转换为数组，然后在 php 使用他们。如果我想要更改数据，我将数组转换回 json 并将其重新写入文件。<!--]--></p><p><!--[-->要将整个文件作为一个字符串读取并存储在变量中，我使用：<!--]--></p><pre class="language-php shiki shiki-themes one-light one-dark-pro" style="" data-v-a9c19cc1><!--[--><code><span class="line" line="1"><span class="s_Sar">file_get_contents</span><span class="s5ixo">(</span><span class="sJa8x">$jsonFile</span><span class="s5ixo">);
</span></span></code><!--]--></pre><p><!--[-->而要将json写入文件，我使用：<!--]--></p><pre class="language-php shiki shiki-themes one-light one-dark-pro" style="" data-v-a9c19cc1><!--[--><code><span class="line" line="1"><span class="s_Sar">file_put_contents</span><span class="s5ixo">(</span><span class="sJa8x">$jsonFile</span><span class="s5ixo">,</span><span class="sJa8x"> $data</span><span class="s5ixo">);
</span></span></code><!--]--></pre><p><!--[-->好了，现在我们的数据库处理好了，让我们开始处理所有的路径。<!--]--></p><p><!--[-->我使用 Postman 发送请求并查看响应。<!--]--></p><h2 id="获取所有用户" class="prose-heading prose-h2" data-v-a22a06c0><!--[-->获取所有用户<!--]--><a href="#获取所有用户" class="heading-anchor" aria-label="链接到此标题" data-v-a22a06c0><span class="anchor-icon" data-v-a22a06c0>#</span></a></h2><pre class="language-php shiki shiki-themes one-light one-dark-pro" style="" data-v-a9c19cc1><!--[--><code><span class="line" line="1"><span class="sLKXg">case</span><span class="s5ixo"> (</span><span class="sJa8x">$method</span><span class="sknuh"> ==</span><span class="sDhpE"> &#39;GET&#39;</span><span class="sknuh"> &amp;&amp;</span><span class="sJa8x"> $uri</span><span class="sknuh"> ==</span><span class="sDhpE"> &#39;/api/users&#39;</span><span class="s5ixo">):
</span></span><span class="line" line="2"><span class="s_Sar">   header</span><span class="s5ixo">(</span><span class="sDhpE">&#39;Content-Type: application/json&#39;</span><span class="s5ixo">);
</span></span><span class="line" line="3"><span class="s_Sar">   echo</span><span class="s_Sar"> json_encode</span><span class="s5ixo">(</span><span class="sJa8x">$users</span><span class="s5ixo">,</span><span class="sxymB"> JSON_PRETTY_PRINT</span><span class="s5ixo">);
</span></span><span class="line" line="4"><span class="sLKXg">   break</span><span class="s5ixo">;
</span></span></code><!--]--></pre><p><!--[--><span class="prose-img-wrapper" data-v-4f488808><img src="https://static.031130.xyz/uploads/2024/08/12/6577fcdf64a96.webp" alt="" title="" loading="lazy" class="prose-img" style="cursor:zoom-in;" data-v-4f488808><!----><!--teleport start--><!--teleport end--></span><!--]--></p><h2 id="获取单个用户" class="prose-heading prose-h2" data-v-a22a06c0><!--[-->获取单个用户<!--]--><a href="#获取单个用户" class="heading-anchor" aria-label="链接到此标题" data-v-a22a06c0><span class="anchor-icon" data-v-a22a06c0>#</span></a></h2><pre class="language-php shiki shiki-themes one-light one-dark-pro" style="" data-v-a9c19cc1><!--[--><code><span class="line" line="1"><span class="sLKXg">case</span><span class="s5ixo"> (</span><span class="sJa8x">$method</span><span class="sknuh"> ==</span><span class="sDhpE"> &#39;GET&#39;</span><span class="sknuh"> &amp;&amp;</span><span class="s_Sar"> preg_match</span><span class="s5ixo">(</span><span class="sDaw7">&#39;/</span><span class="s_Sar">\/</span><span class="sDaw7">api</span><span class="s_Sar">\/</span><span class="sDaw7">users</span><span class="s_Sar">\/</span><span class="sDaw7">[1-9]/&#39;</span><span class="s5ixo">,</span><span class="sJa8x"> $uri</span><span class="s5ixo">)):
</span></span><span class="line" line="2"><span class="s_Sar">   header</span><span class="s5ixo">(</span><span class="sDhpE">&#39;Content-Type: application/json&#39;</span><span class="s5ixo">);
</span></span><span class="line" line="3"><span class="sW2Sy">   // get the id
</span></span><span class="line" line="4"><span class="sJa8x">   $id</span><span class="sknuh"> =</span><span class="s_Sar"> basename</span><span class="s5ixo">(</span><span class="sJa8x">$uri</span><span class="s5ixo">);
</span></span><span class="line" line="5"><span class="sLKXg">   if</span><span class="s5ixo"> (</span><span class="sknuh">!</span><span class="s_Sar">array_key_exists</span><span class="s5ixo">(</span><span class="sJa8x">$id</span><span class="s5ixo">,</span><span class="sJa8x"> $users</span><span class="s5ixo">)) {
</span></span><span class="line" line="6"><span class="s_Sar">       http_response_code</span><span class="s5ixo">(</span><span class="sAGMh">404</span><span class="s5ixo">);
</span></span><span class="line" line="7"><span class="s_Sar">       echo</span><span class="s_Sar"> json_encode</span><span class="s5ixo">([</span><span class="sDhpE">&#39;error&#39;</span><span class="s5ixo"> =&gt;</span><span class="sDhpE"> &#39;user does not exist&#39;</span><span class="s5ixo">]);
</span></span><span class="line" line="8"><span class="sLKXg">       break</span><span class="s5ixo">;
</span></span><span class="line" line="9"><span class="s5ixo">   }
</span></span><span class="line" line="10"><span class="sJa8x">   $responseData</span><span class="sknuh"> =</span><span class="s5ixo"> [</span><span class="sJa8x">$id</span><span class="s5ixo"> =&gt; </span><span class="sJa8x">$users</span><span class="s5ixo">[</span><span class="sJa8x">$id</span><span class="s5ixo">]];
</span></span><span class="line" line="11"><span class="s_Sar">   echo</span><span class="s_Sar"> json_encode</span><span class="s5ixo">(</span><span class="sJa8x">$responseData</span><span class="s5ixo">,</span><span class="sxymB"> JSON_PRETTY_PRINT</span><span class="s5ixo">);
</span></span><span class="line" line="12"><span class="sLKXg">   break</span><span class="s5ixo">;
</span></span></code><!--]--></pre><p><!--[--><strong><!--[-->basename<!--]--></strong>($uri) 会将 uri 的最后一部分给我。比如一个 api/users/10 这样的路径，它会返回 10.<!--]--></p><p><!--[-->然后我使用 <strong><!--[-->array_key_exists<!--]--></strong> 检查是否存在一个 id 为 10 的用户<!--]--></p><p><!--[--><span class="prose-img-wrapper" data-v-4f488808><img src="https://static.031130.xyz/uploads/2024/08/12/6577fd77c3d06.webp" alt="" title="" loading="lazy" class="prose-img" style="cursor:zoom-in;" data-v-4f488808><!----><!--teleport start--><!--teleport end--></span><!--]--></p><h2 id="添加一个新用户" class="prose-heading prose-h2" data-v-a22a06c0><!--[-->添加一个新用户<!--]--><a href="#添加一个新用户" class="heading-anchor" aria-label="链接到此标题" data-v-a22a06c0><span class="anchor-icon" data-v-a22a06c0>#</span></a></h2><pre class="language-php shiki shiki-themes one-light one-dark-pro" style="" data-v-a9c19cc1><!--[--><code><span class="line" line="1"><span class="sLKXg">case</span><span class="s5ixo"> (</span><span class="sJa8x">$method</span><span class="sknuh"> ==</span><span class="sDhpE"> &#39;POST&#39;</span><span class="sknuh"> &amp;&amp;</span><span class="sJa8x"> $uri</span><span class="sknuh"> ==</span><span class="sDhpE"> &#39;/api/users&#39;</span><span class="s5ixo">):
</span></span><span class="line" line="2"><span class="s_Sar">   header</span><span class="s5ixo">(</span><span class="sDhpE">&#39;Content-Type: application/json&#39;</span><span class="s5ixo">);
</span></span><span class="line" line="3"><span class="sJa8x">   $requestBody</span><span class="sknuh"> =</span><span class="s_Sar"> json_decode</span><span class="s5ixo">(</span><span class="s_Sar">file_get_contents</span><span class="s5ixo">(</span><span class="sDhpE">&#39;php://input&#39;</span><span class="s5ixo">),</span><span class="sAGMh"> true</span><span class="s5ixo">);
</span></span><span class="line" line="4"><span class="sJa8x">   $name</span><span class="sknuh"> =</span><span class="sJa8x"> $requestBody</span><span class="s5ixo">[</span><span class="sDhpE">&#39;name&#39;</span><span class="s5ixo">];
</span></span><span class="line" line="5"><span class="sLKXg">   if</span><span class="s5ixo"> (</span><span class="s_Sar">empty</span><span class="s5ixo">(</span><span class="sJa8x">$name</span><span class="s5ixo">)) {
</span></span><span class="line" line="6"><span class="s_Sar">       http_response_code</span><span class="s5ixo">(</span><span class="sAGMh">404</span><span class="s5ixo">);
</span></span><span class="line" line="7"><span class="s_Sar">       echo</span><span class="s_Sar"> json_encode</span><span class="s5ixo">([</span><span class="sDhpE">&#39;error&#39;</span><span class="s5ixo"> =&gt;</span><span class="sDhpE"> &#39;Please add name of the user&#39;</span><span class="s5ixo">]);
</span></span><span class="line" line="8"><span class="s5ixo">   }
</span></span><span class="line" line="9"><span class="sJa8x">   $users</span><span class="s5ixo">[] </span><span class="sknuh">=</span><span class="sJa8x"> $name</span><span class="s5ixo">;
</span></span><span class="line" line="10"><span class="sJa8x">   $data</span><span class="sknuh"> =</span><span class="s_Sar"> json_encode</span><span class="s5ixo">(</span><span class="sJa8x">$users</span><span class="s5ixo">,</span><span class="sxymB"> JSON_PRETTY_PRINT</span><span class="s5ixo">);
</span></span><span class="line" line="11"><span class="s_Sar">   file_put_contents</span><span class="s5ixo">(</span><span class="sJa8x">$jsonFile</span><span class="s5ixo">,</span><span class="sJa8x"> $data</span><span class="s5ixo">);
</span></span><span class="line" line="12"><span class="s_Sar">   echo</span><span class="s_Sar"> json_encode</span><span class="s5ixo">([</span><span class="sDhpE">&#39;message&#39;</span><span class="s5ixo"> =&gt;</span><span class="sDhpE"> &#39;user added successfully&#39;</span><span class="s5ixo">]);
</span></span><span class="line" line="13"><span class="sLKXg">   break</span><span class="s5ixo">;
</span></span></code><!--]--></pre><p><!--[-->我使用 <strong><!--[-->file_get_contents(&#39;php://input&#39;)<!--]--></strong> 以获取请求的 body 部分。由于在这个例子中我使用的是 json，我将会解码 json 以便我可以获取到名字。<!--]--></p><p><!--[--><span class="prose-img-wrapper" data-v-4f488808><img src="https://static.031130.xyz/uploads/2024/08/12/6577fdca88f76.webp" alt="" title="" loading="lazy" class="prose-img" style="cursor:zoom-in;" data-v-4f488808><!----><!--teleport start--><!--teleport end--></span><!--]--></p><h2 id="更新一个用户" class="prose-heading prose-h2" data-v-a22a06c0><!--[-->更新一个用户<!--]--><a href="#更新一个用户" class="heading-anchor" aria-label="链接到此标题" data-v-a22a06c0><span class="anchor-icon" data-v-a22a06c0>#</span></a></h2><pre class="language-php shiki shiki-themes one-light one-dark-pro" style="" data-v-a9c19cc1><!--[--><code><span class="line" line="1"><span class="sLKXg">case</span><span class="s5ixo"> (</span><span class="sJa8x">$method</span><span class="sknuh"> ==</span><span class="sDhpE"> &#39;PUT&#39;</span><span class="sknuh"> &amp;&amp;</span><span class="s_Sar"> preg_match</span><span class="s5ixo">(</span><span class="sDaw7">&#39;/</span><span class="s_Sar">\/</span><span class="sDaw7">api</span><span class="s_Sar">\/</span><span class="sDaw7">users</span><span class="s_Sar">\/</span><span class="sDaw7">[1-9]/&#39;</span><span class="s5ixo">,</span><span class="sJa8x"> $uri</span><span class="s5ixo">)):
</span></span><span class="line" line="2"><span class="s_Sar">   header</span><span class="s5ixo">(</span><span class="sDhpE">&#39;Content-Type: application/json&#39;</span><span class="s5ixo">);
</span></span><span class="line" line="3"><span class="sW2Sy">   // get the id
</span></span><span class="line" line="4"><span class="sJa8x">   $id</span><span class="sknuh"> =</span><span class="s_Sar"> basename</span><span class="s5ixo">(</span><span class="sJa8x">$uri</span><span class="s5ixo">);
</span></span><span class="line" line="5"><span class="sLKXg">   if</span><span class="s5ixo"> (</span><span class="sknuh">!</span><span class="s_Sar">array_key_exists</span><span class="s5ixo">(</span><span class="sJa8x">$id</span><span class="s5ixo">,</span><span class="sJa8x"> $users</span><span class="s5ixo">)) {
</span></span><span class="line" line="6"><span class="s_Sar">       http_response_code</span><span class="s5ixo">(</span><span class="sAGMh">404</span><span class="s5ixo">);
</span></span><span class="line" line="7"><span class="s_Sar">       echo</span><span class="s_Sar"> json_encode</span><span class="s5ixo">([</span><span class="sDhpE">&#39;error&#39;</span><span class="s5ixo"> =&gt;</span><span class="sDhpE"> &#39;user does not exist&#39;</span><span class="s5ixo">]);
</span></span><span class="line" line="8"><span class="sLKXg">       break</span><span class="s5ixo">;
</span></span><span class="line" line="9"><span class="s5ixo">   }
</span></span><span class="line" line="10"><span class="sJa8x">   $requestBody</span><span class="sknuh"> =</span><span class="s_Sar"> json_decode</span><span class="s5ixo">(</span><span class="s_Sar">file_get_contents</span><span class="s5ixo">(</span><span class="sDhpE">&#39;php://input&#39;</span><span class="s5ixo">),</span><span class="sAGMh"> true</span><span class="s5ixo">);
</span></span><span class="line" line="11"><span class="sJa8x">   $name</span><span class="sknuh"> =</span><span class="sJa8x"> $requestBody</span><span class="s5ixo">[</span><span class="sDhpE">&#39;name&#39;</span><span class="s5ixo">];
</span></span><span class="line" line="12"><span class="sLKXg">   if</span><span class="s5ixo"> (</span><span class="s_Sar">empty</span><span class="s5ixo">(</span><span class="sJa8x">$name</span><span class="s5ixo">)) {
</span></span><span class="line" line="13"><span class="s_Sar">       http_response_code</span><span class="s5ixo">(</span><span class="sAGMh">404</span><span class="s5ixo">);
</span></span><span class="line" line="14"><span class="s_Sar">       echo</span><span class="s_Sar"> json_encode</span><span class="s5ixo">([</span><span class="sDhpE">&#39;error&#39;</span><span class="s5ixo"> =&gt;</span><span class="sDhpE"> &#39;Please add name of the user&#39;</span><span class="s5ixo">]);
</span></span><span class="line" line="15"><span class="s5ixo">   }
</span></span><span class="line" line="16"><span class="sJa8x">   $users</span><span class="s5ixo">[</span><span class="sJa8x">$id</span><span class="s5ixo">] </span><span class="sknuh">=</span><span class="sJa8x"> $name</span><span class="s5ixo">;
</span></span><span class="line" line="17"><span class="sJa8x">   $data</span><span class="sknuh"> =</span><span class="s_Sar"> json_encode</span><span class="s5ixo">(</span><span class="sJa8x">$users</span><span class="s5ixo">,</span><span class="sxymB"> JSON_PRETTY_PRINT</span><span class="s5ixo">);
</span></span><span class="line" line="18"><span class="s_Sar">   file_put_contents</span><span class="s5ixo">(</span><span class="sJa8x">$jsonFile</span><span class="s5ixo">,</span><span class="sJa8x"> $data</span><span class="s5ixo">);
</span></span><span class="line" line="19"><span class="s_Sar">   echo</span><span class="s_Sar"> json_encode</span><span class="s5ixo">([</span><span class="sDhpE">&#39;message&#39;</span><span class="s5ixo"> =&gt;</span><span class="sDhpE"> &#39;user updated successfully&#39;</span><span class="s5ixo">]);
</span></span><span class="line" line="20"><span class="sLKXg">   break</span><span class="s5ixo">;
</span></span></code><!--]--></pre><p><!--[--><span class="prose-img-wrapper" data-v-4f488808><img src="https://static.031130.xyz/uploads/2024/08/12/6577fdf646402.webp" alt="" title="" loading="lazy" class="prose-img" style="cursor:zoom-in;" data-v-4f488808><!----><!--teleport start--><!--teleport end--></span><!--]--></p><h2 id="删除一个用户" class="prose-heading prose-h2" data-v-a22a06c0><!--[-->删除一个用户<!--]--><a href="#删除一个用户" class="heading-anchor" aria-label="链接到此标题" data-v-a22a06c0><span class="anchor-icon" data-v-a22a06c0>#</span></a></h2><pre class="language-php shiki shiki-themes one-light one-dark-pro" style="" data-v-a9c19cc1><!--[--><code><span class="line" line="1"><span class="sLKXg">case</span><span class="s5ixo"> (</span><span class="sJa8x">$method</span><span class="sknuh"> ==</span><span class="sDhpE"> &#39;</span><span class="sLKXg">DELETE</span><span class="sDhpE">&#39;</span><span class="sknuh"> &amp;&amp;</span><span class="s_Sar"> preg_match</span><span class="s5ixo">(</span><span class="sDaw7">&#39;/</span><span class="s_Sar">\/</span><span class="sDaw7">api</span><span class="s_Sar">\/</span><span class="sDaw7">users</span><span class="s_Sar">\/</span><span class="sDaw7">[1-9]/&#39;</span><span class="s5ixo">,</span><span class="sJa8x"> $uri</span><span class="s5ixo">)):
</span></span><span class="line" line="2"><span class="s_Sar">   header</span><span class="s5ixo">(</span><span class="sDhpE">&#39;Content-Type: application/json&#39;</span><span class="s5ixo">);
</span></span><span class="line" line="3"><span class="sW2Sy">   // get the id
</span></span><span class="line" line="4"><span class="sJa8x">   $id</span><span class="sknuh"> =</span><span class="s_Sar"> basename</span><span class="s5ixo">(</span><span class="sJa8x">$uri</span><span class="s5ixo">);
</span></span><span class="line" line="5"><span class="sLKXg">   if</span><span class="s5ixo"> (</span><span class="s_Sar">empty</span><span class="s5ixo">(</span><span class="sJa8x">$users</span><span class="s5ixo">[</span><span class="sJa8x">$id</span><span class="s5ixo">])) {
</span></span><span class="line" line="6"><span class="s_Sar">       http_response_code</span><span class="s5ixo">(</span><span class="sAGMh">404</span><span class="s5ixo">);
</span></span><span class="line" line="7"><span class="s_Sar">       echo</span><span class="s_Sar"> json_encode</span><span class="s5ixo">([</span><span class="sDhpE">&#39;error&#39;</span><span class="s5ixo"> =&gt;</span><span class="sDhpE"> &#39;user does not exist&#39;</span><span class="s5ixo">]);
</span></span><span class="line" line="8"><span class="sLKXg">       break</span><span class="s5ixo">;
</span></span><span class="line" line="9"><span class="s5ixo">   }
</span></span><span class="line" line="10"><span class="s_Sar">   unset</span><span class="s5ixo">(</span><span class="sJa8x">$users</span><span class="s5ixo">[</span><span class="sJa8x">$id</span><span class="s5ixo">]);
</span></span><span class="line" line="11"><span class="sJa8x">   $data</span><span class="sknuh"> =</span><span class="s_Sar"> json_encode</span><span class="s5ixo">(</span><span class="sJa8x">$users</span><span class="s5ixo">,</span><span class="sxymB"> JSON_PRETTY_PRINT</span><span class="s5ixo">);
</span></span><span class="line" line="12"><span class="s_Sar">   file_put_contents</span><span class="s5ixo">(</span><span class="sJa8x">$jsonFile</span><span class="s5ixo">,</span><span class="sJa8x"> $data</span><span class="s5ixo">);
</span></span><span class="line" line="13"><span class="s_Sar">   echo</span><span class="s_Sar"> json_encode</span><span class="s5ixo">([</span><span class="sDhpE">&#39;message&#39;</span><span class="s5ixo"> =&gt;</span><span class="sDhpE"> &#39;user deleted successfully&#39;</span><span class="s5ixo">]);
</span></span><span class="line" line="14"><span class="sLKXg">   break</span><span class="s5ixo">;
</span></span></code><!--]--></pre><p><!--[--><span class="prose-img-wrapper" data-v-4f488808><img src="https://static.031130.xyz/uploads/2024/08/12/6577fe0c3a95b.webp" alt="" title="" loading="lazy" class="prose-img" style="cursor:zoom-in;" data-v-4f488808><!----><!--teleport start--><!--teleport end--></span><!--]--></p><h2 id="最终文件" class="prose-heading prose-h2" data-v-a22a06c0><!--[-->最终文件<!--]--><a href="#最终文件" class="heading-anchor" aria-label="链接到此标题" data-v-a22a06c0><span class="anchor-icon" data-v-a22a06c0>#</span></a></h2><p><!--[-->现在我们的 index.php 文件看起来是这样的<!--]--></p><p><!--[-->在 70 行左右的代码中，我们使用 PHP 创建了一个 RESTful API，很神奇吧？<!--]--></p><pre class="language-php shiki shiki-themes one-light one-dark-pro" style="" data-v-a9c19cc1><!--[--><code><span class="line" line="1"><span class="sknuh">&lt;</span><span class="sblXP">?</span><span class="sxymB">php
</span></span><span class="line" line="2"><span class="sJa8x">$jsonFile</span><span class="sknuh"> =</span><span class="sDhpE"> &#39;users.json&#39;</span><span class="s5ixo">;
</span></span><span class="line" line="3"><span class="sJa8x">$data</span><span class="sknuh"> =</span><span class="s_Sar"> file_get_contents</span><span class="s5ixo">(</span><span class="sJa8x">$jsonFile</span><span class="s5ixo">);
</span></span><span class="line" line="4"><span class="sJa8x">$users</span><span class="sknuh"> =</span><span class="s_Sar"> json_decode</span><span class="s5ixo">(</span><span class="sJa8x">$data</span><span class="s5ixo">,</span><span class="sAGMh"> true</span><span class="s5ixo">);
</span></span><span class="line" line="5"><span class="sJa8x">$uri</span><span class="sknuh"> =</span><span class="sJa8x"> $_SERVER</span><span class="s5ixo">[</span><span class="sDhpE">&#39;REQUEST_URI&#39;</span><span class="s5ixo">];
</span></span><span class="line" line="6"><span class="sJa8x">$method</span><span class="sknuh"> =</span><span class="sJa8x"> $_SERVER</span><span class="s5ixo">[</span><span class="sDhpE">&#39;REQUEST_METHOD&#39;</span><span class="s5ixo">];
</span></span><span class="line" line="7"><span class="sLKXg">switch</span><span class="s5ixo"> (</span><span class="sJa8x">$method</span><span class="sknuh"> |</span><span class="sJa8x"> $uri</span><span class="s5ixo">) {
</span></span><span class="line" line="8"><span class="sLKXg">   case</span><span class="s5ixo"> (</span><span class="sJa8x">$method</span><span class="sknuh"> ==</span><span class="sDhpE"> &#39;GET&#39;</span><span class="sknuh"> &amp;&amp;</span><span class="sJa8x"> $uri</span><span class="sknuh"> ==</span><span class="sDhpE"> &#39;/api/users&#39;</span><span class="s5ixo">):
</span></span><span class="line" line="9"><span class="s_Sar">       header</span><span class="s5ixo">(</span><span class="sDhpE">&#39;Content-Type: application/json&#39;</span><span class="s5ixo">);
</span></span><span class="line" line="10"><span class="s_Sar">       echo</span><span class="s_Sar"> json_encode</span><span class="s5ixo">(</span><span class="sJa8x">$users</span><span class="s5ixo">,</span><span class="sxymB"> JSON_PRETTY_PRINT</span><span class="s5ixo">);
</span></span><span class="line" line="11"><span class="sLKXg">       break</span><span class="s5ixo">;
</span></span><span class="line" line="12"><span class="sLKXg">   case</span><span class="s5ixo"> (</span><span class="sJa8x">$method</span><span class="sknuh"> ==</span><span class="sDhpE"> &#39;GET&#39;</span><span class="sknuh"> &amp;&amp;</span><span class="s_Sar"> preg_match</span><span class="s5ixo">(</span><span class="sDaw7">&#39;/</span><span class="s_Sar">\/</span><span class="sDaw7">api</span><span class="s_Sar">\/</span><span class="sDaw7">users</span><span class="s_Sar">\/</span><span class="sDaw7">[1-9]/&#39;</span><span class="s5ixo">,</span><span class="sJa8x"> $uri</span><span class="s5ixo">)):
</span></span><span class="line" line="13"><span class="s_Sar">       header</span><span class="s5ixo">(</span><span class="sDhpE">&#39;Content-Type: application/json&#39;</span><span class="s5ixo">);
</span></span><span class="line" line="14"><span class="sJa8x">       $id</span><span class="sknuh"> =</span><span class="s_Sar"> basename</span><span class="s5ixo">(</span><span class="sJa8x">$uri</span><span class="s5ixo">);
</span></span><span class="line" line="15"><span class="sLKXg">       if</span><span class="s5ixo"> (</span><span class="sknuh">!</span><span class="s_Sar">array_key_exists</span><span class="s5ixo">(</span><span class="sJa8x">$id</span><span class="s5ixo">,</span><span class="sJa8x"> $users</span><span class="s5ixo">)) {
</span></span><span class="line" line="16"><span class="s_Sar">           http_response_code</span><span class="s5ixo">(</span><span class="sAGMh">404</span><span class="s5ixo">);
</span></span><span class="line" line="17"><span class="s_Sar">           echo</span><span class="s_Sar"> json_encode</span><span class="s5ixo">([</span><span class="sDhpE">&#39;error&#39;</span><span class="s5ixo"> =&gt;</span><span class="sDhpE"> &#39;user does not exist&#39;</span><span class="s5ixo">]);
</span></span><span class="line" line="18"><span class="sLKXg">           break</span><span class="s5ixo">;
</span></span><span class="line" line="19"><span class="s5ixo">       }
</span></span><span class="line" line="20"><span class="sJa8x">       $responseData</span><span class="sknuh"> =</span><span class="s5ixo"> [</span><span class="sJa8x">$id</span><span class="s5ixo"> =&gt; </span><span class="sJa8x">$users</span><span class="s5ixo">[</span><span class="sJa8x">$id</span><span class="s5ixo">]];
</span></span><span class="line" line="21"><span class="s_Sar">       echo</span><span class="s_Sar"> json_encode</span><span class="s5ixo">(</span><span class="sJa8x">$responseData</span><span class="s5ixo">,</span><span class="sxymB"> JSON_PRETTY_PRINT</span><span class="s5ixo">);
</span></span><span class="line" line="22"><span class="sLKXg">       break</span><span class="s5ixo">;
</span></span><span class="line" line="23"><span class="sLKXg">   case</span><span class="s5ixo"> (</span><span class="sJa8x">$method</span><span class="sknuh"> ==</span><span class="sDhpE"> &#39;POST&#39;</span><span class="sknuh"> &amp;&amp;</span><span class="sJa8x"> $uri</span><span class="sknuh"> ==</span><span class="sDhpE"> &#39;/api/users&#39;</span><span class="s5ixo">):
</span></span><span class="line" line="24"><span class="s_Sar">       header</span><span class="s5ixo">(</span><span class="sDhpE">&#39;Content-Type: application/json&#39;</span><span class="s5ixo">);
</span></span><span class="line" line="25"><span class="sJa8x">       $requestBody</span><span class="sknuh"> =</span><span class="s_Sar"> json_decode</span><span class="s5ixo">(</span><span class="s_Sar">file_get_contents</span><span class="s5ixo">(</span><span class="sDhpE">&#39;php://input&#39;</span><span class="s5ixo">),</span><span class="sAGMh"> true</span><span class="s5ixo">);
</span></span><span class="line" line="26"><span class="sJa8x">       $name</span><span class="sknuh"> =</span><span class="sJa8x"> $requestBody</span><span class="s5ixo">[</span><span class="sDhpE">&#39;name&#39;</span><span class="s5ixo">];
</span></span><span class="line" line="27"><span class="sLKXg">       if</span><span class="s5ixo"> (</span><span class="s_Sar">empty</span><span class="s5ixo">(</span><span class="sJa8x">$name</span><span class="s5ixo">)) {
</span></span><span class="line" line="28"><span class="s_Sar">           http_response_code</span><span class="s5ixo">(</span><span class="sAGMh">404</span><span class="s5ixo">);
</span></span><span class="line" line="29"><span class="s_Sar">           echo</span><span class="s_Sar"> json_encode</span><span class="s5ixo">([</span><span class="sDhpE">&#39;error&#39;</span><span class="s5ixo"> =&gt;</span><span class="sDhpE"> &#39;Please add name of the user&#39;</span><span class="s5ixo">]);
</span></span><span class="line" line="30"><span class="s5ixo">       }
</span></span><span class="line" line="31"><span class="sJa8x">       $users</span><span class="s5ixo">[] </span><span class="sknuh">=</span><span class="sJa8x"> $name</span><span class="s5ixo">;
</span></span><span class="line" line="32"><span class="sJa8x">       $data</span><span class="sknuh"> =</span><span class="s_Sar"> json_encode</span><span class="s5ixo">(</span><span class="sJa8x">$users</span><span class="s5ixo">,</span><span class="sxymB"> JSON_PRETTY_PRINT</span><span class="s5ixo">);
</span></span><span class="line" line="33"><span class="s_Sar">       file_put_contents</span><span class="s5ixo">(</span><span class="sJa8x">$jsonFile</span><span class="s5ixo">,</span><span class="sJa8x"> $data</span><span class="s5ixo">);
</span></span><span class="line" line="34"><span class="s_Sar">       echo</span><span class="s_Sar"> json_encode</span><span class="s5ixo">([</span><span class="sDhpE">&#39;message&#39;</span><span class="s5ixo"> =&gt;</span><span class="sDhpE"> &#39;user added successfully&#39;</span><span class="s5ixo">]);
</span></span><span class="line" line="35"><span class="sLKXg">       break</span><span class="s5ixo">;
</span></span><span class="line" line="36"><span class="sLKXg">   case</span><span class="s5ixo"> (</span><span class="sJa8x">$method</span><span class="sknuh"> ==</span><span class="sDhpE"> &#39;PUT&#39;</span><span class="sknuh"> &amp;&amp;</span><span class="s_Sar"> preg_match</span><span class="s5ixo">(</span><span class="sDaw7">&#39;/</span><span class="s_Sar">\/</span><span class="sDaw7">api</span><span class="s_Sar">\/</span><span class="sDaw7">users</span><span class="s_Sar">\/</span><span class="sDaw7">[1-9]/&#39;</span><span class="s5ixo">,</span><span class="sJa8x"> $uri</span><span class="s5ixo">)):
</span></span><span class="line" line="37"><span class="s_Sar">       header</span><span class="s5ixo">(</span><span class="sDhpE">&#39;Content-Type: application/json&#39;</span><span class="s5ixo">);
</span></span><span class="line" line="38"><span class="sJa8x">       $id</span><span class="sknuh"> =</span><span class="s_Sar"> basename</span><span class="s5ixo">(</span><span class="sJa8x">$uri</span><span class="s5ixo">);
</span></span><span class="line" line="39"><span class="sLKXg">       if</span><span class="s5ixo"> (</span><span class="sknuh">!</span><span class="s_Sar">array_key_exists</span><span class="s5ixo">(</span><span class="sJa8x">$id</span><span class="s5ixo">,</span><span class="sJa8x"> $users</span><span class="s5ixo">)) {
</span></span><span class="line" line="40"><span class="s_Sar">           http_response_code</span><span class="s5ixo">(</span><span class="sAGMh">404</span><span class="s5ixo">);
</span></span><span class="line" line="41"><span class="s_Sar">           echo</span><span class="s_Sar"> json_encode</span><span class="s5ixo">([</span><span class="sDhpE">&#39;error&#39;</span><span class="s5ixo"> =&gt;</span><span class="sDhpE"> &#39;user does not exist&#39;</span><span class="s5ixo">]);
</span></span><span class="line" line="42"><span class="sLKXg">           break</span><span class="s5ixo">;
</span></span><span class="line" line="43"><span class="s5ixo">       }
</span></span><span class="line" line="44"><span class="sJa8x">       $requestBody</span><span class="sknuh"> =</span><span class="s_Sar"> json_decode</span><span class="s5ixo">(</span><span class="s_Sar">file_get_contents</span><span class="s5ixo">(</span><span class="sDhpE">&#39;php://input&#39;</span><span class="s5ixo">),</span><span class="sAGMh"> true</span><span class="s5ixo">);
</span></span><span class="line" line="45"><span class="sJa8x">       $name</span><span class="sknuh"> =</span><span class="sJa8x"> $requestBody</span><span class="s5ixo">[</span><span class="sDhpE">&#39;name&#39;</span><span class="s5ixo">];
</span></span><span class="line" line="46"><span class="sLKXg">       if</span><span class="s5ixo"> (</span><span class="s_Sar">empty</span><span class="s5ixo">(</span><span class="sJa8x">$name</span><span class="s5ixo">)) {
</span></span><span class="line" line="47"><span class="s_Sar">           http_response_code</span><span class="s5ixo">(</span><span class="sAGMh">404</span><span class="s5ixo">);
</span></span><span class="line" line="48"><span class="s_Sar">           echo</span><span class="s_Sar"> json_encode</span><span class="s5ixo">([</span><span class="sDhpE">&#39;error&#39;</span><span class="s5ixo"> =&gt;</span><span class="sDhpE"> &#39;Please add name of the user&#39;</span><span class="s5ixo">]);
</span></span><span class="line" line="49"><span class="s5ixo">       }
</span></span><span class="line" line="50"><span class="sJa8x">       $users</span><span class="s5ixo">[</span><span class="sJa8x">$id</span><span class="s5ixo">] </span><span class="sknuh">=</span><span class="sJa8x"> $name</span><span class="s5ixo">;
</span></span><span class="line" line="51"><span class="sJa8x">       $data</span><span class="sknuh"> =</span><span class="s_Sar"> json_encode</span><span class="s5ixo">(</span><span class="sJa8x">$users</span><span class="s5ixo">,</span><span class="sxymB"> JSON_PRETTY_PRINT</span><span class="s5ixo">);
</span></span><span class="line" line="52"><span class="s_Sar">       file_put_contents</span><span class="s5ixo">(</span><span class="sJa8x">$jsonFile</span><span class="s5ixo">,</span><span class="sJa8x"> $data</span><span class="s5ixo">);
</span></span><span class="line" line="53"><span class="s_Sar">       echo</span><span class="s_Sar"> json_encode</span><span class="s5ixo">([</span><span class="sDhpE">&#39;message&#39;</span><span class="s5ixo"> =&gt;</span><span class="sDhpE"> &#39;user updated successfully&#39;</span><span class="s5ixo">]);
</span></span><span class="line" line="54"><span class="sLKXg">       break</span><span class="s5ixo">;
</span></span><span class="line" line="55"><span class="sLKXg">   case</span><span class="s5ixo"> (</span><span class="sJa8x">$method</span><span class="sknuh"> ==</span><span class="sDhpE"> &#39;</span><span class="sLKXg">DELETE</span><span class="sDhpE">&#39;</span><span class="sknuh"> &amp;&amp;</span><span class="s_Sar"> preg_match</span><span class="s5ixo">(</span><span class="sDaw7">&#39;/</span><span class="s_Sar">\/</span><span class="sDaw7">api</span><span class="s_Sar">\/</span><span class="sDaw7">users</span><span class="s_Sar">\/</span><span class="sDaw7">[1-9]/&#39;</span><span class="s5ixo">,</span><span class="sJa8x"> $uri</span><span class="s5ixo">)):
</span></span><span class="line" line="56"><span class="s_Sar">       header</span><span class="s5ixo">(</span><span class="sDhpE">&#39;Content-Type: application/json&#39;</span><span class="s5ixo">);
</span></span><span class="line" line="57"><span class="sJa8x">       $id</span><span class="sknuh"> =</span><span class="s_Sar"> basename</span><span class="s5ixo">(</span><span class="sJa8x">$uri</span><span class="s5ixo">);
</span></span><span class="line" line="58"><span class="sLKXg">       if</span><span class="s5ixo"> (</span><span class="s_Sar">empty</span><span class="s5ixo">(</span><span class="sJa8x">$users</span><span class="s5ixo">[</span><span class="sJa8x">$id</span><span class="s5ixo">])) {
</span></span><span class="line" line="59"><span class="s_Sar">           http_response_code</span><span class="s5ixo">(</span><span class="sAGMh">404</span><span class="s5ixo">);
</span></span><span class="line" line="60"><span class="s_Sar">           echo</span><span class="s_Sar"> json_encode</span><span class="s5ixo">([</span><span class="sDhpE">&#39;error&#39;</span><span class="s5ixo"> =&gt;</span><span class="sDhpE"> &#39;user does not exist&#39;</span><span class="s5ixo">]);
</span></span><span class="line" line="61"><span class="sLKXg">           break</span><span class="s5ixo">;
</span></span><span class="line" line="62"><span class="s5ixo">       }
</span></span><span class="line" line="63"><span class="s_Sar">       unset</span><span class="s5ixo">(</span><span class="sJa8x">$users</span><span class="s5ixo">[</span><span class="sJa8x">$id</span><span class="s5ixo">]);
</span></span><span class="line" line="64"><span class="sJa8x">       $data</span><span class="sknuh"> =</span><span class="s_Sar"> json_encode</span><span class="s5ixo">(</span><span class="sJa8x">$users</span><span class="s5ixo">,</span><span class="sxymB"> JSON_PRETTY_PRINT</span><span class="s5ixo">);
</span></span><span class="line" line="65"><span class="s_Sar">       file_put_contents</span><span class="s5ixo">(</span><span class="sJa8x">$jsonFile</span><span class="s5ixo">,</span><span class="sJa8x"> $data</span><span class="s5ixo">);
</span></span><span class="line" line="66"><span class="s_Sar">       echo</span><span class="s_Sar"> json_encode</span><span class="s5ixo">([</span><span class="sDhpE">&#39;message&#39;</span><span class="s5ixo"> =&gt;</span><span class="sDhpE"> &#39;user deleted successfully&#39;</span><span class="s5ixo">]);
</span></span><span class="line" line="67"><span class="sLKXg">       break</span><span class="s5ixo">;
</span></span><span class="line" line="68"><span class="sLKXg">   default</span><span class="s5ixo">:
</span></span><span class="line" line="69"><span class="s_Sar">       http_response_code</span><span class="s5ixo">(</span><span class="sAGMh">404</span><span class="s5ixo">);
</span></span><span class="line" line="70"><span class="s_Sar">       echo</span><span class="s_Sar"> json_encode</span><span class="s5ixo">([</span><span class="sDhpE">&#39;error&#39;</span><span class="s5ixo"> =&gt;</span><span class="sDhpE"> &quot;We cannot find what you&#39;re looking for.&quot;</span><span class="s5ixo">]);
</span></span><span class="line" line="71"><span class="sLKXg">       break</span><span class="s5ixo">;
</span></span><span class="line" line="72"><span class="s5ixo">}
</span></span></code><!--]--></pre><h2 id="额外内容" class="prose-heading prose-h2" data-v-a22a06c0><!--[-->额外内容<!--]--><a href="#额外内容" class="heading-anchor" aria-label="链接到此标题" data-v-a22a06c0><span class="anchor-icon" data-v-a22a06c0>#</span></a></h2><p><!--[-->在这种情况下，我不希望删除我的所有用户，所以我加了一个新的语句，如果只剩下最后一个用户，它将不会被删除，像这样<!--]--></p><pre class="language-php shiki shiki-themes one-light one-dark-pro" style="" data-v-a9c19cc1><!--[--><code><span class="line" line="1"><span class="sLKXg">if</span><span class="s5ixo"> (</span><span class="s_Sar">sizeof</span><span class="s5ixo">(</span><span class="sJa8x">$users</span><span class="s5ixo">) </span><span class="sknuh">==</span><span class="sAGMh"> 1</span><span class="s5ixo">){
</span></span><span class="line" line="2"><span class="s_Sar">   http_response_code</span><span class="s5ixo">(</span><span class="sAGMh">404</span><span class="s5ixo">);
</span></span><span class="line" line="3"><span class="s_Sar">   echo</span><span class="s_Sar"> json_encode</span><span class="s5ixo">([</span><span class="sDhpE">&#39;error&#39;</span><span class="s5ixo"> =&gt;</span><span class="sDhpE"> &#39;there is only one user left. you cannot delete it!&#39;</span><span class="s5ixo">]);
</span></span><span class="line" line="4"><span class="sLKXg">   break</span><span class="s5ixo">;
</span></span><span class="line" line="5"><span class="s5ixo">}
</span></span></code><!--]--></pre><h2 id="源码" class="prose-heading prose-h2" data-v-a22a06c0><!--[-->源码<!--]--><a href="#源码" class="heading-anchor" aria-label="链接到此标题" data-v-a22a06c0><span class="anchor-icon" data-v-a22a06c0>#</span></a></h2><p><!--[-->你可以在<a href="https://github.com/amirkamizi/php-simple-restful-api" rel="nofollow"><!--[-->原作者的 github<!--]--></a> 上看到完整注释的源代码以及 post man 集合<!--]--></p><h2 id="总结" class="prose-heading prose-h2" data-v-a22a06c0><!--[-->总结<!--]--><a href="#总结" class="heading-anchor" aria-label="链接到此标题" data-v-a22a06c0><span class="anchor-icon" data-v-a22a06c0>#</span></a></h2><p><!--[-->现在你知道如何在 PHP 中创建一个简单的 RESTful API。<!--]--></p><p><!--[-->我推荐你打开一个 PHP 文件并复习所有的这些我们进行的步骤，并且像本文一样添加一些额外的资源<!--]--></p><p><!--[-->如果你有任何的建议、问题或者观点，请联系文章原作者，他期待着听到你的声音。<!--]--></p><h2 id="要点" class="prose-heading prose-h2" data-v-a22a06c0><!--[-->要点<!--]--><a href="#要点" class="heading-anchor" aria-label="链接到此标题" data-v-a22a06c0><span class="anchor-icon" data-v-a22a06c0>#</span></a></h2><ul><!--[--><li><!--[-->不使用框架，用 PHP 创建一个 RESTful API<!--]--></li><li><!--[-->在 PHP 中使用优雅的 URL<!--]--></li><li><!--[-->处理请求的 body<!--]--></li><li><!--[-->使用 Json 文件作为你的数据库<!--]--></li><li><!--[-->使用多个变量作为 switch 的关键词<!--]--></li><!--]--></ul><style>html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .sW2Sy, html code.shiki .sW2Sy{--shiki-default:#A0A1A7;--shiki-default-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic}html pre.shiki code .s_Sar, html code.shiki .s_Sar{--shiki-default:#0184BC;--shiki-dark:#56B6C2}html pre.shiki code .sJa8x, html code.shiki .sJa8x{--shiki-default:#E45649;--shiki-dark:#E06C75}html pre.shiki code .s5ixo, html code.shiki .s5ixo{--shiki-default:#383A42;--shiki-dark:#ABB2BF}html pre.shiki code .sDhpE, html code.shiki .sDhpE{--shiki-default:#50A14F;--shiki-dark:#98C379}html pre.shiki code .sknuh, html code.shiki .sknuh{--shiki-default:#383A42;--shiki-dark:#56B6C2}html pre.shiki code .sLKXg, html code.shiki .sLKXg{--shiki-default:#A626A4;--shiki-dark:#C678DD}html pre.shiki code .sDaw7, html code.shiki .sDaw7{--shiki-default:#0184BC;--shiki-dark:#E06C75}html pre.shiki code .sxymB, html code.shiki .sxymB{--shiki-default:#986801;--shiki-dark:#ABB2BF}html pre.shiki code .sAGMh, html code.shiki .sAGMh{--shiki-default:#986801;--shiki-dark:#D19A66}html pre.shiki code .sblXP, html code.shiki .sblXP{--shiki-default:#383A42;--shiki-dark:#C678DD}</style></article><hr class="article-end-hr" data-v-6c2349ae><div class="tags" data-v-6c2349ae><svg viewBox="0 0 512 512" width="1.2em" height="1.2em" data-v-6c2349ae><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M403.29 32H280.36a14.46 14.46 0 0 0-10.2 4.2L24.4 281.9a28.85 28.85 0 0 0 0 40.7l117 117a28.86 28.86 0 0 0 40.71 0L427.8 194a14.46 14.46 0 0 0 4.2-10.2v-123A28.66 28.66 0 0 0 403.29 32"></path><path fill="currentColor" d="M352 144a32 32 0 1 1 32-32a32 32 0 0 1-32 32"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="m230 480l262-262a13.8 13.8 0 0 0 4-10V80"></path></svg><!--[--><a href="/tags/Translation/" class="" data-v-6c2349ae>#Translation</a><a href="/tags/PHP/" class="" data-v-6c2349ae>#PHP</a><!--]--></div><nav class="post-navigation" data-v-6c2349ae data-v-a35c130b><a href="/2023/12/27/php-and-vuejs-project-deploy-on-caddy/" class="nav-button prev" data-v-a35c130b><svg viewBox="0 0 24 24" width="1.2em" height="1.2em" class="nav-arrow" data-v-a35c130b><path fill="currentColor" d="M10 22L0 12L10 2l1.775 1.775L3.55 12l8.225 8.225z"></path></svg><div class="nav-content" data-v-a35c130b><span class="nav-label" data-v-a35c130b>上一篇</span><span class="nav-title" data-v-a35c130b>vuejs、php、caddy 与 docker —— web 期末大作业上云部署</span></div></a><a href="/2023/11/28/use-lxgw-wenkai-in-hexo-fluid/" class="nav-button next" data-v-a35c130b><svg viewBox="0 0 24 24" width="1.2em" height="1.2em" class="nav-arrow" data-v-a35c130b><path fill="currentColor" d="M8.025 22L6.25 20.225L14.475 12L6.25 3.775L8.025 2l10 10z"></path></svg><div class="nav-content" data-v-a35c130b><span class="nav-label" data-v-a35c130b>下一篇</span><span class="nav-title" data-v-a35c130b>在 Hexo Fluid 主题中使用霞鹜文楷</span></div></a></nav><div id="waline" data-v-6c2349ae><span></span></div><!--]--></main><div class="after-main side" data-v-40d23075><!--[--><aside data-v-6c2349ae><nav class="toc" data-v-6c2349ae data-v-bdce45f2><div class="toc-title" data-v-bdce45f2>目录</div><ul class="toc-list" data-v-bdce45f2><!--[--><li class="toc-item toc-level-2" data-v-bdce45f2><a href="#介绍" data-v-bdce45f2>介绍</a></li><li class="toc-item toc-level-2" data-v-bdce45f2><a href="#目标" data-v-bdce45f2>目标</a></li><li class="toc-item toc-level-2" data-v-bdce45f2><a href="#准备" data-v-bdce45f2>准备</a></li><li class="toc-item toc-level-2" data-v-bdce45f2><a href="#优雅的-url" data-v-bdce45f2>优雅的 URL</a></li><li class="toc-item toc-level-3" data-v-bdce45f2><a href="#问题" data-v-bdce45f2>问题</a></li><li class="toc-item toc-level-3" data-v-bdce45f2><a href="#解决方案" data-v-bdce45f2>解决方案</a></li><li class="toc-item toc-level-2" data-v-bdce45f2><a href="#uri" data-v-bdce45f2>URI</a></li><li class="toc-item toc-level-2" data-v-bdce45f2><a href="#请求方法" data-v-bdce45f2>请求方法</a></li><li class="toc-item toc-level-2" data-v-bdce45f2><a href="#数据库" data-v-bdce45f2>数据库</a></li><li class="toc-item toc-level-2" data-v-bdce45f2><a href="#获取所有用户" data-v-bdce45f2>获取所有用户</a></li><li class="toc-item toc-level-2" data-v-bdce45f2><a href="#获取单个用户" data-v-bdce45f2>获取单个用户</a></li><li class="toc-item toc-level-2" data-v-bdce45f2><a href="#添加一个新用户" data-v-bdce45f2>添加一个新用户</a></li><li class="toc-item toc-level-2" data-v-bdce45f2><a href="#更新一个用户" data-v-bdce45f2>更新一个用户</a></li><li class="toc-item toc-level-2" data-v-bdce45f2><a href="#删除一个用户" data-v-bdce45f2>删除一个用户</a></li><li class="toc-item toc-level-2" data-v-bdce45f2><a href="#最终文件" data-v-bdce45f2>最终文件</a></li><li class="toc-item toc-level-2" data-v-bdce45f2><a href="#额外内容" data-v-bdce45f2>额外内容</a></li><li class="toc-item toc-level-2" data-v-bdce45f2><a href="#源码" data-v-bdce45f2>源码</a></li><li class="toc-item toc-level-2" data-v-bdce45f2><a href="#总结" data-v-bdce45f2>总结</a></li><li class="toc-item toc-level-2" data-v-bdce45f2><a href="#要点" data-v-bdce45f2>要点</a></li><!--]--></ul></nav></aside><!--]--></div></div><footer style="min-height:120px;background-color:#000000;background-repeat:no-repeat;background-position:center center;background-size:cover;background-image:url(&quot;data:image/svg+xml,%3Csvg xmlns=&#39;http://www.w3.org/2000/svg&#39; viewBox=&#39;0 0 2000 1500&#39;%3E%3Cdefs%3E%3Ccircle stroke=&#39;%23D60&#39; vector-effect=&#39;non-scaling-stroke&#39; id=&#39;a&#39; fill=&#39;none&#39; stroke-width=&#39;5&#39; r=&#39;315&#39;/%3E%3Cuse id=&#39;f&#39; href=&#39;%23a&#39; stroke-dasharray=&#39;100 100 100 9999&#39;/%3E%3Cuse id=&#39;b&#39; href=&#39;%23a&#39; stroke-dasharray=&#39;250 250 250 250 250 9999&#39;/%3E%3Cuse id=&#39;e&#39; href=&#39;%23a&#39; stroke-dasharray=&#39;1000 500 1000 500 9999&#39;/%3E%3Cuse id=&#39;g&#39; href=&#39;%23a&#39; stroke-dasharray=&#39;1500 9999&#39;/%3E%3Cuse id=&#39;h&#39; href=&#39;%23a&#39; stroke-dasharray=&#39;2000 500 500 9999&#39;/%3E%3Cuse id=&#39;j&#39; href=&#39;%23a&#39; stroke-dasharray=&#39;800 800 800 800 800 9999&#39;/%3E%3Cuse id=&#39;k&#39; href=&#39;%23a&#39; stroke-dasharray=&#39;1200 1200 1200 1200 1200 9999&#39;/%3E%3Cuse id=&#39;l&#39; href=&#39;%23a&#39; stroke-dasharray=&#39;1600 1600 1600 1600 1600 9999&#39;/%3E%3C/defs%3E%3Cg transform=&#39;translate(1000 750)&#39; %3E%3Cg transform=&#39;rotate(0 0 0)&#39; %3E%3Ccircle fill=&#39;%23D60&#39; r=&#39;10&#39;/%3E%3Cg transform=&#39;rotate(0 0 0)&#39;%3E%3Cuse href=&#39;%23f&#39; transform=&#39;scale(.1) rotate(50 0 0)&#39; /%3E%3Cuse href=&#39;%23f&#39; transform=&#39;scale(.2) rotate(100 0 0)&#39; /%3E%3Cuse href=&#39;%23f&#39; transform=&#39;scale(.3) rotate(150 0 0)&#39; /%3E%3C/g%3E%3Cg transform=&#39;rotate(0 0 0)&#39;%3E%3Cuse href=&#39;%23b&#39; transform=&#39;scale(.4) rotate(200 0 0)&#39; /%3E%3Cuse href=&#39;%23z&#39; transform=&#39;scale(.5) rotate(250 0 0)&#39; /%3E%3C/g%3E%3Cg id=&#39;z&#39; transform=&#39;rotate(0 0 0)&#39;%3E%3Cg transform=&#39;rotate(0 0 0)&#39;%3E%3Cuse href=&#39;%23b&#39;/%3E%3Cuse href=&#39;%23b&#39; transform=&#39;scale(1.2) rotate(90 0 0)&#39; /%3E%3Cuse href=&#39;%23b&#39; transform=&#39;scale(1.4) rotate(60 0 0)&#39; /%3E%3Cuse href=&#39;%23e&#39; transform=&#39;scale(1.6) rotate(120 0 0)&#39; /%3E%3Cuse href=&#39;%23e&#39; transform=&#39;scale(1.8) rotate(30 0 0)&#39; /%3E%3C/g%3E%3C/g%3E%3Cg id=&#39;y&#39; transform=&#39;rotate(0 0 0)&#39;%3E%3Cg transform=&#39;rotate(0 0 0)&#39;%3E%3Cuse href=&#39;%23e&#39; transform=&#39;scale(1.1) rotate(20 0 0)&#39; /%3E%3Cuse href=&#39;%23g&#39; transform=&#39;scale(1.3) rotate(-40 0 0)&#39; /%3E%3Cuse href=&#39;%23g&#39; transform=&#39;scale(1.5) rotate(60 0 0)&#39; /%3E%3Cuse href=&#39;%23h&#39; transform=&#39;scale(1.7) rotate(-80 0 0)&#39; /%3E%3Cuse href=&#39;%23j&#39; transform=&#39;scale(1.9) rotate(100 0 0)&#39; /%3E%3C/g%3E%3C/g%3E%3Cg transform=&#39;rotate(0 0 0)&#39;%3E%3Cg transform=&#39;rotate(0 0 0)&#39;%3E%3Cg transform=&#39;rotate(0 0 0)&#39;%3E%3Cuse href=&#39;%23h&#39; transform=&#39;scale(2) rotate(60 0 0)&#39;/%3E%3Cuse href=&#39;%23j&#39; transform=&#39;scale(2.1) rotate(120 0 0)&#39;/%3E%3Cuse href=&#39;%23j&#39; transform=&#39;scale(2.3) rotate(180 0 0)&#39;/%3E%3Cuse href=&#39;%23h&#39; transform=&#39;scale(2.4) rotate(240 0 0)&#39;/%3E%3Cuse href=&#39;%23j&#39; transform=&#39;scale(2.5) rotate(300 0 0)&#39;/%3E%3C/g%3E%3Cuse href=&#39;%23y&#39; transform=&#39;scale(2) rotate(180 0 0)&#39; /%3E%3Cuse href=&#39;%23j&#39; transform=&#39;scale(2.7)&#39;/%3E%3Cuse href=&#39;%23j&#39; transform=&#39;scale(2.8) rotate(45 0 0)&#39;/%3E%3Cuse href=&#39;%23j&#39; transform=&#39;scale(2.9) rotate(90 0 0)&#39;/%3E%3Cuse href=&#39;%23k&#39; transform=&#39;scale(3.1) rotate(135 0 0)&#39;/%3E%3Cuse href=&#39;%23k&#39; transform=&#39;scale(3.2) rotate(180 0 0)&#39;/%3E%3C/g%3E%3Cuse href=&#39;%23k&#39; transform=&#39;scale(3.3) rotate(225 0 0)&#39;/%3E%3Cuse href=&#39;%23k&#39; transform=&#39;scale(3.5) rotate(270 0 0)&#39;/%3E%3Cuse href=&#39;%23k&#39; transform=&#39;scale(3.6) rotate(315 0 0)&#39;/%3E%3Cuse href=&#39;%23k&#39; transform=&#39;scale(3.7)&#39;/%3E%3Cuse href=&#39;%23k&#39; transform=&#39;scale(3.9) rotate(75 0 0)&#39;/%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E&quot;);" data-v-40d23075 data-v-cc99c751><div class="footer-mask" data-v-cc99c751></div><div class="footer-content" data-v-cc99c751><div data-v-cc99c751>©2020 - 2025 By zhullyb</div><div class="promo-card" data-v-cc99c751 data-v-a0786609><div class="card-header" data-v-a0786609><div class="header-left" data-v-a0786609><div class="logo-yxvm-container" data-v-a0786609><a href="https://yxvm.com/" target="_blank" rel="noopener noreferrer" data-v-a0786609><img src="/static/yxvm-logo.png" alt="yxvm" class="logo-img" data-v-a0786609></a></div><span class="plus-separator" data-v-a0786609>+</span><div class="logo-nodeseek-container" data-v-a0786609><a href="https://www.nodeseek.com" target="_blank" rel="noopener noreferrer" data-v-a0786609><img src="/static/logo2.png" alt="nodeseek" class="logo-img" data-v-a0786609></a></div></div><div data-v-a0786609><a href="https://github.com/NodeSeekDev/NodeSupport" target="_blank" rel="noopener noreferrer" class="github-link" data-v-a0786609><svg class="github-icon" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 20 20" data-v-a0786609><g stroke-width="0" id="SVGRepo_bgCarrier" data-v-a0786609></g><g stroke-linejoin="round" stroke-linecap="round" id="SVGRepo_tracerCarrier" data-v-a0786609></g><g id="SVGRepo_iconCarrier" data-v-a0786609><title data-v-a0786609>github [#142]</title><desc data-v-a0786609>Created with Sketch.</desc><defs data-v-a0786609></defs><g stroke-width="1" stroke="none" id="Page-1" data-v-a0786609><g transform="translate(-140.000000, -7559.000000)" id="Dribbble-Light-Preview" data-v-a0786609><g transform="translate(56.000000, 160.000000)" id="icons" data-v-a0786609><path id="github-[#142]" d="M94,7399 C99.523,7399 104,7403.59 104,7409.253 C104,7413.782 101.138,7417.624 97.167,7418.981 C96.66,7419.082 96.48,7418.762 96.48,7418.489 C96.48,7418.151 96.492,7417.047 96.492,7415.675 C96.492,7414.719 96.172,7414.095 95.813,7413.777 C98.04,7413.523 100.38,7412.656 100.38,7408.718 C100.38,7407.598 99.992,7406.684 99.35,7405.966 C99.454,7405.707 99.797,7404.664 99.252,7403.252 C99.252,7403.252 98.414,7402.977 96.505,7404.303 C95.706,7404.076 94.85,7403.962 94,7403.958 C93.15,7403.962 92.295,7404.076 91.497,7404.303 C89.586,7402.977 88.746,7403.252 88.746,7403.252 C88.203,7404.664 88.546,7405.707 88.649,7405.966 C88.01,7406.684 87.619,7407.598 87.619,7408.718 C87.619,7412.646 89.954,7413.526 92.175,7413.785 C91.889,7414.041 91.63,7414.493 91.54,7415.156 C90.97,7415.418 89.522,7415.871 88.63,7414.304 C88.63,7414.304 88.101,7413.319 87.097,7413.247 C87.097,7413.247 86.122,7413.234 87.029,7413.87 C87.029,7413.87 87.684,7414.185 88.139,7415.37 C88.139,7415.37 88.726,7417.2 91.508,7416.58 C91.513,7417.437 91.522,7418.245 91.522,7418.489 C91.522,7418.76 91.338,7419.077 90.839,7418.982 C86.865,7417.627 84,7413.783 84,7409.253 C84,7403.59 88.478,7399 94,7399" data-v-a0786609></path></g></g></g></g></svg></a></div></div><h1 class="card-title" data-v-a0786609> NodeSupport Project </h1><p class="card-description" data-v-a0786609> Provide free server sponsorship to high-quality blogs, channels, open-source projects, and popular app. </p><div class="card-footer" data-v-a0786609><span data-v-a0786609>Support ID:</span><span data-v-a0786609>61</span></div></div><!----></div></footer></div><!--]--></div><div id="teleports"></div><script type="application/ld+json" data-nuxt-schema-org="true" data-hid="schema-org-graph">{"@context":"https://schema.org","@graph":[{"@id":"https://zhul.in/#website","@type":"WebSite","description":"这里是我的个人博客，专注于分享技术干货、学习心得和生活感悟，涵盖前端开发、后端架构、人工智能、编程技巧、工具推荐等多个领域。我持续更新原创内容，记录成长过程中的思考与收获，致力于帮助更多开发者和技术爱好者提升技能、拓展视野。如果你对技术、产品和互联网行业感兴趣，相信你能在这里找到有价值的知识与灵感。","inLanguage":"zh-CN","name":"竹林里有冰的博客","url":"https://zhul.in/","workTranslation":[{"@id":"https://zhul.in/#website"},{"@id":"https://zhul.in/en/#website"}]},{"@id":"https://zhul.in/2023/12/12/php-simple-rest-api/#webpage","@type":"WebPage","description":true,"name":"【翻译】使用 PHP 构建简单的 REST API","url":"https://zhul.in/2023/12/12/php-simple-rest-api/","isPartOf":{"@id":"https://zhul.in/#website"},"potentialAction":[{"@type":"ReadAction","target":["https://zhul.in/2023/12/12/php-simple-rest-api/"]}]}]}</script><script type="application/json" data-nuxt-data="nuxt-app" data-ssr="true" id="__NUXT_DATA__" data-src="/2023/12/12/php-simple-rest-api/_payload.json?7614202b-c42b-475b-9c9f-ec23747eadd1">[{"state":1,"once":21,"_errors":22,"serverRendered":6,"path":24,"prerenderedAt":25},["Reactive",2],{"$si18n:cached-locale-configs":3,"$si18n:resolved-locale":9,"$snuxt-seo-utils:routeRules":10,"$ssite-config":11},{"zh":4,"en":7},{"fallbacks":5,"cacheable":6},[],true,{"fallbacks":8,"cacheable":6},[],"",{"head":-1,"seoMeta":-1},{"_priority":12,"currentLocale":16,"defaultLocale":16,"description":17,"env":18,"name":19,"trailingSlash":6,"url":20},{"name":13,"env":14,"url":13,"description":13,"defaultLocale":15,"trailingSlash":13,"currentLocale":15},-3,-15,-2,"zh-CN","这里是我的个人博客，专注于分享技术干货、学习心得和生活感悟，涵盖前端开发、后端架构、人工智能、编程技巧、工具推荐等多个领域。我持续更新原创内容，记录成长过程中的思考与收获，致力于帮助更多开发者和技术爱好者提升技能、拓展视野。如果你对技术、产品和互联网行业感兴趣，相信你能在这里找到有价值的知识与灵感。","production","竹林里有冰的博客","https://zhul.in/",["Set"],["ShallowReactive",23],{"post-2023-12-12-php-simple-rest-api-zh":-1,"surround-2023-12-12-php-simple-rest-api-zh":-1,"randomIndex/2023/12/12/php-simple-rest-api/":-1,"language-switch-/2023/12/12/php-simple-rest-api/-en":-1,"posts-search-sections":-1},"/2023/12/12/php-simple-rest-api/",1763668763487]</script><script>window.__NUXT__={};window.__NUXT__.config={public:{content:{wsUrl:""},mdc:{components:{prose:true,map:{}},headings:{anchorLinks:{h1:false,h2:true,h3:true,h4:true,h5:false,h6:false}}},"seo-utils":{canonicalQueryWhitelist:["page","sort","filter","search","q","category","tag"],canonicalLowercase:true},i18n:{baseUrl:"",defaultLocale:"zh",rootRedirect:"",redirectStatusCode:302,skipSettingLocaleOnNavigate:false,locales:[{code:"zh",language:"zh-CN",name:"简体中文",_hreflang:"zh-CN",_sitemap:"zh-CN"},{code:"en",language:"en-US",name:"English",_hreflang:"en-US",_sitemap:"en-US"}],detectBrowserLanguage:false,experimental:{localeDetector:"",typedPages:true,typedOptionsAndMessages:false,alternateLinkCanonicalQueries:true,devCache:false,cacheLifetime:"",stripMessagesPayload:false,preload:false,strictSeo:false,nitroContextDetection:true,httpCacheDuration:10},domainLocales:{zh:{domain:""},en:{domain:""}}}},app:{baseURL:"/",buildId:"7614202b-c42b-475b-9c9f-ec23747eadd1",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script></body></html>