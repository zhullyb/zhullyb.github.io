[{"data":1,"prerenderedAt":1209},["ShallowReactive",2],{"post-2023-10-29-create-b23tv-remover-bot-zh":3,"surround-2023-10-29-create-b23tv-remover-bot-zh":1196,"randomIndex/2023/10/29/create-b23tv-remover-bot/":150,"language-switch-/2023/10/29/create-b23tv-remover-bot/-en":1208},{"title":4,"date":5,"path":6,"tags":7,"body":11,"description":43},"创建 b23.tv 追踪参数移除 bot","2023-10-29 00:35:48","/2023/10/29/create-b23tv-remover-bot",[8,9,10],"Python","Bot","Privacy",{"type":12,"value":13,"toc":1191},"minimark",[14,21,24,27,30,35,38,45,48,58,61,65,68,71,78,81,315,318,320,657,661,664,666,1163,1174,1187],[15,16,17],"blockquote",{},[18,19,20],"p",{},"前两天似乎有人高调宣称自己发 b23.tv 没问题，结果过两天就被拿下的消息。我自己并不是他的粉丝，但这个戏剧性的流言也又一次说明了注重隐私保护的重要性。",[18,22,23],{},"早前就有 b23.tf 和 b23.wtf 两个域名专门在做移除追踪参数的事情。只要将短链接中的 b23.tv 改成 b23.tf ，别人访问链接时就会被转到移除了追踪参数的链接。但这需要发送者在分享时手动更改域名。",[18,25,26],{},"因此，我也开始为自己的 bot 添加了 b23.tv 的 track id 移除功能。当用户的信息中包含 b23.tv 短链接，将会自动发送一条移除了 track id 的信息，用户就可以直接点击无追踪参数的链接。",[18,28,29],{},"当然，这两种方案并不能保护链接分享者的个人信息泄漏，因为 b23.tv 后面的参数是可以被别人看到的，通过这些参数就可以定位到链接分享者的个人信息，所以不能防止群里的内鬼倒查分享者的个人信息，但起码可以阻止大数据算法对群里的几个人产生关联。",[31,32,34],"h2",{"id":33},"b23-短链接将会泄漏哪些个人信息","b23 短链接将会泄漏哪些个人信息？",[18,36,37],{},"通过 curl 命令，我们就可以看到 b23.tv 短链接重定向到了哪个页面。",[18,39,40],{},[41,42],"img",{"alt":43,"src":44},"","https://static.031130.xyz/uploads/2024/08/12/653d49fe955f7.webp",[18,46,47],{},"这是所携带的 GET 请求参数",[49,50,55],"pre",{"className":51,"code":53,"language":54},[52],"language-text"," 'buvid': ['*************************************'],\n 'from_spmid': ['tm.recommend.0.0'],\n 'is_story_h5': ['false'],\n 'mid': ['************************'],\n 'p': ['1'],\n 'plat_id': ['116'],\n 'share_from': ['ugc'],\n 'share_medium': ['android'],\n 'share_plat': ['android'],\n 'share_session_id': ['************************************'],\n 'share_source': ['GENERIC'],\n 'share_tag': ['s_i'],\n 'spmid': ['united.player-video-detail.0.0'],\n 'timestamp': ['**********'],\n 'unique_k': ['*******'],\n 'up_id': ['*********']\n","text",[56,57,53],"code",{"__ignoreMap":43},[18,59,60],{},"其中，我替换成星号的部分都是有可能涉及到信息泄漏的部分，甚至没打码的部分也可以用来推测你的平台信息。",[31,62,64],{"id":63},"qq-bot","QQ Bot",[18,66,67],{},"尽管目前腾讯针对 go-cqhttp 的封杀力度挺大的，但我还在用。",[18,69,70],{},"在 QQ 中的 b23.tv 追踪参数移除主要有两个方面。一是用户发送的消息中可能含有 b23.tv 短链接，二是用户在手机端直接调用 bilibili 自带的「分享到QQ」的功能，这样的话在 QQ 中会显示为小程序，go-cqhttp 接收到的是一个 json 的 CQ Code。",[18,72,73,74,77],{},"针对第一种情况，处理起来就相对简单，首先判断用户的信息中是否存在 ",[56,75,76],{},"b23.tv"," 这一关键词，然后用正则表达式获取完整的 b23 链接，再使用 python 的 requests 库去请求对应链接，返回带有明文追踪参数的 url 后去除 GET 参数即可。",[18,79,80],{},"参考代码如下",[49,82,86],{"className":83,"code":84,"language":85,"meta":43,"style":43},"language-python shiki shiki-themes one-light one-dark-pro","if 'https://b23.tv' in message:\n    pattern = r'https://b23\\.tv/[^\\s]+'\n    urls = re.findall(pattern, message)\n    ret = 'TrackID removed:'\n    for i in urls:\n    ret = ret + '\\n' + b23_to_bvid(i)\n    \ndef b23_to_bvid(url):\n    tracked_url = requests.get(url,allow_redirects=False).headers['location']\n    return tracked_url.split('?', 1)[0]\n","python",[56,87,88,108,148,166,177,192,223,229,248,284],{"__ignoreMap":43},[89,90,93,97,101,104],"span",{"class":91,"line":92},"line",1,[89,94,96],{"class":95},"sLKXg","if",[89,98,100],{"class":99},"sDhpE"," 'https://b23.tv'",[89,102,103],{"class":95}," in",[89,105,107],{"class":106},"s5ixo"," message:\n",[89,109,111,114,118,121,125,129,132,136,139,142,145],{"class":91,"line":110},2,[89,112,113],{"class":106},"    pattern ",[89,115,117],{"class":116},"sknuh","=",[89,119,120],{"class":95}," r",[89,122,124],{"class":123},"sDaw7","'https://b23",[89,126,128],{"class":127},"s_Sar","\\.",[89,130,131],{"class":123},"tv/",[89,133,135],{"class":134},"sYebD","[",[89,137,138],{"class":106},"^",[89,140,141],{"class":123},"\\s",[89,143,144],{"class":134},"]+",[89,146,147],{"class":123},"'\n",[89,149,151,154,156,159,163],{"class":91,"line":150},3,[89,152,153],{"class":106},"    urls ",[89,155,117],{"class":116},[89,157,158],{"class":106}," re.",[89,160,162],{"class":161},"slOjB","findall",[89,164,165],{"class":106},"(pattern, message)\n",[89,167,169,172,174],{"class":91,"line":168},4,[89,170,171],{"class":106},"    ret ",[89,173,117],{"class":116},[89,175,176],{"class":99}," 'TrackID removed:'\n",[89,178,180,183,186,189],{"class":91,"line":179},5,[89,181,182],{"class":95},"    for",[89,184,185],{"class":106}," i ",[89,187,188],{"class":95},"in",[89,190,191],{"class":106}," urls:\n",[89,193,195,197,199,202,205,208,211,214,217,220],{"class":91,"line":194},6,[89,196,171],{"class":106},[89,198,117],{"class":116},[89,200,201],{"class":106}," ret ",[89,203,204],{"class":116},"+",[89,206,207],{"class":99}," '",[89,209,210],{"class":127},"\\n",[89,212,213],{"class":99},"'",[89,215,216],{"class":116}," +",[89,218,219],{"class":161}," b23_to_bvid",[89,221,222],{"class":106},"(i)\n",[89,224,226],{"class":91,"line":225},7,[89,227,228],{"class":106},"    \n",[89,230,232,235,238,241,245],{"class":91,"line":231},8,[89,233,234],{"class":95},"def",[89,236,219],{"class":237},"sAdtL",[89,239,240],{"class":106},"(",[89,242,244],{"class":243},"so_Uh","url",[89,246,247],{"class":106},"):\n",[89,249,251,254,256,259,262,265,269,271,275,278,281],{"class":91,"line":250},9,[89,252,253],{"class":106},"    tracked_url ",[89,255,117],{"class":116},[89,257,258],{"class":106}," requests.",[89,260,261],{"class":161},"get",[89,263,264],{"class":106},"(url,",[89,266,268],{"class":267},"sp7wS","allow_redirects",[89,270,117],{"class":116},[89,272,274],{"class":273},"sAGMh","False",[89,276,277],{"class":106},").headers[",[89,279,280],{"class":99},"'location'",[89,282,283],{"class":106},"]\n",[89,285,287,290,293,296,298,301,304,307,310,313],{"class":91,"line":286},10,[89,288,289],{"class":95},"    return",[89,291,292],{"class":106}," tracked_url.",[89,294,295],{"class":161},"split",[89,297,240],{"class":106},[89,299,300],{"class":99},"'?'",[89,302,303],{"class":106},", ",[89,305,306],{"class":273},"1",[89,308,309],{"class":106},")[",[89,311,312],{"class":273},"0",[89,314,283],{"class":106},[18,316,317],{},"而针对第二种情况，则需要先解析对应的 json 信息，再参考第一种方法获取无追踪参数的链接。",[18,319,80],{},[49,321,323],{"className":83,"code":322,"language":85,"meta":43,"style":43},"if message.startswith('[CQ:json,data') and 'b23.tv' in message:\n    decoded_data = html.unescape(message)\n    match = re.search(r'\\[CQ:json,data=(\\{.*?\\})\\]', decoded_data)\n    json_str = match.group(1)\n    json_data = json.loads(json_str)\n    if json_data['meta'].get('detail_1') is not None:\n        raw_url = json_data['meta'].get('detail_1').get('qqdocurl')\n    elif json_data['meta'].get('news') is not None:\n        raw_url = json_data['meta'].get('news').get('jumpUrl')\n    clean_url = b23_to_bvid(raw_url)\n    \ndef b23_to_bvid(url):\n    tracked_url = requests.get(url,allow_redirects=False).headers['location']\n    return tracked_url.split('?', 1)[0]\n",[56,324,325,353,369,420,440,456,491,522,550,579,591,596,609,634],{"__ignoreMap":43},[89,326,327,329,332,335,337,340,343,346,349,351],{"class":91,"line":92},[89,328,96],{"class":95},[89,330,331],{"class":106}," message.",[89,333,334],{"class":161},"startswith",[89,336,240],{"class":106},[89,338,339],{"class":99},"'[CQ:json,data'",[89,341,342],{"class":106},") ",[89,344,345],{"class":95},"and",[89,347,348],{"class":99}," 'b23.tv'",[89,350,103],{"class":95},[89,352,107],{"class":106},[89,354,355,358,360,363,366],{"class":91,"line":110},[89,356,357],{"class":106},"    decoded_data ",[89,359,117],{"class":116},[89,361,362],{"class":106}," html.",[89,364,365],{"class":161},"unescape",[89,367,368],{"class":106},"(message)\n",[89,370,371,374,376,378,381,383,386,388,391,394,397,400,403,406,409,412,415,417],{"class":91,"line":150},[89,372,373],{"class":106},"    match ",[89,375,117],{"class":116},[89,377,158],{"class":106},[89,379,380],{"class":161},"search",[89,382,240],{"class":106},[89,384,385],{"class":95},"r",[89,387,213],{"class":123},[89,389,390],{"class":127},"\\[",[89,392,393],{"class":123},"CQ:json,data=",[89,395,240],{"class":396},"sYoRg",[89,398,399],{"class":127},"\\{",[89,401,402],{"class":123},".",[89,404,405],{"class":134},"*?",[89,407,408],{"class":127},"\\}",[89,410,411],{"class":396},")",[89,413,414],{"class":127},"\\]",[89,416,213],{"class":123},[89,418,419],{"class":106},", decoded_data)\n",[89,421,422,425,427,430,433,435,437],{"class":91,"line":168},[89,423,424],{"class":106},"    json_str ",[89,426,117],{"class":116},[89,428,429],{"class":106}," match.",[89,431,432],{"class":161},"group",[89,434,240],{"class":106},[89,436,306],{"class":273},[89,438,439],{"class":106},")\n",[89,441,442,445,447,450,453],{"class":91,"line":179},[89,443,444],{"class":106},"    json_data ",[89,446,117],{"class":116},[89,448,449],{"class":106}," json.",[89,451,452],{"class":161},"loads",[89,454,455],{"class":106},"(json_str)\n",[89,457,458,461,464,467,470,472,474,477,479,482,485,488],{"class":91,"line":194},[89,459,460],{"class":95},"    if",[89,462,463],{"class":106}," json_data[",[89,465,466],{"class":99},"'meta'",[89,468,469],{"class":106},"].",[89,471,261],{"class":161},[89,473,240],{"class":106},[89,475,476],{"class":99},"'detail_1'",[89,478,342],{"class":106},[89,480,481],{"class":95},"is",[89,483,484],{"class":95}," not",[89,486,487],{"class":273}," None",[89,489,490],{"class":106},":\n",[89,492,493,496,498,500,502,504,506,508,510,513,515,517,520],{"class":91,"line":225},[89,494,495],{"class":106},"        raw_url ",[89,497,117],{"class":116},[89,499,463],{"class":106},[89,501,466],{"class":99},[89,503,469],{"class":106},[89,505,261],{"class":161},[89,507,240],{"class":106},[89,509,476],{"class":99},[89,511,512],{"class":106},").",[89,514,261],{"class":161},[89,516,240],{"class":106},[89,518,519],{"class":99},"'qqdocurl'",[89,521,439],{"class":106},[89,523,524,527,529,531,533,535,537,540,542,544,546,548],{"class":91,"line":231},[89,525,526],{"class":95},"    elif",[89,528,463],{"class":106},[89,530,466],{"class":99},[89,532,469],{"class":106},[89,534,261],{"class":161},[89,536,240],{"class":106},[89,538,539],{"class":99},"'news'",[89,541,342],{"class":106},[89,543,481],{"class":95},[89,545,484],{"class":95},[89,547,487],{"class":273},[89,549,490],{"class":106},[89,551,552,554,556,558,560,562,564,566,568,570,572,574,577],{"class":91,"line":250},[89,553,495],{"class":106},[89,555,117],{"class":116},[89,557,463],{"class":106},[89,559,466],{"class":99},[89,561,469],{"class":106},[89,563,261],{"class":161},[89,565,240],{"class":106},[89,567,539],{"class":99},[89,569,512],{"class":106},[89,571,261],{"class":161},[89,573,240],{"class":106},[89,575,576],{"class":99},"'jumpUrl'",[89,578,439],{"class":106},[89,580,581,584,586,588],{"class":91,"line":286},[89,582,583],{"class":106},"    clean_url ",[89,585,117],{"class":116},[89,587,219],{"class":161},[89,589,590],{"class":106},"(raw_url)\n",[89,592,594],{"class":91,"line":593},11,[89,595,228],{"class":106},[89,597,599,601,603,605,607],{"class":91,"line":598},12,[89,600,234],{"class":95},[89,602,219],{"class":237},[89,604,240],{"class":106},[89,606,244],{"class":243},[89,608,247],{"class":106},[89,610,612,614,616,618,620,622,624,626,628,630,632],{"class":91,"line":611},13,[89,613,253],{"class":106},[89,615,117],{"class":116},[89,617,258],{"class":106},[89,619,261],{"class":161},[89,621,264],{"class":106},[89,623,268],{"class":267},[89,625,117],{"class":116},[89,627,274],{"class":273},[89,629,277],{"class":106},[89,631,280],{"class":99},[89,633,283],{"class":106},[89,635,637,639,641,643,645,647,649,651,653,655],{"class":91,"line":636},14,[89,638,289],{"class":95},[89,640,292],{"class":106},[89,642,295],{"class":161},[89,644,240],{"class":106},[89,646,300],{"class":99},[89,648,303],{"class":106},[89,650,306],{"class":273},[89,652,309],{"class":106},[89,654,312],{"class":273},[89,656,283],{"class":106},[31,658,660],{"id":659},"tg-bot","TG Bot",[18,662,663],{},"这个平台是提供了 Bot 的 API 的，所以也不用担心会被官方封杀，可惜用户访问起来可能相对困难，也不能要求所有联系人都迁移到这个平台上。思路也是一样的，用 requests 去请求 b23 短链，返回去除跟踪参数的 url。",[18,665,80],{},[49,667,669],{"className":83,"code":668,"language":85,"meta":43,"style":43},"from telegram import Update\nfrom telegram.ext import ApplicationBuilder, ContextTypes, CommandHandler, MessageHandler, filters\nimport requests\nimport re\n\nua = 'Mozilla/5.0 (X11; Linux x86_64; rv:120.0) Gecko/20100101 Firefox/120.0'\n\nasync def start(update: Update, context):\n    await context.bot.send_message(chat_id=update.effective_chat.id, text=\"Hello World!\")\n    \nasync def b23_remover(update: Update, context):\n    seng_msg = 'TrackID removed:'\n    if 'https://b23.tv' in update.message.text:\n        pattern = r'https://b23\\.tv/[^\\s]+'\n        urls = re.findall(pattern, update.message.text)\n        for i in urls:\n            seng_msg += '\\n' + await b23_to_bvid(i)\n        await context.bot.send_message(chat_id=update.effective_chat.id, text=seng_msg)\n        \nasync def b23_to_bvid(url):\n    tracked_url = requests.get(url,allow_redirects=False,headers={'User-Agent': ua}).headers['Location']\n    return tracked_url.split('?', 1)[0]\n    \nstart_handler = CommandHandler(\"start\", start)\nb23_remove_handler = MessageHandler(filters.TEXT, b23_remover)\n\nif __name__ == '__main__':\n    TOKEN='**********************************************'\n    application = ApplicationBuilder().token(TOKEN).build()\n    application.add_handler(start_handler)\n    application.add_handler(b23_remove_handler)\n    application.run_polling()\n\n",[56,670,671,685,697,704,711,717,727,731,762,792,796,819,828,839,864,879,891,915,940,946,961,1001,1024,1029,1048,1068,1073,1090,1101,1131,1143,1153],{"__ignoreMap":43},[89,672,673,676,679,682],{"class":91,"line":92},[89,674,675],{"class":95},"from",[89,677,678],{"class":106}," telegram ",[89,680,681],{"class":95},"import",[89,683,684],{"class":106}," Update\n",[89,686,687,689,692,694],{"class":91,"line":110},[89,688,675],{"class":95},[89,690,691],{"class":106}," telegram.ext ",[89,693,681],{"class":95},[89,695,696],{"class":106}," ApplicationBuilder, ContextTypes, CommandHandler, MessageHandler, filters\n",[89,698,699,701],{"class":91,"line":150},[89,700,681],{"class":95},[89,702,703],{"class":106}," requests\n",[89,705,706,708],{"class":91,"line":168},[89,707,681],{"class":95},[89,709,710],{"class":106}," re\n",[89,712,713],{"class":91,"line":179},[89,714,716],{"emptyLinePlaceholder":715},true,"\n",[89,718,719,722,724],{"class":91,"line":194},[89,720,721],{"class":106},"ua ",[89,723,117],{"class":116},[89,725,726],{"class":99}," 'Mozilla/5.0 (X11; Linux x86_64; rv:120.0) Gecko/20100101 Firefox/120.0'\n",[89,728,729],{"class":91,"line":225},[89,730,716],{"emptyLinePlaceholder":715},[89,732,733,736,739,742,744,747,750,754,757,760],{"class":91,"line":231},[89,734,735],{"class":95},"async",[89,737,738],{"class":95}," def",[89,740,741],{"class":237}," start",[89,743,240],{"class":106},[89,745,746],{"class":243},"update",[89,748,749],{"class":106},":",[89,751,753],{"class":752},"sxymB"," Update",[89,755,756],{"class":106},",",[89,758,759],{"class":243}," context",[89,761,247],{"class":106},[89,763,764,767,770,773,775,778,780,783,785,787,790],{"class":91,"line":250},[89,765,766],{"class":95},"    await",[89,768,769],{"class":106}," context.bot.",[89,771,772],{"class":161},"send_message",[89,774,240],{"class":106},[89,776,777],{"class":267},"chat_id",[89,779,117],{"class":116},[89,781,782],{"class":106},"update.effective_chat.id, ",[89,784,54],{"class":267},[89,786,117],{"class":116},[89,788,789],{"class":99},"\"Hello World!\"",[89,791,439],{"class":106},[89,793,794],{"class":91,"line":286},[89,795,228],{"class":106},[89,797,798,800,802,805,807,809,811,813,815,817],{"class":91,"line":593},[89,799,735],{"class":95},[89,801,738],{"class":95},[89,803,804],{"class":237}," b23_remover",[89,806,240],{"class":106},[89,808,746],{"class":243},[89,810,749],{"class":106},[89,812,753],{"class":752},[89,814,756],{"class":106},[89,816,759],{"class":243},[89,818,247],{"class":106},[89,820,821,824,826],{"class":91,"line":598},[89,822,823],{"class":106},"    seng_msg ",[89,825,117],{"class":116},[89,827,176],{"class":99},[89,829,830,832,834,836],{"class":91,"line":611},[89,831,460],{"class":95},[89,833,100],{"class":99},[89,835,103],{"class":95},[89,837,838],{"class":106}," update.message.text:\n",[89,840,841,844,846,848,850,852,854,856,858,860,862],{"class":91,"line":636},[89,842,843],{"class":106},"        pattern ",[89,845,117],{"class":116},[89,847,120],{"class":95},[89,849,124],{"class":123},[89,851,128],{"class":127},[89,853,131],{"class":123},[89,855,135],{"class":134},[89,857,138],{"class":106},[89,859,141],{"class":123},[89,861,144],{"class":134},[89,863,147],{"class":123},[89,865,867,870,872,874,876],{"class":91,"line":866},15,[89,868,869],{"class":106},"        urls ",[89,871,117],{"class":116},[89,873,158],{"class":106},[89,875,162],{"class":161},[89,877,878],{"class":106},"(pattern, update.message.text)\n",[89,880,882,885,887,889],{"class":91,"line":881},16,[89,883,884],{"class":95},"        for",[89,886,185],{"class":106},[89,888,188],{"class":95},[89,890,191],{"class":106},[89,892,894,897,900,902,904,906,908,911,913],{"class":91,"line":893},17,[89,895,896],{"class":106},"            seng_msg ",[89,898,899],{"class":116},"+=",[89,901,207],{"class":99},[89,903,210],{"class":127},[89,905,213],{"class":99},[89,907,216],{"class":116},[89,909,910],{"class":95}," await",[89,912,219],{"class":161},[89,914,222],{"class":106},[89,916,918,921,923,925,927,929,931,933,935,937],{"class":91,"line":917},18,[89,919,920],{"class":95},"        await",[89,922,769],{"class":106},[89,924,772],{"class":161},[89,926,240],{"class":106},[89,928,777],{"class":267},[89,930,117],{"class":116},[89,932,782],{"class":106},[89,934,54],{"class":267},[89,936,117],{"class":116},[89,938,939],{"class":106},"seng_msg)\n",[89,941,943],{"class":91,"line":942},19,[89,944,945],{"class":106},"        \n",[89,947,949,951,953,955,957,959],{"class":91,"line":948},20,[89,950,735],{"class":95},[89,952,738],{"class":95},[89,954,219],{"class":237},[89,956,240],{"class":106},[89,958,244],{"class":243},[89,960,247],{"class":106},[89,962,964,966,968,970,972,974,976,978,980,982,985,987,990,993,996,999],{"class":91,"line":963},21,[89,965,253],{"class":106},[89,967,117],{"class":116},[89,969,258],{"class":106},[89,971,261],{"class":161},[89,973,264],{"class":106},[89,975,268],{"class":267},[89,977,117],{"class":116},[89,979,274],{"class":273},[89,981,756],{"class":106},[89,983,984],{"class":267},"headers",[89,986,117],{"class":116},[89,988,989],{"class":106},"{",[89,991,992],{"class":99},"'User-Agent'",[89,994,995],{"class":106},": ua}).headers[",[89,997,998],{"class":99},"'Location'",[89,1000,283],{"class":106},[89,1002,1004,1006,1008,1010,1012,1014,1016,1018,1020,1022],{"class":91,"line":1003},22,[89,1005,289],{"class":95},[89,1007,292],{"class":106},[89,1009,295],{"class":161},[89,1011,240],{"class":106},[89,1013,300],{"class":99},[89,1015,303],{"class":106},[89,1017,306],{"class":273},[89,1019,309],{"class":106},[89,1021,312],{"class":273},[89,1023,283],{"class":106},[89,1025,1027],{"class":91,"line":1026},23,[89,1028,228],{"class":106},[89,1030,1032,1035,1037,1040,1042,1045],{"class":91,"line":1031},24,[89,1033,1034],{"class":106},"start_handler ",[89,1036,117],{"class":116},[89,1038,1039],{"class":161}," CommandHandler",[89,1041,240],{"class":106},[89,1043,1044],{"class":99},"\"start\"",[89,1046,1047],{"class":106},", start)\n",[89,1049,1051,1054,1056,1059,1062,1065],{"class":91,"line":1050},25,[89,1052,1053],{"class":106},"b23_remove_handler ",[89,1055,117],{"class":116},[89,1057,1058],{"class":161}," MessageHandler",[89,1060,1061],{"class":106},"(filters.",[89,1063,1064],{"class":134},"TEXT",[89,1066,1067],{"class":106},", b23_remover)\n",[89,1069,1071],{"class":91,"line":1070},26,[89,1072,716],{"emptyLinePlaceholder":715},[89,1074,1076,1078,1082,1085,1088],{"class":91,"line":1075},27,[89,1077,96],{"class":95},[89,1079,1081],{"class":1080},"sJa8x"," __name__",[89,1083,1084],{"class":116}," ==",[89,1086,1087],{"class":99}," '__main__'",[89,1089,490],{"class":106},[89,1091,1093,1096,1098],{"class":91,"line":1092},28,[89,1094,1095],{"class":134},"    TOKEN",[89,1097,117],{"class":116},[89,1099,1100],{"class":99},"'**********************************************'\n",[89,1102,1104,1107,1109,1112,1115,1118,1120,1123,1125,1128],{"class":91,"line":1103},29,[89,1105,1106],{"class":106},"    application ",[89,1108,117],{"class":116},[89,1110,1111],{"class":161}," ApplicationBuilder",[89,1113,1114],{"class":106},"().",[89,1116,1117],{"class":161},"token",[89,1119,240],{"class":106},[89,1121,1122],{"class":134},"TOKEN",[89,1124,512],{"class":106},[89,1126,1127],{"class":161},"build",[89,1129,1130],{"class":106},"()\n",[89,1132,1134,1137,1140],{"class":91,"line":1133},30,[89,1135,1136],{"class":106},"    application.",[89,1138,1139],{"class":161},"add_handler",[89,1141,1142],{"class":106},"(start_handler)\n",[89,1144,1146,1148,1150],{"class":91,"line":1145},31,[89,1147,1136],{"class":106},[89,1149,1139],{"class":161},[89,1151,1152],{"class":106},"(b23_remove_handler)\n",[89,1154,1156,1158,1161],{"class":91,"line":1155},32,[89,1157,1136],{"class":106},[89,1159,1160],{"class":161},"run_polling",[89,1162,1130],{"class":106},[18,1164,1165,1166,1173],{},"代码编写参考了 ",[1167,1168,1172],"a",{"href":1169,"rel":1170},"https://krau.top/posts/tg-bot-dev-note-kmua",[1171],"nofollow","柯罗krau的博客 | krau's blog","，使用时请注意以下问题:",[1175,1176,1177,1181,1184],"ul",{},[1178,1179,1180],"li",{},"你的机子是否拥有能访问到对应的 api 的网络环境",[1178,1182,1183],{},"botfather 那边是否打开了 allow group",[1178,1185,1186],{},"botfather 那边是否关闭了 privacy mode",[1188,1189,1190],"style",{},"html pre.shiki code .sLKXg, html code.shiki .sLKXg{--shiki-default:#A626A4;--shiki-dark:#C678DD}html pre.shiki code .sDhpE, html code.shiki .sDhpE{--shiki-default:#50A14F;--shiki-dark:#98C379}html pre.shiki code .s5ixo, html code.shiki .s5ixo{--shiki-default:#383A42;--shiki-dark:#ABB2BF}html pre.shiki code .sknuh, html code.shiki .sknuh{--shiki-default:#383A42;--shiki-dark:#56B6C2}html pre.shiki code .sDaw7, html code.shiki .sDaw7{--shiki-default:#0184BC;--shiki-dark:#E06C75}html pre.shiki code .s_Sar, html code.shiki .s_Sar{--shiki-default:#0184BC;--shiki-dark:#56B6C2}html pre.shiki code .sYebD, html code.shiki .sYebD{--shiki-default:#383A42;--shiki-dark:#D19A66}html pre.shiki code .slOjB, html code.shiki .slOjB{--shiki-default:#383A42;--shiki-dark:#61AFEF}html pre.shiki code .sAdtL, html code.shiki .sAdtL{--shiki-default:#4078F2;--shiki-dark:#61AFEF}html pre.shiki code .so_Uh, html code.shiki .so_Uh{--shiki-default:#986801;--shiki-default-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic}html pre.shiki code .sp7wS, html code.shiki .sp7wS{--shiki-default:#986801;--shiki-default-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic}html pre.shiki code .sAGMh, html code.shiki .sAGMh{--shiki-default:#986801;--shiki-dark:#D19A66}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .sYoRg, html code.shiki .sYoRg{--shiki-default:#0184BC;--shiki-dark:#D19A66}html pre.shiki code .sxymB, html code.shiki .sxymB{--shiki-default:#986801;--shiki-dark:#ABB2BF}html pre.shiki code .sJa8x, html code.shiki .sJa8x{--shiki-default:#E45649;--shiki-dark:#E06C75}",{"title":43,"searchDepth":110,"depth":110,"links":1192},[1193,1194,1195],{"id":33,"depth":110,"text":34},{"id":63,"depth":110,"text":64},{"id":659,"depth":110,"text":660},[1197,1203],{"title":1198,"path":1199,"stem":1200,"date":1201,"lang":1202,"children":-1},"使用 Root 后的安卓手机获取向日葵智能插座 C2 的开关 api","/2023/11/01/unveiling-sunflower-smart-adapter-api-intercepting-utilizing-api-android-packet-sniffing","posts/zh/unveiling-sunflower-smart-adapter-api-intercepting-utilizing-api-android-packet-sniffing","2023-11-01 23:46:28","zh-CN",{"title":1204,"path":1205,"stem":1206,"date":1207,"lang":1202,"children":-1},"jinja2 中如何优雅地实现换行","/2023/09/03/jinja2-nl-to-br","posts/zh/jinja2-nl-to-br","2023-09-03 13:37:35",null,1771553318712]