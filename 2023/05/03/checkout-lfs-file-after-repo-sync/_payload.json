[{"data":1,"prerenderedAt":131},["ShallowReactive",2],{"post-2023-05-03-checkout-lfs-file-after-repo-sync":3,"surround-2023-05-03-checkout-lfs-file-after-repo-sync":119,"randomIndex/2023/05/03/checkout-lfs-file-after-repo-sync/":130},{"id":4,"title":5,"body":6,"date":107,"description":77,"extension":108,"meta":109,"navigation":110,"path":111,"rawbody":112,"seo":113,"stem":114,"sticky":115,"tags":116,"__hash__":118},"posts/posts/checkout-lfs-file-after-repo-sync.md","执行 repo sync 后将 git-lfs 中的资源文件 checkout",{"type":7,"value":8,"toc":104},"minimark",[9,16,32,51,61,71,100],[10,11,12],"blockquote",{},[13,14,15],"p",{},"最近期中考试挺忙的，五一好不容易有一些自己的时间，于是打算重操旧业，搞点有意思的内容，没想到准备阶段就出了新问题，有点跟不上时代了",[13,17,18,19,23,24,27,28,31],{},"本次遇到的问题是在执行 ",[20,21,22],"code",{},"repo sync"," 命令后储存在 git-lfs 中的文件没有被自动 pull 并 checkout 出来，尽管我在 ",[20,25,26],{},"repo init"," 阶段已经加了 ",[20,29,30],{},"--git-lfs"," 参数了。",[13,33,34,35,42,43,46,47,50],{},"上 google 简单查了查，查到一篇 ",[36,37,41],"a",{"href":38,"rel":39},"https://stackoverflow.com/questions/67280310/how-to-run-git-lfs-automatically-after-repo-sync",[40],"nofollow","stackoverflow"," 的回答，给出的思路是使用 ",[20,44,45],{},"repo forall -c 'git lfs pull'"," 的方案解决的，意思是在 repo 同步的每一个 git 仓库中都自动执行 ",[20,48,49],{},"git lfs pull"," 命令，但这个解决方案在我这有两个问题。",[52,53,54,58],"ul",{},[55,56,57],"li",{},"仓库的 git-lfs 没有被安装，所以 git-lfs 会直接报错",[55,59,60],{},"将整个安装源码一千多个仓库一一执行这些命令的速度太慢了",[13,62,63,64,67,68],{},"解决方案也很简单，直接检测每个 git 仓库下是否存在 ",[20,65,66],{},".lfsconfg"," 文件，存在的话就执行 ",[20,69,70],{},"git lfs install && git lfs pull",[72,73,78],"pre",{"className":74,"code":75,"language":76,"meta":77,"style":77},"language-bash shiki shiki-themes github-light github-dark","repo forall -c 'test -e .lfsconfig && git lfs install && git lfs pull'\n","bash","",[20,79,80],{"__ignoreMap":77},[81,82,85,89,93,97],"span",{"class":83,"line":84},"line",1,[81,86,88],{"class":87},"sScJk","repo",[81,90,92],{"class":91},"sZZnC"," forall",[81,94,96],{"class":95},"sj4cs"," -c",[81,98,99],{"class":91}," 'test -e .lfsconfig && git lfs install && git lfs pull'\n",[101,102,103],"style",{},"html pre.shiki code .sScJk, html code.shiki .sScJk{--shiki-default:#6F42C1;--shiki-dark:#B392F0}html pre.shiki code .sZZnC, html code.shiki .sZZnC{--shiki-default:#032F62;--shiki-dark:#9ECBFF}html pre.shiki code .sj4cs, html code.shiki .sj4cs{--shiki-default:#005CC5;--shiki-dark:#79B8FF}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":77,"searchDepth":105,"depth":105,"links":106},2,[],"2023-05-03 01:15:35","md",{},true,"/2023/05/03/checkout-lfs-file-after-repo-sync","---\ntitle: 执行 repo sync 后将 git-lfs 中的资源文件 checkout\ndate: 2023-05-03 01:15:35\nsticky:\ntags:\n- 笔记\n---\n\n> 最近期中考试挺忙的，五一好不容易有一些自己的时间，于是打算重操旧业，搞点有意思的内容，没想到准备阶段就出了新问题，有点跟不上时代了\n\n本次遇到的问题是在执行 `repo sync` 命令后储存在 git-lfs 中的文件没有被自动 pull 并 checkout 出来，尽管我在 `repo init` 阶段已经加了 `--git-lfs` 参数了。\n\n上 google 简单查了查，查到一篇 [stackoverflow](https://stackoverflow.com/questions/67280310/how-to-run-git-lfs-automatically-after-repo-sync) 的回答，给出的思路是使用 `repo forall -c 'git lfs pull'` 的方案解决的，意思是在 repo 同步的每一个 git 仓库中都自动执行 `git lfs pull` 命令，但这个解决方案在我这有两个问题。\n\n- 仓库的 git-lfs 没有被安装，所以 git-lfs 会直接报错\n- 将整个安装源码一千多个仓库一一执行这些命令的速度太慢了\n\n解决方案也很简单，直接检测每个 git 仓库下是否存在 `.lfsconfg` 文件，存在的话就执行 `git lfs install && git lfs pull`\n\n```bash\nrepo forall -c 'test -e .lfsconfig && git lfs install && git lfs pull'\n```\n\n",{"title":5,"description":77},"posts/checkout-lfs-file-after-repo-sync",false,[117],"笔记","dOUc37bd0nhW5h-k2eelRBjyIEhOjVGrH7JiKSehTuU",[120,125],{"title":121,"path":122,"stem":123,"date":124,"children":-1},"Azure 教育订阅申请时遇到的麻烦","/2023/05/12/troubles-when-applying-azure-education","posts/troubles-when-applying-azure-education","2023-05-12 23:38:29",{"title":126,"path":127,"stem":128,"date":129,"children":-1},"隐式转发——骚套路建站方案","/2023/03/26/implicit-forwarding-is-a-new-site-deploying-method","posts/implicit-forwarding-is-a-new-site-deploying-method","2023-03-26 00:10:02",13,1761699276309]