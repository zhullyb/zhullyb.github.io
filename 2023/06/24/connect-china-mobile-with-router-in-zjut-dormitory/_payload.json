[{"data":1,"prerenderedAt":1040},["ShallowReactive",2],{"post-2023-06-24-connect-china-mobile-with-router-in-zjut-dormitory-zh":3,"surround-2023-06-24-connect-china-mobile-with-router-in-zjut-dormitory-zh":1027,"randomIndex/2023/06/24/connect-china-mobile-with-router-in-zjut-dormitory/":236,"language-switch-/2023/06/24/connect-china-mobile-with-router-in-zjut-dormitory/-en":1039},{"title":4,"date":5,"path":6,"tags":7,"body":10,"description":19},"在浙工大宿舍使用路由器连接移动网络(校园网)","2023-06-24 14:30:24","/2023/06/24/connect-china-mobile-with-router-in-zjut-dormitory",[8,9],"Network","Router",{"type":11,"value":12,"toc":1023},"minimark",[13,20,31,34,37,42,45,47,52,59,68,70,75,81,88,90,96,112,117,120,126,129,132,138,141,146,155,158,164,915,918,924,931,937,940,953,956,959,974,980,987,992,998,1001,1007,1013,1019],[14,15,16],"p",{},[17,18,19],"strong",{},"2025.09.01 Updates:",[14,21,22,23,30],{},"最近看到这篇博客的热度还挺高，应该是最近新生开学有不少都在看。但移动的认证方式于今年的 8 月 15 日发生了变更，具体可以看",[24,25,29],"a",{"href":26,"rel":27},"https://mp.weixin.qq.com/s/KtaP62A3h96FETerPdnQmw",[28],"nofollow","这篇微信公众号文章","。我近期不在学校，没有环境去研究新的认证方式，但据我身边的人说不再需要什么 l2tp 了，找台常见的路由器直接走 dhcp 以后过一遍网页验证就好了。",[14,32,33],{},"祝各位新生在工大能渡过愉快的四年！",[35,36],"hr",{},[14,38,39],{},[17,40,41],{},"2024.04.09 Updates:",[14,43,44],{},"几天前移动对网页认证的页面进行了更新，原有的脚本失效，本博客已更新适配新版网页认证的脚本。",[35,46],{},[14,48,49],{},[17,50,51],{},"2023.7.10 Updates:",[14,53,54,55,58],{},"首先，",[17,56,57],{},"搬到屏峰校区以后，l2tp 服务器确实依然为 192.168.115.1","，这点挺奇怪的。",[14,60,61,62,67],{},"然后我发现 6.26 我的那个解决方案过于复杂，原先写的认证脚本完全可以胜任这项工作，之前失败的原因是因为我在朝晖抓的脚本参数不适用于屏峰校区，目前已经修复。脚本的变动情况可以看",[24,63,66],{"href":64,"rel":65},"https://gist.github.com/zhullyb/4c8708df5724c42f913d3d86ed49d929/revisions#diff-c33ee93215d3dddc16517dae8107b3473f7abc77f56ff5afedc1f263e7e22b27",[28],"这里","。",[35,69],{},[14,71,72],{},[17,73,74],{},"2023.6.26 Updates:",[14,76,77],{},[78,79,80],"del",{},"在我于 2023 年 6 月 26 日搬去屏峰校区以后，发生了连不上网的情况。目前一个可行的方案: 在 192.168.210.100 将自己的 MAC 地址全部解绑，然后使用自己的一台设备连接网线接口，正常通过网页验证。随后在 192.168.210.100 查看刚才通过网页验证的设备的 MAC 地址，将这一串 MAC 地址复制到 Padavan 的「外部网络（WAN）- MAC 地址」中，且将 l2tp 服务器改为 192.168.115.1 （没错，填朝晖的可以用）并重新连接 l2tp。",[14,82,83],{},[84,85],"img",{"alt":86,"src":87},"MAC 地址设置","https://static.031130.xyz/uploads/2024/08/12/649987173e542.webp",[35,89],{},[14,91,92],{},[84,93],{"alt":94,"src":95},"这是我们上一篇博客的成果","https://static.031130.xyz/uploads/2024/08/12/6496ac4f3170f.webp",[97,98,99],"blockquote",{},[14,100,101,105,106,111],{},[24,102,104],{"href":103},"/2023/06/24/redmi-ac2100-router-with-padavan/","上一篇博客","中，我为 Redmi AC2100 刷入了 Padavan，接下来就打算使用这台路由器进行联网。其实",[24,107,110],{"href":108,"rel":109},"https://static.031130.xyz/uploads/2024/08/12/6496ab42d74bf.webp",[28],"小米大多数路由器都是支持 l2tp 的协议的","，只需要在路由器后台稍微设置一下就能上网，服务器 ip 填 192.168.113.1，账号密码就是 hxzha+手机尾号后8位，密码就是手机尾号后6位。我使用 Padavan 是我个人有一些别的官方固件所不能提供的功能。",[113,114,116],"h2",{"id":115},"l2tp-相关设置","l2tp 相关设置",[14,118,119],{},"我们将 WAN 口插上墙壁一侧的网口，左侧菜单栏点击外部网络，将外网连接类型改为 l2tp",[14,121,122],{},[84,123],{"alt":124,"src":125},"外网连接类型","https://static.031130.xyz/uploads/2024/08/12/6496acaf4435b.webp",[14,127,128],{},"DNS 建议前两个填写学校的内网 DNS 地址( 172.16.7.10 ， 172.16.7.30)，最后一个填一个稳定的公共 DNS 即可，由于这一步是可选项，所以就不提供截图了。",[14,130,131],{},"往下拉，设置 l2tp 相关的设置项，只需要设置红色框框内的设置项即可。朝晖的 l2tp 服务器 ip 是 192.168.115.1 ， 屏峰校区是 192.168.113.1 ，这里不要填错了。",[14,133,134],{},[84,135],{"alt":136,"src":137},"Screenshot_20230623_213510.webp","https://static.031130.xyz/uploads/2024/08/12/6496ae85a4d4f.webp",[113,139,140],{"id":140},"网页认证脚本",[97,142,143],{},[14,144,145],{},"做完这些步骤，其实就可以正常上网了，只不过每次断网以后可能都需要重新过一遍验证，所以我专门写了一个脚本去过这个验证。",[14,147,148,149,154],{},"这份脚本我已经开源到 ",[24,150,153],{"href":151,"rel":152},"https://gist.github.com/zhullyb/4c8708df5724c42f913d3d86ed49d929",[28],"github gist"," 了，在顶部填好自己网页认证时的账号密码以后就可以用了。",[14,156,157],{},"顶部 TODO 处要写的账号密码就是那个有图书馆背景的网页认证密码。",[14,159,160],{},[84,161],{"alt":162,"src":163},"","https://static.031130.xyz/uploads/2024/08/12/6506a036d0f55.webp",[165,166,170],"pre",{"className":167,"code":168,"language":169,"meta":162,"style":162},"language-bash shiki shiki-themes one-light one-dark-pro","#!/bin/bash\n\n# Login webpage identify for China Mobile in Zhejiang University of Technology automatically\n# Author: zhullyb\n# Email: zhullyb@outlook.com\n\n\n# TODO: Fill Your Account and Password for 192.168.210.112/192.168.210.111 here\nuser_account=\nuser_password=\n\nif `ip route | grep -q 10.129.0.1`; then\n  gateway=10.129.0.1\nelif `ip route | grep -q 10.136.0.1`; then\n  gateway=10.136.0.1\nfi\n\nif whoami | grep -q \"admin\\|root\" && [ -n \"$gateway\" ]; then\n  route add -net 192.168.210.111 netmask 255.255.255.255 gw ${gateway}\n  route add -net 192.168.210.112 netmask 255.255.255.255 gw ${gateway}\n  route add -net 192.168.210.100 netmask 255.255.255.255 gw ${gateway}\n  route add -net 172.16.0.0 netmask 255.255.0.0 gw ${gateway}\nfi\n\n# 尝试访问内网服务器，如果未通过网页认证则会获得 url 跳转信息，用于判断用户为朝晖校区或屏峰校区，并获取用户 ip\ntest_curl=$(curl -s http://172.16.19.160)\nwlan_user_ip=$(echo ${test_curl} | grep -oE 'wlanuserip=[0-9\\.]+' | grep -oE '[0-9\\.]+')\nwlan_ac_ip=$(echo ${test_curl} | grep -oE 'wlanacip=[0-9\\.]+' | grep -oE '[0-9\\.]+')\nwlan_user_mac=$(echo ${test_curl} | grep -oE 'usermac=[[:xdigit:]-]+' | cut -d'=' -f2 | tr -d '-')\nwlan_ac_name=$(echo ${test_curl} | grep -o \"wlanacname=[^&]*\" | cut -d'=' -f2)\n\n# 朝晖校区宿舍楼内的移动宽带的认证请求\nif echo \"${test_curl}\" | grep -q \"192.168.210.112\"; then \\\ncurl \"http://192.168.210.112:801/eportal/portal/login?callback=dr1003&login_method=1&user_account=%2C0%2C${user_account}%40cmcczhyx&user_password=${user_password}&wlan_user_ip=${wlan_user_ip}&wlan_user_ipv6=&wlan_user_mac=${wlan_user_mac}&wlan_ac_ip=${wlan_ac_ip}&wlan_ac_name=${wlan_ac_name}&jsVersion=4.2.1&terminal_type=1&lang=zh-cn&v=5099&lang=zh\"\n# 屏峰校区宿舍楼内的移动宽带的认证请求\nelif echo \"${test_curl}\" | grep -q \"192.168.210.111\"; then \\\ncurl \"http://192.168.210.111:801/eportal/portal/login?callback=dr1003&login_method=1&user_account=%2C0%2C${user_account}%40cmccpfyx&user_password=${user_password}&wlan_user_ip=${wlan_user_ip}&wlan_user_ipv6=&wlan_user_mac=${wlan_user_mac}&wlan_ac_ip=${wlan_ac_ip}&wlan_ac_name=${wlan_ac_name}&jsVersion=4.2.1&terminal_type=1&lang=zh-cn&v=5099&lang=zh\"\nfi\n","bash",[171,172,173,182,189,195,201,207,212,217,223,234,242,247,288,300,327,337,343,348,387,421,445,469,494,499,504,510,533,575,612,665,705,710,716,753,815,821,853,910],"code",{"__ignoreMap":162},[174,175,178],"span",{"class":176,"line":177},"line",1,[174,179,181],{"class":180},"sW2Sy","#!/bin/bash\n",[174,183,185],{"class":176,"line":184},2,[174,186,188],{"emptyLinePlaceholder":187},true,"\n",[174,190,192],{"class":176,"line":191},3,[174,193,194],{"class":180},"# Login webpage identify for China Mobile in Zhejiang University of Technology automatically\n",[174,196,198],{"class":176,"line":197},4,[174,199,200],{"class":180},"# Author: zhullyb\n",[174,202,204],{"class":176,"line":203},5,[174,205,206],{"class":180},"# Email: zhullyb@outlook.com\n",[174,208,210],{"class":176,"line":209},6,[174,211,188],{"emptyLinePlaceholder":187},[174,213,215],{"class":176,"line":214},7,[174,216,188],{"emptyLinePlaceholder":187},[174,218,220],{"class":176,"line":219},8,[174,221,222],{"class":180},"# TODO: Fill Your Account and Password for 192.168.210.112/192.168.210.111 here\n",[174,224,226,230],{"class":176,"line":225},9,[174,227,229],{"class":228},"sJa8x","user_account",[174,231,233],{"class":232},"sknuh","=\n",[174,235,237,240],{"class":176,"line":236},10,[174,238,239],{"class":228},"user_password",[174,241,233],{"class":232},[174,243,245],{"class":176,"line":244},11,[174,246,188],{"emptyLinePlaceholder":187},[174,248,250,254,258,262,265,269,272,276,279,282,285],{"class":176,"line":249},12,[174,251,253],{"class":252},"sLKXg","if",[174,255,257],{"class":256},"sDhpE"," `",[174,259,261],{"class":260},"sAdtL","ip",[174,263,264],{"class":256}," route ",[174,266,268],{"class":267},"s5ixo","|",[174,270,271],{"class":260}," grep",[174,273,275],{"class":274},"sAGMh"," -q",[174,277,278],{"class":274}," 10.129.0.1",[174,280,281],{"class":256},"`",[174,283,284],{"class":267},"; ",[174,286,287],{"class":252},"then\n",[174,289,291,294,297],{"class":176,"line":290},13,[174,292,293],{"class":228},"  gateway",[174,295,296],{"class":232},"=",[174,298,299],{"class":256},"10.129.0.1\n",[174,301,303,306,308,310,312,314,316,318,321,323,325],{"class":176,"line":302},14,[174,304,305],{"class":252},"elif",[174,307,257],{"class":256},[174,309,261],{"class":260},[174,311,264],{"class":256},[174,313,268],{"class":267},[174,315,271],{"class":260},[174,317,275],{"class":274},[174,319,320],{"class":274}," 10.136.0.1",[174,322,281],{"class":256},[174,324,284],{"class":267},[174,326,287],{"class":252},[174,328,330,332,334],{"class":176,"line":329},15,[174,331,293],{"class":228},[174,333,296],{"class":232},[174,335,336],{"class":256},"10.136.0.1\n",[174,338,340],{"class":176,"line":339},16,[174,341,342],{"class":252},"fi\n",[174,344,346],{"class":176,"line":345},17,[174,347,188],{"emptyLinePlaceholder":187},[174,349,351,353,356,359,362,364,367,370,373,376,379,382,385],{"class":176,"line":350},18,[174,352,253],{"class":252},[174,354,355],{"class":260}," whoami",[174,357,358],{"class":267}," | ",[174,360,361],{"class":260},"grep",[174,363,275],{"class":274},[174,365,366],{"class":256}," \"admin\\|root\"",[174,368,369],{"class":267}," && [ ",[174,371,372],{"class":232},"-n",[174,374,375],{"class":256}," \"",[174,377,378],{"class":228},"$gateway",[174,380,381],{"class":256},"\"",[174,383,384],{"class":267}," ]; ",[174,386,287],{"class":252},[174,388,390,393,396,399,402,405,408,411,415,418],{"class":176,"line":389},19,[174,391,392],{"class":260},"  route",[174,394,395],{"class":256}," add",[174,397,398],{"class":274}," -net",[174,400,401],{"class":274}," 192.168.210.111",[174,403,404],{"class":256}," netmask",[174,406,407],{"class":274}," 255.255.255.255",[174,409,410],{"class":256}," gw",[174,412,414],{"class":413},"sr1Ac"," ${",[174,416,417],{"class":228},"gateway",[174,419,420],{"class":413},"}\n",[174,422,424,426,428,430,433,435,437,439,441,443],{"class":176,"line":423},20,[174,425,392],{"class":260},[174,427,395],{"class":256},[174,429,398],{"class":274},[174,431,432],{"class":274}," 192.168.210.112",[174,434,404],{"class":256},[174,436,407],{"class":274},[174,438,410],{"class":256},[174,440,414],{"class":413},[174,442,417],{"class":228},[174,444,420],{"class":413},[174,446,448,450,452,454,457,459,461,463,465,467],{"class":176,"line":447},21,[174,449,392],{"class":260},[174,451,395],{"class":256},[174,453,398],{"class":274},[174,455,456],{"class":274}," 192.168.210.100",[174,458,404],{"class":256},[174,460,407],{"class":274},[174,462,410],{"class":256},[174,464,414],{"class":413},[174,466,417],{"class":228},[174,468,420],{"class":413},[174,470,472,474,476,478,481,483,486,488,490,492],{"class":176,"line":471},22,[174,473,392],{"class":260},[174,475,395],{"class":256},[174,477,398],{"class":274},[174,479,480],{"class":274}," 172.16.0.0",[174,482,404],{"class":256},[174,484,485],{"class":274}," 255.255.0.0",[174,487,410],{"class":256},[174,489,414],{"class":413},[174,491,417],{"class":228},[174,493,420],{"class":413},[174,495,497],{"class":176,"line":496},23,[174,498,342],{"class":252},[174,500,502],{"class":176,"line":501},24,[174,503,188],{"emptyLinePlaceholder":187},[174,505,507],{"class":176,"line":506},25,[174,508,509],{"class":180},"# 尝试访问内网服务器，如果未通过网页认证则会获得 url 跳转信息，用于判断用户为朝晖校区或屏峰校区，并获取用户 ip\n",[174,511,513,516,518,521,524,527,530],{"class":176,"line":512},26,[174,514,515],{"class":228},"test_curl",[174,517,296],{"class":232},[174,519,520],{"class":267},"$(",[174,522,523],{"class":260},"curl",[174,525,526],{"class":274}," -s",[174,528,529],{"class":256}," http://172.16.19.160",[174,531,532],{"class":267},")\n",[174,534,536,539,541,543,547,549,551,554,556,558,561,564,566,568,570,573],{"class":176,"line":535},27,[174,537,538],{"class":228},"wlan_user_ip",[174,540,296],{"class":232},[174,542,520],{"class":267},[174,544,546],{"class":545},"s_Sar","echo",[174,548,414],{"class":413},[174,550,515],{"class":228},[174,552,553],{"class":413},"}",[174,555,358],{"class":267},[174,557,361],{"class":260},[174,559,560],{"class":274}," -oE",[174,562,563],{"class":256}," 'wlanuserip=[0-9\\.]+'",[174,565,358],{"class":267},[174,567,361],{"class":260},[174,569,560],{"class":274},[174,571,572],{"class":256}," '[0-9\\.]+'",[174,574,532],{"class":267},[174,576,578,581,583,585,587,589,591,593,595,597,599,602,604,606,608,610],{"class":176,"line":577},28,[174,579,580],{"class":228},"wlan_ac_ip",[174,582,296],{"class":232},[174,584,520],{"class":267},[174,586,546],{"class":545},[174,588,414],{"class":413},[174,590,515],{"class":228},[174,592,553],{"class":413},[174,594,358],{"class":267},[174,596,361],{"class":260},[174,598,560],{"class":274},[174,600,601],{"class":256}," 'wlanacip=[0-9\\.]+'",[174,603,358],{"class":267},[174,605,361],{"class":260},[174,607,560],{"class":274},[174,609,572],{"class":256},[174,611,532],{"class":267},[174,613,615,618,620,622,624,626,628,630,632,634,636,639,641,644,647,650,653,655,658,660,663],{"class":176,"line":614},29,[174,616,617],{"class":228},"wlan_user_mac",[174,619,296],{"class":232},[174,621,520],{"class":267},[174,623,546],{"class":545},[174,625,414],{"class":413},[174,627,515],{"class":228},[174,629,553],{"class":413},[174,631,358],{"class":267},[174,633,361],{"class":260},[174,635,560],{"class":274},[174,637,638],{"class":256}," 'usermac=[[:xdigit:]-]+'",[174,640,358],{"class":267},[174,642,643],{"class":260},"cut",[174,645,646],{"class":274}," -d",[174,648,649],{"class":256},"'='",[174,651,652],{"class":274}," -f2",[174,654,358],{"class":267},[174,656,657],{"class":260},"tr",[174,659,646],{"class":274},[174,661,662],{"class":256}," '-'",[174,664,532],{"class":267},[174,666,668,671,673,675,677,679,681,683,685,687,690,693,695,697,699,701,703],{"class":176,"line":667},30,[174,669,670],{"class":228},"wlan_ac_name",[174,672,296],{"class":232},[174,674,520],{"class":267},[174,676,546],{"class":545},[174,678,414],{"class":413},[174,680,515],{"class":228},[174,682,553],{"class":413},[174,684,358],{"class":267},[174,686,361],{"class":260},[174,688,689],{"class":274}," -o",[174,691,692],{"class":256}," \"wlanacname=[^&]*\"",[174,694,358],{"class":267},[174,696,643],{"class":260},[174,698,646],{"class":274},[174,700,649],{"class":256},[174,702,652],{"class":274},[174,704,532],{"class":267},[174,706,708],{"class":176,"line":707},31,[174,709,188],{"emptyLinePlaceholder":187},[174,711,713],{"class":176,"line":712},32,[174,714,715],{"class":180},"# 朝晖校区宿舍楼内的移动宽带的认证请求\n",[174,717,719,721,724,726,730,732,734,736,738,740,742,745,747,750],{"class":176,"line":718},33,[174,720,253],{"class":252},[174,722,723],{"class":545}," echo",[174,725,375],{"class":256},[174,727,729],{"class":728},"sTIpt","${",[174,731,515],{"class":228},[174,733,553],{"class":728},[174,735,381],{"class":256},[174,737,358],{"class":267},[174,739,361],{"class":260},[174,741,275],{"class":274},[174,743,744],{"class":256}," \"192.168.210.112\"",[174,746,284],{"class":267},[174,748,749],{"class":252},"then",[174,751,752],{"class":545}," \\\n",[174,754,756,758,761,763,765,767,770,772,774,776,779,781,783,785,788,790,792,794,797,799,801,803,806,808,810,812],{"class":176,"line":755},34,[174,757,523],{"class":260},[174,759,760],{"class":256}," \"http://192.168.210.112:801/eportal/portal/login?callback=dr1003&login_method=1&user_account=%2C0%2C",[174,762,729],{"class":728},[174,764,229],{"class":228},[174,766,553],{"class":728},[174,768,769],{"class":256},"%40cmcczhyx&user_password=",[174,771,729],{"class":728},[174,773,239],{"class":228},[174,775,553],{"class":728},[174,777,778],{"class":256},"&wlan_user_ip=",[174,780,729],{"class":728},[174,782,538],{"class":228},[174,784,553],{"class":728},[174,786,787],{"class":256},"&wlan_user_ipv6=&wlan_user_mac=",[174,789,729],{"class":728},[174,791,617],{"class":228},[174,793,553],{"class":728},[174,795,796],{"class":256},"&wlan_ac_ip=",[174,798,729],{"class":728},[174,800,580],{"class":228},[174,802,553],{"class":728},[174,804,805],{"class":256},"&wlan_ac_name=",[174,807,729],{"class":728},[174,809,670],{"class":228},[174,811,553],{"class":728},[174,813,814],{"class":256},"&jsVersion=4.2.1&terminal_type=1&lang=zh-cn&v=5099&lang=zh\"\n",[174,816,818],{"class":176,"line":817},35,[174,819,820],{"class":180},"# 屏峰校区宿舍楼内的移动宽带的认证请求\n",[174,822,824,826,828,830,832,834,836,838,840,842,844,847,849,851],{"class":176,"line":823},36,[174,825,305],{"class":252},[174,827,723],{"class":545},[174,829,375],{"class":256},[174,831,729],{"class":728},[174,833,515],{"class":228},[174,835,553],{"class":728},[174,837,381],{"class":256},[174,839,358],{"class":267},[174,841,361],{"class":260},[174,843,275],{"class":274},[174,845,846],{"class":256}," \"192.168.210.111\"",[174,848,284],{"class":267},[174,850,749],{"class":252},[174,852,752],{"class":545},[174,854,856,858,861,863,865,867,870,872,874,876,878,880,882,884,886,888,890,892,894,896,898,900,902,904,906,908],{"class":176,"line":855},37,[174,857,523],{"class":260},[174,859,860],{"class":256}," \"http://192.168.210.111:801/eportal/portal/login?callback=dr1003&login_method=1&user_account=%2C0%2C",[174,862,729],{"class":728},[174,864,229],{"class":228},[174,866,553],{"class":728},[174,868,869],{"class":256},"%40cmccpfyx&user_password=",[174,871,729],{"class":728},[174,873,239],{"class":228},[174,875,553],{"class":728},[174,877,778],{"class":256},[174,879,729],{"class":728},[174,881,538],{"class":228},[174,883,553],{"class":728},[174,885,787],{"class":256},[174,887,729],{"class":728},[174,889,617],{"class":228},[174,891,553],{"class":728},[174,893,796],{"class":256},[174,895,729],{"class":728},[174,897,580],{"class":228},[174,899,553],{"class":728},[174,901,805],{"class":256},[174,903,729],{"class":728},[174,905,670],{"class":228},[174,907,553],{"class":728},[174,909,814],{"class":256},[174,911,913],{"class":176,"line":912},38,[174,914,342],{"class":252},[14,916,917],{},"在 Padavan 的设置界面中，我们去打开 ssh 服务",[14,919,920],{},[84,921],{"alt":922,"src":923},"打开 ssh 服务","https://static.031130.xyz/uploads/2024/08/12/6496afd695464.webp",[14,925,926,927,930],{},"在自己的电脑上通过 ssh 连接到路由器的终端 ",[171,928,929],{},"ssh admin@192.168.123.1","，默认密码也是 admin，就和进入 Padavan 后台的默认管理密码一样。",[14,932,933],{},[84,934],{"alt":935,"src":936},"进入路由器终端","https://static.031130.xyz/uploads/2024/08/12/6496b029dfe3f.webp",[14,938,939],{},"看了一下 Padavan 并没有自带 nano 这个方便的 tui 编辑器，只好用自带的 vi 将就一下将认证代码复制到路由器中。",[165,941,943],{"className":167,"code":942,"language":169,"meta":162,"style":162},"vi /etc/storage/login_edu.sh\n",[171,944,945],{"__ignoreMap":162},[174,946,947,950],{"class":176,"line":177},[174,948,949],{"class":260},"vi",[174,951,952],{"class":256}," /etc/storage/login_edu.sh\n",[14,954,955],{},"关于 vi 的使用方法我在这里也不展开讲，我个人也不熟悉这款编辑器。",[14,957,958],{},"将脚本复制进去后，记得输入自己网页认证的账号密码，然后保存离开，给这个脚本赋予 x 权限。",[165,960,962],{"className":167,"code":961,"language":169,"meta":162,"style":162},"chmod a+x /etc/storage/login_edu.sh\n",[171,963,964],{"__ignoreMap":162},[174,965,966,969,972],{"class":176,"line":177},[174,967,968],{"class":260},"chmod",[174,970,971],{"class":256}," a+x",[174,973,952],{"class":256},[14,975,976],{},[84,977],{"alt":978,"src":979},"保存认证脚本","https://static.031130.xyz/uploads/2024/08/12/6496b11b7c541.webp",[14,981,982,983,986],{},"随后运行 ",[171,984,985],{},"crontab -e"," ，设置运行脚本为每天早上 6 点 01 分执行一次（因为工作日凌晨 00:30 断网，早上网络恢复以后有可能会要求你通过网页认证后才能再次联网）",[14,988,989],{},[171,990,991],{},"1 6 * * * /etc/storage/login_edu.sh",[14,993,994],{},[84,995],{"alt":996,"src":997},"设置 crontab","https://static.031130.xyz/uploads/2024/08/12/6496b1132f497.webp",[14,999,1000],{},"随后来到路由器的设置界面，设置「在 WAN 上行/下行启动后执行」和「在防火墙规则启动后执行」这两个地方分别调用我们的网页认证脚本，防止因停电、网线接口松动等故障恢复后依然没法联网的问题。图中的 logger 命令是给我自己排错看的，不需要设置。",[14,1002,1003],{},[84,1004],{"alt":1005,"src":1006},"脚本设置界面","https://static.031130.xyz/uploads/2024/08/12/6496b36585000.webp",[14,1008,1009],{},[84,1010],{"alt":1011,"src":1012},"WAN上下行","https://static.031130.xyz/uploads/2024/08/12/6496b369bbd70.webp",[14,1014,1015],{},[84,1016],{"alt":1017,"src":1018},"防火墙规则","https://static.031130.xyz/uploads/2024/08/12/6496b3703197f.webp",[1020,1021,1022],"style",{},"html pre.shiki code .sW2Sy, html code.shiki .sW2Sy{--shiki-default:#A0A1A7;--shiki-default-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic}html pre.shiki code .sJa8x, html code.shiki .sJa8x{--shiki-default:#E45649;--shiki-dark:#E06C75}html pre.shiki code .sknuh, html code.shiki .sknuh{--shiki-default:#383A42;--shiki-dark:#56B6C2}html pre.shiki code .sLKXg, html code.shiki .sLKXg{--shiki-default:#A626A4;--shiki-dark:#C678DD}html pre.shiki code .sDhpE, html code.shiki .sDhpE{--shiki-default:#50A14F;--shiki-dark:#98C379}html pre.shiki code .sAdtL, html code.shiki .sAdtL{--shiki-default:#4078F2;--shiki-dark:#61AFEF}html pre.shiki code .s5ixo, html code.shiki .s5ixo{--shiki-default:#383A42;--shiki-dark:#ABB2BF}html pre.shiki code .sAGMh, html code.shiki .sAGMh{--shiki-default:#986801;--shiki-dark:#D19A66}html pre.shiki code .sr1Ac, html code.shiki .sr1Ac{--shiki-default:#E45649;--shiki-dark:#ABB2BF}html pre.shiki code .s_Sar, html code.shiki .s_Sar{--shiki-default:#0184BC;--shiki-dark:#56B6C2}html pre.shiki code .sTIpt, html code.shiki .sTIpt{--shiki-default:#E45649;--shiki-dark:#98C379}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":162,"searchDepth":184,"depth":184,"links":1024},[1025,1026],{"id":115,"depth":184,"text":116},{"id":140,"depth":184,"text":140},[1028,1034],{"title":1029,"path":1030,"stem":1031,"date":1032,"lang":1033,"children":-1},"在运行OpenWRT的N1盒子上部署 QQBot","/2023/07/31/run-qq-bot-on-phicomm-n1-openwrt","posts/zh/run-qq-bot-on-phicomm-n1-openwrt","2023-07-31 04:11:31","zh-CN",{"title":1035,"path":1036,"stem":1037,"date":1038,"lang":1033,"children":-1},"为红米 Redmi AC2100 路由器刷入 Padavan","/2023/06/24/redmi-ac2100-router-with-padavan","posts/zh/redmi-ac2100-router-with-padavan","2023-06-24 00:22:53",null,1765392895711]