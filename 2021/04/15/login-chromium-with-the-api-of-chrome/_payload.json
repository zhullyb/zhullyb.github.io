[{"data":1,"prerenderedAt":270},["ShallowReactive",2],{"post-2021-04-15-login-chromium-with-the-api-of-chrome":3,"surround-2021-04-15-login-chromium-with-the-api-of-chrome":258,"randomIndex/2021/04/15/login-chromium-with-the-api-of-chrome/":269},{"id":4,"title":5,"body":6,"date":247,"description":12,"extension":248,"meta":249,"navigation":250,"path":251,"rawbody":252,"seo":253,"stem":254,"sticky":255,"tags":256,"__hash__":257},"posts/posts/login-chromium-with-the-api-of-chrome.md","使用Chrome的同步api为chromium开启同步功能",{"type":7,"value":8,"toc":245},"minimark",[9,13,22,34,69,72,78,90,171,185,192,241],[10,11,12],"p",{},"今年两三月的时候，Google限制了chromium的同步api次数，导致各个发行版内置的chromium将不再能继续使用Google的数据同步功能。",[10,14,15,16],{},"今天在翻 archlinuxcn 的群组的时候翻到了一段脚本: ",[17,18,19],"a",{"href":19,"rel":20},"https://gist.github.com/foutrelis/14e339596b89813aa9c37fd1b4e5d9d5",[21],"nofollow",[10,23,24,25,29,30,33],{},"大意就是说，由于Archlinux特殊的chromium启动方式导致我们可以在设置",[26,27,28],"code",{},"oauth2-client-id","和",[26,31,32],{},"oauth2-client-secret","的情况下通过chrome的同步api继续使用Google的同步服务，说得太多了也没必要，毕竟原文就在那里，看不看取决于你，我这里直接给命令吧。",[35,36,41],"pre",{"className":37,"code":38,"language":39,"meta":40,"style":40},"language-shell shiki shiki-themes one-light one-dark-pro","echo \"--oauth2-client-id=77185425430.apps.googleusercontent.com\n--oauth2-client-secret=OTJgUOQcT7lO7GsGZq2G4IlT\" >> ~/.config/chromium-flags.conf\n","shell","",[26,42,43,56],{"__ignoreMap":40},[44,45,48,52],"span",{"class":46,"line":47},"line",1,[44,49,51],{"class":50},"s_Sar","echo",[44,53,55],{"class":54},"sDhpE"," \"--oauth2-client-id=77185425430.apps.googleusercontent.com\n",[44,57,59,62,66],{"class":46,"line":58},2,[44,60,61],{"class":54},"--oauth2-client-secret=OTJgUOQcT7lO7GsGZq2G4IlT\"",[44,63,65],{"class":64},"s5ixo"," >> ",[44,67,68],{"class":54},"~/.config/chromium-flags.conf\n",[10,70,71],{},"再次打开chromium,你就会发现你心心念念的同步功能回来了。",[10,73,74],{},[75,76],"img",{"alt":40,"src":77},"https://static.031130.xyz/uploads/2024/08/12/62f3cafe4a5ec.webp",[10,79,80],{},[81,82,83,84,89],"del",{},"然而，并不是所有的发行版都像 Archlinux 这样考虑到 oauth，我们也不可能像 Archlinux 官方那样有这个闲情雅致为没一个 Chromium 去添加这个 ",[17,85,88],{"href":86,"rel":87},"https://github.com/archlinux/svntogit-packages/blob/packages/chromium/trunk/use-oauth2-client-switches-as-default.patch",[21],"patch"," 以后重新编译一遍，大部分人都是直接用发行版源里的。针对这种情况，我们可以直接手写一个脚本",[35,91,95],{"className":92,"code":93,"language":94,"meta":40,"style":40},"language-bash shiki shiki-themes one-light one-dark-pro","#!/usr/bin/bash\nexport GOOGLE_DEFAULT_CLIENT_ID=77185425430.apps.googleusercontent.com\nexport GOOGLE_DEFAULT_CLIENT_SECRET=OTJgUOQcT7lO7GsGZq2G4IlT\nexec /usr/bin/chromium-browser \"$@\"     # 我用的 Fedora 的启动命令是 chromium-browser，别的发行版用户还请自行调整\n","bash",[26,96,97,103,136,149],{"__ignoreMap":40},[44,98,99],{"class":46,"line":47},[44,100,102],{"class":101},"sW2Sy","#!/usr/bin/bash\n",[44,104,105,109,113,117,120,123,126,128,131,133],{"class":46,"line":58},[44,106,108],{"class":107},"sLKXg","export",[44,110,112],{"class":111},"sJa8x"," GOOGLE_DEFAULT_CLIENT_ID",[44,114,116],{"class":115},"sknuh","=",[44,118,119],{"class":111},"77185425430",[44,121,122],{"class":64},".",[44,124,125],{"class":111},"apps",[44,127,122],{"class":64},[44,129,130],{"class":111},"googleusercontent",[44,132,122],{"class":64},[44,134,135],{"class":111},"com\n",[44,137,139,141,144,146],{"class":46,"line":138},3,[44,140,108],{"class":107},[44,142,143],{"class":111}," GOOGLE_DEFAULT_CLIENT_SECRET",[44,145,116],{"class":115},[44,147,148],{"class":111},"OTJgUOQcT7lO7GsGZq2G4IlT\n",[44,150,152,155,158,161,165,168],{"class":46,"line":151},4,[44,153,154],{"class":50},"exec",[44,156,157],{"class":54}," /usr/bin/chromium-browser",[44,159,160],{"class":54}," \"",[44,162,164],{"class":163},"s8iYz","$@",[44,166,167],{"class":54},"\"",[44,169,170],{"class":101},"     # 我用的 Fedora 的启动命令是 chromium-browser，别的发行版用户还请自行调整\n",[10,172,173,174,177,178,181,182,184],{},"当我满心欢喜地把脚本扔进 ",[26,175,176],{},"$HOME/.local/bin"," 后，我却突然发现 Fedora 官方源中把 chromium 的启动命令写死在了 ",[26,179,180],{},"/usr/bin/chromium-browser","，如果直接去改 ",[26,183,180],{}," 的话，每次更新都会被覆盖。",[10,186,187,191],{},[188,189,190],"strong",{},"正确的做法","应该是把 desktop 文件复制一份到桌面，再去改内容。",[35,193,195],{"className":92,"code":194,"language":94,"meta":40,"style":40},"mkdir -p $HOME/.local/share/applications/\ncp /usr/share/applications/chromium-browser.desktop $HOME/.local/share/applications/\nsed -i \"s|/usr/bin/chromium-browser|GOOGLE_DEFAULT_CLIENT_ID=77185425430.apps.googleusercontent.com GOOGLE_DEFAULT_CLIENT_SECRET=OTJgUOQcT7lO7GsGZq2G4IlT /usr/bin/chromium-browser|g\" $HOME/.local/share/applications/chromium-browser.desktop\n",[26,196,197,213,225],{"__ignoreMap":40},[44,198,199,203,207,210],{"class":46,"line":47},[44,200,202],{"class":201},"sAdtL","mkdir",[44,204,206],{"class":205},"sAGMh"," -p",[44,208,209],{"class":111}," $HOME",[44,211,212],{"class":54},"/.local/share/applications/\n",[44,214,215,218,221,223],{"class":46,"line":58},[44,216,217],{"class":201},"cp",[44,219,220],{"class":54}," /usr/share/applications/chromium-browser.desktop",[44,222,209],{"class":111},[44,224,212],{"class":54},[44,226,227,230,233,236,238],{"class":46,"line":138},[44,228,229],{"class":201},"sed",[44,231,232],{"class":205}," -i",[44,234,235],{"class":54}," \"s|/usr/bin/chromium-browser|GOOGLE_DEFAULT_CLIENT_ID=77185425430.apps.googleusercontent.com GOOGLE_DEFAULT_CLIENT_SECRET=OTJgUOQcT7lO7GsGZq2G4IlT /usr/bin/chromium-browser|g\"",[44,237,209],{"class":111},[44,239,240],{"class":54},"/.local/share/applications/chromium-browser.desktop\n",[242,243,244],"style",{},"html pre.shiki code .s_Sar, html code.shiki .s_Sar{--shiki-default:#0184BC;--shiki-dark:#56B6C2}html pre.shiki code .sDhpE, html code.shiki .sDhpE{--shiki-default:#50A14F;--shiki-dark:#98C379}html pre.shiki code .s5ixo, html code.shiki .s5ixo{--shiki-default:#383A42;--shiki-dark:#ABB2BF}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .sW2Sy, html code.shiki .sW2Sy{--shiki-default:#A0A1A7;--shiki-default-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic}html pre.shiki code .sLKXg, html code.shiki .sLKXg{--shiki-default:#A626A4;--shiki-dark:#C678DD}html pre.shiki code .sJa8x, html code.shiki .sJa8x{--shiki-default:#E45649;--shiki-dark:#E06C75}html pre.shiki code .sknuh, html code.shiki .sknuh{--shiki-default:#383A42;--shiki-dark:#56B6C2}html pre.shiki code .s8iYz, html code.shiki .s8iYz{--shiki-default:#383A42;--shiki-default-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic}html pre.shiki code .sAdtL, html code.shiki .sAdtL{--shiki-default:#4078F2;--shiki-dark:#61AFEF}html pre.shiki code .sAGMh, html code.shiki .sAGMh{--shiki-default:#986801;--shiki-dark:#D19A66}",{"title":40,"searchDepth":58,"depth":58,"links":246},[],"2021-04-15","md",{},true,"/2021/04/15/login-chromium-with-the-api-of-chrome","---\ntitle:      使用Chrome的同步api为chromium开启同步功能\ndate:       2021-04-15\ntags:       笔记\n---\n\n今年两三月的时候，Google限制了chromium的同步api次数，导致各个发行版内置的chromium将不再能继续使用Google的数据同步功能。\n\n今天在翻 archlinuxcn 的群组的时候翻到了一段脚本: [https://gist.github.com/foutrelis/14e339596b89813aa9c37fd1b4e5d9d5](https://gist.github.com/foutrelis/14e339596b89813aa9c37fd1b4e5d9d5)\n\n大意就是说，由于Archlinux特殊的chromium启动方式导致我们可以在设置`oauth2-client-id`和`oauth2-client-secret`的情况下通过chrome的同步api继续使用Google的同步服务，说得太多了也没必要，毕竟原文就在那里，看不看取决于你，我这里直接给命令吧。\n\n```shell\necho \"--oauth2-client-id=77185425430.apps.googleusercontent.com\n--oauth2-client-secret=OTJgUOQcT7lO7GsGZq2G4IlT\" >> ~/.config/chromium-flags.conf\n```\n\n再次打开chromium,你就会发现你心心念念的同步功能回来了。\n\n![](https://static.031130.xyz/uploads/2024/08/12/62f3cafe4a5ec.webp)\n\n~~然而，并不是所有的发行版都像 Archlinux 这样考虑到 oauth，我们也不可能像 Archlinux 官方那样有这个闲情雅致为没一个 Chromium 去添加这个 [patch](https://github.com/archlinux/svntogit-packages/blob/packages/chromium/trunk/use-oauth2-client-switches-as-default.patch) 以后重新编译一遍，大部分人都是直接用发行版源里的。针对这种情况，我们可以直接手写一个脚本~~\n\n```bash\n#!/usr/bin/bash\nexport GOOGLE_DEFAULT_CLIENT_ID=77185425430.apps.googleusercontent.com\nexport GOOGLE_DEFAULT_CLIENT_SECRET=OTJgUOQcT7lO7GsGZq2G4IlT\nexec /usr/bin/chromium-browser \"$@\"\t\t# 我用的 Fedora 的启动命令是 chromium-browser，别的发行版用户还请自行调整\n```\n\n当我满心欢喜地把脚本扔进 `$HOME/.local/bin` 后，我却突然发现 Fedora 官方源中把 chromium 的启动命令写死在了 `/usr/bin/chromium-browser`，如果直接去改 `/usr/bin/chromium-browser` 的话，每次更新都会被覆盖。\n\n**正确的做法**应该是把 desktop 文件复制一份到桌面，再去改内容。\n\n```bash\nmkdir -p $HOME/.local/share/applications/\ncp /usr/share/applications/chromium-browser.desktop $HOME/.local/share/applications/\nsed -i \"s|/usr/bin/chromium-browser|GOOGLE_DEFAULT_CLIENT_ID=77185425430.apps.googleusercontent.com GOOGLE_DEFAULT_CLIENT_SECRET=OTJgUOQcT7lO7GsGZq2G4IlT /usr/bin/chromium-browser|g\" $HOME/.local/share/applications/chromium-browser.desktop\n```\n\n",{"title":5,"description":12},"posts/login-chromium-with-the-api-of-chrome",false,"笔记","YzIwIxux-stlYvXcMizLKoy6X8h4Xxfvp1f8_B0dPaE",[259,264],{"title":260,"path":261,"stem":262,"date":263,"children":-1},"我在Archlinux上的常用软件","/2021/04/16/the-software-i-use-on-archlinux","posts/the-software-i-use-on-archlinux","2021-04-16",{"title":265,"path":266,"stem":267,"date":268,"children":-1},"Appimage的文件储存在哪里","/2021/04/13/where-will-appimage-put-its-file","posts/where-will-appimage-put-its-file","2021-04-13",0,1761836962617]