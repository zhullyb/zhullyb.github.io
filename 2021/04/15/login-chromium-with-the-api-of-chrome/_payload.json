[{"data":1,"prerenderedAt":250},["ShallowReactive",2],{"post-2021-04-15-login-chromium-with-the-api-of-chrome":3,"surround-2021-04-15-login-chromium-with-the-api-of-chrome":238,"randomIndex/2021/04/15/login-chromium-with-the-api-of-chrome/":249},{"id":4,"title":5,"body":6,"date":227,"description":12,"extension":228,"meta":229,"navigation":230,"path":231,"rawbody":232,"seo":233,"stem":234,"sticky":235,"tags":236,"__hash__":237},"posts/posts/login-chromium-with-the-api-of-chrome.md","使用Chrome的同步api为chromium开启同步功能",{"type":7,"value":8,"toc":225},"minimark",[9,13,22,34,69,72,78,90,152,166,173,221],[10,11,12],"p",{},"今年两三月的时候，Google限制了chromium的同步api次数，导致各个发行版内置的chromium将不再能继续使用Google的数据同步功能。",[10,14,15,16],{},"今天在翻 archlinuxcn 的群组的时候翻到了一段脚本: ",[17,18,19],"a",{"href":19,"rel":20},"https://gist.github.com/foutrelis/14e339596b89813aa9c37fd1b4e5d9d5",[21],"nofollow",[10,23,24,25,29,30,33],{},"大意就是说，由于Archlinux特殊的chromium启动方式导致我们可以在设置",[26,27,28],"code",{},"oauth2-client-id","和",[26,31,32],{},"oauth2-client-secret","的情况下通过chrome的同步api继续使用Google的同步服务，说得太多了也没必要，毕竟原文就在那里，看不看取决于你，我这里直接给命令吧。",[35,36,41],"pre",{"className":37,"code":38,"language":39,"meta":40,"style":40},"language-shell shiki shiki-themes github-light github-dark","echo \"--oauth2-client-id=77185425430.apps.googleusercontent.com\n--oauth2-client-secret=OTJgUOQcT7lO7GsGZq2G4IlT\" >> ~/.config/chromium-flags.conf\n","shell","",[26,42,43,56],{"__ignoreMap":40},[44,45,48,52],"span",{"class":46,"line":47},"line",1,[44,49,51],{"class":50},"sj4cs","echo",[44,53,55],{"class":54},"sZZnC"," \"--oauth2-client-id=77185425430.apps.googleusercontent.com\n",[44,57,59,62,66],{"class":46,"line":58},2,[44,60,61],{"class":54},"--oauth2-client-secret=OTJgUOQcT7lO7GsGZq2G4IlT\"",[44,63,65],{"class":64},"szBVR"," >>",[44,67,68],{"class":54}," ~/.config/chromium-flags.conf\n",[10,70,71],{},"再次打开chromium,你就会发现你心心念念的同步功能回来了。",[10,73,74],{},[75,76],"img",{"alt":40,"src":77},"https://static.031130.xyz/uploads/2024/08/12/62f3cafe4a5ec.webp",[10,79,80],{},[81,82,83,84,89],"del",{},"然而，并不是所有的发行版都像 Archlinux 这样考虑到 oauth，我们也不可能像 Archlinux 官方那样有这个闲情雅致为没一个 Chromium 去添加这个 ",[17,85,88],{"href":86,"rel":87},"https://github.com/archlinux/svntogit-packages/blob/packages/chromium/trunk/use-oauth2-client-switches-as-default.patch",[21],"patch"," 以后重新编译一遍，大部分人都是直接用发行版源里的。针对这种情况，我们可以直接手写一个脚本",[35,91,95],{"className":92,"code":93,"language":94,"meta":40,"style":40},"language-bash shiki shiki-themes github-light github-dark","#!/usr/bin/bash\nexport GOOGLE_DEFAULT_CLIENT_ID=77185425430.apps.googleusercontent.com\nexport GOOGLE_DEFAULT_CLIENT_SECRET=OTJgUOQcT7lO7GsGZq2G4IlT\nexec /usr/bin/chromium-browser \"$@\"     # 我用的 Fedora 的启动命令是 chromium-browser，别的发行版用户还请自行调整\n","bash",[26,96,97,103,118,131],{"__ignoreMap":40},[44,98,99],{"class":46,"line":47},[44,100,102],{"class":101},"sJ8bj","#!/usr/bin/bash\n",[44,104,105,108,112,115],{"class":46,"line":58},[44,106,107],{"class":64},"export",[44,109,111],{"class":110},"sVt8B"," GOOGLE_DEFAULT_CLIENT_ID",[44,113,114],{"class":64},"=",[44,116,117],{"class":110},"77185425430.apps.googleusercontent.com\n",[44,119,121,123,126,128],{"class":46,"line":120},3,[44,122,107],{"class":64},[44,124,125],{"class":110}," GOOGLE_DEFAULT_CLIENT_SECRET",[44,127,114],{"class":64},[44,129,130],{"class":110},"OTJgUOQcT7lO7GsGZq2G4IlT\n",[44,132,134,137,140,143,146,149],{"class":46,"line":133},4,[44,135,136],{"class":50},"exec",[44,138,139],{"class":54}," /usr/bin/chromium-browser",[44,141,142],{"class":54}," \"",[44,144,145],{"class":50},"$@",[44,147,148],{"class":54},"\"",[44,150,151],{"class":101},"     # 我用的 Fedora 的启动命令是 chromium-browser，别的发行版用户还请自行调整\n",[10,153,154,155,158,159,162,163,165],{},"当我满心欢喜地把脚本扔进 ",[26,156,157],{},"$HOME/.local/bin"," 后，我却突然发现 Fedora 官方源中把 chromium 的启动命令写死在了 ",[26,160,161],{},"/usr/bin/chromium-browser","，如果直接去改 ",[26,164,161],{}," 的话，每次更新都会被覆盖。",[10,167,168,172],{},[169,170,171],"strong",{},"正确的做法","应该是把 desktop 文件复制一份到桌面，再去改内容。",[35,174,176],{"className":92,"code":175,"language":94,"meta":40,"style":40},"mkdir -p $HOME/.local/share/applications/\ncp /usr/share/applications/chromium-browser.desktop $HOME/.local/share/applications/\nsed -i \"s|/usr/bin/chromium-browser|GOOGLE_DEFAULT_CLIENT_ID=77185425430.apps.googleusercontent.com GOOGLE_DEFAULT_CLIENT_SECRET=OTJgUOQcT7lO7GsGZq2G4IlT /usr/bin/chromium-browser|g\" $HOME/.local/share/applications/chromium-browser.desktop\n",[26,177,178,193,205],{"__ignoreMap":40},[44,179,180,184,187,190],{"class":46,"line":47},[44,181,183],{"class":182},"sScJk","mkdir",[44,185,186],{"class":50}," -p",[44,188,189],{"class":110}," $HOME",[44,191,192],{"class":54},"/.local/share/applications/\n",[44,194,195,198,201,203],{"class":46,"line":58},[44,196,197],{"class":182},"cp",[44,199,200],{"class":54}," /usr/share/applications/chromium-browser.desktop",[44,202,189],{"class":110},[44,204,192],{"class":54},[44,206,207,210,213,216,218],{"class":46,"line":120},[44,208,209],{"class":182},"sed",[44,211,212],{"class":50}," -i",[44,214,215],{"class":54}," \"s|/usr/bin/chromium-browser|GOOGLE_DEFAULT_CLIENT_ID=77185425430.apps.googleusercontent.com GOOGLE_DEFAULT_CLIENT_SECRET=OTJgUOQcT7lO7GsGZq2G4IlT /usr/bin/chromium-browser|g\"",[44,217,189],{"class":110},[44,219,220],{"class":54},"/.local/share/applications/chromium-browser.desktop\n",[222,223,224],"style",{},"html pre.shiki code .sj4cs, html code.shiki .sj4cs{--shiki-default:#005CC5;--shiki-dark:#79B8FF}html pre.shiki code .sZZnC, html code.shiki .sZZnC{--shiki-default:#032F62;--shiki-dark:#9ECBFF}html pre.shiki code .szBVR, html code.shiki .szBVR{--shiki-default:#D73A49;--shiki-dark:#F97583}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .sJ8bj, html code.shiki .sJ8bj{--shiki-default:#6A737D;--shiki-dark:#6A737D}html pre.shiki code .sVt8B, html code.shiki .sVt8B{--shiki-default:#24292E;--shiki-dark:#E1E4E8}html pre.shiki code .sScJk, html code.shiki .sScJk{--shiki-default:#6F42C1;--shiki-dark:#B392F0}",{"title":40,"searchDepth":58,"depth":58,"links":226},[],"2021-04-15","md",{},true,"/2021/04/15/login-chromium-with-the-api-of-chrome","---\ntitle:      使用Chrome的同步api为chromium开启同步功能\ndate:       2021-04-15\ntags:       笔记\n---\n\n今年两三月的时候，Google限制了chromium的同步api次数，导致各个发行版内置的chromium将不再能继续使用Google的数据同步功能。\n\n今天在翻 archlinuxcn 的群组的时候翻到了一段脚本: [https://gist.github.com/foutrelis/14e339596b89813aa9c37fd1b4e5d9d5](https://gist.github.com/foutrelis/14e339596b89813aa9c37fd1b4e5d9d5)\n\n大意就是说，由于Archlinux特殊的chromium启动方式导致我们可以在设置`oauth2-client-id`和`oauth2-client-secret`的情况下通过chrome的同步api继续使用Google的同步服务，说得太多了也没必要，毕竟原文就在那里，看不看取决于你，我这里直接给命令吧。\n\n```shell\necho \"--oauth2-client-id=77185425430.apps.googleusercontent.com\n--oauth2-client-secret=OTJgUOQcT7lO7GsGZq2G4IlT\" >> ~/.config/chromium-flags.conf\n```\n\n再次打开chromium,你就会发现你心心念念的同步功能回来了。\n\n![](https://static.031130.xyz/uploads/2024/08/12/62f3cafe4a5ec.webp)\n\n~~然而，并不是所有的发行版都像 Archlinux 这样考虑到 oauth，我们也不可能像 Archlinux 官方那样有这个闲情雅致为没一个 Chromium 去添加这个 [patch](https://github.com/archlinux/svntogit-packages/blob/packages/chromium/trunk/use-oauth2-client-switches-as-default.patch) 以后重新编译一遍，大部分人都是直接用发行版源里的。针对这种情况，我们可以直接手写一个脚本~~\n\n```bash\n#!/usr/bin/bash\nexport GOOGLE_DEFAULT_CLIENT_ID=77185425430.apps.googleusercontent.com\nexport GOOGLE_DEFAULT_CLIENT_SECRET=OTJgUOQcT7lO7GsGZq2G4IlT\nexec /usr/bin/chromium-browser \"$@\"\t\t# 我用的 Fedora 的启动命令是 chromium-browser，别的发行版用户还请自行调整\n```\n\n当我满心欢喜地把脚本扔进 `$HOME/.local/bin` 后，我却突然发现 Fedora 官方源中把 chromium 的启动命令写死在了 `/usr/bin/chromium-browser`，如果直接去改 `/usr/bin/chromium-browser` 的话，每次更新都会被覆盖。\n\n**正确的做法**应该是把 desktop 文件复制一份到桌面，再去改内容。\n\n```bash\nmkdir -p $HOME/.local/share/applications/\ncp /usr/share/applications/chromium-browser.desktop $HOME/.local/share/applications/\nsed -i \"s|/usr/bin/chromium-browser|GOOGLE_DEFAULT_CLIENT_ID=77185425430.apps.googleusercontent.com GOOGLE_DEFAULT_CLIENT_SECRET=OTJgUOQcT7lO7GsGZq2G4IlT /usr/bin/chromium-browser|g\" $HOME/.local/share/applications/chromium-browser.desktop\n```\n\n",{"title":5,"description":12},"posts/login-chromium-with-the-api-of-chrome",false,"笔记","5n-TnjxE-a-ZKH-b1olrSLWwkAI9SQsuO_9xCYUiUzI",[239,244],{"title":240,"path":241,"stem":242,"date":243,"children":-1},"我在Archlinux上的常用软件","/2021/04/16/the-software-i-use-on-archlinux","posts/the-software-i-use-on-archlinux","2021-04-16",{"title":245,"path":246,"stem":247,"date":248,"children":-1},"Appimage的文件储存在哪里","/2021/04/13/where-will-appimage-put-its-file","posts/where-will-appimage-put-its-file","2021-04-13",16,1761699276323]