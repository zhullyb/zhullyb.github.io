[{"data":1,"prerenderedAt":264},["ShallowReactive",2],{"post-2021-04-15-login-chromium-with-the-api-of-chrome-zh":3,"surround-2021-04-15-login-chromium-with-the-api-of-chrome-zh":250,"randomIndex/2021/04/15/login-chromium-with-the-api-of-chrome/":262,"language-switch-/2021/04/15/login-chromium-with-the-api-of-chrome/-en":263},{"title":4,"date":5,"path":6,"tags":7,"body":9,"description":15},"使用Chrome的同步api为chromium开启同步功能","2021-04-15","/2021/04/15/login-chromium-with-the-api-of-chrome",[8],"Notes",{"type":10,"value":11,"toc":248},"minimark",[12,16,25,37,72,75,81,93,174,188,195,244],[13,14,15],"p",{},"今年两三月的时候，Google限制了chromium的同步api次数，导致各个发行版内置的chromium将不再能继续使用Google的数据同步功能。",[13,17,18,19],{},"今天在翻 archlinuxcn 的群组的时候翻到了一段脚本: ",[20,21,22],"a",{"href":22,"rel":23},"https://gist.github.com/foutrelis/14e339596b89813aa9c37fd1b4e5d9d5",[24],"nofollow",[13,26,27,28,32,33,36],{},"大意就是说，由于Archlinux特殊的chromium启动方式导致我们可以在设置",[29,30,31],"code",{},"oauth2-client-id","和",[29,34,35],{},"oauth2-client-secret","的情况下通过chrome的同步api继续使用Google的同步服务，说得太多了也没必要，毕竟原文就在那里，看不看取决于你，我这里直接给命令吧。",[38,39,44],"pre",{"className":40,"code":41,"language":42,"meta":43,"style":43},"language-shell shiki shiki-themes one-light one-dark-pro","echo \"--oauth2-client-id=77185425430.apps.googleusercontent.com\n--oauth2-client-secret=OTJgUOQcT7lO7GsGZq2G4IlT\" >> ~/.config/chromium-flags.conf\n","shell","",[29,45,46,59],{"__ignoreMap":43},[47,48,51,55],"span",{"class":49,"line":50},"line",1,[47,52,54],{"class":53},"s_Sar","echo",[47,56,58],{"class":57},"sDhpE"," \"--oauth2-client-id=77185425430.apps.googleusercontent.com\n",[47,60,62,65,69],{"class":49,"line":61},2,[47,63,64],{"class":57},"--oauth2-client-secret=OTJgUOQcT7lO7GsGZq2G4IlT\"",[47,66,68],{"class":67},"s5ixo"," >> ",[47,70,71],{"class":57},"~/.config/chromium-flags.conf\n",[13,73,74],{},"再次打开chromium,你就会发现你心心念念的同步功能回来了。",[13,76,77],{},[78,79],"img",{"alt":43,"src":80},"https://static.031130.xyz/uploads/2024/08/12/62f3cafe4a5ec.webp",[13,82,83],{},[84,85,86,87,92],"del",{},"然而，并不是所有的发行版都像 Archlinux 这样考虑到 oauth，我们也不可能像 Archlinux 官方那样有这个闲情雅致为没一个 Chromium 去添加这个 ",[20,88,91],{"href":89,"rel":90},"https://github.com/archlinux/svntogit-packages/blob/packages/chromium/trunk/use-oauth2-client-switches-as-default.patch",[24],"patch"," 以后重新编译一遍，大部分人都是直接用发行版源里的。针对这种情况，我们可以直接手写一个脚本",[38,94,98],{"className":95,"code":96,"language":97,"meta":43,"style":43},"language-bash shiki shiki-themes one-light one-dark-pro","#!/usr/bin/bash\nexport GOOGLE_DEFAULT_CLIENT_ID=77185425430.apps.googleusercontent.com\nexport GOOGLE_DEFAULT_CLIENT_SECRET=OTJgUOQcT7lO7GsGZq2G4IlT\nexec /usr/bin/chromium-browser \"$@\"     # 我用的 Fedora 的启动命令是 chromium-browser，别的发行版用户还请自行调整\n","bash",[29,99,100,106,139,152],{"__ignoreMap":43},[47,101,102],{"class":49,"line":50},[47,103,105],{"class":104},"sW2Sy","#!/usr/bin/bash\n",[47,107,108,112,116,120,123,126,129,131,134,136],{"class":49,"line":61},[47,109,111],{"class":110},"sLKXg","export",[47,113,115],{"class":114},"sJa8x"," GOOGLE_DEFAULT_CLIENT_ID",[47,117,119],{"class":118},"sknuh","=",[47,121,122],{"class":114},"77185425430",[47,124,125],{"class":67},".",[47,127,128],{"class":114},"apps",[47,130,125],{"class":67},[47,132,133],{"class":114},"googleusercontent",[47,135,125],{"class":67},[47,137,138],{"class":114},"com\n",[47,140,142,144,147,149],{"class":49,"line":141},3,[47,143,111],{"class":110},[47,145,146],{"class":114}," GOOGLE_DEFAULT_CLIENT_SECRET",[47,148,119],{"class":118},[47,150,151],{"class":114},"OTJgUOQcT7lO7GsGZq2G4IlT\n",[47,153,155,158,161,164,168,171],{"class":49,"line":154},4,[47,156,157],{"class":53},"exec",[47,159,160],{"class":57}," /usr/bin/chromium-browser",[47,162,163],{"class":57}," \"",[47,165,167],{"class":166},"s8iYz","$@",[47,169,170],{"class":57},"\"",[47,172,173],{"class":104},"     # 我用的 Fedora 的启动命令是 chromium-browser，别的发行版用户还请自行调整\n",[13,175,176,177,180,181,184,185,187],{},"当我满心欢喜地把脚本扔进 ",[29,178,179],{},"$HOME/.local/bin"," 后，我却突然发现 Fedora 官方源中把 chromium 的启动命令写死在了 ",[29,182,183],{},"/usr/bin/chromium-browser","，如果直接去改 ",[29,186,183],{}," 的话，每次更新都会被覆盖。",[13,189,190,194],{},[191,192,193],"strong",{},"正确的做法","应该是把 desktop 文件复制一份到桌面，再去改内容。",[38,196,198],{"className":95,"code":197,"language":97,"meta":43,"style":43},"mkdir -p $HOME/.local/share/applications/\ncp /usr/share/applications/chromium-browser.desktop $HOME/.local/share/applications/\nsed -i \"s|/usr/bin/chromium-browser|GOOGLE_DEFAULT_CLIENT_ID=77185425430.apps.googleusercontent.com GOOGLE_DEFAULT_CLIENT_SECRET=OTJgUOQcT7lO7GsGZq2G4IlT /usr/bin/chromium-browser|g\" $HOME/.local/share/applications/chromium-browser.desktop\n",[29,199,200,216,228],{"__ignoreMap":43},[47,201,202,206,210,213],{"class":49,"line":50},[47,203,205],{"class":204},"sAdtL","mkdir",[47,207,209],{"class":208},"sAGMh"," -p",[47,211,212],{"class":114}," $HOME",[47,214,215],{"class":57},"/.local/share/applications/\n",[47,217,218,221,224,226],{"class":49,"line":61},[47,219,220],{"class":204},"cp",[47,222,223],{"class":57}," /usr/share/applications/chromium-browser.desktop",[47,225,212],{"class":114},[47,227,215],{"class":57},[47,229,230,233,236,239,241],{"class":49,"line":141},[47,231,232],{"class":204},"sed",[47,234,235],{"class":208}," -i",[47,237,238],{"class":57}," \"s|/usr/bin/chromium-browser|GOOGLE_DEFAULT_CLIENT_ID=77185425430.apps.googleusercontent.com GOOGLE_DEFAULT_CLIENT_SECRET=OTJgUOQcT7lO7GsGZq2G4IlT /usr/bin/chromium-browser|g\"",[47,240,212],{"class":114},[47,242,243],{"class":57},"/.local/share/applications/chromium-browser.desktop\n",[245,246,247],"style",{},"html pre.shiki code .s_Sar, html code.shiki .s_Sar{--shiki-default:#0184BC;--shiki-dark:#56B6C2}html pre.shiki code .sDhpE, html code.shiki .sDhpE{--shiki-default:#50A14F;--shiki-dark:#98C379}html pre.shiki code .s5ixo, html code.shiki .s5ixo{--shiki-default:#383A42;--shiki-dark:#ABB2BF}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .sW2Sy, html code.shiki .sW2Sy{--shiki-default:#A0A1A7;--shiki-default-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic}html pre.shiki code .sLKXg, html code.shiki .sLKXg{--shiki-default:#A626A4;--shiki-dark:#C678DD}html pre.shiki code .sJa8x, html code.shiki .sJa8x{--shiki-default:#E45649;--shiki-dark:#E06C75}html pre.shiki code .sknuh, html code.shiki .sknuh{--shiki-default:#383A42;--shiki-dark:#56B6C2}html pre.shiki code .s8iYz, html code.shiki .s8iYz{--shiki-default:#383A42;--shiki-default-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic}html pre.shiki code .sAdtL, html code.shiki .sAdtL{--shiki-default:#4078F2;--shiki-dark:#61AFEF}html pre.shiki code .sAGMh, html code.shiki .sAGMh{--shiki-default:#986801;--shiki-dark:#D19A66}",{"title":43,"searchDepth":61,"depth":61,"links":249},[],[251,257],{"title":252,"path":253,"stem":254,"date":255,"lang":256,"children":-1},"我在Archlinux上的常用软件","/2021/04/16/the-software-i-use-on-archlinux","posts/zh/the-software-i-use-on-archlinux","2021-04-16","zh-CN",{"title":258,"path":259,"stem":260,"date":261,"lang":256,"children":-1},"Appimage的文件储存在哪里","/2021/04/13/where-will-appimage-put-its-file","posts/zh/where-will-appimage-put-its-file","2021-04-13",5,null,1765307310444]