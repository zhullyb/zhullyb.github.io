[{"data":1,"prerenderedAt":175},["ShallowReactive",2],{"post-2021-09-05-wrong-fonts-color-fix-under-kde-with-a-dark-theme":3,"surround-2021-09-05-wrong-fonts-color-fix-under-kde-with-a-dark-theme":163,"randomIndex/2021/09/05/wrong-fonts-color-fix-under-kde-with-a-dark-theme/":174},{"id":4,"title":5,"body":6,"date":147,"description":148,"extension":149,"meta":150,"navigation":153,"path":154,"rawbody":155,"seo":156,"stem":157,"sticky":151,"tags":158,"__hash__":162},"posts/posts/wrong-fonts-color-fix-under-kde-with-a-dark-theme.md","使用fakehome方案暂时解决跑在KDE暗色主题下的程序使用亮色字体的问题",{"type":7,"value":8,"toc":144},"minimark",[9,21,37,40,43,54,59,66,69,109,112,128,135,140],[10,11,12],"p",{},[13,14,15,16,20],"strong",{},"9月6日更新：AUR的",[17,18,19],"code",{},"wemeet-bin","维护者sukanka已经将咱的运行指令直接打进了包内，故本文已经基本失去原本的应用意义，但仍可以作为一个案例来解决类似问题。",[22,23,24,27,30],"blockquote",{},[10,25,26],{},"在使用腾讯最近推出的Linux原生腾讯会议的时候，咱遇到了个十分影响体验的问题。",[10,28,29],{},"我在使用KDE的暗色主题，腾讯回忆自作主张将字体颜色调成了白色。然而，字体背景是白色的没，因此导致对比度下降，字体难以辨认。效果大概是这个鬼样子:",[10,31,32],{},[33,34],"img",{"alt":35,"src":36},"","https://static.031130.xyz/uploads/2024/08/12/62f3cb059b229.webp",[10,38,39],{},"然而我一时半会儿却找不到合适的变量在运行腾讯会议之前unset，无法指定它使用一个正确的字体颜色。",[10,41,42],{},"此时，我想到了fakehome的解决方案——bwrap。",[10,44,45,46,53],{},"关于bwrap，依云在ta的",[47,48,52],"a",{"href":49,"rel":50},"https://blog.lilydjwg.me/2021/8/12/using-bwrap.215869.html",[51],"nofollow","博客","里讲过运行原理，我在这里直接摘一小段过来",[22,55,56],{},[10,57,58],{},"bwrap 的原理是，把 / 放到一个 tmpfs 上，然后需要允许访问的目录通过 bind mount 弄进来。所以没弄进来的部分就是不存在，写数据的话就存在内存里，用完就扔掉了。",[10,60,61,62,65],{},"而我们要做的，就是开一个tmpfs作为",[17,63,64],{},"$HOME/.config","，让腾讯会议读取不到KDE的主题配置文件。",[10,67,68],{},"使用如下命令",[70,71,75],"pre",{"className":72,"code":73,"language":74,"meta":35,"style":35},"language-bash shiki shiki-themes one-light one-dark-pro","bwrap --dev-bind / / --tmpfs $HOME/.config wemeet\n","bash",[17,76,77],{"__ignoreMap":35},[78,79,82,86,90,94,96,99,103,106],"span",{"class":80,"line":81},"line",1,[78,83,85],{"class":84},"sAdtL","bwrap",[78,87,89],{"class":88},"sAGMh"," --dev-bind",[78,91,93],{"class":92},"sDhpE"," /",[78,95,93],{"class":92},[78,97,98],{"class":88}," --tmpfs",[78,100,102],{"class":101},"sJa8x"," $HOME",[78,104,105],{"class":92},"/.config",[78,107,108],{"class":92}," wemeet\n",[10,110,111],{},"软件启动确认没有问题后，我们可以更改腾讯会议desktop中的启动命令",[70,113,115],{"className":72,"code":114,"language":74,"meta":35,"style":35},"sudo $EDITOR /usr/share/applications/wemeetapp.desktop\n",[17,116,117],{"__ignoreMap":35},[78,118,119,122,125],{"class":80,"line":81},[78,120,121],{"class":84},"sudo",[78,123,124],{"class":101}," $EDITOR",[78,126,127],{"class":92}," /usr/share/applications/wemeetapp.desktop\n",[10,129,130,131,134],{},"将",[17,132,133],{},"Exec=","后面的命令改成我们刚刚启动所使用的命令即可。",[22,136,137],{},[10,138,139],{},"关键词: bwrap, linux, 暗色模式, 深色模式, 夜间模式, 白色字体, 亮色字体",[141,142,143],"style",{},"html pre.shiki code .sAdtL, html code.shiki .sAdtL{--shiki-default:#4078F2;--shiki-dark:#61AFEF}html pre.shiki code .sAGMh, html code.shiki .sAGMh{--shiki-default:#986801;--shiki-dark:#D19A66}html pre.shiki code .sDhpE, html code.shiki .sDhpE{--shiki-default:#50A14F;--shiki-dark:#98C379}html pre.shiki code .sJa8x, html code.shiki .sJa8x{--shiki-default:#E45649;--shiki-dark:#E06C75}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":35,"searchDepth":145,"depth":145,"links":146},2,[],"2021-09-05","9月6日更新：AUR的wemeet-bin维护者sukanka已经将咱的运行指令直接打进了包内，故本文已经基本失去原本的应用意义，但仍可以作为一个案例来解决类似问题。","md",{"top":151,"type":152},false,"waline",true,"/2021/09/05/wrong-fonts-color-fix-under-kde-with-a-dark-theme","---\ntitle: 使用fakehome方案暂时解决跑在KDE暗色主题下的程序使用亮色字体的问题\ntop: false\ndate: 2021-09-05\ntype: waline\ntags:\n      - Linux\n      - Archlinux\n      - Bwrap\n---\n\n**9月6日更新：AUR的`wemeet-bin`维护者sukanka已经将咱的运行指令直接打进了包内，故本文已经基本失去原本的应用意义，但仍可以作为一个案例来解决类似问题。**\n\n> 在使用腾讯最近推出的Linux原生腾讯会议的时候，咱遇到了个十分影响体验的问题。\n>\n> 我在使用KDE的暗色主题，腾讯回忆自作主张将字体颜色调成了白色。然而，字体背景是白色的没，因此导致对比度下降，字体难以辨认。效果大概是这个鬼样子:\n>\n> ![](https://static.031130.xyz/uploads/2024/08/12/62f3cb059b229.webp)\n\n\n\n然而我一时半会儿却找不到合适的变量在运行腾讯会议之前unset，无法指定它使用一个正确的字体颜色。\n\n此时，我想到了fakehome的解决方案——bwrap。\n\n关于bwrap，依云在ta的[博客](https://blog.lilydjwg.me/2021/8/12/using-bwrap.215869.html)里讲过运行原理，我在这里直接摘一小段过来\n\n> bwrap 的原理是，把 / 放到一个 tmpfs 上，然后需要允许访问的目录通过 bind mount 弄进来。所以没弄进来的部分就是不存在，写数据的话就存在内存里，用完就扔掉了。\n\n而我们要做的，就是开一个tmpfs作为`$HOME/.config`，让腾讯会议读取不到KDE的主题配置文件。\n\n使用如下命令\n\n```bash\nbwrap --dev-bind / / --tmpfs $HOME/.config wemeet\n```\n\n软件启动确认没有问题后，我们可以更改腾讯会议desktop中的启动命令\n\n```bash\nsudo $EDITOR /usr/share/applications/wemeetapp.desktop\n```\n\n将`Exec=`后面的命令改成我们刚刚启动所使用的命令即可。\n\n\n\n> 关键词: bwrap, linux, 暗色模式, 深色模式, 夜间模式, 白色字体, 亮色字体\n",{"title":5,"description":148},"posts/wrong-fonts-color-fix-under-kde-with-a-dark-theme",[159,160,161],"Linux","Archlinux","Bwrap","fUzmgCHFBSu85nAlZV18nuhxRpyizBB8IIOdht73xks",[164,169],{"title":165,"path":166,"stem":167,"date":168,"children":-1},"使用AUR(Helper)安装软件时究竟发生了什么？对于常见的构建错误如何解决？","/2021/09/11/detailed-explanation-for-aur","posts/detailed-explanation-for-aur","2021-09-11 19:22:29",{"title":170,"path":171,"stem":172,"date":173,"children":-1},"来，从AUR给Fedora偷个包","/2021/07/23/build-a-rpm-package-from-aur-with-archlinux","posts/build-a-rpm-package-from-aur-with-archlinux","2021-07-23 01:50:09",20,1761738201507]