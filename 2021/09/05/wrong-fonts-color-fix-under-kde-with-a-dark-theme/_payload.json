[{"data":1,"prerenderedAt":166},["ShallowReactive",2],{"post-2021-09-05-wrong-fonts-color-fix-under-kde-with-a-dark-theme-zh":3,"surround-2021-09-05-wrong-fonts-color-fix-under-kde-with-a-dark-theme-zh":153,"randomIndex/2021/09/05/wrong-fonts-color-fix-under-kde-with-a-dark-theme/":86,"language-switch-/2021/09/05/wrong-fonts-color-fix-under-kde-with-a-dark-theme/-en":165},{"title":4,"date":5,"path":6,"tags":7,"body":11,"description":152},"使用fakehome方案暂时解决跑在KDE暗色主题下的程序使用亮色字体的问题","2021-09-05","/2021/09/05/wrong-fonts-color-fix-under-kde-with-a-dark-theme",[8,9,10],"Linux","Archlinux","Bwrap",{"type":12,"value":13,"toc":149},"minimark",[14,26,42,45,48,59,64,71,74,114,117,133,140,145],[15,16,17],"p",{},[18,19,20,21,25],"strong",{},"9月6日更新：AUR的",[22,23,24],"code",{},"wemeet-bin","维护者sukanka已经将咱的运行指令直接打进了包内，故本文已经基本失去原本的应用意义，但仍可以作为一个案例来解决类似问题。",[27,28,29,32,35],"blockquote",{},[15,30,31],{},"在使用腾讯最近推出的Linux原生腾讯会议的时候，咱遇到了个十分影响体验的问题。",[15,33,34],{},"我在使用KDE的暗色主题，腾讯回忆自作主张将字体颜色调成了白色。然而，字体背景是白色的没，因此导致对比度下降，字体难以辨认。效果大概是这个鬼样子:",[15,36,37],{},[38,39],"img",{"alt":40,"src":41},"","https://static.031130.xyz/uploads/2024/08/12/62f3cb059b229.webp",[15,43,44],{},"然而我一时半会儿却找不到合适的变量在运行腾讯会议之前unset，无法指定它使用一个正确的字体颜色。",[15,46,47],{},"此时，我想到了fakehome的解决方案——bwrap。",[15,49,50,51,58],{},"关于bwrap，依云在ta的",[52,53,57],"a",{"href":54,"rel":55},"https://blog.lilydjwg.me/2021/8/12/using-bwrap.215869.html",[56],"nofollow","博客","里讲过运行原理，我在这里直接摘一小段过来",[27,60,61],{},[15,62,63],{},"bwrap 的原理是，把 / 放到一个 tmpfs 上，然后需要允许访问的目录通过 bind mount 弄进来。所以没弄进来的部分就是不存在，写数据的话就存在内存里，用完就扔掉了。",[15,65,66,67,70],{},"而我们要做的，就是开一个tmpfs作为",[22,68,69],{},"$HOME/.config","，让腾讯会议读取不到KDE的主题配置文件。",[15,72,73],{},"使用如下命令",[75,76,80],"pre",{"className":77,"code":78,"language":79,"meta":40,"style":40},"language-bash shiki shiki-themes one-light one-dark-pro","bwrap --dev-bind / / --tmpfs $HOME/.config wemeet\n","bash",[22,81,82],{"__ignoreMap":40},[83,84,87,91,95,99,101,104,108,111],"span",{"class":85,"line":86},"line",1,[83,88,90],{"class":89},"sAdtL","bwrap",[83,92,94],{"class":93},"sAGMh"," --dev-bind",[83,96,98],{"class":97},"sDhpE"," /",[83,100,98],{"class":97},[83,102,103],{"class":93}," --tmpfs",[83,105,107],{"class":106},"sJa8x"," $HOME",[83,109,110],{"class":97},"/.config",[83,112,113],{"class":97}," wemeet\n",[15,115,116],{},"软件启动确认没有问题后，我们可以更改腾讯会议desktop中的启动命令",[75,118,120],{"className":77,"code":119,"language":79,"meta":40,"style":40},"sudo $EDITOR /usr/share/applications/wemeetapp.desktop\n",[22,121,122],{"__ignoreMap":40},[83,123,124,127,130],{"class":85,"line":86},[83,125,126],{"class":89},"sudo",[83,128,129],{"class":106}," $EDITOR",[83,131,132],{"class":97}," /usr/share/applications/wemeetapp.desktop\n",[15,134,135,136,139],{},"将",[22,137,138],{},"Exec=","后面的命令改成我们刚刚启动所使用的命令即可。",[27,141,142],{},[15,143,144],{},"关键词: bwrap, linux, 暗色模式, 深色模式, 夜间模式, 白色字体, 亮色字体",[146,147,148],"style",{},"html pre.shiki code .sAdtL, html code.shiki .sAdtL{--shiki-default:#4078F2;--shiki-dark:#61AFEF}html pre.shiki code .sAGMh, html code.shiki .sAGMh{--shiki-default:#986801;--shiki-dark:#D19A66}html pre.shiki code .sDhpE, html code.shiki .sDhpE{--shiki-default:#50A14F;--shiki-dark:#98C379}html pre.shiki code .sJa8x, html code.shiki .sJa8x{--shiki-default:#E45649;--shiki-dark:#E06C75}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":40,"searchDepth":150,"depth":150,"links":151},2,[],"9月6日更新：AUR的wemeet-bin维护者sukanka已经将咱的运行指令直接打进了包内，故本文已经基本失去原本的应用意义，但仍可以作为一个案例来解决类似问题。",[154,160],{"title":155,"path":156,"stem":157,"date":158,"lang":159,"children":-1},"使用AUR(Helper)安装软件时究竟发生了什么？对于常见的构建错误如何解决？","/2021/09/11/detailed-explanation-for-aur","posts/zh/detailed-explanation-for-aur","2021-09-11 19:22:29","zh-CN",{"title":161,"path":162,"stem":163,"date":164,"lang":159,"children":-1},"来，从AUR给Fedora偷个包","/2021/07/23/build-a-rpm-package-from-aur-with-archlinux","posts/zh/build-a-rpm-package-from-aur-with-archlinux","2021-07-23 01:50:09",null,1771553317681]