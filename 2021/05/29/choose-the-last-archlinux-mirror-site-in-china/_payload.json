[{"data":1,"prerenderedAt":792},["ShallowReactive",2],{"post-2021-05-29-choose-the-last-archlinux-mirror-site-in-china-zh":3,"surround-2021-05-29-choose-the-last-archlinux-mirror-site-in-china-zh":778,"randomIndex/2021/05/29/choose-the-last-archlinux-mirror-site-in-china/":790,"language-switch-/2021/05/29/choose-the-last-archlinux-mirror-site-in-china/-en":791},{"title":4,"date":5,"path":6,"tags":7,"body":10,"description":46},"选择最新的Archlinux镜像源","2021-05-29","/2021/05/29/choose-the-last-archlinux-mirror-site-in-china",[8,9],"Archlinux","Mirror Site",{"type":11,"value":12,"toc":774},"minimark",[13,18,22,33,36,47,58,64,659,662,668,671,675,683,686,748,755,761,767,770],[14,15,17],"h3",{"id":16},"找到最新的archlinux镜像源","找到最新的Archlinux镜像源",[19,20,21],"p",{},"我是testing+kde-unstable用户，平均每天更新4次，对于我而言，选择最新的Archlinux镜像是非常重要的。",[19,23,24,25,32],{},"Archlinux的主源并不开放给个人用户使用，仅开放给",[26,27,31],"a",{"href":28,"rel":29},"https://archlinux.org/mirrors/tier/1/",[30],"nofollow","一级镜像站","进行同步，因此我们需要手动寻找国内较新的镜像站。（理论上来说一级镜像站应该比二级镜像站更新，但是有些一级镜像站的同步频率并不高，同步延迟可能会比某些二级镜像站还要高）",[19,34,35],{},"一个archlinux的镜像目录大概是长下面这个样子",[37,38,43],"pre",{"className":39,"code":41,"language":42},[40],"language-text","archlinux/\n├── community\n├── community-staging\n├── community-testing\n├── core\n├── extra\n├── gnome-unstable\n├── images\n├── iso\n├── kde-unstable\n├── lastsync\n├── lastupdate\n├── multilib\n├── multilib-staging\n├── multilib-testing\n├── pool\n├── staging\n└── testing\n","text",[44,45,41],"code",{"__ignoreMap":46},"",[19,48,49,50,53,54,57],{},"其中的",[44,51,52],{},"lastsync","和",[44,55,56],{},"lastupdate","用unix时间戳记录着上一次同步时间和镜像的上一次变更时间。",[19,59,60,61,63],{},"因此，我们只需要对比各个镜像站的",[44,62,52],{},"谁比较新就行了，我写了如下的辣鸡脚本",[37,65,69],{"className":66,"code":67,"language":68,"meta":46,"style":46},"language-bash shiki shiki-themes one-light one-dark-pro","#!/bin/bash\n\ntuna=$(curl -s https://mirrors.tuna.tsinghua.edu.cn/archlinux/lastsync)\nbfsu=$(curl -s https://mirrors.bfsu.edu.cn/archlinux/lastsync)\nsjtug=$(curl -s https://mirror.sjtu.edu.cn/archlinux/lastsync)\naliyun=$(curl -s https://mirrors.aliyun.com/archlinux/lastsync)\nustc=$(curl -s https://mirrors.ustc.edu.cn/archlinux/lastsync)\nzju=$(curl -s https://mirrors.zju.edu.cn/archlinux/lastsync)\ncqu=$(curl -s https://mirrors.cqu.edu.cn/archlinux/lastsync)\nlzu=$(curl -s https://mirror.lzu.edu.cn/archlinux/lastsync)\nneusoft=$(curl -s https://mirrors.neusoft.edu.cn/archlinux/lastsync)\ndgut=$(curl -s https://mirrors.dgut.edu.cn/archlinux/lastsync)\nnetease=$(curl -s https://mirrors.163.com/archlinux/lastsync)\ntencent=$(curl -s https://mirrors.tencent.com/archlinux/lastsync)\nhit=$(curl -s https://mirrors.hit.edu.cn/archlinux/lastsync)\nhuaweicloud=$(curl -s https://mirrors.huaweicloud.com/archlinux/lastsync)\nsohu=$(curl -s https://mirrors.sohu.com/archlinux/lastsync)\nopentuna=$(curl -s https://opentuna.cn/archlinux/lastsync)\npku=$(curl -s https://mirrors.pku.edu.cn/archlinux/lastsync)\nnju=$(curl -s https://mirrors.nju.edu.cn/archlinux/lastsync)\nnjupt=$(curl -s https://mirrors.nju.edu.cn/archlinux/lastsync)\n\necho \"\"\"\n$tuna        #tuna\n$bfsu        #bfsu\n$sjtug       #sjtug\n$aliyun      #aliyun\n$ustc        #ustc\n$zju         #zju\n$cqu         #cqu\n$lzu         #lzu\n$neusoft     #neusoft\n$dgut        #dgut\n$netease     #netease\n$tencent     #tencent\n$hit         #hit\n$huaweicloud #huaweicloud\n$sohu        #sohu\n$opentuna    #opentuna\n$pku         #pku\n$nju         #nju\n$njupt       #njupt\n\"\"\"  | sort -r\n","bash",[44,70,71,80,87,117,136,155,174,193,212,231,250,269,288,307,326,345,364,383,402,421,440,458,463,473,482,491,500,509,518,527,536,545,554,563,572,581,590,599,608,617,626,635,644],{"__ignoreMap":46},[72,73,76],"span",{"class":74,"line":75},"line",1,[72,77,79],{"class":78},"sW2Sy","#!/bin/bash\n",[72,81,83],{"class":74,"line":82},2,[72,84,86],{"emptyLinePlaceholder":85},true,"\n",[72,88,90,94,98,102,106,110,114],{"class":74,"line":89},3,[72,91,93],{"class":92},"sJa8x","tuna",[72,95,97],{"class":96},"sknuh","=",[72,99,101],{"class":100},"s5ixo","$(",[72,103,105],{"class":104},"sAdtL","curl",[72,107,109],{"class":108},"sAGMh"," -s",[72,111,113],{"class":112},"sDhpE"," https://mirrors.tuna.tsinghua.edu.cn/archlinux/lastsync",[72,115,116],{"class":100},")\n",[72,118,120,123,125,127,129,131,134],{"class":74,"line":119},4,[72,121,122],{"class":92},"bfsu",[72,124,97],{"class":96},[72,126,101],{"class":100},[72,128,105],{"class":104},[72,130,109],{"class":108},[72,132,133],{"class":112}," https://mirrors.bfsu.edu.cn/archlinux/lastsync",[72,135,116],{"class":100},[72,137,139,142,144,146,148,150,153],{"class":74,"line":138},5,[72,140,141],{"class":92},"sjtug",[72,143,97],{"class":96},[72,145,101],{"class":100},[72,147,105],{"class":104},[72,149,109],{"class":108},[72,151,152],{"class":112}," https://mirror.sjtu.edu.cn/archlinux/lastsync",[72,154,116],{"class":100},[72,156,158,161,163,165,167,169,172],{"class":74,"line":157},6,[72,159,160],{"class":92},"aliyun",[72,162,97],{"class":96},[72,164,101],{"class":100},[72,166,105],{"class":104},[72,168,109],{"class":108},[72,170,171],{"class":112}," https://mirrors.aliyun.com/archlinux/lastsync",[72,173,116],{"class":100},[72,175,177,180,182,184,186,188,191],{"class":74,"line":176},7,[72,178,179],{"class":92},"ustc",[72,181,97],{"class":96},[72,183,101],{"class":100},[72,185,105],{"class":104},[72,187,109],{"class":108},[72,189,190],{"class":112}," https://mirrors.ustc.edu.cn/archlinux/lastsync",[72,192,116],{"class":100},[72,194,196,199,201,203,205,207,210],{"class":74,"line":195},8,[72,197,198],{"class":92},"zju",[72,200,97],{"class":96},[72,202,101],{"class":100},[72,204,105],{"class":104},[72,206,109],{"class":108},[72,208,209],{"class":112}," https://mirrors.zju.edu.cn/archlinux/lastsync",[72,211,116],{"class":100},[72,213,215,218,220,222,224,226,229],{"class":74,"line":214},9,[72,216,217],{"class":92},"cqu",[72,219,97],{"class":96},[72,221,101],{"class":100},[72,223,105],{"class":104},[72,225,109],{"class":108},[72,227,228],{"class":112}," https://mirrors.cqu.edu.cn/archlinux/lastsync",[72,230,116],{"class":100},[72,232,234,237,239,241,243,245,248],{"class":74,"line":233},10,[72,235,236],{"class":92},"lzu",[72,238,97],{"class":96},[72,240,101],{"class":100},[72,242,105],{"class":104},[72,244,109],{"class":108},[72,246,247],{"class":112}," https://mirror.lzu.edu.cn/archlinux/lastsync",[72,249,116],{"class":100},[72,251,253,256,258,260,262,264,267],{"class":74,"line":252},11,[72,254,255],{"class":92},"neusoft",[72,257,97],{"class":96},[72,259,101],{"class":100},[72,261,105],{"class":104},[72,263,109],{"class":108},[72,265,266],{"class":112}," https://mirrors.neusoft.edu.cn/archlinux/lastsync",[72,268,116],{"class":100},[72,270,272,275,277,279,281,283,286],{"class":74,"line":271},12,[72,273,274],{"class":92},"dgut",[72,276,97],{"class":96},[72,278,101],{"class":100},[72,280,105],{"class":104},[72,282,109],{"class":108},[72,284,285],{"class":112}," https://mirrors.dgut.edu.cn/archlinux/lastsync",[72,287,116],{"class":100},[72,289,291,294,296,298,300,302,305],{"class":74,"line":290},13,[72,292,293],{"class":92},"netease",[72,295,97],{"class":96},[72,297,101],{"class":100},[72,299,105],{"class":104},[72,301,109],{"class":108},[72,303,304],{"class":112}," https://mirrors.163.com/archlinux/lastsync",[72,306,116],{"class":100},[72,308,310,313,315,317,319,321,324],{"class":74,"line":309},14,[72,311,312],{"class":92},"tencent",[72,314,97],{"class":96},[72,316,101],{"class":100},[72,318,105],{"class":104},[72,320,109],{"class":108},[72,322,323],{"class":112}," https://mirrors.tencent.com/archlinux/lastsync",[72,325,116],{"class":100},[72,327,329,332,334,336,338,340,343],{"class":74,"line":328},15,[72,330,331],{"class":92},"hit",[72,333,97],{"class":96},[72,335,101],{"class":100},[72,337,105],{"class":104},[72,339,109],{"class":108},[72,341,342],{"class":112}," https://mirrors.hit.edu.cn/archlinux/lastsync",[72,344,116],{"class":100},[72,346,348,351,353,355,357,359,362],{"class":74,"line":347},16,[72,349,350],{"class":92},"huaweicloud",[72,352,97],{"class":96},[72,354,101],{"class":100},[72,356,105],{"class":104},[72,358,109],{"class":108},[72,360,361],{"class":112}," https://mirrors.huaweicloud.com/archlinux/lastsync",[72,363,116],{"class":100},[72,365,367,370,372,374,376,378,381],{"class":74,"line":366},17,[72,368,369],{"class":92},"sohu",[72,371,97],{"class":96},[72,373,101],{"class":100},[72,375,105],{"class":104},[72,377,109],{"class":108},[72,379,380],{"class":112}," https://mirrors.sohu.com/archlinux/lastsync",[72,382,116],{"class":100},[72,384,386,389,391,393,395,397,400],{"class":74,"line":385},18,[72,387,388],{"class":92},"opentuna",[72,390,97],{"class":96},[72,392,101],{"class":100},[72,394,105],{"class":104},[72,396,109],{"class":108},[72,398,399],{"class":112}," https://opentuna.cn/archlinux/lastsync",[72,401,116],{"class":100},[72,403,405,408,410,412,414,416,419],{"class":74,"line":404},19,[72,406,407],{"class":92},"pku",[72,409,97],{"class":96},[72,411,101],{"class":100},[72,413,105],{"class":104},[72,415,109],{"class":108},[72,417,418],{"class":112}," https://mirrors.pku.edu.cn/archlinux/lastsync",[72,420,116],{"class":100},[72,422,424,427,429,431,433,435,438],{"class":74,"line":423},20,[72,425,426],{"class":92},"nju",[72,428,97],{"class":96},[72,430,101],{"class":100},[72,432,105],{"class":104},[72,434,109],{"class":108},[72,436,437],{"class":112}," https://mirrors.nju.edu.cn/archlinux/lastsync",[72,439,116],{"class":100},[72,441,443,446,448,450,452,454,456],{"class":74,"line":442},21,[72,444,445],{"class":92},"njupt",[72,447,97],{"class":96},[72,449,101],{"class":100},[72,451,105],{"class":104},[72,453,109],{"class":108},[72,455,437],{"class":112},[72,457,116],{"class":100},[72,459,461],{"class":74,"line":460},22,[72,462,86],{"emptyLinePlaceholder":85},[72,464,466,470],{"class":74,"line":465},23,[72,467,469],{"class":468},"s_Sar","echo",[72,471,472],{"class":112}," \"\"\"\n",[72,474,476,479],{"class":74,"line":475},24,[72,477,478],{"class":92},"$tuna",[72,480,481],{"class":112},"        #tuna\n",[72,483,485,488],{"class":74,"line":484},25,[72,486,487],{"class":92},"$bfsu",[72,489,490],{"class":112},"        #bfsu\n",[72,492,494,497],{"class":74,"line":493},26,[72,495,496],{"class":92},"$sjtug",[72,498,499],{"class":112},"       #sjtug\n",[72,501,503,506],{"class":74,"line":502},27,[72,504,505],{"class":92},"$aliyun",[72,507,508],{"class":112},"      #aliyun\n",[72,510,512,515],{"class":74,"line":511},28,[72,513,514],{"class":92},"$ustc",[72,516,517],{"class":112},"        #ustc\n",[72,519,521,524],{"class":74,"line":520},29,[72,522,523],{"class":92},"$zju",[72,525,526],{"class":112},"         #zju\n",[72,528,530,533],{"class":74,"line":529},30,[72,531,532],{"class":92},"$cqu",[72,534,535],{"class":112},"         #cqu\n",[72,537,539,542],{"class":74,"line":538},31,[72,540,541],{"class":92},"$lzu",[72,543,544],{"class":112},"         #lzu\n",[72,546,548,551],{"class":74,"line":547},32,[72,549,550],{"class":92},"$neusoft",[72,552,553],{"class":112},"     #neusoft\n",[72,555,557,560],{"class":74,"line":556},33,[72,558,559],{"class":92},"$dgut",[72,561,562],{"class":112},"        #dgut\n",[72,564,566,569],{"class":74,"line":565},34,[72,567,568],{"class":92},"$netease",[72,570,571],{"class":112},"     #netease\n",[72,573,575,578],{"class":74,"line":574},35,[72,576,577],{"class":92},"$tencent",[72,579,580],{"class":112},"     #tencent\n",[72,582,584,587],{"class":74,"line":583},36,[72,585,586],{"class":92},"$hit",[72,588,589],{"class":112},"         #hit\n",[72,591,593,596],{"class":74,"line":592},37,[72,594,595],{"class":92},"$huaweicloud",[72,597,598],{"class":112}," #huaweicloud\n",[72,600,602,605],{"class":74,"line":601},38,[72,603,604],{"class":92},"$sohu",[72,606,607],{"class":112},"        #sohu\n",[72,609,611,614],{"class":74,"line":610},39,[72,612,613],{"class":92},"$opentuna",[72,615,616],{"class":112},"    #opentuna\n",[72,618,620,623],{"class":74,"line":619},40,[72,621,622],{"class":92},"$pku",[72,624,625],{"class":112},"         #pku\n",[72,627,629,632],{"class":74,"line":628},41,[72,630,631],{"class":92},"$nju",[72,633,634],{"class":112},"         #nju\n",[72,636,638,641],{"class":74,"line":637},42,[72,639,640],{"class":92},"$njupt",[72,642,643],{"class":112},"       #njupt\n",[72,645,647,650,653,656],{"class":74,"line":646},43,[72,648,649],{"class":112},"\"\"\"",[72,651,652],{"class":100},"  | ",[72,654,655],{"class":104},"sort",[72,657,658],{"class":108}," -r\n",[19,660,661],{},"其运行结果如下",[37,663,666],{"className":664,"code":665,"language":42},[40],"1622248120     #neusoft\n1622247879        #dgut\n1622247698         #hit\n1622246042         #zju\n1622246042        #tuna\n1622246042        #bfsu\n1622242426       #sjtug\n1622242426       #njupt\n1622242426         #nju\n1622240702        #ustc\n1622240522         #cqu\n1622238783     #netease\n1622235120         #lzu\n1622232241 #huaweicloud\n1622230871     #tencent\n1622217845      #aliyun\n1622217001         #pku\n1622203750        #sohu\n1622166379    #opentuna\n",[44,667,665],{"__ignoreMap":46},[19,669,670],{},"通过不同时刻的多次测试可以看出，国内同步频率最高的是东软（neusoft）的镜像。顺手一查，没错，是个一级镜像站。通过unix时间戳得知，东软的archlinux镜像几乎是每分钟同步一次，恐怖如斯。。。",[672,673,674],"h2",{"id":674},"获得更好的下载速度",[19,676,677,678],{},"我们已经得知东软是国内同步频率最高的Archlinux镜像站了，但是我用东软镜像站的下载速度并不太好看。此时，我们就要搬出依云大佬的神器——",[26,679,682],{"href":680,"rel":681},"https://blog.lilydjwg.me/2020/10/29/pacsync.215578.html",[30],"pacsync",[19,684,685],{},"在root用户下使用如下命令装载pacysnc后",[37,687,689],{"className":66,"code":688,"language":68,"meta":46,"style":46},"echo '#!/bin/bash -e\n\nunshare -m bash \u003C\u003C'EOF'\nmount --make-rprivate /\nfor f in /etc/pacman.d/*.sync; do\n  filename=\"${f%.*}\"\n  mount --bind \"$f\" \"$filename\"\ndone\npacman -Sy\nEOF' > /usr/bin/pacsync\n",[44,690,691,698,702,707,712,717,722,727,732,737],{"__ignoreMap":46},[72,692,693,695],{"class":74,"line":75},[72,694,469],{"class":468},[72,696,697],{"class":112}," '#!/bin/bash -e\n",[72,699,700],{"class":74,"line":82},[72,701,86],{"emptyLinePlaceholder":85},[72,703,704],{"class":74,"line":89},[72,705,706],{"class":112},"unshare -m bash \u003C\u003C'EOF'\n",[72,708,709],{"class":74,"line":119},[72,710,711],{"class":112},"mount --make-rprivate /\n",[72,713,714],{"class":74,"line":138},[72,715,716],{"class":112},"for f in /etc/pacman.d/*.sync; do\n",[72,718,719],{"class":74,"line":157},[72,720,721],{"class":112},"  filename=\"${f%.*}\"\n",[72,723,724],{"class":74,"line":176},[72,725,726],{"class":112},"  mount --bind \"$f\" \"$filename\"\n",[72,728,729],{"class":74,"line":195},[72,730,731],{"class":112},"done\n",[72,733,734],{"class":74,"line":214},[72,735,736],{"class":112},"pacman -Sy\n",[72,738,739,742,745],{"class":74,"line":233},[72,740,741],{"class":112},"EOF'",[72,743,744],{"class":100}," > ",[72,746,747],{"class":112},"/usr/bin/pacsync\n",[19,749,750,751,754],{},"创建",[44,752,753],{},"/etc/pacman.d/mirrorlist.sync","指定我们用来同步pacman数据库（比如东软）",[19,756,757,760],{},[44,758,759],{},"/etc/pacman.d/mirrorlist","中存放其他国内镜像源地址（按照同步速度从上到下）",[19,762,763,764],{},"以后的同步命令为 ",[44,765,766],{},"sudo pacsync && yay -Su",[19,768,769],{},"觉得命令过长的话设置alias可以是个不错的选择。",[771,772,773],"style",{},"html pre.shiki code .sW2Sy, html code.shiki .sW2Sy{--shiki-default:#A0A1A7;--shiki-default-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic}html pre.shiki code .sJa8x, html code.shiki .sJa8x{--shiki-default:#E45649;--shiki-dark:#E06C75}html pre.shiki code .sknuh, html code.shiki .sknuh{--shiki-default:#383A42;--shiki-dark:#56B6C2}html pre.shiki code .s5ixo, html code.shiki .s5ixo{--shiki-default:#383A42;--shiki-dark:#ABB2BF}html pre.shiki code .sAdtL, html code.shiki .sAdtL{--shiki-default:#4078F2;--shiki-dark:#61AFEF}html pre.shiki code .sAGMh, html code.shiki .sAGMh{--shiki-default:#986801;--shiki-dark:#D19A66}html pre.shiki code .sDhpE, html code.shiki .sDhpE{--shiki-default:#50A14F;--shiki-dark:#98C379}html pre.shiki code .s_Sar, html code.shiki .s_Sar{--shiki-default:#0184BC;--shiki-dark:#56B6C2}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":46,"searchDepth":82,"depth":82,"links":775},[776,777],{"id":16,"depth":89,"text":17},{"id":674,"depth":82,"text":674},[779,785],{"title":780,"path":781,"stem":782,"date":783,"lang":784,"children":-1},"在Windows与Linux双系统下共享蓝牙鼠标","/2021/05/30/share-xiaomi-bluetooth-mouse-on-both-windows-and-linux","posts/zh/share-xiaomi-bluetooth-mouse-on-both-windows-and-linux","2021-05-30","zh-CN",{"title":786,"path":787,"stem":788,"date":789,"lang":784,"children":-1},"请给 tuna/ustc 镜像站减压","/2021/05/27/relieve-the-pressure-of-tuna-mirror-site-please","posts/zh/relieve-the-pressure-of-tuna-mirror-site-please","2021-05-27 21:25:48",0,null,1766337206125]