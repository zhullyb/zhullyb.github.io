[{"data":1,"prerenderedAt":795},["ShallowReactive",2],{"post-2021-05-29-choose-the-last-archlinux-mirror-site-in-china":3,"surround-2021-05-29-choose-the-last-archlinux-mirror-site-in-china":784,"randomIndex/2021/05/29/choose-the-last-archlinux-mirror-site-in-china/":229},{"id":4,"title":5,"body":6,"date":774,"description":42,"extension":775,"meta":776,"navigation":81,"path":777,"rawbody":778,"seo":779,"stem":780,"sticky":781,"tags":782,"__hash__":783},"posts/posts/choose-the-last-archlinux-mirror-site-in-china.md","选择最新的Archlinux镜像源",{"type":7,"value":8,"toc":770},"minimark",[9,14,18,29,32,43,54,60,655,658,664,667,671,679,682,744,751,757,763,766],[10,11,13],"h3",{"id":12},"找到最新的archlinux镜像源","找到最新的Archlinux镜像源",[15,16,17],"p",{},"我是testing+kde-unstable用户，平均每天更新4次，对于我而言，选择最新的Archlinux镜像是非常重要的。",[15,19,20,21,28],{},"Archlinux的主源并不开放给个人用户使用，仅开放给",[22,23,27],"a",{"href":24,"rel":25},"https://archlinux.org/mirrors/tier/1/",[26],"nofollow","一级镜像站","进行同步，因此我们需要手动寻找国内较新的镜像站。（理论上来说一级镜像站应该比二级镜像站更新，但是有些一级镜像站的同步频率并不高，同步延迟可能会比某些二级镜像站还要高）",[15,30,31],{},"一个archlinux的镜像目录大概是长下面这个样子",[33,34,39],"pre",{"className":35,"code":37,"language":38},[36],"language-text","archlinux/\n├── community\n├── community-staging\n├── community-testing\n├── core\n├── extra\n├── gnome-unstable\n├── images\n├── iso\n├── kde-unstable\n├── lastsync\n├── lastupdate\n├── multilib\n├── multilib-staging\n├── multilib-testing\n├── pool\n├── staging\n└── testing\n","text",[40,41,37],"code",{"__ignoreMap":42},"",[15,44,45,46,49,50,53],{},"其中的",[40,47,48],{},"lastsync","和",[40,51,52],{},"lastupdate","用unix时间戳记录着上一次同步时间和镜像的上一次变更时间。",[15,55,56,57,59],{},"因此，我们只需要对比各个镜像站的",[40,58,48],{},"谁比较新就行了，我写了如下的辣鸡脚本",[33,61,65],{"className":62,"code":63,"language":64,"meta":42,"style":42},"language-bash shiki shiki-themes one-light one-dark-pro","#!/bin/bash\n\ntuna=$(curl -s https://mirrors.tuna.tsinghua.edu.cn/archlinux/lastsync)\nbfsu=$(curl -s https://mirrors.bfsu.edu.cn/archlinux/lastsync)\nsjtug=$(curl -s https://mirror.sjtu.edu.cn/archlinux/lastsync)\naliyun=$(curl -s https://mirrors.aliyun.com/archlinux/lastsync)\nustc=$(curl -s https://mirrors.ustc.edu.cn/archlinux/lastsync)\nzju=$(curl -s https://mirrors.zju.edu.cn/archlinux/lastsync)\ncqu=$(curl -s https://mirrors.cqu.edu.cn/archlinux/lastsync)\nlzu=$(curl -s https://mirror.lzu.edu.cn/archlinux/lastsync)\nneusoft=$(curl -s https://mirrors.neusoft.edu.cn/archlinux/lastsync)\ndgut=$(curl -s https://mirrors.dgut.edu.cn/archlinux/lastsync)\nnetease=$(curl -s https://mirrors.163.com/archlinux/lastsync)\ntencent=$(curl -s https://mirrors.tencent.com/archlinux/lastsync)\nhit=$(curl -s https://mirrors.hit.edu.cn/archlinux/lastsync)\nhuaweicloud=$(curl -s https://mirrors.huaweicloud.com/archlinux/lastsync)\nsohu=$(curl -s https://mirrors.sohu.com/archlinux/lastsync)\nopentuna=$(curl -s https://opentuna.cn/archlinux/lastsync)\npku=$(curl -s https://mirrors.pku.edu.cn/archlinux/lastsync)\nnju=$(curl -s https://mirrors.nju.edu.cn/archlinux/lastsync)\nnjupt=$(curl -s https://mirrors.nju.edu.cn/archlinux/lastsync)\n\necho \"\"\"\n$tuna        #tuna\n$bfsu        #bfsu\n$sjtug       #sjtug\n$aliyun      #aliyun\n$ustc        #ustc\n$zju         #zju\n$cqu         #cqu\n$lzu         #lzu\n$neusoft     #neusoft\n$dgut        #dgut\n$netease     #netease\n$tencent     #tencent\n$hit         #hit\n$huaweicloud #huaweicloud\n$sohu        #sohu\n$opentuna    #opentuna\n$pku         #pku\n$nju         #nju\n$njupt       #njupt\n\"\"\"  | sort -r\n","bash",[40,66,67,76,83,113,132,151,170,189,208,227,246,265,284,303,322,341,360,379,398,417,436,454,459,469,478,487,496,505,514,523,532,541,550,559,568,577,586,595,604,613,622,631,640],{"__ignoreMap":42},[68,69,72],"span",{"class":70,"line":71},"line",1,[68,73,75],{"class":74},"sW2Sy","#!/bin/bash\n",[68,77,79],{"class":70,"line":78},2,[68,80,82],{"emptyLinePlaceholder":81},true,"\n",[68,84,86,90,94,98,102,106,110],{"class":70,"line":85},3,[68,87,89],{"class":88},"sJa8x","tuna",[68,91,93],{"class":92},"sknuh","=",[68,95,97],{"class":96},"s5ixo","$(",[68,99,101],{"class":100},"sAdtL","curl",[68,103,105],{"class":104},"sAGMh"," -s",[68,107,109],{"class":108},"sDhpE"," https://mirrors.tuna.tsinghua.edu.cn/archlinux/lastsync",[68,111,112],{"class":96},")\n",[68,114,116,119,121,123,125,127,130],{"class":70,"line":115},4,[68,117,118],{"class":88},"bfsu",[68,120,93],{"class":92},[68,122,97],{"class":96},[68,124,101],{"class":100},[68,126,105],{"class":104},[68,128,129],{"class":108}," https://mirrors.bfsu.edu.cn/archlinux/lastsync",[68,131,112],{"class":96},[68,133,135,138,140,142,144,146,149],{"class":70,"line":134},5,[68,136,137],{"class":88},"sjtug",[68,139,93],{"class":92},[68,141,97],{"class":96},[68,143,101],{"class":100},[68,145,105],{"class":104},[68,147,148],{"class":108}," https://mirror.sjtu.edu.cn/archlinux/lastsync",[68,150,112],{"class":96},[68,152,154,157,159,161,163,165,168],{"class":70,"line":153},6,[68,155,156],{"class":88},"aliyun",[68,158,93],{"class":92},[68,160,97],{"class":96},[68,162,101],{"class":100},[68,164,105],{"class":104},[68,166,167],{"class":108}," https://mirrors.aliyun.com/archlinux/lastsync",[68,169,112],{"class":96},[68,171,173,176,178,180,182,184,187],{"class":70,"line":172},7,[68,174,175],{"class":88},"ustc",[68,177,93],{"class":92},[68,179,97],{"class":96},[68,181,101],{"class":100},[68,183,105],{"class":104},[68,185,186],{"class":108}," https://mirrors.ustc.edu.cn/archlinux/lastsync",[68,188,112],{"class":96},[68,190,192,195,197,199,201,203,206],{"class":70,"line":191},8,[68,193,194],{"class":88},"zju",[68,196,93],{"class":92},[68,198,97],{"class":96},[68,200,101],{"class":100},[68,202,105],{"class":104},[68,204,205],{"class":108}," https://mirrors.zju.edu.cn/archlinux/lastsync",[68,207,112],{"class":96},[68,209,211,214,216,218,220,222,225],{"class":70,"line":210},9,[68,212,213],{"class":88},"cqu",[68,215,93],{"class":92},[68,217,97],{"class":96},[68,219,101],{"class":100},[68,221,105],{"class":104},[68,223,224],{"class":108}," https://mirrors.cqu.edu.cn/archlinux/lastsync",[68,226,112],{"class":96},[68,228,230,233,235,237,239,241,244],{"class":70,"line":229},10,[68,231,232],{"class":88},"lzu",[68,234,93],{"class":92},[68,236,97],{"class":96},[68,238,101],{"class":100},[68,240,105],{"class":104},[68,242,243],{"class":108}," https://mirror.lzu.edu.cn/archlinux/lastsync",[68,245,112],{"class":96},[68,247,249,252,254,256,258,260,263],{"class":70,"line":248},11,[68,250,251],{"class":88},"neusoft",[68,253,93],{"class":92},[68,255,97],{"class":96},[68,257,101],{"class":100},[68,259,105],{"class":104},[68,261,262],{"class":108}," https://mirrors.neusoft.edu.cn/archlinux/lastsync",[68,264,112],{"class":96},[68,266,268,271,273,275,277,279,282],{"class":70,"line":267},12,[68,269,270],{"class":88},"dgut",[68,272,93],{"class":92},[68,274,97],{"class":96},[68,276,101],{"class":100},[68,278,105],{"class":104},[68,280,281],{"class":108}," https://mirrors.dgut.edu.cn/archlinux/lastsync",[68,283,112],{"class":96},[68,285,287,290,292,294,296,298,301],{"class":70,"line":286},13,[68,288,289],{"class":88},"netease",[68,291,93],{"class":92},[68,293,97],{"class":96},[68,295,101],{"class":100},[68,297,105],{"class":104},[68,299,300],{"class":108}," https://mirrors.163.com/archlinux/lastsync",[68,302,112],{"class":96},[68,304,306,309,311,313,315,317,320],{"class":70,"line":305},14,[68,307,308],{"class":88},"tencent",[68,310,93],{"class":92},[68,312,97],{"class":96},[68,314,101],{"class":100},[68,316,105],{"class":104},[68,318,319],{"class":108}," https://mirrors.tencent.com/archlinux/lastsync",[68,321,112],{"class":96},[68,323,325,328,330,332,334,336,339],{"class":70,"line":324},15,[68,326,327],{"class":88},"hit",[68,329,93],{"class":92},[68,331,97],{"class":96},[68,333,101],{"class":100},[68,335,105],{"class":104},[68,337,338],{"class":108}," https://mirrors.hit.edu.cn/archlinux/lastsync",[68,340,112],{"class":96},[68,342,344,347,349,351,353,355,358],{"class":70,"line":343},16,[68,345,346],{"class":88},"huaweicloud",[68,348,93],{"class":92},[68,350,97],{"class":96},[68,352,101],{"class":100},[68,354,105],{"class":104},[68,356,357],{"class":108}," https://mirrors.huaweicloud.com/archlinux/lastsync",[68,359,112],{"class":96},[68,361,363,366,368,370,372,374,377],{"class":70,"line":362},17,[68,364,365],{"class":88},"sohu",[68,367,93],{"class":92},[68,369,97],{"class":96},[68,371,101],{"class":100},[68,373,105],{"class":104},[68,375,376],{"class":108}," https://mirrors.sohu.com/archlinux/lastsync",[68,378,112],{"class":96},[68,380,382,385,387,389,391,393,396],{"class":70,"line":381},18,[68,383,384],{"class":88},"opentuna",[68,386,93],{"class":92},[68,388,97],{"class":96},[68,390,101],{"class":100},[68,392,105],{"class":104},[68,394,395],{"class":108}," https://opentuna.cn/archlinux/lastsync",[68,397,112],{"class":96},[68,399,401,404,406,408,410,412,415],{"class":70,"line":400},19,[68,402,403],{"class":88},"pku",[68,405,93],{"class":92},[68,407,97],{"class":96},[68,409,101],{"class":100},[68,411,105],{"class":104},[68,413,414],{"class":108}," https://mirrors.pku.edu.cn/archlinux/lastsync",[68,416,112],{"class":96},[68,418,420,423,425,427,429,431,434],{"class":70,"line":419},20,[68,421,422],{"class":88},"nju",[68,424,93],{"class":92},[68,426,97],{"class":96},[68,428,101],{"class":100},[68,430,105],{"class":104},[68,432,433],{"class":108}," https://mirrors.nju.edu.cn/archlinux/lastsync",[68,435,112],{"class":96},[68,437,439,442,444,446,448,450,452],{"class":70,"line":438},21,[68,440,441],{"class":88},"njupt",[68,443,93],{"class":92},[68,445,97],{"class":96},[68,447,101],{"class":100},[68,449,105],{"class":104},[68,451,433],{"class":108},[68,453,112],{"class":96},[68,455,457],{"class":70,"line":456},22,[68,458,82],{"emptyLinePlaceholder":81},[68,460,462,466],{"class":70,"line":461},23,[68,463,465],{"class":464},"s_Sar","echo",[68,467,468],{"class":108}," \"\"\"\n",[68,470,472,475],{"class":70,"line":471},24,[68,473,474],{"class":88},"$tuna",[68,476,477],{"class":108},"        #tuna\n",[68,479,481,484],{"class":70,"line":480},25,[68,482,483],{"class":88},"$bfsu",[68,485,486],{"class":108},"        #bfsu\n",[68,488,490,493],{"class":70,"line":489},26,[68,491,492],{"class":88},"$sjtug",[68,494,495],{"class":108},"       #sjtug\n",[68,497,499,502],{"class":70,"line":498},27,[68,500,501],{"class":88},"$aliyun",[68,503,504],{"class":108},"      #aliyun\n",[68,506,508,511],{"class":70,"line":507},28,[68,509,510],{"class":88},"$ustc",[68,512,513],{"class":108},"        #ustc\n",[68,515,517,520],{"class":70,"line":516},29,[68,518,519],{"class":88},"$zju",[68,521,522],{"class":108},"         #zju\n",[68,524,526,529],{"class":70,"line":525},30,[68,527,528],{"class":88},"$cqu",[68,530,531],{"class":108},"         #cqu\n",[68,533,535,538],{"class":70,"line":534},31,[68,536,537],{"class":88},"$lzu",[68,539,540],{"class":108},"         #lzu\n",[68,542,544,547],{"class":70,"line":543},32,[68,545,546],{"class":88},"$neusoft",[68,548,549],{"class":108},"     #neusoft\n",[68,551,553,556],{"class":70,"line":552},33,[68,554,555],{"class":88},"$dgut",[68,557,558],{"class":108},"        #dgut\n",[68,560,562,565],{"class":70,"line":561},34,[68,563,564],{"class":88},"$netease",[68,566,567],{"class":108},"     #netease\n",[68,569,571,574],{"class":70,"line":570},35,[68,572,573],{"class":88},"$tencent",[68,575,576],{"class":108},"     #tencent\n",[68,578,580,583],{"class":70,"line":579},36,[68,581,582],{"class":88},"$hit",[68,584,585],{"class":108},"         #hit\n",[68,587,589,592],{"class":70,"line":588},37,[68,590,591],{"class":88},"$huaweicloud",[68,593,594],{"class":108}," #huaweicloud\n",[68,596,598,601],{"class":70,"line":597},38,[68,599,600],{"class":88},"$sohu",[68,602,603],{"class":108},"        #sohu\n",[68,605,607,610],{"class":70,"line":606},39,[68,608,609],{"class":88},"$opentuna",[68,611,612],{"class":108},"    #opentuna\n",[68,614,616,619],{"class":70,"line":615},40,[68,617,618],{"class":88},"$pku",[68,620,621],{"class":108},"         #pku\n",[68,623,625,628],{"class":70,"line":624},41,[68,626,627],{"class":88},"$nju",[68,629,630],{"class":108},"         #nju\n",[68,632,634,637],{"class":70,"line":633},42,[68,635,636],{"class":88},"$njupt",[68,638,639],{"class":108},"       #njupt\n",[68,641,643,646,649,652],{"class":70,"line":642},43,[68,644,645],{"class":108},"\"\"\"",[68,647,648],{"class":96},"  | ",[68,650,651],{"class":100},"sort",[68,653,654],{"class":104}," -r\n",[15,656,657],{},"其运行结果如下",[33,659,662],{"className":660,"code":661,"language":38},[36],"1622248120     #neusoft\n1622247879        #dgut\n1622247698         #hit\n1622246042         #zju\n1622246042        #tuna\n1622246042        #bfsu\n1622242426       #sjtug\n1622242426       #njupt\n1622242426         #nju\n1622240702        #ustc\n1622240522         #cqu\n1622238783     #netease\n1622235120         #lzu\n1622232241 #huaweicloud\n1622230871     #tencent\n1622217845      #aliyun\n1622217001         #pku\n1622203750        #sohu\n1622166379    #opentuna\n",[40,663,661],{"__ignoreMap":42},[15,665,666],{},"通过不同时刻的多次测试可以看出，国内同步频率最高的是东软（neusoft）的镜像。顺手一查，没错，是个一级镜像站。通过unix时间戳得知，东软的archlinux镜像几乎是每分钟同步一次，恐怖如斯。。。",[668,669,670],"h2",{"id":670},"获得更好的下载速度",[15,672,673,674],{},"我们已经得知东软是国内同步频率最高的Archlinux镜像站了，但是我用东软镜像站的下载速度并不太好看。此时，我们就要搬出依云大佬的神器——",[22,675,678],{"href":676,"rel":677},"https://blog.lilydjwg.me/2020/10/29/pacsync.215578.html",[26],"pacsync",[15,680,681],{},"在root用户下使用如下命令装载pacysnc后",[33,683,685],{"className":62,"code":684,"language":64,"meta":42,"style":42},"echo '#!/bin/bash -e\n\nunshare -m bash \u003C\u003C'EOF'\nmount --make-rprivate /\nfor f in /etc/pacman.d/*.sync; do\n  filename=\"${f%.*}\"\n  mount --bind \"$f\" \"$filename\"\ndone\npacman -Sy\nEOF' > /usr/bin/pacsync\n",[40,686,687,694,698,703,708,713,718,723,728,733],{"__ignoreMap":42},[68,688,689,691],{"class":70,"line":71},[68,690,465],{"class":464},[68,692,693],{"class":108}," '#!/bin/bash -e\n",[68,695,696],{"class":70,"line":78},[68,697,82],{"emptyLinePlaceholder":81},[68,699,700],{"class":70,"line":85},[68,701,702],{"class":108},"unshare -m bash \u003C\u003C'EOF'\n",[68,704,705],{"class":70,"line":115},[68,706,707],{"class":108},"mount --make-rprivate /\n",[68,709,710],{"class":70,"line":134},[68,711,712],{"class":108},"for f in /etc/pacman.d/*.sync; do\n",[68,714,715],{"class":70,"line":153},[68,716,717],{"class":108},"  filename=\"${f%.*}\"\n",[68,719,720],{"class":70,"line":172},[68,721,722],{"class":108},"  mount --bind \"$f\" \"$filename\"\n",[68,724,725],{"class":70,"line":191},[68,726,727],{"class":108},"done\n",[68,729,730],{"class":70,"line":210},[68,731,732],{"class":108},"pacman -Sy\n",[68,734,735,738,741],{"class":70,"line":229},[68,736,737],{"class":108},"EOF'",[68,739,740],{"class":96}," > ",[68,742,743],{"class":108},"/usr/bin/pacsync\n",[15,745,746,747,750],{},"创建",[40,748,749],{},"/etc/pacman.d/mirrorlist.sync","指定我们用来同步pacman数据库（比如东软）",[15,752,753,756],{},[40,754,755],{},"/etc/pacman.d/mirrorlist","中存放其他国内镜像源地址（按照同步速度从上到下）",[15,758,759,760],{},"以后的同步命令为 ",[40,761,762],{},"sudo pacsync && yay -Su",[15,764,765],{},"觉得命令过长的话设置alias可以是个不错的选择。",[767,768,769],"style",{},"html pre.shiki code .sW2Sy, html code.shiki .sW2Sy{--shiki-default:#A0A1A7;--shiki-default-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic}html pre.shiki code .sJa8x, html code.shiki .sJa8x{--shiki-default:#E45649;--shiki-dark:#E06C75}html pre.shiki code .sknuh, html code.shiki .sknuh{--shiki-default:#383A42;--shiki-dark:#56B6C2}html pre.shiki code .s5ixo, html code.shiki .s5ixo{--shiki-default:#383A42;--shiki-dark:#ABB2BF}html pre.shiki code .sAdtL, html code.shiki .sAdtL{--shiki-default:#4078F2;--shiki-dark:#61AFEF}html pre.shiki code .sAGMh, html code.shiki .sAGMh{--shiki-default:#986801;--shiki-dark:#D19A66}html pre.shiki code .sDhpE, html code.shiki .sDhpE{--shiki-default:#50A14F;--shiki-dark:#98C379}html pre.shiki code .s_Sar, html code.shiki .s_Sar{--shiki-default:#0184BC;--shiki-dark:#56B6C2}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":42,"searchDepth":78,"depth":78,"links":771},[772,773],{"id":12,"depth":85,"text":13},{"id":670,"depth":78,"text":670},"2021-05-29","md",{},"/2021/05/29/choose-the-last-archlinux-mirror-site-in-china","---\ntitle: 选择最新的Archlinux镜像源\ndate: 2021-05-29\ntags: Archlinux\n---\n\n\n\n### 找到最新的Archlinux镜像源\n\n我是testing+kde-unstable用户，平均每天更新4次，对于我而言，选择最新的Archlinux镜像是非常重要的。\n\nArchlinux的主源并不开放给个人用户使用，仅开放给[一级镜像站](https://archlinux.org/mirrors/tier/1/)进行同步，因此我们需要手动寻找国内较新的镜像站。（理论上来说一级镜像站应该比二级镜像站更新，但是有些一级镜像站的同步频率并不高，同步延迟可能会比某些二级镜像站还要高）\n\n一个archlinux的镜像目录大概是长下面这个样子\n\n```\narchlinux/\n├── community\n├── community-staging\n├── community-testing\n├── core\n├── extra\n├── gnome-unstable\n├── images\n├── iso\n├── kde-unstable\n├── lastsync\n├── lastupdate\n├── multilib\n├── multilib-staging\n├── multilib-testing\n├── pool\n├── staging\n└── testing\n```\n\n其中的`lastsync`和`lastupdate`用unix时间戳记录着上一次同步时间和镜像的上一次变更时间。\n\n因此，我们只需要对比各个镜像站的`lastsync`谁比较新就行了，我写了如下的辣鸡脚本\n\n```bash\n#!/bin/bash\n\ntuna=$(curl -s https://mirrors.tuna.tsinghua.edu.cn/archlinux/lastsync)\nbfsu=$(curl -s https://mirrors.bfsu.edu.cn/archlinux/lastsync)\nsjtug=$(curl -s https://mirror.sjtu.edu.cn/archlinux/lastsync)\naliyun=$(curl -s https://mirrors.aliyun.com/archlinux/lastsync)\nustc=$(curl -s https://mirrors.ustc.edu.cn/archlinux/lastsync)\nzju=$(curl -s https://mirrors.zju.edu.cn/archlinux/lastsync)\ncqu=$(curl -s https://mirrors.cqu.edu.cn/archlinux/lastsync)\nlzu=$(curl -s https://mirror.lzu.edu.cn/archlinux/lastsync)\nneusoft=$(curl -s https://mirrors.neusoft.edu.cn/archlinux/lastsync)\ndgut=$(curl -s https://mirrors.dgut.edu.cn/archlinux/lastsync)\nnetease=$(curl -s https://mirrors.163.com/archlinux/lastsync)\ntencent=$(curl -s https://mirrors.tencent.com/archlinux/lastsync)\nhit=$(curl -s https://mirrors.hit.edu.cn/archlinux/lastsync)\nhuaweicloud=$(curl -s https://mirrors.huaweicloud.com/archlinux/lastsync)\nsohu=$(curl -s https://mirrors.sohu.com/archlinux/lastsync)\nopentuna=$(curl -s https://opentuna.cn/archlinux/lastsync)\npku=$(curl -s https://mirrors.pku.edu.cn/archlinux/lastsync)\nnju=$(curl -s https://mirrors.nju.edu.cn/archlinux/lastsync)\nnjupt=$(curl -s https://mirrors.nju.edu.cn/archlinux/lastsync)\n\necho \"\"\"\n$tuna        #tuna\n$bfsu        #bfsu\n$sjtug       #sjtug\n$aliyun      #aliyun\n$ustc        #ustc\n$zju         #zju\n$cqu         #cqu\n$lzu         #lzu\n$neusoft     #neusoft\n$dgut        #dgut\n$netease     #netease\n$tencent     #tencent\n$hit         #hit\n$huaweicloud #huaweicloud\n$sohu        #sohu\n$opentuna    #opentuna\n$pku         #pku\n$nju         #nju\n$njupt       #njupt\n\"\"\"  | sort -r\n```\n\n其运行结果如下\n\n```\n1622248120     #neusoft\n1622247879        #dgut\n1622247698         #hit\n1622246042         #zju\n1622246042        #tuna\n1622246042        #bfsu\n1622242426       #sjtug\n1622242426       #njupt\n1622242426         #nju\n1622240702        #ustc\n1622240522         #cqu\n1622238783     #netease\n1622235120         #lzu\n1622232241 #huaweicloud\n1622230871     #tencent\n1622217845      #aliyun\n1622217001         #pku\n1622203750        #sohu\n1622166379    #opentuna\n```\n\n通过不同时刻的多次测试可以看出，国内同步频率最高的是东软（neusoft）的镜像。顺手一查，没错，是个一级镜像站。通过unix时间戳得知，东软的archlinux镜像几乎是每分钟同步一次，恐怖如斯。。。\n\n## 获得更好的下载速度\n\n我们已经得知东软是国内同步频率最高的Archlinux镜像站了，但是我用东软镜像站的下载速度并不太好看。此时，我们就要搬出依云大佬的神器——[pacsync](https://blog.lilydjwg.me/2020/10/29/pacsync.215578.html)\n\n在root用户下使用如下命令装载pacysnc后\n\n```bash\necho '#!/bin/bash -e\n\nunshare -m bash \u003C\u003C'EOF'\nmount --make-rprivate /\nfor f in /etc/pacman.d/*.sync; do\n  filename=\"${f%.*}\"\n  mount --bind \"$f\" \"$filename\"\ndone\npacman -Sy\nEOF' > /usr/bin/pacsync\n```\n\n创建`/etc/pacman.d/mirrorlist.sync`指定我们用来同步pacman数据库（比如东软）\n\n`/etc/pacman.d/mirrorlist`中存放其他国内镜像源地址（按照同步速度从上到下）\n\n以后的同步命令为 `sudo pacsync && yay -Su`\n\n觉得命令过长的话设置alias可以是个不错的选择。\n",{"title":5,"description":42},"posts/choose-the-last-archlinux-mirror-site-in-china",false,"Archlinux","VccNaUfKSki3ymJs2cArBW3kcopUmvx3BeehVFRLKf4",[785,790],{"title":786,"path":787,"stem":788,"date":789,"children":-1},"在Windows与Linux双系统下共享蓝牙鼠标","/2021/05/30/share-xiaomi-bluetooth-mouse-on-both-windows-and-linux","posts/share-xiaomi-bluetooth-mouse-on-both-windows-and-linux","2021-05-30",{"title":791,"path":792,"stem":793,"date":794,"children":-1},"请给 tuna/ustc 镜像站减压","/2021/05/27/relieve-the-pressure-of-tuna-mirror-site-please","posts/relieve-the-pressure-of-tuna-mirror-site-please","2021-05-27 21:25:48",1761738201539]