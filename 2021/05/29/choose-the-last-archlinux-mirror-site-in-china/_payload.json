[{"data":1,"prerenderedAt":793},["ShallowReactive",2],{"post-2021-05-29-choose-the-last-archlinux-mirror-site-in-china":3,"surround-2021-05-29-choose-the-last-archlinux-mirror-site-in-china":782,"randomIndex/2021/05/29/choose-the-last-archlinux-mirror-site-in-china/":380},{"id":4,"title":5,"body":6,"date":772,"description":42,"extension":773,"meta":774,"navigation":81,"path":775,"rawbody":776,"seo":777,"stem":778,"sticky":779,"tags":780,"__hash__":781},"posts/posts/choose-the-last-archlinux-mirror-site-in-china.md","选择最新的Archlinux镜像源",{"type":7,"value":8,"toc":768},"minimark",[9,14,18,29,32,43,54,60,653,656,662,665,669,677,680,742,749,755,761,764],[10,11,13],"h3",{"id":12},"找到最新的archlinux镜像源","找到最新的Archlinux镜像源",[15,16,17],"p",{},"我是testing+kde-unstable用户，平均每天更新4次，对于我而言，选择最新的Archlinux镜像是非常重要的。",[15,19,20,21,28],{},"Archlinux的主源并不开放给个人用户使用，仅开放给",[22,23,27],"a",{"href":24,"rel":25},"https://archlinux.org/mirrors/tier/1/",[26],"nofollow","一级镜像站","进行同步，因此我们需要手动寻找国内较新的镜像站。（理论上来说一级镜像站应该比二级镜像站更新，但是有些一级镜像站的同步频率并不高，同步延迟可能会比某些二级镜像站还要高）",[15,30,31],{},"一个archlinux的镜像目录大概是长下面这个样子",[33,34,39],"pre",{"className":35,"code":37,"language":38},[36],"language-text","archlinux/\n├── community\n├── community-staging\n├── community-testing\n├── core\n├── extra\n├── gnome-unstable\n├── images\n├── iso\n├── kde-unstable\n├── lastsync\n├── lastupdate\n├── multilib\n├── multilib-staging\n├── multilib-testing\n├── pool\n├── staging\n└── testing\n","text",[40,41,37],"code",{"__ignoreMap":42},"",[15,44,45,46,49,50,53],{},"其中的",[40,47,48],{},"lastsync","和",[40,51,52],{},"lastupdate","用unix时间戳记录着上一次同步时间和镜像的上一次变更时间。",[15,55,56,57,59],{},"因此，我们只需要对比各个镜像站的",[40,58,48],{},"谁比较新就行了，我写了如下的辣鸡脚本",[33,61,65],{"className":62,"code":63,"language":64,"meta":42,"style":42},"language-bash shiki shiki-themes github-light github-dark","#!/bin/bash\n\ntuna=$(curl -s https://mirrors.tuna.tsinghua.edu.cn/archlinux/lastsync)\nbfsu=$(curl -s https://mirrors.bfsu.edu.cn/archlinux/lastsync)\nsjtug=$(curl -s https://mirror.sjtu.edu.cn/archlinux/lastsync)\naliyun=$(curl -s https://mirrors.aliyun.com/archlinux/lastsync)\nustc=$(curl -s https://mirrors.ustc.edu.cn/archlinux/lastsync)\nzju=$(curl -s https://mirrors.zju.edu.cn/archlinux/lastsync)\ncqu=$(curl -s https://mirrors.cqu.edu.cn/archlinux/lastsync)\nlzu=$(curl -s https://mirror.lzu.edu.cn/archlinux/lastsync)\nneusoft=$(curl -s https://mirrors.neusoft.edu.cn/archlinux/lastsync)\ndgut=$(curl -s https://mirrors.dgut.edu.cn/archlinux/lastsync)\nnetease=$(curl -s https://mirrors.163.com/archlinux/lastsync)\ntencent=$(curl -s https://mirrors.tencent.com/archlinux/lastsync)\nhit=$(curl -s https://mirrors.hit.edu.cn/archlinux/lastsync)\nhuaweicloud=$(curl -s https://mirrors.huaweicloud.com/archlinux/lastsync)\nsohu=$(curl -s https://mirrors.sohu.com/archlinux/lastsync)\nopentuna=$(curl -s https://opentuna.cn/archlinux/lastsync)\npku=$(curl -s https://mirrors.pku.edu.cn/archlinux/lastsync)\nnju=$(curl -s https://mirrors.nju.edu.cn/archlinux/lastsync)\nnjupt=$(curl -s https://mirrors.nju.edu.cn/archlinux/lastsync)\n\necho \"\"\"\n$tuna        #tuna\n$bfsu        #bfsu\n$sjtug       #sjtug\n$aliyun      #aliyun\n$ustc        #ustc\n$zju         #zju\n$cqu         #cqu\n$lzu         #lzu\n$neusoft     #neusoft\n$dgut        #dgut\n$netease     #netease\n$tencent     #tencent\n$hit         #hit\n$huaweicloud #huaweicloud\n$sohu        #sohu\n$opentuna    #opentuna\n$pku         #pku\n$nju         #nju\n$njupt       #njupt\n\"\"\"  | sort -r\n","bash",[40,66,67,76,83,112,131,150,169,188,207,226,245,264,283,302,321,340,359,378,397,416,435,453,458,467,476,485,494,503,512,521,530,539,548,557,566,575,584,593,602,611,620,629,638],{"__ignoreMap":42},[68,69,72],"span",{"class":70,"line":71},"line",1,[68,73,75],{"class":74},"sJ8bj","#!/bin/bash\n",[68,77,79],{"class":70,"line":78},2,[68,80,82],{"emptyLinePlaceholder":81},true,"\n",[68,84,86,90,94,97,101,105,109],{"class":70,"line":85},3,[68,87,89],{"class":88},"sVt8B","tuna",[68,91,93],{"class":92},"szBVR","=",[68,95,96],{"class":88},"$(",[68,98,100],{"class":99},"sScJk","curl",[68,102,104],{"class":103},"sj4cs"," -s",[68,106,108],{"class":107},"sZZnC"," https://mirrors.tuna.tsinghua.edu.cn/archlinux/lastsync",[68,110,111],{"class":88},")\n",[68,113,115,118,120,122,124,126,129],{"class":70,"line":114},4,[68,116,117],{"class":88},"bfsu",[68,119,93],{"class":92},[68,121,96],{"class":88},[68,123,100],{"class":99},[68,125,104],{"class":103},[68,127,128],{"class":107}," https://mirrors.bfsu.edu.cn/archlinux/lastsync",[68,130,111],{"class":88},[68,132,134,137,139,141,143,145,148],{"class":70,"line":133},5,[68,135,136],{"class":88},"sjtug",[68,138,93],{"class":92},[68,140,96],{"class":88},[68,142,100],{"class":99},[68,144,104],{"class":103},[68,146,147],{"class":107}," https://mirror.sjtu.edu.cn/archlinux/lastsync",[68,149,111],{"class":88},[68,151,153,156,158,160,162,164,167],{"class":70,"line":152},6,[68,154,155],{"class":88},"aliyun",[68,157,93],{"class":92},[68,159,96],{"class":88},[68,161,100],{"class":99},[68,163,104],{"class":103},[68,165,166],{"class":107}," https://mirrors.aliyun.com/archlinux/lastsync",[68,168,111],{"class":88},[68,170,172,175,177,179,181,183,186],{"class":70,"line":171},7,[68,173,174],{"class":88},"ustc",[68,176,93],{"class":92},[68,178,96],{"class":88},[68,180,100],{"class":99},[68,182,104],{"class":103},[68,184,185],{"class":107}," https://mirrors.ustc.edu.cn/archlinux/lastsync",[68,187,111],{"class":88},[68,189,191,194,196,198,200,202,205],{"class":70,"line":190},8,[68,192,193],{"class":88},"zju",[68,195,93],{"class":92},[68,197,96],{"class":88},[68,199,100],{"class":99},[68,201,104],{"class":103},[68,203,204],{"class":107}," https://mirrors.zju.edu.cn/archlinux/lastsync",[68,206,111],{"class":88},[68,208,210,213,215,217,219,221,224],{"class":70,"line":209},9,[68,211,212],{"class":88},"cqu",[68,214,93],{"class":92},[68,216,96],{"class":88},[68,218,100],{"class":99},[68,220,104],{"class":103},[68,222,223],{"class":107}," https://mirrors.cqu.edu.cn/archlinux/lastsync",[68,225,111],{"class":88},[68,227,229,232,234,236,238,240,243],{"class":70,"line":228},10,[68,230,231],{"class":88},"lzu",[68,233,93],{"class":92},[68,235,96],{"class":88},[68,237,100],{"class":99},[68,239,104],{"class":103},[68,241,242],{"class":107}," https://mirror.lzu.edu.cn/archlinux/lastsync",[68,244,111],{"class":88},[68,246,248,251,253,255,257,259,262],{"class":70,"line":247},11,[68,249,250],{"class":88},"neusoft",[68,252,93],{"class":92},[68,254,96],{"class":88},[68,256,100],{"class":99},[68,258,104],{"class":103},[68,260,261],{"class":107}," https://mirrors.neusoft.edu.cn/archlinux/lastsync",[68,263,111],{"class":88},[68,265,267,270,272,274,276,278,281],{"class":70,"line":266},12,[68,268,269],{"class":88},"dgut",[68,271,93],{"class":92},[68,273,96],{"class":88},[68,275,100],{"class":99},[68,277,104],{"class":103},[68,279,280],{"class":107}," https://mirrors.dgut.edu.cn/archlinux/lastsync",[68,282,111],{"class":88},[68,284,286,289,291,293,295,297,300],{"class":70,"line":285},13,[68,287,288],{"class":88},"netease",[68,290,93],{"class":92},[68,292,96],{"class":88},[68,294,100],{"class":99},[68,296,104],{"class":103},[68,298,299],{"class":107}," https://mirrors.163.com/archlinux/lastsync",[68,301,111],{"class":88},[68,303,305,308,310,312,314,316,319],{"class":70,"line":304},14,[68,306,307],{"class":88},"tencent",[68,309,93],{"class":92},[68,311,96],{"class":88},[68,313,100],{"class":99},[68,315,104],{"class":103},[68,317,318],{"class":107}," https://mirrors.tencent.com/archlinux/lastsync",[68,320,111],{"class":88},[68,322,324,327,329,331,333,335,338],{"class":70,"line":323},15,[68,325,326],{"class":88},"hit",[68,328,93],{"class":92},[68,330,96],{"class":88},[68,332,100],{"class":99},[68,334,104],{"class":103},[68,336,337],{"class":107}," https://mirrors.hit.edu.cn/archlinux/lastsync",[68,339,111],{"class":88},[68,341,343,346,348,350,352,354,357],{"class":70,"line":342},16,[68,344,345],{"class":88},"huaweicloud",[68,347,93],{"class":92},[68,349,96],{"class":88},[68,351,100],{"class":99},[68,353,104],{"class":103},[68,355,356],{"class":107}," https://mirrors.huaweicloud.com/archlinux/lastsync",[68,358,111],{"class":88},[68,360,362,365,367,369,371,373,376],{"class":70,"line":361},17,[68,363,364],{"class":88},"sohu",[68,366,93],{"class":92},[68,368,96],{"class":88},[68,370,100],{"class":99},[68,372,104],{"class":103},[68,374,375],{"class":107}," https://mirrors.sohu.com/archlinux/lastsync",[68,377,111],{"class":88},[68,379,381,384,386,388,390,392,395],{"class":70,"line":380},18,[68,382,383],{"class":88},"opentuna",[68,385,93],{"class":92},[68,387,96],{"class":88},[68,389,100],{"class":99},[68,391,104],{"class":103},[68,393,394],{"class":107}," https://opentuna.cn/archlinux/lastsync",[68,396,111],{"class":88},[68,398,400,403,405,407,409,411,414],{"class":70,"line":399},19,[68,401,402],{"class":88},"pku",[68,404,93],{"class":92},[68,406,96],{"class":88},[68,408,100],{"class":99},[68,410,104],{"class":103},[68,412,413],{"class":107}," https://mirrors.pku.edu.cn/archlinux/lastsync",[68,415,111],{"class":88},[68,417,419,422,424,426,428,430,433],{"class":70,"line":418},20,[68,420,421],{"class":88},"nju",[68,423,93],{"class":92},[68,425,96],{"class":88},[68,427,100],{"class":99},[68,429,104],{"class":103},[68,431,432],{"class":107}," https://mirrors.nju.edu.cn/archlinux/lastsync",[68,434,111],{"class":88},[68,436,438,441,443,445,447,449,451],{"class":70,"line":437},21,[68,439,440],{"class":88},"njupt",[68,442,93],{"class":92},[68,444,96],{"class":88},[68,446,100],{"class":99},[68,448,104],{"class":103},[68,450,432],{"class":107},[68,452,111],{"class":88},[68,454,456],{"class":70,"line":455},22,[68,457,82],{"emptyLinePlaceholder":81},[68,459,461,464],{"class":70,"line":460},23,[68,462,463],{"class":103},"echo",[68,465,466],{"class":107}," \"\"\"\n",[68,468,470,473],{"class":70,"line":469},24,[68,471,472],{"class":88},"$tuna",[68,474,475],{"class":107},"        #tuna\n",[68,477,479,482],{"class":70,"line":478},25,[68,480,481],{"class":88},"$bfsu",[68,483,484],{"class":107},"        #bfsu\n",[68,486,488,491],{"class":70,"line":487},26,[68,489,490],{"class":88},"$sjtug",[68,492,493],{"class":107},"       #sjtug\n",[68,495,497,500],{"class":70,"line":496},27,[68,498,499],{"class":88},"$aliyun",[68,501,502],{"class":107},"      #aliyun\n",[68,504,506,509],{"class":70,"line":505},28,[68,507,508],{"class":88},"$ustc",[68,510,511],{"class":107},"        #ustc\n",[68,513,515,518],{"class":70,"line":514},29,[68,516,517],{"class":88},"$zju",[68,519,520],{"class":107},"         #zju\n",[68,522,524,527],{"class":70,"line":523},30,[68,525,526],{"class":88},"$cqu",[68,528,529],{"class":107},"         #cqu\n",[68,531,533,536],{"class":70,"line":532},31,[68,534,535],{"class":88},"$lzu",[68,537,538],{"class":107},"         #lzu\n",[68,540,542,545],{"class":70,"line":541},32,[68,543,544],{"class":88},"$neusoft",[68,546,547],{"class":107},"     #neusoft\n",[68,549,551,554],{"class":70,"line":550},33,[68,552,553],{"class":88},"$dgut",[68,555,556],{"class":107},"        #dgut\n",[68,558,560,563],{"class":70,"line":559},34,[68,561,562],{"class":88},"$netease",[68,564,565],{"class":107},"     #netease\n",[68,567,569,572],{"class":70,"line":568},35,[68,570,571],{"class":88},"$tencent",[68,573,574],{"class":107},"     #tencent\n",[68,576,578,581],{"class":70,"line":577},36,[68,579,580],{"class":88},"$hit",[68,582,583],{"class":107},"         #hit\n",[68,585,587,590],{"class":70,"line":586},37,[68,588,589],{"class":88},"$huaweicloud",[68,591,592],{"class":107}," #huaweicloud\n",[68,594,596,599],{"class":70,"line":595},38,[68,597,598],{"class":88},"$sohu",[68,600,601],{"class":107},"        #sohu\n",[68,603,605,608],{"class":70,"line":604},39,[68,606,607],{"class":88},"$opentuna",[68,609,610],{"class":107},"    #opentuna\n",[68,612,614,617],{"class":70,"line":613},40,[68,615,616],{"class":88},"$pku",[68,618,619],{"class":107},"         #pku\n",[68,621,623,626],{"class":70,"line":622},41,[68,624,625],{"class":88},"$nju",[68,627,628],{"class":107},"         #nju\n",[68,630,632,635],{"class":70,"line":631},42,[68,633,634],{"class":88},"$njupt",[68,636,637],{"class":107},"       #njupt\n",[68,639,641,644,647,650],{"class":70,"line":640},43,[68,642,643],{"class":107},"\"\"\"",[68,645,646],{"class":92},"  |",[68,648,649],{"class":99}," sort",[68,651,652],{"class":103}," -r\n",[15,654,655],{},"其运行结果如下",[33,657,660],{"className":658,"code":659,"language":38},[36],"1622248120     #neusoft\n1622247879        #dgut\n1622247698         #hit\n1622246042         #zju\n1622246042        #tuna\n1622246042        #bfsu\n1622242426       #sjtug\n1622242426       #njupt\n1622242426         #nju\n1622240702        #ustc\n1622240522         #cqu\n1622238783     #netease\n1622235120         #lzu\n1622232241 #huaweicloud\n1622230871     #tencent\n1622217845      #aliyun\n1622217001         #pku\n1622203750        #sohu\n1622166379    #opentuna\n",[40,661,659],{"__ignoreMap":42},[15,663,664],{},"通过不同时刻的多次测试可以看出，国内同步频率最高的是东软（neusoft）的镜像。顺手一查，没错，是个一级镜像站。通过unix时间戳得知，东软的archlinux镜像几乎是每分钟同步一次，恐怖如斯。。。",[666,667,668],"h2",{"id":668},"获得更好的下载速度",[15,670,671,672],{},"我们已经得知东软是国内同步频率最高的Archlinux镜像站了，但是我用东软镜像站的下载速度并不太好看。此时，我们就要搬出依云大佬的神器——",[22,673,676],{"href":674,"rel":675},"https://blog.lilydjwg.me/2020/10/29/pacsync.215578.html",[26],"pacsync",[15,678,679],{},"在root用户下使用如下命令装载pacysnc后",[33,681,683],{"className":62,"code":682,"language":64,"meta":42,"style":42},"echo '#!/bin/bash -e\n\nunshare -m bash \u003C\u003C'EOF'\nmount --make-rprivate /\nfor f in /etc/pacman.d/*.sync; do\n  filename=\"${f%.*}\"\n  mount --bind \"$f\" \"$filename\"\ndone\npacman -Sy\nEOF' > /usr/bin/pacsync\n",[40,684,685,692,696,701,706,711,716,721,726,731],{"__ignoreMap":42},[68,686,687,689],{"class":70,"line":71},[68,688,463],{"class":103},[68,690,691],{"class":107}," '#!/bin/bash -e\n",[68,693,694],{"class":70,"line":78},[68,695,82],{"emptyLinePlaceholder":81},[68,697,698],{"class":70,"line":85},[68,699,700],{"class":107},"unshare -m bash \u003C\u003C'EOF'\n",[68,702,703],{"class":70,"line":114},[68,704,705],{"class":107},"mount --make-rprivate /\n",[68,707,708],{"class":70,"line":133},[68,709,710],{"class":107},"for f in /etc/pacman.d/*.sync; do\n",[68,712,713],{"class":70,"line":152},[68,714,715],{"class":107},"  filename=\"${f%.*}\"\n",[68,717,718],{"class":70,"line":171},[68,719,720],{"class":107},"  mount --bind \"$f\" \"$filename\"\n",[68,722,723],{"class":70,"line":190},[68,724,725],{"class":107},"done\n",[68,727,728],{"class":70,"line":209},[68,729,730],{"class":107},"pacman -Sy\n",[68,732,733,736,739],{"class":70,"line":228},[68,734,735],{"class":107},"EOF'",[68,737,738],{"class":92}," >",[68,740,741],{"class":107}," /usr/bin/pacsync\n",[15,743,744,745,748],{},"创建",[40,746,747],{},"/etc/pacman.d/mirrorlist.sync","指定我们用来同步pacman数据库（比如东软）",[15,750,751,754],{},[40,752,753],{},"/etc/pacman.d/mirrorlist","中存放其他国内镜像源地址（按照同步速度从上到下）",[15,756,757,758],{},"以后的同步命令为 ",[40,759,760],{},"sudo pacsync && yay -Su",[15,762,763],{},"觉得命令过长的话设置alias可以是个不错的选择。",[765,766,767],"style",{},"html pre.shiki code .sJ8bj, html code.shiki .sJ8bj{--shiki-default:#6A737D;--shiki-dark:#6A737D}html pre.shiki code .sVt8B, html code.shiki .sVt8B{--shiki-default:#24292E;--shiki-dark:#E1E4E8}html pre.shiki code .szBVR, html code.shiki .szBVR{--shiki-default:#D73A49;--shiki-dark:#F97583}html pre.shiki code .sScJk, html code.shiki .sScJk{--shiki-default:#6F42C1;--shiki-dark:#B392F0}html pre.shiki code .sj4cs, html code.shiki .sj4cs{--shiki-default:#005CC5;--shiki-dark:#79B8FF}html pre.shiki code .sZZnC, html code.shiki .sZZnC{--shiki-default:#032F62;--shiki-dark:#9ECBFF}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":42,"searchDepth":78,"depth":78,"links":769},[770,771],{"id":12,"depth":85,"text":13},{"id":668,"depth":78,"text":668},"2021-05-29","md",{},"/2021/05/29/choose-the-last-archlinux-mirror-site-in-china","---\ntitle: 选择最新的Archlinux镜像源\ndate: 2021-05-29\ntags: Archlinux\n---\n\n\n\n### 找到最新的Archlinux镜像源\n\n我是testing+kde-unstable用户，平均每天更新4次，对于我而言，选择最新的Archlinux镜像是非常重要的。\n\nArchlinux的主源并不开放给个人用户使用，仅开放给[一级镜像站](https://archlinux.org/mirrors/tier/1/)进行同步，因此我们需要手动寻找国内较新的镜像站。（理论上来说一级镜像站应该比二级镜像站更新，但是有些一级镜像站的同步频率并不高，同步延迟可能会比某些二级镜像站还要高）\n\n一个archlinux的镜像目录大概是长下面这个样子\n\n```\narchlinux/\n├── community\n├── community-staging\n├── community-testing\n├── core\n├── extra\n├── gnome-unstable\n├── images\n├── iso\n├── kde-unstable\n├── lastsync\n├── lastupdate\n├── multilib\n├── multilib-staging\n├── multilib-testing\n├── pool\n├── staging\n└── testing\n```\n\n其中的`lastsync`和`lastupdate`用unix时间戳记录着上一次同步时间和镜像的上一次变更时间。\n\n因此，我们只需要对比各个镜像站的`lastsync`谁比较新就行了，我写了如下的辣鸡脚本\n\n```bash\n#!/bin/bash\n\ntuna=$(curl -s https://mirrors.tuna.tsinghua.edu.cn/archlinux/lastsync)\nbfsu=$(curl -s https://mirrors.bfsu.edu.cn/archlinux/lastsync)\nsjtug=$(curl -s https://mirror.sjtu.edu.cn/archlinux/lastsync)\naliyun=$(curl -s https://mirrors.aliyun.com/archlinux/lastsync)\nustc=$(curl -s https://mirrors.ustc.edu.cn/archlinux/lastsync)\nzju=$(curl -s https://mirrors.zju.edu.cn/archlinux/lastsync)\ncqu=$(curl -s https://mirrors.cqu.edu.cn/archlinux/lastsync)\nlzu=$(curl -s https://mirror.lzu.edu.cn/archlinux/lastsync)\nneusoft=$(curl -s https://mirrors.neusoft.edu.cn/archlinux/lastsync)\ndgut=$(curl -s https://mirrors.dgut.edu.cn/archlinux/lastsync)\nnetease=$(curl -s https://mirrors.163.com/archlinux/lastsync)\ntencent=$(curl -s https://mirrors.tencent.com/archlinux/lastsync)\nhit=$(curl -s https://mirrors.hit.edu.cn/archlinux/lastsync)\nhuaweicloud=$(curl -s https://mirrors.huaweicloud.com/archlinux/lastsync)\nsohu=$(curl -s https://mirrors.sohu.com/archlinux/lastsync)\nopentuna=$(curl -s https://opentuna.cn/archlinux/lastsync)\npku=$(curl -s https://mirrors.pku.edu.cn/archlinux/lastsync)\nnju=$(curl -s https://mirrors.nju.edu.cn/archlinux/lastsync)\nnjupt=$(curl -s https://mirrors.nju.edu.cn/archlinux/lastsync)\n\necho \"\"\"\n$tuna        #tuna\n$bfsu        #bfsu\n$sjtug       #sjtug\n$aliyun      #aliyun\n$ustc        #ustc\n$zju         #zju\n$cqu         #cqu\n$lzu         #lzu\n$neusoft     #neusoft\n$dgut        #dgut\n$netease     #netease\n$tencent     #tencent\n$hit         #hit\n$huaweicloud #huaweicloud\n$sohu        #sohu\n$opentuna    #opentuna\n$pku         #pku\n$nju         #nju\n$njupt       #njupt\n\"\"\"  | sort -r\n```\n\n其运行结果如下\n\n```\n1622248120     #neusoft\n1622247879        #dgut\n1622247698         #hit\n1622246042         #zju\n1622246042        #tuna\n1622246042        #bfsu\n1622242426       #sjtug\n1622242426       #njupt\n1622242426         #nju\n1622240702        #ustc\n1622240522         #cqu\n1622238783     #netease\n1622235120         #lzu\n1622232241 #huaweicloud\n1622230871     #tencent\n1622217845      #aliyun\n1622217001         #pku\n1622203750        #sohu\n1622166379    #opentuna\n```\n\n通过不同时刻的多次测试可以看出，国内同步频率最高的是东软（neusoft）的镜像。顺手一查，没错，是个一级镜像站。通过unix时间戳得知，东软的archlinux镜像几乎是每分钟同步一次，恐怖如斯。。。\n\n## 获得更好的下载速度\n\n我们已经得知东软是国内同步频率最高的Archlinux镜像站了，但是我用东软镜像站的下载速度并不太好看。此时，我们就要搬出依云大佬的神器——[pacsync](https://blog.lilydjwg.me/2020/10/29/pacsync.215578.html)\n\n在root用户下使用如下命令装载pacysnc后\n\n```bash\necho '#!/bin/bash -e\n\nunshare -m bash \u003C\u003C'EOF'\nmount --make-rprivate /\nfor f in /etc/pacman.d/*.sync; do\n  filename=\"${f%.*}\"\n  mount --bind \"$f\" \"$filename\"\ndone\npacman -Sy\nEOF' > /usr/bin/pacsync\n```\n\n创建`/etc/pacman.d/mirrorlist.sync`指定我们用来同步pacman数据库（比如东软）\n\n`/etc/pacman.d/mirrorlist`中存放其他国内镜像源地址（按照同步速度从上到下）\n\n以后的同步命令为 `sudo pacsync && yay -Su`\n\n觉得命令过长的话设置alias可以是个不错的选择。\n",{"title":5,"description":42},"posts/choose-the-last-archlinux-mirror-site-in-china",false,"Archlinux","Ewz8esm0pasT6BbbKCmfoXqvXFwfxumc8VTLtLjG9z4",[783,788],{"title":784,"path":785,"stem":786,"date":787,"children":-1},"在Windows与Linux双系统下共享蓝牙鼠标","/2021/05/30/share-xiaomi-bluetooth-mouse-on-both-windows-and-linux","posts/share-xiaomi-bluetooth-mouse-on-both-windows-and-linux","2021-05-30",{"title":789,"path":790,"stem":791,"date":792,"children":-1},"请给 tuna/ustc 镜像站减压","/2021/05/27/relieve-the-pressure-of-tuna-mirror-site-please","posts/relieve-the-pressure-of-tuna-mirror-site-please","2021-05-27 21:25:48",1761699630025]