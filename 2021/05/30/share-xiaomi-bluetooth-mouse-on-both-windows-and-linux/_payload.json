[{"data":1,"prerenderedAt":406},["ShallowReactive",2],{"post-2021-05-30-share-xiaomi-bluetooth-mouse-on-both-windows-and-linux-zh":3,"surround-2021-05-30-share-xiaomi-bluetooth-mouse-on-both-windows-and-linux-zh":393,"randomIndex/2021/05/30/share-xiaomi-bluetooth-mouse-on-both-windows-and-linux/":132,"language-switch-/2021/05/30/share-xiaomi-bluetooth-mouse-on-both-windows-and-linux/-en":405},{"title":4,"date":5,"path":6,"tags":7,"body":11,"description":74},"在Windows与Linux双系统下共享蓝牙鼠标","2021-05-30","/2021/05/30/share-xiaomi-bluetooth-mouse-on-both-windows-and-linux",[8,9,10],"Linux","Archlinux","Windows",{"type":12,"value":13,"toc":391},"minimark",[14,35,38,52,58,65,68,84,90,93,99,104,107,238,244,247,255,304,307,380,387],[15,16,17,29,32],"blockquote",{},[18,19,20,21,28],"p",{},"我自己使用的鼠标是一只",[22,23,27],"a",{"href":24,"rel":25},"https://www.mi.com/mouse",[26],"nofollow","小米的无线蓝牙双模鼠标","。但是由于我的USB接口不是很充裕，我平时还是蓝牙鼠标用的比较多。",[18,30,31],{},"但是，每当我在Windows和Archlinux上切换时，我不得不重新配对我的蓝牙鼠标。原因我在翻译Archwiki上关于蓝牙鼠标相关叙述时已经解释得非常清楚了，我摘在下面：",[18,33,34],{},"“首先，计算机保存蓝牙设备的 MAC 地址和配对密钥；然后，蓝牙设备保存计算机的 MAC 地址和配对密钥。这两步通常不会有问题，不过设备蓝牙端口的 MAC 地址在 Linux 和 Windows 上都是相同的 (这在硬件层面上就设定好了)。然而，当在 Windows 或 Linux  中重新配对设备时，它会生成一个新密钥，覆盖了蓝牙设备之前保存的密钥，即与 Windows 配对产生的密钥会覆盖原先与 Linux  配对的密钥，反之亦然。“",[18,36,37],{},"先在Linux上连接蓝牙鼠标，再重启到Windows重新配对蓝牙蓝牙鼠标。",[18,39,40,41,46,47,51],{},"到",[22,42,45],{"href":43,"rel":44},"https://docs.microsoft.com/en-us/sysinternals/downloads/psexec",[26],"微软官网","下载",[48,49,50],"code",{},"PsExec.zip","，解压后，记住你所解压的路径。",[18,53,54,55],{},"在Windows中，使用管理员权限打开",[48,56,57],{},"cmd.exe",[18,59,60],{},[61,62],"img",{"alt":63,"src":64},"在Windows下使用管理员权限打开cmd","https://static.031130.xyz/uploads/2024/08/12/62f3cb081565a.webp",[18,66,67],{},"cd到PsExec解压目录，使用如下命令将我们所需要的蓝牙密钥信息保存到C盘根目录下。",[69,70,75],"pre",{"className":71,"code":72,"language":73,"meta":74,"style":74},"language-cmd shiki shiki-themes one-light one-dark-pro","psexec.exe -s -i regedit /e C:\\BTKeys.reg HKEY_LOCAL_MACHINE\\SYSTEM\\ControlSet001\\Services\\BTHPORT\\Parameters\\Keys\n","cmd","",[48,76,77],{"__ignoreMap":74},[78,79,82],"span",{"class":80,"line":81},"line",1,[78,83,72],{},[18,85,86],{},[61,87],{"alt":88,"src":89},"使用psexec获取蓝牙信息","https://static.031130.xyz/uploads/2024/08/12/62f3cb0aae88f.webp",[18,91,92],{},"根目录的BTkeys.reg可以直接用记事本打开，内容大概是下面这个样子",[18,94,95],{},[61,96],{"alt":97,"src":98},"BTkeys.reg","https://static.031130.xyz/uploads/2024/08/12/62f3cb0d9e04f.webp",[15,100,101],{},[18,102,103],{},"为了方便后面的解说，我用各种颜色标注了起来。",[18,105,106],{},"在Linux下获取su权限以后，我们需要将Linux下随机分配给鼠标的蓝牙地址改成在Windows上获取的那个地址。上图中「红部分」划出来的就是Windows下获取的地址。",[69,108,112],{"className":109,"code":110,"language":111,"meta":74,"style":74},"language-bash shiki shiki-themes one-light one-dark-pro","[zhullyb@Archlinux ~]$ su\nPassword: \n[root@Archlinux zhullyb]# cd /var/lib/bluetooth/E0\\:94\\:67\\:74\\:0D\\:5F/\n[root@Archlinux E0:94:67:74:0D:5F]# ls\nC6:2A:1B:33:2E:71  cache  settings\n[root@Archlinux E0:94:67:74:0D:5F]# mv C6\\:2A\\:1B\\:33\\:2E\\:71/ C4\\:F6\\:B3\\:2C\\:BD\\:7E\n","bash",[48,113,114,120,130,163,169,182],{"__ignoreMap":74},[78,115,116],{"class":80,"line":81},[78,117,119],{"class":118},"s5ixo","[zhullyb@Archlinux ~]$ su\n",[78,121,123,127],{"class":80,"line":122},2,[78,124,126],{"class":125},"sAdtL","Password:",[78,128,129],{"class":118}," \n",[78,131,133,136,140,143,145,148,150,153,155,158,160],{"class":80,"line":132},3,[78,134,135],{"class":118},"[root@Archlinux zhullyb]# cd /var/lib/bluetooth/E0",[78,137,139],{"class":138},"s_Sar","\\:",[78,141,142],{"class":118},"94",[78,144,139],{"class":138},[78,146,147],{"class":118},"67",[78,149,139],{"class":138},[78,151,152],{"class":118},"74",[78,154,139],{"class":138},[78,156,157],{"class":118},"0D",[78,159,139],{"class":138},[78,161,162],{"class":118},"5F/\n",[78,164,166],{"class":80,"line":165},4,[78,167,168],{"class":118},"[root@Archlinux E0:94:67:74:0D:5F]# ls\n",[78,170,172,175,179],{"class":80,"line":171},5,[78,173,174],{"class":125},"C6:2A:1B:33:2E:71",[78,176,178],{"class":177},"sDhpE","  cache",[78,180,181],{"class":177},"  settings\n",[78,183,185,188,190,193,195,198,200,203,205,208,210,213,215,218,220,223,225,228,230,233,235],{"class":80,"line":184},6,[78,186,187],{"class":118},"[root@Archlinux E0:94:67:74:0D:5F]# mv C6",[78,189,139],{"class":138},[78,191,192],{"class":118},"2A",[78,194,139],{"class":138},[78,196,197],{"class":118},"1B",[78,199,139],{"class":138},[78,201,202],{"class":118},"33",[78,204,139],{"class":138},[78,206,207],{"class":118},"2E",[78,209,139],{"class":138},[78,211,212],{"class":118},"71/ C4",[78,214,139],{"class":138},[78,216,217],{"class":118},"F6",[78,219,139],{"class":138},[78,221,222],{"class":118},"B3",[78,224,139],{"class":138},[78,226,227],{"class":118},"2C",[78,229,139],{"class":138},[78,231,232],{"class":118},"BD",[78,234,139],{"class":138},[78,236,237],{"class":118},"7E\n",[18,239,240,241],{},"再编辑",[48,242,243],{},"/var/lib/bluetooth/\u003C本机蓝牙地址>/\u003C鼠标蓝牙地址>/info",[18,245,246],{},"原文件如下：",[69,248,253],{"className":249,"code":251,"language":252},[250],"language-text","[General]\nName=MiMouse\nAppearance=0x03c2\nAddressType=static\nSupportedTechnologies=LE;\nTrusted=true\nBlocked=false\nWakeAllowed=true\nServices=00001530-1212-efde-1523-785feabcd123;00001800-0000-1000-8000-00805f9b34fb;00001801-0000-1000-8000-00805f9b34fb;0000180a-0000-1000-8000-00805f9b34fb;0000180f-0000-1000-8000-00805f9b34fb;00001812-0000-1000-8000-00805f9b34fb;\n\n[IdentityResolvingKey]\nKey=067764BF59A7531E978AFDC6BB5EC8E1\n\n[LongTermKey]\nKey=E3C49B4F3256018192942EB0CDDEE6A3\nAuthenticated=0\nEncSize=16\nEDiv=28209\nRand=15970850852728832717\n\n[DeviceID]\nSource=2\nVendor=10007\nProduct=64\nVersion=40\n\n[ConnectionParameters]\nMinInterval=6\nMaxInterval=9\nLatency=100\nTimeout=600\n","text",[48,254,251],{"__ignoreMap":74},[256,257,258,274,294],"ul",{},[259,260,261,262,265,266,269,270,273],"li",{},"「黄色部分」",[48,263,264],{},"LTK"," 对应 ",[48,267,268],{},"LongTermKey"," 下的 ",[48,271,272],{},"Key","，把小写转换成大写并删去逗号即可。",[259,275,276,277,265,280,283,284,287,288,287,291],{},"「绿色部分」",[48,278,279],{},"ERand",[48,281,282],{},"Rand","。这里比较特殊的是，我们必须先将 Windows 中的值倒转过来再转换为 10 进制。即",[48,285,286],{},"c2,83,7f,8f,7c,76,b4,02","->",[48,289,290],{},"02,b4,76,7c,8f,7f,83,c2",[48,292,293],{},"194910961239294914",[259,295,296,297,265,300,303],{},"「蓝色部分」",[48,298,299],{},"EDIV",[48,301,302],{},"EDiv","。把 16 进制转换成 10 进制即可，这里就不用倒转了。",[18,305,306],{},"具体的转换方法我不再赘述，我把我的转换过程放在下面，我相信各位读者能够看懂。",[69,308,310],{"className":109,"code":309,"language":111,"meta":74,"style":74},"[zhullyb@Archlinux ~]$ echo 'e3,c0,b2,8e,64,2b,12,16,d8,c2,d7,d4,59,55,92,cd' | tr a-z A-Z | sed 's/[[:punct:]]//g'\nE3C0B28E642B1216D8C2D7D4595592CD\n[zhullyb@Archlinux ~]$ echo $((16#02B4767C8F7F83C2))    #这里我是手动倒叙的\n194910961239294914\n[zhullyb@Archlinux ~]$ echo $((16#000055a3))\n21923\n",[48,311,312,340,345,360,365,375],{"__ignoreMap":74},[78,313,314,317,320,323,326,329,332,334,337],{"class":80,"line":81},[78,315,316],{"class":118},"[zhullyb@Archlinux ~]$ echo ",[78,318,319],{"class":177},"'e3,c0,b2,8e,64,2b,12,16,d8,c2,d7,d4,59,55,92,cd'",[78,321,322],{"class":118}," | ",[78,324,325],{"class":125},"tr",[78,327,328],{"class":177}," a-z",[78,330,331],{"class":177}," A-Z",[78,333,322],{"class":118},[78,335,336],{"class":125},"sed",[78,338,339],{"class":177}," 's/[[:punct:]]//g'\n",[78,341,342],{"class":80,"line":122},[78,343,344],{"class":125},"E3C0B28E642B1216D8C2D7D4595592CD\n",[78,346,347,350,353,356],{"class":80,"line":132},[78,348,349],{"class":118},"[zhullyb@Archlinux ~]$ echo $((",[78,351,352],{"class":125},"16#02B4767C8F7F83C2",[78,354,355],{"class":118},"))    ",[78,357,359],{"class":358},"sW2Sy","#这里我是手动倒叙的\n",[78,361,362],{"class":80,"line":165},[78,363,364],{"class":125},"194910961239294914\n",[78,366,367,369,372],{"class":80,"line":171},[78,368,349],{"class":118},[78,370,371],{"class":125},"16#000055a3",[78,373,374],{"class":118},"))\n",[78,376,377],{"class":80,"line":184},[78,378,379],{"class":125},"21923\n",[18,381,382,383,386],{},"做完这些操作以后，",[48,384,385],{},"sudo systemctl start bluetooth","即可",[388,389,390],"style",{},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .s5ixo, html code.shiki .s5ixo{--shiki-default:#383A42;--shiki-dark:#ABB2BF}html pre.shiki code .sAdtL, html code.shiki .sAdtL{--shiki-default:#4078F2;--shiki-dark:#61AFEF}html pre.shiki code .s_Sar, html code.shiki .s_Sar{--shiki-default:#0184BC;--shiki-dark:#56B6C2}html pre.shiki code .sDhpE, html code.shiki .sDhpE{--shiki-default:#50A14F;--shiki-dark:#98C379}html pre.shiki code .sW2Sy, html code.shiki .sW2Sy{--shiki-default:#A0A1A7;--shiki-default-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic}",{"title":74,"searchDepth":122,"depth":122,"links":392},[],[394,400],{"title":395,"path":396,"stem":397,"date":398,"lang":399,"children":-1},"下载一份openharmony的源码","/2021/06/06/download-openharmony-source-code","posts/zh/download-openharmony-source-code","2021-06-06 16:47:34","zh-CN",{"title":401,"path":402,"stem":403,"date":404,"lang":399,"children":-1},"选择最新的Archlinux镜像源","/2021/05/29/choose-the-last-archlinux-mirror-site-in-china","posts/zh/choose-the-last-archlinux-mirror-site-in-china","2021-05-29",null,1766504042143]