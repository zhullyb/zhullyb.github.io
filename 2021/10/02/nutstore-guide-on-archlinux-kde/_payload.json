[{"data":1,"prerenderedAt":384},["ShallowReactive",2],{"post-2021-10-02-nutstore-guide-on-archlinux-kde":3,"surround-2021-10-02-nutstore-guide-on-archlinux-kde":372,"randomIndex/2021/10/02/nutstore-guide-on-archlinux-kde/":383},{"id":4,"title":5,"body":6,"date":360,"description":26,"extension":361,"meta":362,"navigation":364,"path":365,"rawbody":366,"seo":367,"stem":368,"sticky":363,"tags":369,"__hash__":371},"posts/posts/nutstore-guide-on-archlinux-kde.md","Archlinux坚果云踩坑实录",{"type":7,"value":8,"toc":352},"minimark",[9,16,20,47,50,53,56,62,69,75,81,103,106,109,115,121,127,131,137,146,177,183,187,190,196,203,233,237,240,258,264,348],[10,11,12],"blockquote",{},[13,14,15],"p",{},"在Archlinux上，坚果云似乎出现了一些问题。",[17,18,19],"h2",{"id":19},"安装",[21,22,27],"pre",{"className":23,"code":24,"language":25,"meta":26,"style":26},"language-bash shiki shiki-themes one-light one-dark-pro","yay -S nutstore\n","bash","",[28,29,30],"code",{"__ignoreMap":26},[31,32,35,39,43],"span",{"class":33,"line":34},"line",1,[31,36,38],{"class":37},"sAdtL","yay",[31,40,42],{"class":41},"sAGMh"," -S",[31,44,46],{"class":45},"sDhpE"," nutstore\n",[13,48,49],{},"这个没什么可说的，AUR还是Archlinuxcn都无所谓，都是一模一样的。",[17,51,52],{"id":52},"白屏",[13,54,55],{},"双击图标，咦？怎么白屏了？",[13,57,58],{},[59,60],"img",{"alt":52,"src":61},"https://static.031130.xyz/uploads/2024/08/12/62f3cc797bc09.webp",[13,63,64,65,68],{},"看看AUR评论区，有人说",[28,66,67],{},"nutstore-experimental","修了？",[13,70,71],{},[59,72],{"alt":73,"src":74},"AUR评论区","https://static.031130.xyz/uploads/2024/08/12/62f3cc7df08ad.webp",[13,76,77,78],{},"对比了一下，就是改了改",[28,79,80],{},"/opt/nutstore/conf/nutstore.properties",[21,82,84],{"className":23,"code":83,"language":25,"meta":26,"style":26},"sudo sed -i 's|webui.enable=true|webui.enable=false|' /opt/nutstore/conf/nutstore.properties\n",[28,85,86],{"__ignoreMap":26},[31,87,88,91,94,97,100],{"class":33,"line":34},[31,89,90],{"class":37},"sudo",[31,92,93],{"class":45}," sed",[31,95,96],{"class":41}," -i",[31,98,99],{"class":45}," 's|webui.enable=true|webui.enable=false|'",[31,101,102],{"class":45}," /opt/nutstore/conf/nutstore.properties\n",[13,104,105],{},"轻松解决",[17,107,108],{"id":108},"窗口太小不能登陆",[13,110,111],{},[59,112],{"alt":113,"src":114},"调出窗口规则设置界面","https://static.031130.xyz/uploads/2024/08/12/62f3cc822fbe9.webp",[13,116,117],{},[59,118],{"alt":119,"src":120},"进行设置","https://static.031130.xyz/uploads/2024/08/12/62f3cc864a783.webp",[13,122,123],{},[59,124],{"alt":125,"src":126},"完成","https://static.031130.xyz/uploads/2024/08/12/62f3cc89ca4eb.webp",[17,128,130],{"id":129},"桌面使用了暗色主题导致部分字体不清晰","桌面使用了暗色主题导致部分字体不清晰？",[13,132,133],{},[59,134],{"alt":135,"src":136},"这字体鬼看得见？","https://static.031130.xyz/uploads/2024/08/12/62f3cc8f193b1.webp",[13,138,139,140,145],{},"参考",[141,142,144],"a",{"href":143},"/2021/09/05/wrong-fonts-color-fix-under-kde-with-a-dark-theme/","使用fakehome方案暂时解决跑在KDE暗色主题下的程序使用亮色字体的问题","编写启动命令",[21,147,149],{"className":23,"code":148,"language":25,"meta":26,"style":26},"bwrap --dev-bind / / --tmpfs $HOME/.config /usr/bin/nutstore\n",[28,150,151],{"__ignoreMap":26},[31,152,153,156,159,162,164,167,171,174],{"class":33,"line":34},[31,154,155],{"class":37},"bwrap",[31,157,158],{"class":41}," --dev-bind",[31,160,161],{"class":45}," /",[31,163,161],{"class":45},[31,165,166],{"class":41}," --tmpfs",[31,168,170],{"class":169},"sJa8x"," $HOME",[31,172,173],{"class":45},"/.config",[31,175,176],{"class":45}," /usr/bin/nutstore\n",[13,178,179],{},[59,180],{"alt":181,"src":182},"测试通过","https://static.031130.xyz/uploads/2024/08/12/62f3cc9245d26.webp",[17,184,186],{"id":185},"本地markdown文件的文件类型被识别成了坚果云-markdown","本地markdown文件的文件类型被识别成了「坚果云 Markdown」",[13,188,189],{},"这个是由于坚果云自作主张推广他自己并不好用的lightapp，写了几条 mime 的规则，如图",[13,191,192],{},[59,193],{"alt":194,"src":195},"没错，整整5个xml","https://static.031130.xyz/uploads/2024/08/12/62f3cc95f0dd1.webp",[13,197,198,199,202],{},"看来在我们的启动命令中也需要防止坚果云接触到",[28,200,201],{},"$HOME/.local/share/","这个路径，所以现在的启动命令得写成这样。",[21,204,206],{"className":23,"code":205,"language":25,"meta":26,"style":26},"bwrap --dev-bind / / --tmpfs $HOME/.config --tmpfs $HOME/.local/share/ /usr/bin/nutstore\n",[28,207,208],{"__ignoreMap":26},[31,209,210,212,214,216,218,220,222,224,226,228,231],{"class":33,"line":34},[31,211,155],{"class":37},[31,213,158],{"class":41},[31,215,161],{"class":45},[31,217,161],{"class":45},[31,219,166],{"class":41},[31,221,170],{"class":169},[31,223,173],{"class":45},[31,225,166],{"class":41},[31,227,170],{"class":169},[31,229,230],{"class":45},"/.local/share/",[31,232,176],{"class":45},[17,234,236],{"id":235},"修改desktop文件使其使用我们自己攥写的启动命令","修改desktop文件，使其使用我们自己攥写的启动命令",[13,238,239],{},"首先，复制一份desktop文件到我们的 $HOME 目录下，好处是下次更新的时候我们所做的更改不会被包管理器覆盖。",[21,241,243],{"className":23,"code":242,"language":25,"meta":26,"style":26},"cp /usr/share/applications/nutstore.desktop $HOME/.local/share/applications/\n",[28,244,245],{"__ignoreMap":26},[31,246,247,250,253,255],{"class":33,"line":34},[31,248,249],{"class":37},"cp",[31,251,252],{"class":45}," /usr/share/applications/nutstore.desktop",[31,254,170],{"class":169},[31,256,257],{"class":45},"/.local/share/applications/\n",[13,259,260,261],{},"再修改",[28,262,263],{},"$HOME/.local/share/applications/nutstore.desktop",[21,265,269],{"className":266,"code":267,"language":268,"meta":26,"style":26},"language-diff shiki shiki-themes one-light one-dark-pro","[Desktop Entry]\nEncoding=UTF-8\nType=Application\nTerminal=false\nIcon=nutstore\n-Exec=/usr/bin/nutstore\n+Exec=bwrap --dev-bind / / --tmpfs $HOME/.config --tmpfs $HOME/.local/share/applications --tmpfs $HOME/.local/share/mime /usr/bin/nutstore\nStartupWMClass=Nutstore\nName=Nutstore\nName[zh_CN]=坚果云 \nComment=Data Sync, Sharing, Backup\nComment[zh_CN]=数据同步,共享和备份\nCategories=Network;Application;\n","diff",[28,270,271,276,282,288,294,300,306,312,318,324,330,336,342],{"__ignoreMap":26},[31,272,273],{"class":33,"line":34},[31,274,275],{},"[Desktop Entry]\n",[31,277,279],{"class":33,"line":278},2,[31,280,281],{},"Encoding=UTF-8\n",[31,283,285],{"class":33,"line":284},3,[31,286,287],{},"Type=Application\n",[31,289,291],{"class":33,"line":290},4,[31,292,293],{},"Terminal=false\n",[31,295,297],{"class":33,"line":296},5,[31,298,299],{},"Icon=nutstore\n",[31,301,303],{"class":33,"line":302},6,[31,304,305],{},"-Exec=/usr/bin/nutstore\n",[31,307,309],{"class":33,"line":308},7,[31,310,311],{},"+Exec=bwrap --dev-bind / / --tmpfs $HOME/.config --tmpfs $HOME/.local/share/applications --tmpfs $HOME/.local/share/mime /usr/bin/nutstore\n",[31,313,315],{"class":33,"line":314},8,[31,316,317],{},"StartupWMClass=Nutstore\n",[31,319,321],{"class":33,"line":320},9,[31,322,323],{},"Name=Nutstore\n",[31,325,327],{"class":33,"line":326},10,[31,328,329],{},"Name[zh_CN]=坚果云 \n",[31,331,333],{"class":33,"line":332},11,[31,334,335],{},"Comment=Data Sync, Sharing, Backup\n",[31,337,339],{"class":33,"line":338},12,[31,340,341],{},"Comment[zh_CN]=数据同步,共享和备份\n",[31,343,345],{"class":33,"line":344},13,[31,346,347],{},"Categories=Network;Application;\n",[349,350,351],"style",{},"html pre.shiki code .sAdtL, html code.shiki .sAdtL{--shiki-default:#4078F2;--shiki-dark:#61AFEF}html pre.shiki code .sAGMh, html code.shiki .sAGMh{--shiki-default:#986801;--shiki-dark:#D19A66}html pre.shiki code .sDhpE, html code.shiki .sDhpE{--shiki-default:#50A14F;--shiki-dark:#98C379}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .sJa8x, html code.shiki .sJa8x{--shiki-default:#E45649;--shiki-dark:#E06C75}",{"title":26,"searchDepth":278,"depth":278,"links":353},[354,355,356,357,358,359],{"id":19,"depth":278,"text":19},{"id":52,"depth":278,"text":52},{"id":108,"depth":278,"text":108},{"id":129,"depth":278,"text":130},{"id":185,"depth":278,"text":186},{"id":235,"depth":278,"text":236},"2021-10-02 00:21:34","md",{"top":363},false,true,"/2021/10/02/nutstore-guide-on-archlinux-kde","---\ntitle: Archlinux坚果云踩坑实录\ntop: false\ntags:\n- Archlinux\ndate: 2021-10-02 00:21:34\n---\n\n> 在Archlinux上，坚果云似乎出现了一些问题。\n\n## 安装\n\n```bash\nyay -S nutstore\n```\n\n这个没什么可说的，AUR还是Archlinuxcn都无所谓，都是一模一样的。\n\n## 白屏\n\n双击图标，咦？怎么白屏了？\n\n![白屏](https://static.031130.xyz/uploads/2024/08/12/62f3cc797bc09.webp)\n\n看看AUR评论区，有人说`nutstore-experimental`修了？\n\n![AUR评论区](https://static.031130.xyz/uploads/2024/08/12/62f3cc7df08ad.webp)\n\n对比了一下，就是改了改`/opt/nutstore/conf/nutstore.properties`\n\n```bash\nsudo sed -i 's|webui.enable=true|webui.enable=false|' /opt/nutstore/conf/nutstore.properties\n```\n\n轻松解决\n\n## 窗口太小不能登陆\n\n![调出窗口规则设置界面](https://static.031130.xyz/uploads/2024/08/12/62f3cc822fbe9.webp)\n\n![进行设置](https://static.031130.xyz/uploads/2024/08/12/62f3cc864a783.webp)\n\n![完成](https://static.031130.xyz/uploads/2024/08/12/62f3cc89ca4eb.webp)\n\n## 桌面使用了暗色主题导致部分字体不清晰？\n\n![这字体鬼看得见？](https://static.031130.xyz/uploads/2024/08/12/62f3cc8f193b1.webp)\n\n参考[使用fakehome方案暂时解决跑在KDE暗色主题下的程序使用亮色字体的问题](/2021/09/05/wrong-fonts-color-fix-under-kde-with-a-dark-theme/)编写启动命令\n\n```bash\nbwrap --dev-bind / / --tmpfs $HOME/.config /usr/bin/nutstore\n```\n\n![测试通过](https://static.031130.xyz/uploads/2024/08/12/62f3cc9245d26.webp)\n\n## 本地markdown文件的文件类型被识别成了「坚果云 Markdown」\n\n这个是由于坚果云自作主张推广他自己并不好用的lightapp，写了几条 mime 的规则，如图\n\n![没错，整整5个xml](https://static.031130.xyz/uploads/2024/08/12/62f3cc95f0dd1.webp)\n\n看来在我们的启动命令中也需要防止坚果云接触到`$HOME/.local/share/`这个路径，所以现在的启动命令得写成这样。\n\n```bash\nbwrap --dev-bind / / --tmpfs $HOME/.config --tmpfs $HOME/.local/share/ /usr/bin/nutstore\n```\n\n## 修改desktop文件，使其使用我们自己攥写的启动命令\n\n首先，复制一份desktop文件到我们的 $HOME 目录下，好处是下次更新的时候我们所做的更改不会被包管理器覆盖。\n\n```bash\ncp /usr/share/applications/nutstore.desktop $HOME/.local/share/applications/\n```\n\n再修改`$HOME/.local/share/applications/nutstore.desktop`\n\n```diff\n[Desktop Entry]\nEncoding=UTF-8\nType=Application\nTerminal=false\nIcon=nutstore\n-Exec=/usr/bin/nutstore\n+Exec=bwrap --dev-bind / / --tmpfs $HOME/.config --tmpfs $HOME/.local/share/applications --tmpfs $HOME/.local/share/mime /usr/bin/nutstore\nStartupWMClass=Nutstore\nName=Nutstore\nName[zh_CN]=坚果云 \nComment=Data Sync, Sharing, Backup\nComment[zh_CN]=数据同步,共享和备份\nCategories=Network;Application;\n```\n\n",{"title":5,"description":26},"posts/nutstore-guide-on-archlinux-kde",[370],"Archlinux","Kn96D3IPNXUzrg_N5eNm_n__glS3_3Ljx6f4JG9PDXk",[373,378],{"title":374,"path":375,"stem":376,"date":377,"children":-1},"PicUploader使用系列（一）——在Archlinux上使用Caddy部署PicUploader","/2021/10/21/picuploader-on-archlinux-with-caddy","posts/picuploader-on-archlinux-with-caddy","2021-10-21 22:15:33",{"title":379,"path":380,"stem":381,"date":382,"children":-1},"把老版的火狐顶栏UI带回来","/2021/10/01/bring-firefox-old-topbar-back","posts/bring-firefox-old-topbar-back","2021-10-01 19:20:23",15,1761738776931]