[{"data":1,"prerenderedAt":447},["ShallowReactive",2],{"post-2021-10-24-picuploader-with-kde-action-zh":3,"surround-2021-10-24-picuploader-with-kde-action-zh":434,"randomIndex/2021/10/24/picuploader-with-kde-action/":267,"language-switch-/2021/10/24/picuploader-with-kde-action/-en":446},{"title":4,"date":5,"path":6,"tags":7,"body":12,"description":433},"PicUploader使用系列（二）——为KDE的dolphin添加右键快捷菜单","2021-10-24 22:26:50","/2021/10/24/picuploader-with-kde-action",[8,9,10,11],"Archlinux","PicUploader","KDE","PHP",{"type":13,"value":14,"toc":421},"minimark",[15,31,39,44,85,88,96,111,114,120,123,127,133,155,158,167,174,180,201,204,333,340,358,361,370,373,393,396,401,404,411,417],[16,17,18,23,24,30],"p",{},[19,20,22],"a",{"href":21},"/2021/10/21/picuploader-on-archlinux-with-caddy/","上一篇文章","我们在Archlinux中成功部署了PicUploader的web端，本文我们来讲讲如何为KDE的dolphin添加右键快捷键上传，效果类似这样。（gif图来自",[19,25,29],{"href":26,"rel":27},"https://www.xiebruce.top/17.html",[28],"nofollow","PicUploader作者的博客",")",[32,33,34],"center",{},[35,36],"img",{"src":37,"width":38,"height":38},"https://img.xiebruce.top/2018/09/11/f4859eda8832f814486fc00df971e3cc.gif","",[40,41,43],"h2",{"id":42},"创建desktop文件","创建.desktop文件",[45,46,50],"pre",{"className":47,"code":48,"language":49,"meta":38,"style":38},"language-bash shiki shiki-themes one-light one-dark-pro","mkdir -p $HOME/.local/share/kservices5/\ntouch $HOME/.local/share/kservices5/picuploader.desktop\n","bash",[51,52,53,74],"code",{"__ignoreMap":38},[54,55,58,62,66,70],"span",{"class":56,"line":57},"line",1,[54,59,61],{"class":60},"sAdtL","mkdir",[54,63,65],{"class":64},"sAGMh"," -p",[54,67,69],{"class":68},"sJa8x"," $HOME",[54,71,73],{"class":72},"sDhpE","/.local/share/kservices5/\n",[54,75,77,80,82],{"class":56,"line":76},2,[54,78,79],{"class":60},"touch",[54,81,69],{"class":68},[54,83,84],{"class":72},"/.local/share/kservices5/picuploader.desktop\n",[40,86,87],{"id":87},"填上这段内容",[45,89,94],{"className":90,"code":92,"language":93},[91],"language-text","[Desktop Entry]\nActions=PicUploader;\nMimeType=image/jpeg;image/png;\nType=Service\nX-KDE-Priority=TopLevel\nX-KDE-ServiceTypes=KonqPopupMenu/Plugin\nIcon=/var/www/image/favicon.ico\n\n[Desktop Action PicUploader]\nName=Upload with PicUploader\nName[zh_CN]=使用PicUploader上传\nIcon=/var/www/image/favicon.ico\nExec=php /var/www/image/index.php %F | scopy\n","text",[51,95,92],{"__ignoreMap":38},[16,97,98],{},[99,100,101,102,106,107,110],"strong",{},"注: 这里的 scopy 是我在下面",[19,103,105],{"href":104},"#%E5%A4%8D%E5%88%B6%E5%88%B0%E7%B2%98%E8%B4%B4%E6%9D%BF","自己创建的一段脚本","，用以同时满足x11和wayland下的使用，如果你仅使用x11的话直接改成",[51,108,109],{},"xclip -selection clipboard","即可。",[16,112,113],{},"MimeType指的是文件类型。在这份desktop中，我仅指定了png和jpg文件在右键时会弹出picuploader的上传菜单，如果你需要更多文件类型的MimeType，你可以参考下gwenview的desktop都写了哪些文件类型。",[115,116,117],"blockquote",{},[16,118,119],{},"MimeType=inode/directory;image/avif;image/gif;image/jpeg;image/png;image/bmp;image/x-eps;image/x-icns;image/x-ico;image/x-portable-bitmap;image/x-portable-graymap;image/x-portable-pixmap;image/x-xbitmap;image/x-xpixmap;image/tiff;image/x-psd;image/x-webp;image/webp;image/x-tga;application/x-krita;image/x-kde-raw;image/x-canon-cr2;image/x-canon-crw;image/x-kodak-dcr;image/x-adobe-dng;image/x-kodak-k25;image/x-kodak-kdc;image/x-minolta-mrw;image/x-nikon-nef;image/x-olympus-orf;image/x-pentax-pef;image/x-fuji-raf;image/x-panasonic-rw;image/x-sony-sr2;image/x-sony-srf;image/x-sigma-x3f;image/x-sony-arw;image/x-panasonic-rw2;",[40,121,122],{"id":122},"安装所需组件",[124,125,126],"h3",{"id":126},"通知提示",[16,128,129,130],{},"右下角弹出文字提示的功能依赖于",[51,131,132],{},"libnotify",[45,134,136],{"className":47,"code":135,"language":49,"meta":38,"style":38},"sudo pacman -S libnotify --needed\n",[51,137,138],{"__ignoreMap":38},[54,139,140,143,146,149,152],{"class":56,"line":57},[54,141,142],{"class":60},"sudo",[54,144,145],{"class":72}," pacman",[54,147,148],{"class":64}," -S",[54,150,151],{"class":72}," libnotify",[54,153,154],{"class":64}," --needed\n",[124,156,157],{"id":157},"复制到粘贴板",[16,159,160],{},[161,162,163,164],"del",{},"复制到粘贴板的功能依赖于",[51,165,166],{},"xclip",[16,168,169],{},[161,170,171],{},[51,172,173],{},"sudo pacman -S xclip --needed",[16,175,176,177,179],{},"考虑到我可能在 x11 和 wayland 之间反复横跳，仅仅一个",[51,178,166],{},"看起来满足不了我的需求",[45,181,183],{"className":47,"code":182,"language":49,"meta":38,"style":38},"sudo pacman -S xclip wl-clipboard --needed\n",[51,184,185],{"__ignoreMap":38},[54,186,187,189,191,193,196,199],{"class":56,"line":57},[54,188,142],{"class":60},[54,190,145],{"class":72},[54,192,148],{"class":64},[54,194,195],{"class":72}," xclip",[54,197,198],{"class":72}," wl-clipboard",[54,200,154],{"class":64},[16,202,203],{},"手糊了一段脚本，用以判断对应的运行环境并调用相应的粘贴板工具",[45,205,207],{"className":47,"code":206,"language":49,"meta":38,"style":38},"/usr/bin/scopy\n---\n#!/bin/bash\n\nif [ \"$XDG_SESSION_TYPE\" = \"wayland\" ]; then\n  wl-copy\nelif [ \"$XDG_SESSION_TYPE\" = \"x11\" ]; then\n  xclip -selection clipboard\nelse\n  echo \"ERROR! You are using $XDG_SESSION_TYPE\"\nfi\n",[51,208,209,214,219,226,233,265,271,294,306,312,327],{"__ignoreMap":38},[54,210,211],{"class":56,"line":57},[54,212,213],{"class":60},"/usr/bin/scopy\n",[54,215,216],{"class":56,"line":76},[54,217,218],{"class":60},"---\n",[54,220,222],{"class":56,"line":221},3,[54,223,225],{"class":224},"sW2Sy","#!/bin/bash\n",[54,227,229],{"class":56,"line":228},4,[54,230,232],{"emptyLinePlaceholder":231},true,"\n",[54,234,236,240,244,247,250,252,256,259,262],{"class":56,"line":235},5,[54,237,239],{"class":238},"sLKXg","if",[54,241,243],{"class":242},"s5ixo"," [ ",[54,245,246],{"class":72},"\"",[54,248,249],{"class":68},"$XDG_SESSION_TYPE",[54,251,246],{"class":72},[54,253,255],{"class":254},"sknuh"," =",[54,257,258],{"class":72}," \"wayland\"",[54,260,261],{"class":242}," ]; ",[54,263,264],{"class":238},"then\n",[54,266,268],{"class":56,"line":267},6,[54,269,270],{"class":60},"  wl-copy\n",[54,272,274,277,279,281,283,285,287,290,292],{"class":56,"line":273},7,[54,275,276],{"class":238},"elif",[54,278,243],{"class":242},[54,280,246],{"class":72},[54,282,249],{"class":68},[54,284,246],{"class":72},[54,286,255],{"class":254},[54,288,289],{"class":72}," \"x11\"",[54,291,261],{"class":242},[54,293,264],{"class":238},[54,295,297,300,303],{"class":56,"line":296},8,[54,298,299],{"class":60},"  xclip",[54,301,302],{"class":64}," -selection",[54,304,305],{"class":72}," clipboard\n",[54,307,309],{"class":56,"line":308},9,[54,310,311],{"class":238},"else\n",[54,313,315,319,322,324],{"class":56,"line":314},10,[54,316,318],{"class":317},"s_Sar","  echo",[54,320,321],{"class":72}," \"ERROR! You are using ",[54,323,249],{"class":68},[54,325,326],{"class":72},"\"\n",[54,328,330],{"class":56,"line":329},11,[54,331,332],{"class":238},"fi\n",[16,334,335,336,339],{},"为",[51,337,338],{},"/usr/bin/scopy","授予运行权限",[45,341,343],{"className":47,"code":342,"language":49,"meta":38,"style":38},"sudo chmod 755 /usr/bin/scopy\n",[51,344,345],{"__ignoreMap":38},[54,346,347,349,352,355],{"class":56,"line":57},[54,348,142],{"class":60},[54,350,351],{"class":72}," chmod",[54,353,354],{"class":64}," 755",[54,356,357],{"class":72}," /usr/bin/scopy\n",[40,359,360],{"id":360},"启用该动作菜单",[45,362,364],{"className":47,"code":363,"language":49,"meta":38,"style":38},"kbuildsycoca5\n",[51,365,366],{"__ignoreMap":38},[54,367,368],{"class":56,"line":57},[54,369,363],{"class":60},[40,371,372],{"id":372},"处理普通用户无权写入logs的问题",[45,374,376],{"className":47,"code":375,"language":49,"meta":38,"style":38},"sudo chmod 777 -R /var/www/image/logs/\n",[51,377,378],{"__ignoreMap":38},[54,379,380,382,384,387,390],{"class":56,"line":57},[54,381,142],{"class":60},[54,383,351],{"class":72},[54,385,386],{"class":64}," 777",[54,388,389],{"class":64}," -R",[54,391,392],{"class":72}," /var/www/image/logs/\n",[40,394,395],{"id":395},"最终结果",[32,397,398],{},[35,399],{"src":400,"width":38,"height":38},"https://static.031130.xyz/uploads/2024/08/12/62f36f57f34aa.gif",[40,402,403],{"id":403},"参考链接",[16,405,406],{},[19,407,410],{"href":408,"rel":409},"https://cnzhx.net/blog/kde-plasma-5-dolphin-add-action-menu-entry/",[28],"在 KDE Plasma 5 的 Dolphin 中添加一个右键动作菜单",[16,412,413],{},[19,414,416],{"href":26,"rel":415},[28],"PicUploader: 一个还不错的图床工具",[418,419,420],"style",{},"html pre.shiki code .sAdtL, html code.shiki .sAdtL{--shiki-default:#4078F2;--shiki-dark:#61AFEF}html pre.shiki code .sAGMh, html code.shiki .sAGMh{--shiki-default:#986801;--shiki-dark:#D19A66}html pre.shiki code .sJa8x, html code.shiki .sJa8x{--shiki-default:#E45649;--shiki-dark:#E06C75}html pre.shiki code .sDhpE, html code.shiki .sDhpE{--shiki-default:#50A14F;--shiki-dark:#98C379}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .sW2Sy, html code.shiki .sW2Sy{--shiki-default:#A0A1A7;--shiki-default-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic}html pre.shiki code .sLKXg, html code.shiki .sLKXg{--shiki-default:#A626A4;--shiki-dark:#C678DD}html pre.shiki code .s5ixo, html code.shiki .s5ixo{--shiki-default:#383A42;--shiki-dark:#ABB2BF}html pre.shiki code .sknuh, html code.shiki .sknuh{--shiki-default:#383A42;--shiki-dark:#56B6C2}html pre.shiki code .s_Sar, html code.shiki .s_Sar{--shiki-default:#0184BC;--shiki-dark:#56B6C2}",{"title":38,"searchDepth":76,"depth":76,"links":422},[423,424,425,429,430,431,432],{"id":42,"depth":76,"text":43},{"id":87,"depth":76,"text":87},{"id":122,"depth":76,"text":122,"children":426},[427,428],{"id":126,"depth":221,"text":126},{"id":157,"depth":221,"text":157},{"id":360,"depth":76,"text":360},{"id":372,"depth":76,"text":372},{"id":395,"depth":76,"text":395},{"id":403,"depth":76,"text":403},"上一篇文章我们在Archlinux中成功部署了PicUploader的web端，本文我们来讲讲如何为KDE的dolphin添加右键快捷键上传，效果类似这样。（gif图来自PicUploader作者的博客)",[435,441],{"title":436,"path":437,"stem":438,"date":439,"lang":440,"children":-1},"Waydroid on KDE 初体验","/2021/10/31/waydroid-experience-on-kde","posts/zh/waydroid-experience-on-kde","2021-10-31 15:57:57","zh-CN",{"title":442,"path":443,"stem":444,"date":445,"lang":440,"children":-1},"PicUploader使用系列（一）——在Archlinux上使用Caddy部署PicUploader","/2021/10/21/picuploader-on-archlinux-with-caddy","posts/zh/picuploader-on-archlinux-with-caddy","2021-10-21 22:15:33",null,1765307577152]