[{"data":1,"prerenderedAt":453},["ShallowReactive",2],{"post-2021-10-24-picuploader-with-kde-action":3,"surround-2021-10-24-picuploader-with-kde-action":442,"randomIndex/2021/10/24/picuploader-with-kde-action/":290},{"id":4,"title":5,"body":6,"date":427,"description":428,"extension":429,"meta":430,"navigation":225,"path":431,"rawbody":432,"seo":433,"stem":434,"sticky":435,"tags":436,"__hash__":441},"posts/posts/picuploader-with-kde-action.md","PicUploader使用系列（二）——为KDE的dolphin添加右键快捷菜单",{"type":7,"value":8,"toc":415},"minimark",[9,25,33,38,79,82,90,105,108,114,117,121,127,149,152,161,168,174,195,198,327,334,352,355,364,367,387,390,395,398,405,411],[10,11,12,17,18,24],"p",{},[13,14,16],"a",{"href":15},"/2021/10/21/picuploader-on-archlinux-with-caddy/","上一篇文章","我们在Archlinux中成功部署了PicUploader的web端，本文我们来讲讲如何为KDE的dolphin添加右键快捷键上传，效果类似这样。（gif图来自",[13,19,23],{"href":20,"rel":21},"https://www.xiebruce.top/17.html",[22],"nofollow","PicUploader作者的博客",")",[26,27,28],"center",{},[29,30],"img",{"src":31,"width":32,"height":32},"https://img.xiebruce.top/2018/09/11/f4859eda8832f814486fc00df971e3cc.gif","",[34,35,37],"h2",{"id":36},"创建desktop文件","创建.desktop文件",[39,40,44],"pre",{"className":41,"code":42,"language":43,"meta":32,"style":32},"language-bash shiki shiki-themes one-light one-dark-pro","mkdir -p $HOME/.local/share/kservices5/\ntouch $HOME/.local/share/kservices5/picuploader.desktop\n","bash",[45,46,47,68],"code",{"__ignoreMap":32},[48,49,52,56,60,64],"span",{"class":50,"line":51},"line",1,[48,53,55],{"class":54},"sAdtL","mkdir",[48,57,59],{"class":58},"sAGMh"," -p",[48,61,63],{"class":62},"sJa8x"," $HOME",[48,65,67],{"class":66},"sDhpE","/.local/share/kservices5/\n",[48,69,71,74,76],{"class":50,"line":70},2,[48,72,73],{"class":54},"touch",[48,75,63],{"class":62},[48,77,78],{"class":66},"/.local/share/kservices5/picuploader.desktop\n",[34,80,81],{"id":81},"填上这段内容",[39,83,88],{"className":84,"code":86,"language":87},[85],"language-text","[Desktop Entry]\nActions=PicUploader;\nMimeType=image/jpeg;image/png;\nType=Service\nX-KDE-Priority=TopLevel\nX-KDE-ServiceTypes=KonqPopupMenu/Plugin\nIcon=/var/www/image/favicon.ico\n\n[Desktop Action PicUploader]\nName=Upload with PicUploader\nName[zh_CN]=使用PicUploader上传\nIcon=/var/www/image/favicon.ico\nExec=php /var/www/image/index.php %F | scopy\n","text",[45,89,86],{"__ignoreMap":32},[10,91,92],{},[93,94,95,96,100,101,104],"strong",{},"注: 这里的 scopy 是我在下面",[13,97,99],{"href":98},"#%E5%A4%8D%E5%88%B6%E5%88%B0%E7%B2%98%E8%B4%B4%E6%9D%BF","自己创建的一段脚本","，用以同时满足x11和wayland下的使用，如果你仅使用x11的话直接改成",[45,102,103],{},"xclip -selection clipboard","即可。",[10,106,107],{},"MimeType指的是文件类型。在这份desktop中，我仅指定了png和jpg文件在右键时会弹出picuploader的上传菜单，如果你需要更多文件类型的MimeType，你可以参考下gwenview的desktop都写了哪些文件类型。",[109,110,111],"blockquote",{},[10,112,113],{},"MimeType=inode/directory;image/avif;image/gif;image/jpeg;image/png;image/bmp;image/x-eps;image/x-icns;image/x-ico;image/x-portable-bitmap;image/x-portable-graymap;image/x-portable-pixmap;image/x-xbitmap;image/x-xpixmap;image/tiff;image/x-psd;image/x-webp;image/webp;image/x-tga;application/x-krita;image/x-kde-raw;image/x-canon-cr2;image/x-canon-crw;image/x-kodak-dcr;image/x-adobe-dng;image/x-kodak-k25;image/x-kodak-kdc;image/x-minolta-mrw;image/x-nikon-nef;image/x-olympus-orf;image/x-pentax-pef;image/x-fuji-raf;image/x-panasonic-rw;image/x-sony-sr2;image/x-sony-srf;image/x-sigma-x3f;image/x-sony-arw;image/x-panasonic-rw2;",[34,115,116],{"id":116},"安装所需组件",[118,119,120],"h3",{"id":120},"通知提示",[10,122,123,124],{},"右下角弹出文字提示的功能依赖于",[45,125,126],{},"libnotify",[39,128,130],{"className":41,"code":129,"language":43,"meta":32,"style":32},"sudo pacman -S libnotify --needed\n",[45,131,132],{"__ignoreMap":32},[48,133,134,137,140,143,146],{"class":50,"line":51},[48,135,136],{"class":54},"sudo",[48,138,139],{"class":66}," pacman",[48,141,142],{"class":58}," -S",[48,144,145],{"class":66}," libnotify",[48,147,148],{"class":58}," --needed\n",[118,150,151],{"id":151},"复制到粘贴板",[10,153,154],{},[155,156,157,158],"del",{},"复制到粘贴板的功能依赖于",[45,159,160],{},"xclip",[10,162,163],{},[155,164,165],{},[45,166,167],{},"sudo pacman -S xclip --needed",[10,169,170,171,173],{},"考虑到我可能在 x11 和 wayland 之间反复横跳，仅仅一个",[45,172,160],{},"看起来满足不了我的需求",[39,175,177],{"className":41,"code":176,"language":43,"meta":32,"style":32},"sudo pacman -S xclip wl-clipboard --needed\n",[45,178,179],{"__ignoreMap":32},[48,180,181,183,185,187,190,193],{"class":50,"line":51},[48,182,136],{"class":54},[48,184,139],{"class":66},[48,186,142],{"class":58},[48,188,189],{"class":66}," xclip",[48,191,192],{"class":66}," wl-clipboard",[48,194,148],{"class":58},[10,196,197],{},"手糊了一段脚本，用以判断对应的运行环境并调用相应的粘贴板工具",[39,199,201],{"className":41,"code":200,"language":43,"meta":32,"style":32},"/usr/bin/scopy\n---\n#!/bin/bash\n\nif [ \"$XDG_SESSION_TYPE\" = \"wayland\" ]; then\n  wl-copy\nelif [ \"$XDG_SESSION_TYPE\" = \"x11\" ]; then\n  xclip -selection clipboard\nelse\n  echo \"ERROR! You are using $XDG_SESSION_TYPE\"\nfi\n",[45,202,203,208,213,220,227,259,265,288,300,306,321],{"__ignoreMap":32},[48,204,205],{"class":50,"line":51},[48,206,207],{"class":54},"/usr/bin/scopy\n",[48,209,210],{"class":50,"line":70},[48,211,212],{"class":54},"---\n",[48,214,216],{"class":50,"line":215},3,[48,217,219],{"class":218},"sW2Sy","#!/bin/bash\n",[48,221,223],{"class":50,"line":222},4,[48,224,226],{"emptyLinePlaceholder":225},true,"\n",[48,228,230,234,238,241,244,246,250,253,256],{"class":50,"line":229},5,[48,231,233],{"class":232},"sLKXg","if",[48,235,237],{"class":236},"s5ixo"," [ ",[48,239,240],{"class":66},"\"",[48,242,243],{"class":62},"$XDG_SESSION_TYPE",[48,245,240],{"class":66},[48,247,249],{"class":248},"sknuh"," =",[48,251,252],{"class":66}," \"wayland\"",[48,254,255],{"class":236}," ]; ",[48,257,258],{"class":232},"then\n",[48,260,262],{"class":50,"line":261},6,[48,263,264],{"class":54},"  wl-copy\n",[48,266,268,271,273,275,277,279,281,284,286],{"class":50,"line":267},7,[48,269,270],{"class":232},"elif",[48,272,237],{"class":236},[48,274,240],{"class":66},[48,276,243],{"class":62},[48,278,240],{"class":66},[48,280,249],{"class":248},[48,282,283],{"class":66}," \"x11\"",[48,285,255],{"class":236},[48,287,258],{"class":232},[48,289,291,294,297],{"class":50,"line":290},8,[48,292,293],{"class":54},"  xclip",[48,295,296],{"class":58}," -selection",[48,298,299],{"class":66}," clipboard\n",[48,301,303],{"class":50,"line":302},9,[48,304,305],{"class":232},"else\n",[48,307,309,313,316,318],{"class":50,"line":308},10,[48,310,312],{"class":311},"s_Sar","  echo",[48,314,315],{"class":66}," \"ERROR! You are using ",[48,317,243],{"class":62},[48,319,320],{"class":66},"\"\n",[48,322,324],{"class":50,"line":323},11,[48,325,326],{"class":232},"fi\n",[10,328,329,330,333],{},"为",[45,331,332],{},"/usr/bin/scopy","授予运行权限",[39,335,337],{"className":41,"code":336,"language":43,"meta":32,"style":32},"sudo chmod 755 /usr/bin/scopy\n",[45,338,339],{"__ignoreMap":32},[48,340,341,343,346,349],{"class":50,"line":51},[48,342,136],{"class":54},[48,344,345],{"class":66}," chmod",[48,347,348],{"class":58}," 755",[48,350,351],{"class":66}," /usr/bin/scopy\n",[34,353,354],{"id":354},"启用该动作菜单",[39,356,358],{"className":41,"code":357,"language":43,"meta":32,"style":32},"kbuildsycoca5\n",[45,359,360],{"__ignoreMap":32},[48,361,362],{"class":50,"line":51},[48,363,357],{"class":54},[34,365,366],{"id":366},"处理普通用户无权写入logs的问题",[39,368,370],{"className":41,"code":369,"language":43,"meta":32,"style":32},"sudo chmod 777 -R /var/www/image/logs/\n",[45,371,372],{"__ignoreMap":32},[48,373,374,376,378,381,384],{"class":50,"line":51},[48,375,136],{"class":54},[48,377,345],{"class":66},[48,379,380],{"class":58}," 777",[48,382,383],{"class":58}," -R",[48,385,386],{"class":66}," /var/www/image/logs/\n",[34,388,389],{"id":389},"最终结果",[26,391,392],{},[29,393],{"src":394,"width":32,"height":32},"https://static.031130.xyz/uploads/2024/08/12/62f36f57f34aa.gif",[34,396,397],{"id":397},"参考链接",[10,399,400],{},[13,401,404],{"href":402,"rel":403},"https://cnzhx.net/blog/kde-plasma-5-dolphin-add-action-menu-entry/",[22],"在 KDE Plasma 5 的 Dolphin 中添加一个右键动作菜单",[10,406,407],{},[13,408,410],{"href":20,"rel":409},[22],"PicUploader: 一个还不错的图床工具",[412,413,414],"style",{},"html pre.shiki code .sAdtL, html code.shiki .sAdtL{--shiki-default:#4078F2;--shiki-dark:#61AFEF}html pre.shiki code .sAGMh, html code.shiki .sAGMh{--shiki-default:#986801;--shiki-dark:#D19A66}html pre.shiki code .sJa8x, html code.shiki .sJa8x{--shiki-default:#E45649;--shiki-dark:#E06C75}html pre.shiki code .sDhpE, html code.shiki .sDhpE{--shiki-default:#50A14F;--shiki-dark:#98C379}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .sW2Sy, html code.shiki .sW2Sy{--shiki-default:#A0A1A7;--shiki-default-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic}html pre.shiki code .sLKXg, html code.shiki .sLKXg{--shiki-default:#A626A4;--shiki-dark:#C678DD}html pre.shiki code .s5ixo, html code.shiki .s5ixo{--shiki-default:#383A42;--shiki-dark:#ABB2BF}html pre.shiki code .sknuh, html code.shiki .sknuh{--shiki-default:#383A42;--shiki-dark:#56B6C2}html pre.shiki code .s_Sar, html code.shiki .s_Sar{--shiki-default:#0184BC;--shiki-dark:#56B6C2}",{"title":32,"searchDepth":70,"depth":70,"links":416},[417,418,419,423,424,425,426],{"id":36,"depth":70,"text":37},{"id":81,"depth":70,"text":81},{"id":116,"depth":70,"text":116,"children":420},[421,422],{"id":120,"depth":215,"text":120},{"id":151,"depth":215,"text":151},{"id":354,"depth":70,"text":354},{"id":366,"depth":70,"text":366},{"id":389,"depth":70,"text":389},{"id":397,"depth":70,"text":397},"2021-10-24 22:26:50","上一篇文章我们在Archlinux中成功部署了PicUploader的web端，本文我们来讲讲如何为KDE的dolphin添加右键快捷键上传，效果类似这样。（gif图来自PicUploader作者的博客)","md",{},"/2021/10/24/picuploader-with-kde-action","---\ntitle: PicUploader使用系列（二）——为KDE的dolphin添加右键快捷菜单\ndate: 2021-10-24 22:26:50\ntags:\n- Archlinux\n- PicUploader\n- KDE\n- PHP\n---\n\n[上一篇文章](/2021/10/21/picuploader-on-archlinux-with-caddy/)我们在Archlinux中成功部署了PicUploader的web端，本文我们来讲讲如何为KDE的dolphin添加右键快捷键上传，效果类似这样。（gif图来自[PicUploader作者的博客](https://www.xiebruce.top/17.html))\n\n\u003Ccenter>\u003Cimg src=\"https://img.xiebruce.top/2018/09/11/f4859eda8832f814486fc00df971e3cc.gif\" width = \"\" height = \"\">\u003C/center>\n\n## 创建.desktop文件\n\n```bash\nmkdir -p $HOME/.local/share/kservices5/\ntouch $HOME/.local/share/kservices5/picuploader.desktop\n```\n\n## 填上这段内容\n\n```\n[Desktop Entry]\nActions=PicUploader;\nMimeType=image/jpeg;image/png;\nType=Service\nX-KDE-Priority=TopLevel\nX-KDE-ServiceTypes=KonqPopupMenu/Plugin\nIcon=/var/www/image/favicon.ico\n\n[Desktop Action PicUploader]\nName=Upload with PicUploader\nName[zh_CN]=使用PicUploader上传\nIcon=/var/www/image/favicon.ico\nExec=php /var/www/image/index.php %F | scopy\n```\n\n**注: 这里的 scopy 是我在下面[自己创建的一段脚本](#复制到粘贴板)，用以同时满足x11和wayland下的使用，如果你仅使用x11的话直接改成`xclip -selection clipboard`即可。**\n\nMimeType指的是文件类型。在这份desktop中，我仅指定了png和jpg文件在右键时会弹出picuploader的上传菜单，如果你需要更多文件类型的MimeType，你可以参考下gwenview的desktop都写了哪些文件类型。\n\n> MimeType=inode/directory;image/avif;image/gif;image/jpeg;image/png;image/bmp;image/x-eps;image/x-icns;image/x-ico;image/x-portable-bitmap;image/x-portable-graymap;image/x-portable-pixmap;image/x-xbitmap;image/x-xpixmap;image/tiff;image/x-psd;image/x-webp;image/webp;image/x-tga;application/x-krita;image/x-kde-raw;image/x-canon-cr2;image/x-canon-crw;image/x-kodak-dcr;image/x-adobe-dng;image/x-kodak-k25;image/x-kodak-kdc;image/x-minolta-mrw;image/x-nikon-nef;image/x-olympus-orf;image/x-pentax-pef;image/x-fuji-raf;image/x-panasonic-rw;image/x-sony-sr2;image/x-sony-srf;image/x-sigma-x3f;image/x-sony-arw;image/x-panasonic-rw2;\n\n## 安装所需组件\n\n### 通知提示\n\n右下角弹出文字提示的功能依赖于`libnotify`\n\n```bash\nsudo pacman -S libnotify --needed\n```\n\n### 复制到粘贴板\n\n~~复制到粘贴板的功能依赖于`xclip`~~\n\n~~`sudo pacman -S xclip --needed`~~\n\n考虑到我可能在 x11 和 wayland 之间反复横跳，仅仅一个`xclip`看起来满足不了我的需求\n\n```bash\nsudo pacman -S xclip wl-clipboard --needed\n```\n\n手糊了一段脚本，用以判断对应的运行环境并调用相应的粘贴板工具\n\n```bash\n/usr/bin/scopy\n---\n#!/bin/bash\n\nif [ \"$XDG_SESSION_TYPE\" = \"wayland\" ]; then\n  wl-copy\nelif [ \"$XDG_SESSION_TYPE\" = \"x11\" ]; then\n  xclip -selection clipboard\nelse\n  echo \"ERROR! You are using $XDG_SESSION_TYPE\"\nfi\n```\n\n为`/usr/bin/scopy`授予运行权限\n\n```bash\nsudo chmod 755 /usr/bin/scopy\n```\n\n## 启用该动作菜单\n\n```bash\nkbuildsycoca5\n```\n\n## 处理普通用户无权写入logs的问题\n\n```bash\nsudo chmod 777 -R /var/www/image/logs/\n```\n\n## 最终结果\n\n\u003Ccenter>\u003Cimg src=\"https://static.031130.xyz/uploads/2024/08/12/62f36f57f34aa.gif\" width = \"\" height = \"\">\u003C/center>\n\n## 参考链接\n\n[在 KDE Plasma 5 的 Dolphin 中添加一个右键动作菜单](https://cnzhx.net/blog/kde-plasma-5-dolphin-add-action-menu-entry/)\n\n[PicUploader: 一个还不错的图床工具](https://www.xiebruce.top/17.html)\n",{"title":5,"description":428},"posts/picuploader-with-kde-action",false,[437,438,439,440],"Archlinux","PicUploader","KDE","PHP","2eucCVbUVZ0p7T21xmC7ahNPzRpGuIRwwFukSnjw5AA",[443,448],{"title":444,"path":445,"stem":446,"date":447,"children":-1},"Waydroid on KDE 初体验","/2021/10/31/waydroid-experience-on-kde","posts/waydroid-experience-on-kde","2021-10-31 15:57:57",{"title":449,"path":450,"stem":451,"date":452,"children":-1},"PicUploader使用系列（一）——在Archlinux上使用Caddy部署PicUploader","/2021/10/21/picuploader-on-archlinux-with-caddy","posts/picuploader-on-archlinux-with-caddy","2021-10-21 22:15:33",1761739882727]