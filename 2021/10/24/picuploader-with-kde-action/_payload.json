[{"data":1,"prerenderedAt":451},["ShallowReactive",2],{"post-2021-10-24-picuploader-with-kde-action":3,"surround-2021-10-24-picuploader-with-kde-action":439,"randomIndex/2021/10/24/picuploader-with-kde-action/":450},{"id":4,"title":5,"body":6,"date":424,"description":425,"extension":426,"meta":427,"navigation":225,"path":428,"rawbody":429,"seo":430,"stem":431,"sticky":432,"tags":433,"__hash__":438},"posts/posts/picuploader-with-kde-action.md","PicUploader使用系列（二）——为KDE的dolphin添加右键快捷菜单",{"type":7,"value":8,"toc":412},"minimark",[9,25,33,38,79,82,90,105,108,114,117,121,127,149,152,161,168,174,195,198,324,331,349,352,361,364,384,387,392,395,402,408],[10,11,12,17,18,24],"p",{},[13,14,16],"a",{"href":15},"/2021/10/21/picuploader-on-archlinux-with-caddy/","上一篇文章","我们在Archlinux中成功部署了PicUploader的web端，本文我们来讲讲如何为KDE的dolphin添加右键快捷键上传，效果类似这样。（gif图来自",[13,19,23],{"href":20,"rel":21},"https://www.xiebruce.top/17.html",[22],"nofollow","PicUploader作者的博客",")",[26,27,28],"center",{},[29,30],"img",{"src":31,"width":32,"height":32},"https://img.xiebruce.top/2018/09/11/f4859eda8832f814486fc00df971e3cc.gif","",[34,35,37],"h2",{"id":36},"创建desktop文件","创建.desktop文件",[39,40,44],"pre",{"className":41,"code":42,"language":43,"meta":32,"style":32},"language-bash shiki shiki-themes github-light github-dark","mkdir -p $HOME/.local/share/kservices5/\ntouch $HOME/.local/share/kservices5/picuploader.desktop\n","bash",[45,46,47,68],"code",{"__ignoreMap":32},[48,49,52,56,60,64],"span",{"class":50,"line":51},"line",1,[48,53,55],{"class":54},"sScJk","mkdir",[48,57,59],{"class":58},"sj4cs"," -p",[48,61,63],{"class":62},"sVt8B"," $HOME",[48,65,67],{"class":66},"sZZnC","/.local/share/kservices5/\n",[48,69,71,74,76],{"class":50,"line":70},2,[48,72,73],{"class":54},"touch",[48,75,63],{"class":62},[48,77,78],{"class":66},"/.local/share/kservices5/picuploader.desktop\n",[34,80,81],{"id":81},"填上这段内容",[39,83,88],{"className":84,"code":86,"language":87},[85],"language-text","[Desktop Entry]\nActions=PicUploader;\nMimeType=image/jpeg;image/png;\nType=Service\nX-KDE-Priority=TopLevel\nX-KDE-ServiceTypes=KonqPopupMenu/Plugin\nIcon=/var/www/image/favicon.ico\n\n[Desktop Action PicUploader]\nName=Upload with PicUploader\nName[zh_CN]=使用PicUploader上传\nIcon=/var/www/image/favicon.ico\nExec=php /var/www/image/index.php %F | scopy\n","text",[45,89,86],{"__ignoreMap":32},[10,91,92],{},[93,94,95,96,100,101,104],"strong",{},"注: 这里的 scopy 是我在下面",[13,97,99],{"href":98},"#%E5%A4%8D%E5%88%B6%E5%88%B0%E7%B2%98%E8%B4%B4%E6%9D%BF","自己创建的一段脚本","，用以同时满足x11和wayland下的使用，如果你仅使用x11的话直接改成",[45,102,103],{},"xclip -selection clipboard","即可。",[10,106,107],{},"MimeType指的是文件类型。在这份desktop中，我仅指定了png和jpg文件在右键时会弹出picuploader的上传菜单，如果你需要更多文件类型的MimeType，你可以参考下gwenview的desktop都写了哪些文件类型。",[109,110,111],"blockquote",{},[10,112,113],{},"MimeType=inode/directory;image/avif;image/gif;image/jpeg;image/png;image/bmp;image/x-eps;image/x-icns;image/x-ico;image/x-portable-bitmap;image/x-portable-graymap;image/x-portable-pixmap;image/x-xbitmap;image/x-xpixmap;image/tiff;image/x-psd;image/x-webp;image/webp;image/x-tga;application/x-krita;image/x-kde-raw;image/x-canon-cr2;image/x-canon-crw;image/x-kodak-dcr;image/x-adobe-dng;image/x-kodak-k25;image/x-kodak-kdc;image/x-minolta-mrw;image/x-nikon-nef;image/x-olympus-orf;image/x-pentax-pef;image/x-fuji-raf;image/x-panasonic-rw;image/x-sony-sr2;image/x-sony-srf;image/x-sigma-x3f;image/x-sony-arw;image/x-panasonic-rw2;",[34,115,116],{"id":116},"安装所需组件",[118,119,120],"h3",{"id":120},"通知提示",[10,122,123,124],{},"右下角弹出文字提示的功能依赖于",[45,125,126],{},"libnotify",[39,128,130],{"className":41,"code":129,"language":43,"meta":32,"style":32},"sudo pacman -S libnotify --needed\n",[45,131,132],{"__ignoreMap":32},[48,133,134,137,140,143,146],{"class":50,"line":51},[48,135,136],{"class":54},"sudo",[48,138,139],{"class":66}," pacman",[48,141,142],{"class":58}," -S",[48,144,145],{"class":66}," libnotify",[48,147,148],{"class":58}," --needed\n",[118,150,151],{"id":151},"复制到粘贴板",[10,153,154],{},[155,156,157,158],"del",{},"复制到粘贴板的功能依赖于",[45,159,160],{},"xclip",[10,162,163],{},[155,164,165],{},[45,166,167],{},"sudo pacman -S xclip --needed",[10,169,170,171,173],{},"考虑到我可能在 x11 和 wayland 之间反复横跳，仅仅一个",[45,172,160],{},"看起来满足不了我的需求",[39,175,177],{"className":41,"code":176,"language":43,"meta":32,"style":32},"sudo pacman -S xclip wl-clipboard --needed\n",[45,178,179],{"__ignoreMap":32},[48,180,181,183,185,187,190,193],{"class":50,"line":51},[48,182,136],{"class":54},[48,184,139],{"class":66},[48,186,142],{"class":58},[48,188,189],{"class":66}," xclip",[48,191,192],{"class":66}," wl-clipboard",[48,194,148],{"class":58},[10,196,197],{},"手糊了一段脚本，用以判断对应的运行环境并调用相应的粘贴板工具",[39,199,201],{"className":41,"code":200,"language":43,"meta":32,"style":32},"/usr/bin/scopy\n---\n#!/bin/bash\n\nif [ \"$XDG_SESSION_TYPE\" = \"wayland\" ]; then\n  wl-copy\nelif [ \"$XDG_SESSION_TYPE\" = \"x11\" ]; then\n  xclip -selection clipboard\nelse\n  echo \"ERROR! You are using $XDG_SESSION_TYPE\"\nfi\n",[45,202,203,208,213,220,227,257,263,286,298,304,318],{"__ignoreMap":32},[48,204,205],{"class":50,"line":51},[48,206,207],{"class":54},"/usr/bin/scopy\n",[48,209,210],{"class":50,"line":70},[48,211,212],{"class":54},"---\n",[48,214,216],{"class":50,"line":215},3,[48,217,219],{"class":218},"sJ8bj","#!/bin/bash\n",[48,221,223],{"class":50,"line":222},4,[48,224,226],{"emptyLinePlaceholder":225},true,"\n",[48,228,230,234,237,240,243,245,248,251,254],{"class":50,"line":229},5,[48,231,233],{"class":232},"szBVR","if",[48,235,236],{"class":62}," [ ",[48,238,239],{"class":66},"\"",[48,241,242],{"class":62},"$XDG_SESSION_TYPE",[48,244,239],{"class":66},[48,246,247],{"class":232}," =",[48,249,250],{"class":66}," \"wayland\"",[48,252,253],{"class":62}," ]; ",[48,255,256],{"class":232},"then\n",[48,258,260],{"class":50,"line":259},6,[48,261,262],{"class":54},"  wl-copy\n",[48,264,266,269,271,273,275,277,279,282,284],{"class":50,"line":265},7,[48,267,268],{"class":232},"elif",[48,270,236],{"class":62},[48,272,239],{"class":66},[48,274,242],{"class":62},[48,276,239],{"class":66},[48,278,247],{"class":232},[48,280,281],{"class":66}," \"x11\"",[48,283,253],{"class":62},[48,285,256],{"class":232},[48,287,289,292,295],{"class":50,"line":288},8,[48,290,291],{"class":54},"  xclip",[48,293,294],{"class":58}," -selection",[48,296,297],{"class":66}," clipboard\n",[48,299,301],{"class":50,"line":300},9,[48,302,303],{"class":232},"else\n",[48,305,307,310,313,315],{"class":50,"line":306},10,[48,308,309],{"class":58},"  echo",[48,311,312],{"class":66}," \"ERROR! You are using ",[48,314,242],{"class":62},[48,316,317],{"class":66},"\"\n",[48,319,321],{"class":50,"line":320},11,[48,322,323],{"class":232},"fi\n",[10,325,326,327,330],{},"为",[45,328,329],{},"/usr/bin/scopy","授予运行权限",[39,332,334],{"className":41,"code":333,"language":43,"meta":32,"style":32},"sudo chmod 755 /usr/bin/scopy\n",[45,335,336],{"__ignoreMap":32},[48,337,338,340,343,346],{"class":50,"line":51},[48,339,136],{"class":54},[48,341,342],{"class":66}," chmod",[48,344,345],{"class":58}," 755",[48,347,348],{"class":66}," /usr/bin/scopy\n",[34,350,351],{"id":351},"启用该动作菜单",[39,353,355],{"className":41,"code":354,"language":43,"meta":32,"style":32},"kbuildsycoca5\n",[45,356,357],{"__ignoreMap":32},[48,358,359],{"class":50,"line":51},[48,360,354],{"class":54},[34,362,363],{"id":363},"处理普通用户无权写入logs的问题",[39,365,367],{"className":41,"code":366,"language":43,"meta":32,"style":32},"sudo chmod 777 -R /var/www/image/logs/\n",[45,368,369],{"__ignoreMap":32},[48,370,371,373,375,378,381],{"class":50,"line":51},[48,372,136],{"class":54},[48,374,342],{"class":66},[48,376,377],{"class":58}," 777",[48,379,380],{"class":58}," -R",[48,382,383],{"class":66}," /var/www/image/logs/\n",[34,385,386],{"id":386},"最终结果",[26,388,389],{},[29,390],{"src":391,"width":32,"height":32},"https://static.031130.xyz/uploads/2024/08/12/62f36f57f34aa.gif",[34,393,394],{"id":394},"参考链接",[10,396,397],{},[13,398,401],{"href":399,"rel":400},"https://cnzhx.net/blog/kde-plasma-5-dolphin-add-action-menu-entry/",[22],"在 KDE Plasma 5 的 Dolphin 中添加一个右键动作菜单",[10,403,404],{},[13,405,407],{"href":20,"rel":406},[22],"PicUploader: 一个还不错的图床工具",[409,410,411],"style",{},"html pre.shiki code .sScJk, html code.shiki .sScJk{--shiki-default:#6F42C1;--shiki-dark:#B392F0}html pre.shiki code .sj4cs, html code.shiki .sj4cs{--shiki-default:#005CC5;--shiki-dark:#79B8FF}html pre.shiki code .sVt8B, html code.shiki .sVt8B{--shiki-default:#24292E;--shiki-dark:#E1E4E8}html pre.shiki code .sZZnC, html code.shiki .sZZnC{--shiki-default:#032F62;--shiki-dark:#9ECBFF}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .sJ8bj, html code.shiki .sJ8bj{--shiki-default:#6A737D;--shiki-dark:#6A737D}html pre.shiki code .szBVR, html code.shiki .szBVR{--shiki-default:#D73A49;--shiki-dark:#F97583}",{"title":32,"searchDepth":70,"depth":70,"links":413},[414,415,416,420,421,422,423],{"id":36,"depth":70,"text":37},{"id":81,"depth":70,"text":81},{"id":116,"depth":70,"text":116,"children":417},[418,419],{"id":120,"depth":215,"text":120},{"id":151,"depth":215,"text":151},{"id":351,"depth":70,"text":351},{"id":363,"depth":70,"text":363},{"id":386,"depth":70,"text":386},{"id":394,"depth":70,"text":394},"2021-10-24 22:26:50","上一篇文章我们在Archlinux中成功部署了PicUploader的web端，本文我们来讲讲如何为KDE的dolphin添加右键快捷键上传，效果类似这样。（gif图来自PicUploader作者的博客)","md",{},"/2021/10/24/picuploader-with-kde-action","---\ntitle: PicUploader使用系列（二）——为KDE的dolphin添加右键快捷菜单\ndate: 2021-10-24 22:26:50\ntags:\n- Archlinux\n- PicUploader\n- KDE\n- PHP\n---\n\n[上一篇文章](/2021/10/21/picuploader-on-archlinux-with-caddy/)我们在Archlinux中成功部署了PicUploader的web端，本文我们来讲讲如何为KDE的dolphin添加右键快捷键上传，效果类似这样。（gif图来自[PicUploader作者的博客](https://www.xiebruce.top/17.html))\n\n\u003Ccenter>\u003Cimg src=\"https://img.xiebruce.top/2018/09/11/f4859eda8832f814486fc00df971e3cc.gif\" width = \"\" height = \"\">\u003C/center>\n\n## 创建.desktop文件\n\n```bash\nmkdir -p $HOME/.local/share/kservices5/\ntouch $HOME/.local/share/kservices5/picuploader.desktop\n```\n\n## 填上这段内容\n\n```\n[Desktop Entry]\nActions=PicUploader;\nMimeType=image/jpeg;image/png;\nType=Service\nX-KDE-Priority=TopLevel\nX-KDE-ServiceTypes=KonqPopupMenu/Plugin\nIcon=/var/www/image/favicon.ico\n\n[Desktop Action PicUploader]\nName=Upload with PicUploader\nName[zh_CN]=使用PicUploader上传\nIcon=/var/www/image/favicon.ico\nExec=php /var/www/image/index.php %F | scopy\n```\n\n**注: 这里的 scopy 是我在下面[自己创建的一段脚本](#复制到粘贴板)，用以同时满足x11和wayland下的使用，如果你仅使用x11的话直接改成`xclip -selection clipboard`即可。**\n\nMimeType指的是文件类型。在这份desktop中，我仅指定了png和jpg文件在右键时会弹出picuploader的上传菜单，如果你需要更多文件类型的MimeType，你可以参考下gwenview的desktop都写了哪些文件类型。\n\n> MimeType=inode/directory;image/avif;image/gif;image/jpeg;image/png;image/bmp;image/x-eps;image/x-icns;image/x-ico;image/x-portable-bitmap;image/x-portable-graymap;image/x-portable-pixmap;image/x-xbitmap;image/x-xpixmap;image/tiff;image/x-psd;image/x-webp;image/webp;image/x-tga;application/x-krita;image/x-kde-raw;image/x-canon-cr2;image/x-canon-crw;image/x-kodak-dcr;image/x-adobe-dng;image/x-kodak-k25;image/x-kodak-kdc;image/x-minolta-mrw;image/x-nikon-nef;image/x-olympus-orf;image/x-pentax-pef;image/x-fuji-raf;image/x-panasonic-rw;image/x-sony-sr2;image/x-sony-srf;image/x-sigma-x3f;image/x-sony-arw;image/x-panasonic-rw2;\n\n## 安装所需组件\n\n### 通知提示\n\n右下角弹出文字提示的功能依赖于`libnotify`\n\n```bash\nsudo pacman -S libnotify --needed\n```\n\n### 复制到粘贴板\n\n~~复制到粘贴板的功能依赖于`xclip`~~\n\n~~`sudo pacman -S xclip --needed`~~\n\n考虑到我可能在 x11 和 wayland 之间反复横跳，仅仅一个`xclip`看起来满足不了我的需求\n\n```bash\nsudo pacman -S xclip wl-clipboard --needed\n```\n\n手糊了一段脚本，用以判断对应的运行环境并调用相应的粘贴板工具\n\n```bash\n/usr/bin/scopy\n---\n#!/bin/bash\n\nif [ \"$XDG_SESSION_TYPE\" = \"wayland\" ]; then\n  wl-copy\nelif [ \"$XDG_SESSION_TYPE\" = \"x11\" ]; then\n  xclip -selection clipboard\nelse\n  echo \"ERROR! You are using $XDG_SESSION_TYPE\"\nfi\n```\n\n为`/usr/bin/scopy`授予运行权限\n\n```bash\nsudo chmod 755 /usr/bin/scopy\n```\n\n## 启用该动作菜单\n\n```bash\nkbuildsycoca5\n```\n\n## 处理普通用户无权写入logs的问题\n\n```bash\nsudo chmod 777 -R /var/www/image/logs/\n```\n\n## 最终结果\n\n\u003Ccenter>\u003Cimg src=\"https://static.031130.xyz/uploads/2024/08/12/62f36f57f34aa.gif\" width = \"\" height = \"\">\u003C/center>\n\n## 参考链接\n\n[在 KDE Plasma 5 的 Dolphin 中添加一个右键动作菜单](https://cnzhx.net/blog/kde-plasma-5-dolphin-add-action-menu-entry/)\n\n[PicUploader: 一个还不错的图床工具](https://www.xiebruce.top/17.html)\n",{"title":5,"description":425},"posts/picuploader-with-kde-action",false,[434,435,436,437],"Archlinux","PicUploader","KDE","PHP","CMk0zVH40OHayDp1BbAVxQib7fUOG6Z25ebgkzdUWgk",[440,445],{"title":441,"path":442,"stem":443,"date":444,"children":-1},"Waydroid on KDE 初体验","/2021/10/31/waydroid-experience-on-kde","posts/waydroid-experience-on-kde","2021-10-31 15:57:57",{"title":446,"path":447,"stem":448,"date":449,"children":-1},"PicUploader使用系列（一）——在Archlinux上使用Caddy部署PicUploader","/2021/10/21/picuploader-on-archlinux-with-caddy","posts/picuploader-on-archlinux-with-caddy","2021-10-21 22:15:33",21,1761699629956]