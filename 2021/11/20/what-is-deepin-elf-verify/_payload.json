[{"data":1,"prerenderedAt":334},["ShallowReactive",2],{"post-2021-11-20-what-is-deepin-elf-verify":3,"surround-2021-11-20-what-is-deepin-elf-verify":323,"randomIndex/2021/11/20/what-is-deepin-elf-verify/":307},{"id":4,"title":5,"body":6,"date":310,"description":63,"extension":311,"meta":312,"navigation":313,"path":314,"rawbody":315,"seo":316,"stem":317,"sticky":318,"tags":319,"__hash__":322},"posts/posts/what-is-deepin-elf-verify.md","deepin-elf-verify究竟是何物？",{"type":7,"value":8,"toc":299},"minimark",[9,13,30,33,57,100,103,109,116,119,127,130,140,143,150,156,174,202,205,210,217,223,229,232,237,243,246,275,279,284,290,295],[10,11,12],"h2",{"id":12},"起因",[14,15,16,17,21,22,26,27,29],"p",{},"越来越多上架在 Deepin 应用商店中的 deb 包中开始依赖了一个叫做 ",[18,19,20],"code",{},"deepin-elf-verify"," 的依赖，今天来讲讲这个",[23,24,25],"del",{},"神奇","的 ",[18,28,20],{}," 到底为何物，为什么这么多程序都要依赖于他来工作。",[10,31,32],{"id":32},"下载拆包",[14,34,35,36,43,44,49,50,53,54,56],{},"打开 ",[37,38,42],"a",{"href":39,"rel":40},"https://mirrors.bfsu.edu.cn/",[41],"nofollow","Bfsu镜像站"," ，可以很轻松地找到 ",[37,45,48],{"href":46,"rel":47},"https://mirrors.bfsu.edu.cn/deepin/dists/apricot/main/binary-amd64/Packages",[41],"Packages"," —— 在 apt 源中记录了各个文件信息（包括他在仓库中的相对位置）的这么一个",[51,52,25],"em",{},"的文件，就是体积有点大，达到了68MB的样子。我们可以通过以下命令检索今天的主角——",[18,55,20],{},"。",[58,59,64],"pre",{"className":60,"code":61,"language":62,"meta":63,"style":63},"language-bash shiki shiki-themes one-light one-dark-pro","curl -s https://mirrors.bfsu.edu.cn/deepin/dists/apricot/main/binary-amd64/Packages | grep deepin-elf-sign | grep pool\n","bash","",[18,65,66],{"__ignoreMap":63},[67,68,71,75,79,83,87,90,93,95,97],"span",{"class":69,"line":70},"line",1,[67,72,74],{"class":73},"sAdtL","curl",[67,76,78],{"class":77},"sAGMh"," -s",[67,80,82],{"class":81},"sDhpE"," https://mirrors.bfsu.edu.cn/deepin/dists/apricot/main/binary-amd64/Packages",[67,84,86],{"class":85},"s5ixo"," | ",[67,88,89],{"class":73},"grep",[67,91,92],{"class":81}," deepin-elf-sign",[67,94,86],{"class":85},[67,96,89],{"class":73},[67,98,99],{"class":81}," pool\n",[14,101,102],{},"得到了输出:",[104,105,106],"blockquote",{},[14,107,108],{},"Filename: pool/main/d/deepin-elf-verify/deepin-elf-verify_0.2.0.6-1_amd64.deb",[14,110,111,112],{},"我们就可以把完整的下载链接拼出来: ",[37,113,114],{"href":114,"rel":115},"https://mirrors.bfsu.edu.cn/deepin/pool/main/d/deepin-elf-verify/deepin-elf-verify_0.2.0.6-1_amd64.deb",[41],[14,117,118],{},"下载解压，大概是这么一个目录结构:",[58,120,125],{"className":121,"code":123,"language":124},[122],"language-text","deepin-elf-verify_0.2.0.6-1_amd64\n├── control.tar.xz\n├── data.tar.xz\n└── debian-binary\n","text",[18,126,123],{"__ignoreMap":63},[14,128,129],{},"是个常规的deb包该有的结构了。",[131,132,133,137],"ul",{},[134,135,136],"li",{},"control.tar.xz 中存放了deb包的相关信息",[134,138,139],{},"data.tar.xz 是整个包最终会被安装到系统中的文件",[14,141,142],{},"终于到了激动人心的时刻了，打开 data.tar.xz ！",[14,144,145],{},[146,147],"img",{"alt":148,"src":149},"空的？","https://static.031130.xyz/uploads/2024/08/12/62f3ccc192986.webp",[14,151,152],{},[153,154,155],"strong",{},"搞错了，再来",[14,157,158,159,164,165,167,168,170,171,173],{},"打开UOS的",[37,160,163],{"href":161,"rel":162},"https://uos.deepin.cn/uos/",[41],"源链接","，使用",[18,166,74],{},"+",[18,169,89],{},"检索",[18,172,20],{},"在源中的相对位置",[58,175,177],{"className":60,"code":176,"language":62,"meta":63,"style":63},"curl -sL https://uos.deepin.cn/uos/dists/eagle/main/binary-amd64/Packages | grep deepin-elf-verify | grep pool\n",[18,178,179],{"__ignoreMap":63},[67,180,181,183,186,189,191,193,196,198,200],{"class":69,"line":70},[67,182,74],{"class":73},[67,184,185],{"class":77}," -sL",[67,187,188],{"class":81}," https://uos.deepin.cn/uos/dists/eagle/main/binary-amd64/Packages",[67,190,86],{"class":85},[67,192,89],{"class":73},[67,194,195],{"class":81}," deepin-elf-verify",[67,197,86],{"class":85},[67,199,89],{"class":73},[67,201,99],{"class":81},[14,203,204],{},"获得输出:",[104,206,207],{},[14,208,209],{},"Filename: pool/main/d/deepin-elf-verify/deepin-elf-verify_0.0.14.5-1_amd64.deb\nFilename: pool/main/d/deepin-elf-verify/deepin-elf-verify-dbgsym_0.0.14.5-1_amd64.deb",[14,211,212,213],{},"拼接为链接: ",[37,214,215],{"href":215,"rel":216},"https://uos.deepin.cn/uos/pool/main/d/deepin-elf-verify/deepin-elf-verify_0.0.14.5-1_amd64.deb",[41],[14,218,219,220],{},"下载后打开 ",[18,221,222],{},"data.tar.xz",[14,224,225],{},[146,226],{"alt":227,"src":228},"看来还是有东西的","https://static.031130.xyz/uploads/2024/08/12/62f3ccc53d544.webp",[10,230,231],{"id":231},"说说结论吧",[233,234,236],"h3",{"id":235},"对于uos","对于UOS",[14,238,239,240,242],{},"在UOS下，",[18,241,20],{},"用于检测用户运行的进程是否被deepin信任的证书签名过，虽然有些过于限制用户，对于一个将要广泛用于政府机关的发行版而言是可以理解的。",[233,244,245],{"id":245},"对于deepin",[131,247,248,253,262],{},[134,249,250,252],{},[18,251,20],{}," 在 deepin 上就是个空包。",[134,254,255,256,258,259,261],{},"当我们使用 deepin 安装一个含有 ",[18,257,20],{}," 的软件包时，apt 会自动从源内搜索并安装 ",[18,260,20],{},"，由于是个空包，他对于系统不会有任何负担。",[134,263,264,265,267,268,271,272,274],{},"大多数依赖",[18,266,20],{},"的程序都把依赖写成了",[18,269,270],{},"deepin-elf-verify (>= 0.0.16.7-1)","，而在deepin源中，",[18,273,20],{},"版本号是 0.2.0.6，因此在未来的很长一段时间里应该都是满足要求的，说明统信那边并没有「想要让deepin装不上UOS的包」的这种想法，可见在这一点上，统信还没有明显的偏心。",[233,276,278],{"id":277},"在别的deb发行版下","在别的Deb发行版下",[14,280,281,283],{},[18,282,20],{},"存在于、并且仅仅存在于 deepin 和 UOS 的源内。",[14,285,286,287,289],{},"而当我们使用别的 deb 发行版（如Debian、Ubuntu）时，apt 无法在他们自己的源内找到 ",[18,288,20],{}," ，apt就会报错并且停止安装。",[14,291,292],{},[153,293,294],{},"小结: 至于其最终目的，是为了__________________________",[296,297,298],"style",{},"html pre.shiki code .sAdtL, html code.shiki .sAdtL{--shiki-default:#4078F2;--shiki-dark:#61AFEF}html pre.shiki code .sAGMh, html code.shiki .sAGMh{--shiki-default:#986801;--shiki-dark:#D19A66}html pre.shiki code .sDhpE, html code.shiki .sDhpE{--shiki-default:#50A14F;--shiki-dark:#98C379}html pre.shiki code .s5ixo, html code.shiki .s5ixo{--shiki-default:#383A42;--shiki-dark:#ABB2BF}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":63,"searchDepth":300,"depth":300,"links":301},2,[302,303,304],{"id":12,"depth":300,"text":12},{"id":32,"depth":300,"text":32},{"id":231,"depth":300,"text":231,"children":305},[306,308,309],{"id":235,"depth":307,"text":236},3,{"id":245,"depth":307,"text":245},{"id":277,"depth":307,"text":278},"2021-11-20","md",{},true,"/2021/11/20/what-is-deepin-elf-verify","---\ntitle: deepin-elf-verify究竟是何物？\ndate: 2021-11-20\nsticky:\ntags:\n- deepin\n- Linux\n---\n\n## 起因\n\n越来越多上架在 Deepin 应用商店中的 deb 包中开始依赖了一个叫做 `deepin-elf-verify` 的依赖，今天来讲讲这个~~神奇~~的 `deepin-elf-verify` 到底为何物，为什么这么多程序都要依赖于他来工作。\n\n## 下载拆包\n\n打开 [Bfsu镜像站](https://mirrors.bfsu.edu.cn/) ，可以很轻松地找到 [Packages](https://mirrors.bfsu.edu.cn/deepin/dists/apricot/main/binary-amd64/Packages) —— 在 apt 源中记录了各个文件信息（包括他在仓库中的相对位置）的这么一个*神奇*的文件，就是体积有点大，达到了68MB的样子。我们可以通过以下命令检索今天的主角——`deepin-elf-verify`。\n\n```bash\ncurl -s https://mirrors.bfsu.edu.cn/deepin/dists/apricot/main/binary-amd64/Packages | grep deepin-elf-sign | grep pool\n```\n\n得到了输出: \n\n> Filename: pool/main/d/deepin-elf-verify/deepin-elf-verify_0.2.0.6-1_amd64.deb\n\n我们就可以把完整的下载链接拼出来: [https://mirrors.bfsu.edu.cn/deepin/pool/main/d/deepin-elf-verify/deepin-elf-verify_0.2.0.6-1_amd64.deb](https://mirrors.bfsu.edu.cn/deepin/pool/main/d/deepin-elf-verify/deepin-elf-verify_0.2.0.6-1_amd64.deb)\n\n下载解压，大概是这么一个目录结构: \n\n```\ndeepin-elf-verify_0.2.0.6-1_amd64\n├── control.tar.xz\n├── data.tar.xz\n└── debian-binary\n```\n\n是个常规的deb包该有的结构了。\n\n- control.tar.xz 中存放了deb包的相关信息\n- data.tar.xz 是整个包最终会被安装到系统中的文件\n\n终于到了激动人心的时刻了，打开 data.tar.xz ！\n\n![空的？](https://static.031130.xyz/uploads/2024/08/12/62f3ccc192986.webp)\n\n**搞错了，再来**\n\n打开UOS的[源链接](https://uos.deepin.cn/uos/)，使用`curl`+`grep`检索`deepin-elf-verify`在源中的相对位置\n\n```bash\ncurl -sL https://uos.deepin.cn/uos/dists/eagle/main/binary-amd64/Packages | grep deepin-elf-verify | grep pool\n```\n\n获得输出: \n\n> Filename: pool/main/d/deepin-elf-verify/deepin-elf-verify_0.0.14.5-1_amd64.deb\n> Filename: pool/main/d/deepin-elf-verify/deepin-elf-verify-dbgsym_0.0.14.5-1_amd64.deb\n\n拼接为链接: [https://uos.deepin.cn/uos/pool/main/d/deepin-elf-verify/deepin-elf-verify_0.0.14.5-1_amd64.deb](https://uos.deepin.cn/uos/pool/main/d/deepin-elf-verify/deepin-elf-verify_0.0.14.5-1_amd64.deb)\n\n下载后打开 `data.tar.xz`\n\n![看来还是有东西的](https://static.031130.xyz/uploads/2024/08/12/62f3ccc53d544.webp)\n\n## 说说结论吧\n\n### 对于UOS\n\n在UOS下，`deepin-elf-verify`用于检测用户运行的进程是否被deepin信任的证书签名过，虽然有些过于限制用户，对于一个将要广泛用于政府机关的发行版而言是可以理解的。\n\n### 对于deepin\n\n- `deepin-elf-verify` 在 deepin 上就是个空包。\n\n- 当我们使用 deepin 安装一个含有 `deepin-elf-verify` 的软件包时，apt 会自动从源内搜索并安装 `deepin-elf-verify`，由于是个空包，他对于系统不会有任何负担。\n\n- 大多数依赖`deepin-elf-verify`的程序都把依赖写成了`deepin-elf-verify (>= 0.0.16.7-1)`，而在deepin源中，`deepin-elf-verify`版本号是 0.2.0.6，因此在未来的很长一段时间里应该都是满足要求的，说明统信那边并没有「想要让deepin装不上UOS的包」的这种想法，可见在这一点上，统信还没有明显的偏心。\n\n### 在别的Deb发行版下\n\n`deepin-elf-verify`存在于、并且仅仅存在于 deepin 和 UOS 的源内。\n\n而当我们使用别的 deb 发行版（如Debian、Ubuntu）时，apt 无法在他们自己的源内找到 `deepin-elf-verify` ，apt就会报错并且停止安装。\n\n**小结: 至于其最终目的，是为了\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_**\n",{"title":5,"description":63},"posts/what-is-deepin-elf-verify",false,[320,321],"deepin","Linux","Tnjn0rKF0Q5JerXaU26dzTDSvo5BS4mlA6dl9rBEdfc",[324,329],{"title":325,"path":326,"stem":327,"date":328,"children":-1},"我是来吹CloudflareMirrors的","/2021/11/21/use-cloudflare-mirrors","posts/use-cloudflare-mirrors","2021-11-21 01:48:49",{"title":330,"path":331,"stem":332,"date":333,"children":-1},"【翻译】请别再使用主题装饰我们的软件","/2021/11/05/please-dont-theme-our-apps","posts/please-dont-theme-our-apps","2021-11-05 20:35:58",1761835688385]