[{"data":1,"prerenderedAt":773},["ShallowReactive",2],{"post-2025-06-08-front-end-bug-gone-when-open-devtool-en":3,"surround-2025-06-08-front-end-bug-gone-when-open-devtool-en":766,"randomIndex/en/2025/06/08/front-end-bug-gone-when-open-devtool/":144},{"id":4,"title":5,"body":6,"date":749,"description":96,"extension":750,"lang":751,"meta":752,"navigation":47,"path":754,"rawbody":755,"seo":756,"stem":757,"sticky":758,"tags":759,"__hash__":765},"posts/posts/en/front-end-bug-gone-when-open-devtool.md","Quantum Mechanics in Frontend Development â€” The Bug That Vanishes as Soon as You Open F12",{"type":7,"value":8,"toc":741},"minimark",[9,14,27,42,49,56,64,83,87,90,288,295,301,311,314,320,323,366,374,387,390,461,467,643,663,666,670,676,691,698,705,709,738],[10,11,13],"h2",{"id":12},"first-observation-of-the-frontend-quantum-state-phenomenon","First Observation of the Frontend \"Quantum State\" Phenomenon",[15,16,17,18,22,23,26],"p",{},"This story sounds bizarreâ€”even surreal. Half a month ago, while happily coding at my desk (with hotpot and songs in the background ðŸ²ðŸŽ¤), I stumbled upon a truly uncanny bug. As a bona fide human software engineer, writing bugs is normalâ€”but this one defied all intuition: the moment I opened DevTools (F12) to inspect the relevant DOM structure, the bug ",[19,20,21],"em",{},"vanished",". Close DevTools, hit Ctrl+F5 to hard-refresh, and ",[19,24,25],{},"bam","â€”the bug reappeared.",[15,28,29,30,34,35],{},"Below is a live demo embedded via ",[31,32,33],"code",{},"\u003Ciframe>",":\n",[36,37,41],"a",{"href":38,"rel":39},"https://static.031130.xyz/demo/scroll-jump-bug.html",[40],"nofollow","demo",[43,44],"iframe",{"src":38,"width":45,"height":46,"allowFullScreen":47,"loading":48},"100%",500,true,"lazy",[15,50,51],{},[52,53],"img",{"alt":54,"src":55},"â€œHow to Observeâ€ Guide","https://static.031130.xyz/uploads/2025/06/08/65620d31fce6f.webp",[15,57,58,59,63],{},"This bug left me utterly bewildered. Iâ€™m no physicistâ€”why did ",[60,61,62],"strong",{},"observer effect"," from quantum mechanics show up in my frontend code?! ðŸ¤¯",[65,66,67,77,80],"blockquote",{},[15,68,69,72,73,76],{},[60,70,71],{},"Observer effect",": the act of ",[19,74,75],{},"observation"," inevitably influences the phenomenon being observed.",[15,78,79],{},"In quantum experimentsâ€”for example, to measure an electronâ€™s velocityâ€”you might fire two photons at it over a time interval. But the first photon already disturbs the electronâ€™s motion, making the original velocity impossible to determine (Heisenbergâ€™s uncertainty principle). Similarly, rapidly observing a decaying particle can apparently slow its decay rate.",[15,81,82],{},"â€” Wikipedia",[10,84,86],{"id":85},"quantum-fog-browser-mechanics","Quantum Fog âŒ â†’ Browser Mechanics âœ…",[15,88,89],{},"Letâ€™s briefly examine the problematic code snippet from the demo:",[91,92,97],"pre",{"className":93,"code":94,"language":95,"meta":96,"style":96},"language-javascript shiki shiki-themes one-light one-dark-pro","if (scrollIndex >= groupLength) {\n  setTimeout(() => {\n    wrapper.style.transition = \"none\";\n    scrollIndex = 0;\n    wrapper.style.transform = `translateY(-${scrollIndex * itemHeight}px)`;\n\n    requestAnimationFrame(() => {\n      wrapper.style.transition = \"transform 0.5s cubic-bezier(0.25, 0.1, 0.25, 1)\";\n    });\n  }, 500);\n}\n","javascript","",[31,98,99,126,142,172,186,225,231,243,264,270,282],{"__ignoreMap":96},[100,101,104,108,112,116,120,123],"span",{"class":102,"line":103},"line",1,[100,105,107],{"class":106},"sLKXg","if",[100,109,111],{"class":110},"s5ixo"," (",[100,113,115],{"class":114},"sz0mV","scrollIndex",[100,117,119],{"class":118},"s_Sar"," >=",[100,121,122],{"class":114}," groupLength",[100,124,125],{"class":110},") {\n",[100,127,129,133,136,139],{"class":102,"line":128},2,[100,130,132],{"class":131},"sAdtL","  setTimeout",[100,134,135],{"class":110},"(() ",[100,137,138],{"class":106},"=>",[100,140,141],{"class":110}," {\n",[100,143,145,149,152,156,158,162,165,169],{"class":102,"line":144},3,[100,146,148],{"class":147},"s7GmK","    wrapper",[100,150,151],{"class":110},".",[100,153,155],{"class":154},"s2QsP","style",[100,157,151],{"class":110},[100,159,161],{"class":160},"sJa8x","transition",[100,163,164],{"class":118}," =",[100,166,168],{"class":167},"sDhpE"," \"none\"",[100,170,171],{"class":110},";\n",[100,173,175,178,180,184],{"class":102,"line":174},4,[100,176,177],{"class":114},"    scrollIndex",[100,179,164],{"class":118},[100,181,183],{"class":182},"sAGMh"," 0",[100,185,171],{"class":110},[100,187,189,191,193,195,197,200,202,205,209,211,214,217,220,223],{"class":102,"line":188},5,[100,190,148],{"class":147},[100,192,151],{"class":110},[100,194,155],{"class":154},[100,196,151],{"class":110},[100,198,199],{"class":160},"transform",[100,201,164],{"class":118},[100,203,204],{"class":167}," `translateY(-",[100,206,208],{"class":207},"sAOjX","${",[100,210,115],{"class":114},[100,212,213],{"class":118}," *",[100,215,216],{"class":114}," itemHeight",[100,218,219],{"class":207},"}",[100,221,222],{"class":167},"px)`",[100,224,171],{"class":110},[100,226,228],{"class":102,"line":227},6,[100,229,230],{"emptyLinePlaceholder":47},"\n",[100,232,234,237,239,241],{"class":102,"line":233},7,[100,235,236],{"class":131},"    requestAnimationFrame",[100,238,135],{"class":110},[100,240,138],{"class":106},[100,242,141],{"class":110},[100,244,246,249,251,253,255,257,259,262],{"class":102,"line":245},8,[100,247,248],{"class":147},"      wrapper",[100,250,151],{"class":110},[100,252,155],{"class":154},[100,254,151],{"class":110},[100,256,161],{"class":160},[100,258,164],{"class":118},[100,260,261],{"class":167}," \"transform 0.5s cubic-bezier(0.25, 0.1, 0.25, 1)\"",[100,263,171],{"class":110},[100,265,267],{"class":102,"line":266},9,[100,268,269],{"class":110},"    });\n",[100,271,273,276,279],{"class":102,"line":272},10,[100,274,275],{"class":110},"  }, ",[100,277,278],{"class":182},"500",[100,280,281],{"class":110},");\n",[100,283,285],{"class":102,"line":284},11,[100,286,287],{"class":110},"}\n",[15,289,290,291,294],{},"The requirement was to implement an ",[19,292,293],{},"infinite vertical scrolling"," title list. Three titles are shown at a time; every 2 seconds, the list scrolls up as a groupâ€”the top item exits view, and a new item enters from below (again, the demo clarifies this visually).",[15,296,297,298,300],{},"When reaching the bottom, we disable CSS transitions, instantly relocate (",[31,299,199],{},") the wrapper back to the â€œtopâ€ of the logical loop (i.e., visually reset to the same three titles), then re-enable transitionsâ€”creating a seamless infinite loop illusion.",[15,302,303,304,307,308,151],{},"But hereâ€™s the twist: even though we explicitly set ",[31,305,306],{},"transition: none",", the jump ",[19,309,310],{},"still exhibited a transition animation",[15,312,313],{},"Frankly, this was the most despair-inducing bug in my short dev career. Not only was the behavior seemingly supernatural, but searching online felt hopelessâ€”I didnâ€™t even know how to phrase the issue!",[15,315,316],{},[52,317],{"alt":318,"src":319},"This is Xiao Maicha, the senior who got me into frontend development","https://static.031130.xyz/uploads/2025/06/08/475a61b332454.webp",[15,321,322],{},"Out of desperation, I fed the code to ChatGPT-4oâ€”and got a lifeline:",[65,324,325,344],{},[15,326,327,328,331,332,335,336,339,340,343],{},"The phenomenon you describe â€” â€œ",[60,329,330],{},"a jarring upward jump on the 9th scroll",", which ",[60,333,334],{},"disappears when DevTools is open","â€ â€” is almost certainly due to ",[60,337,338],{},"frame skipping"," (frame rate fluctuations) or ",[60,341,342],{},"timer precision issues"," in the browserâ€™s rendering pipeline.",[15,345,346,347,350,351,353,354,357,358,361,362,365],{},"Such bugs commonly arise when combining ",[31,348,349],{},"setInterval","-driven animation with improperly timed style switches (e.g., ",[31,352,161],{}," toggles), causing ",[19,355,356],{},"transition frame skips",". Opening DevTools often ",[60,359,360],{},"forces frame redraws"," or ",[60,363,364],{},"increases timer resolution",", thereby masking the issue.",[10,367,369,370,373],{"id":368},"great-news-requestanimationframe-to-the-rescue","Great News: ",[31,371,372],{},"requestAnimationFrame"," to the Rescue! ðŸŽ‰",[65,375,376,384],{},[15,377,378,383],{},[60,379,380],{},[31,381,382],{},"window.requestAnimationFrame()"," tells the browser you wish to perform an animation and requests that the browser call a specified function to update an animation before the next repaint.",[15,385,386],{},"â€” MDN",[15,388,389],{},"Hereâ€™s the fix suggested by GPTâ€”simple yet highly effective:",[91,391,395],{"className":392,"code":393,"language":394,"meta":96,"style":96},"language-diff shiki shiki-themes one-light one-dark-pro","if (scrollIndex >= groupLength) {\n  setTimeout(() => {\n    wrapper.style.transition = \"none\";\n    scrollIndex = 0;\n    wrapper.style.transform = `translateY(-${scrollIndex * itemHeight}px)`;\n\n    requestAnimationFrame(() => {\n+     requestAnimationFrame(() => {\n        wrapper.style.transition = \"transform 0.5s cubic-bezier(0.25, 0.1, 0.25, 1)\";\n+     });\n    });\n  }, 500);\n}\n","diff",[31,396,397,402,407,412,417,422,426,431,436,441,446,450,456],{"__ignoreMap":96},[100,398,399],{"class":102,"line":103},[100,400,401],{"class":110},"if (scrollIndex >= groupLength) {\n",[100,403,404],{"class":102,"line":128},[100,405,406],{"class":110},"  setTimeout(() => {\n",[100,408,409],{"class":102,"line":144},[100,410,411],{"class":110},"    wrapper.style.transition = \"none\";\n",[100,413,414],{"class":102,"line":174},[100,415,416],{"class":110},"    scrollIndex = 0;\n",[100,418,419],{"class":102,"line":188},[100,420,421],{"class":110},"    wrapper.style.transform = `translateY(-${scrollIndex * itemHeight}px)`;\n",[100,423,424],{"class":102,"line":227},[100,425,230],{"emptyLinePlaceholder":47},[100,427,428],{"class":102,"line":233},[100,429,430],{"class":110},"    requestAnimationFrame(() => {\n",[100,432,433],{"class":102,"line":245},[100,434,435],{"class":167},"+     requestAnimationFrame(() => {\n",[100,437,438],{"class":102,"line":266},[100,439,440],{"class":110},"        wrapper.style.transition = \"transform 0.5s cubic-bezier(0.25, 0.1, 0.25, 1)\";\n",[100,442,443],{"class":102,"line":272},[100,444,445],{"class":167},"+     });\n",[100,447,448],{"class":102,"line":284},[100,449,269],{"class":110},[100,451,453],{"class":102,"line":452},12,[100,454,455],{"class":110},"  }, 500);\n",[100,457,459],{"class":102,"line":458},13,[100,460,287],{"class":110},[15,462,463,464,466],{},"If nested ",[31,465,372],{}," calls feel confusing, hereâ€™s an equivalentâ€”but clearerâ€”version:",[91,468,470],{"className":93,"code":469,"language":95,"meta":96,"style":96},"if (scrollIndex >= groupLength) {\n  setTimeout(() => {\n    scrollIndex = 0;\n\n    requestAnimationFrame(() => {\n      // Frame 1: Apply instant jump (no transition)\n      wrapper.style.transition = \"none\";\n      wrapper.style.transform = `translateY(-${scrollIndex * itemHeight}px)`;\n\n      // Enqueue next frame\n      requestAnimationFrame(() => {\n        // Frame 2: Re-enable smooth transition\n        wrapper.style.transition = \"transform 0.5s cubic-bezier(0.25, 0.1, 0.25, 1)\";\n      });\n    });\n  }, 500);\n}\n",[31,471,472,486,496,506,510,520,526,544,574,578,583,594,599,618,624,629,638],{"__ignoreMap":96},[100,473,474,476,478,480,482,484],{"class":102,"line":103},[100,475,107],{"class":106},[100,477,111],{"class":110},[100,479,115],{"class":114},[100,481,119],{"class":118},[100,483,122],{"class":114},[100,485,125],{"class":110},[100,487,488,490,492,494],{"class":102,"line":128},[100,489,132],{"class":131},[100,491,135],{"class":110},[100,493,138],{"class":106},[100,495,141],{"class":110},[100,497,498,500,502,504],{"class":102,"line":144},[100,499,177],{"class":114},[100,501,164],{"class":118},[100,503,183],{"class":182},[100,505,171],{"class":110},[100,507,508],{"class":102,"line":174},[100,509,230],{"emptyLinePlaceholder":47},[100,511,512,514,516,518],{"class":102,"line":188},[100,513,236],{"class":131},[100,515,135],{"class":110},[100,517,138],{"class":106},[100,519,141],{"class":110},[100,521,522],{"class":102,"line":227},[100,523,525],{"class":524},"sW2Sy","      // Frame 1: Apply instant jump (no transition)\n",[100,527,528,530,532,534,536,538,540,542],{"class":102,"line":233},[100,529,248],{"class":147},[100,531,151],{"class":110},[100,533,155],{"class":154},[100,535,151],{"class":110},[100,537,161],{"class":160},[100,539,164],{"class":118},[100,541,168],{"class":167},[100,543,171],{"class":110},[100,545,546,548,550,552,554,556,558,560,562,564,566,568,570,572],{"class":102,"line":245},[100,547,248],{"class":147},[100,549,151],{"class":110},[100,551,155],{"class":154},[100,553,151],{"class":110},[100,555,199],{"class":160},[100,557,164],{"class":118},[100,559,204],{"class":167},[100,561,208],{"class":207},[100,563,115],{"class":114},[100,565,213],{"class":118},[100,567,216],{"class":114},[100,569,219],{"class":207},[100,571,222],{"class":167},[100,573,171],{"class":110},[100,575,576],{"class":102,"line":266},[100,577,230],{"emptyLinePlaceholder":47},[100,579,580],{"class":102,"line":272},[100,581,582],{"class":524},"      // Enqueue next frame\n",[100,584,585,588,590,592],{"class":102,"line":284},[100,586,587],{"class":131},"      requestAnimationFrame",[100,589,135],{"class":110},[100,591,138],{"class":106},[100,593,141],{"class":110},[100,595,596],{"class":102,"line":452},[100,597,598],{"class":524},"        // Frame 2: Re-enable smooth transition\n",[100,600,601,604,606,608,610,612,614,616],{"class":102,"line":458},[100,602,603],{"class":147},"        wrapper",[100,605,151],{"class":110},[100,607,155],{"class":154},[100,609,151],{"class":110},[100,611,161],{"class":160},[100,613,164],{"class":118},[100,615,261],{"class":167},[100,617,171],{"class":110},[100,619,621],{"class":102,"line":620},14,[100,622,623],{"class":110},"      });\n",[100,625,627],{"class":102,"line":626},15,[100,628,269],{"class":110},[100,630,632,634,636],{"class":102,"line":631},16,[100,633,275],{"class":110},[100,635,278],{"class":182},[100,637,281],{"class":110},[100,639,641],{"class":102,"line":640},17,[100,642,287],{"class":110},[15,644,645,646,649,650,652,653,655,656,659,660,662],{},"The core idea: we must ",[19,647,648],{},"guarantee"," that setting the new ",[31,651,199],{}," (the â€œteleportâ€) and re-enabling ",[31,654,161],{}," happen in ",[19,657,658],{},"separate animation frames",". Two nested ",[31,661,372],{}," calls ensure exactly that.",[43,664],{"src":665,"width":45,"height":46,"allowFullScreen":47,"loading":48},"https://static.031130.xyz/demo/scroll-jump-bug-fixed.html",[10,667,669],{"id":668},"taming-the-quantum-state-a-new-skill-for-frontend-developers","Taming the Quantum State: A New Skill for Frontend Developers",[15,671,672,673,675],{},"With double ",[31,674,372],{},", weâ€™ve successfully tamed this â€œquantumâ€ bug. Now, regardless of whether DevTools is open, the animation behaves consistentlyâ€”no more vanishing acts.",[15,677,678,679,683,684,687,688,690],{},"So it turns out: in frontend development, we need not just JavaScript expertiseâ€”",[680,681,682],"del",{},"but perhaps a dash of quantum mechanics, too",". ðŸ˜‰\nNext time you encounter a bug that â€œcollapses upon observationâ€, try this ",[60,685,686],{},"â€œquantum entanglement solutionâ€",": double ",[31,689,372],{},"â€”it might just decohere your bug from a probabilistic â€œquantum stateâ€ into a deterministic â€œclassical stateâ€.",[15,692,693,694,697],{},"And if youâ€™ve battled even weirder bugsâ€”please share! After all, in the universe of code, we never know what exotic form the next bug will take. Perhaps, thatâ€™s precisely where the ",[19,695,696],{},"fun"," of programming lies. ðŸ›âœ¨",[65,699,700],{},[15,701,702],{},[19,703,704],{},"This article was co-authored with assistance from ChatGPT and DeepSeekâ€”but the bug? Sadly, 100% real (and tearful).",[10,706,708],{"id":707},"see-also","See Also",[710,711,712,720,730],"ul",{},[713,714,715],"li",{},[36,716,719],{"href":717,"rel":718},"https://en.wikipedia.org/wiki/Observer_effect_(physics)",[40],"Observer Effect â€” Wikipedia",[713,721,722],{},[36,723,726,729],{"href":724,"rel":725},"https://developer.mozilla.org/en-US/docs/Web/API/Window/requestAnimationFrame",[40],[31,727,728],{},"Window.requestAnimationFrame()"," â€” MDN Web Docs",[713,731,732,737],{},[36,733,736],{"href":734,"rel":735},"https://www.ruanyifeng.com/blog/2015/09/web-page-performance-in-depth.html",[40],"A Deep Dive into Web Page Performance â€” Ruan Yifengâ€™s Blog","\"",[155,739,740],{},"html pre.shiki code .sLKXg, html code.shiki .sLKXg{--shiki-default:#A626A4;--shiki-dark:#C678DD}html pre.shiki code .s5ixo, html code.shiki .s5ixo{--shiki-default:#383A42;--shiki-dark:#ABB2BF}html pre.shiki code .sz0mV, html code.shiki .sz0mV{--shiki-default:#383A42;--shiki-dark:#E06C75}html pre.shiki code .s_Sar, html code.shiki .s_Sar{--shiki-default:#0184BC;--shiki-dark:#56B6C2}html pre.shiki code .sAdtL, html code.shiki .sAdtL{--shiki-default:#4078F2;--shiki-dark:#61AFEF}html pre.shiki code .s7GmK, html code.shiki .s7GmK{--shiki-default:#383A42;--shiki-dark:#E5C07B}html pre.shiki code .s2QsP, html code.shiki .s2QsP{--shiki-default:#E45649;--shiki-dark:#E5C07B}html pre.shiki code .sJa8x, html code.shiki .sJa8x{--shiki-default:#E45649;--shiki-dark:#E06C75}html pre.shiki code .sDhpE, html code.shiki .sDhpE{--shiki-default:#50A14F;--shiki-dark:#98C379}html pre.shiki code .sAGMh, html code.shiki .sAGMh{--shiki-default:#986801;--shiki-dark:#D19A66}html pre.shiki code .sAOjX, html code.shiki .sAOjX{--shiki-default:#CA1243;--shiki-dark:#C678DD}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .sW2Sy, html code.shiki .sW2Sy{--shiki-default:#A0A1A7;--shiki-default-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic}",{"title":96,"searchDepth":128,"depth":128,"links":742},[743,744,745,747,748],{"id":12,"depth":128,"text":13},{"id":85,"depth":128,"text":86},{"id":368,"depth":128,"text":746},"Great News: requestAnimationFrame to the Rescue! ðŸŽ‰",{"id":668,"depth":128,"text":669},{"id":707,"depth":128,"text":708},"2025-06-08 01:22:13","md","en",{"index_img":753},"https://static.031130.xyz/uploads/2025/06/08/2798756067653.webp","/2025/06/08/front-end-bug-gone-when-open-devtool","---\ntitle: Quantum Mechanics in Frontend Development â€” The Bug That Vanishes as Soon as You Open F12\ndate: 2025-06-08 01:22:13\nsticky:\nindex_img: https://static.031130.xyz/uploads/2025/06/08/2798756067653.webp\ntags:\n- Web\n- HTML\n- CSS\n- JavaScript\n- Debug\n---\n\n## First Observation of the Frontend \"Quantum State\" Phenomenon\n\nThis story sounds bizarreâ€”even surreal. Half a month ago, while happily coding at my desk (with hotpot and songs in the background ðŸ²ðŸŽ¤), I stumbled upon a truly uncanny bug. As a bona fide human software engineer, writing bugs is normalâ€”but this one defied all intuition: the moment I opened DevTools (F12) to inspect the relevant DOM structure, the bug *vanished*. Close DevTools, hit Ctrl+F5 to hard-refresh, and *bam*â€”the bug reappeared.\n\nBelow is a live demo embedded via `\u003Ciframe>`:\n[demo](https://static.031130.xyz/demo/scroll-jump-bug.html)\n\n\u003Ciframe src=\"https://static.031130.xyz/demo/scroll-jump-bug.html\" width=\"100%\" height=\"500\" allowfullscreen loading=\"lazy\">\u003C/iframe>\n\n![â€œHow to Observeâ€ Guide](https://static.031130.xyz/uploads/2025/06/08/65620d31fce6f.webp)\n\nThis bug left me utterly bewildered. Iâ€™m no physicistâ€”why did **observer effect** from quantum mechanics show up in my frontend code?! ðŸ¤¯\n\n> **Observer effect**: the act of *observation* inevitably influences the phenomenon being observed.\n>\n> In quantum experimentsâ€”for example, to measure an electronâ€™s velocityâ€”you might fire two photons at it over a time interval. But the first photon already disturbs the electronâ€™s motion, making the original velocity impossible to determine (Heisenbergâ€™s uncertainty principle). Similarly, rapidly observing a decaying particle can apparently slow its decay rate.\n>\n> â€” Wikipedia\n\n## Quantum Fog âŒ â†’ Browser Mechanics âœ…\n\nLetâ€™s briefly examine the problematic code snippet from the demo:\n\n```javascript\nif (scrollIndex >= groupLength) {\n  setTimeout(() => {\n    wrapper.style.transition = \"none\";\n    scrollIndex = 0;\n    wrapper.style.transform = `translateY(-${scrollIndex * itemHeight}px)`;\n\n    requestAnimationFrame(() => {\n      wrapper.style.transition = \"transform 0.5s cubic-bezier(0.25, 0.1, 0.25, 1)\";\n    });\n  }, 500);\n}\n```\n\nThe requirement was to implement an *infinite vertical scrolling* title list. Three titles are shown at a time; every 2 seconds, the list scrolls up as a groupâ€”the top item exits view, and a new item enters from below (again, the demo clarifies this visually).\n\nWhen reaching the bottom, we disable CSS transitions, instantly relocate (`transform`) the wrapper back to the â€œtopâ€ of the logical loop (i.e., visually reset to the same three titles), then re-enable transitionsâ€”creating a seamless infinite loop illusion.\n\nBut hereâ€™s the twist: even though we explicitly set `transition: none`, the jump *still exhibited a transition animation*.\n\nFrankly, this was the most despair-inducing bug in my short dev career. Not only was the behavior seemingly supernatural, but searching online felt hopelessâ€”I didnâ€™t even know how to phrase the issue!\n\n![This is Xiao Maicha, the senior who got me into frontend development](https://static.031130.xyz/uploads/2025/06/08/475a61b332454.webp)\n\nOut of desperation, I fed the code to ChatGPT-4oâ€”and got a lifeline:\n\n> The phenomenon you describe â€” â€œ**a jarring upward jump on the 9th scroll**, which **disappears when DevTools is open**â€ â€” is almost certainly due to **frame skipping** (frame rate fluctuations) or **timer precision issues** in the browserâ€™s rendering pipeline.\n>\n> Such bugs commonly arise when combining `setInterval`-driven animation with improperly timed style switches (e.g., `transition` toggles), causing *transition frame skips*. Opening DevTools often **forces frame redraws** or **increases timer resolution**, thereby masking the issue.\n\n## Great News: `requestAnimationFrame` to the Rescue! ðŸŽ‰\n\n> **`window.requestAnimationFrame()`** tells the browser you wish to perform an animation and requests that the browser call a specified function to update an animation before the next repaint.\n>\n> â€” MDN\n\nHereâ€™s the fix suggested by GPTâ€”simple yet highly effective:\n\n```diff\nif (scrollIndex >= groupLength) {\n  setTimeout(() => {\n    wrapper.style.transition = \"none\";\n    scrollIndex = 0;\n    wrapper.style.transform = `translateY(-${scrollIndex * itemHeight}px)`;\n\n    requestAnimationFrame(() => {\n+     requestAnimationFrame(() => {\n        wrapper.style.transition = \"transform 0.5s cubic-bezier(0.25, 0.1, 0.25, 1)\";\n+     });\n    });\n  }, 500);\n}\n```\n\nIf nested `requestAnimationFrame` calls feel confusing, hereâ€™s an equivalentâ€”but clearerâ€”version:\n\n```javascript\nif (scrollIndex >= groupLength) {\n  setTimeout(() => {\n    scrollIndex = 0;\n\n    requestAnimationFrame(() => {\n      // Frame 1: Apply instant jump (no transition)\n      wrapper.style.transition = \"none\";\n      wrapper.style.transform = `translateY(-${scrollIndex * itemHeight}px)`;\n\n      // Enqueue next frame\n      requestAnimationFrame(() => {\n        // Frame 2: Re-enable smooth transition\n        wrapper.style.transition = \"transform 0.5s cubic-bezier(0.25, 0.1, 0.25, 1)\";\n      });\n    });\n  }, 500);\n}\n```\n\nThe core idea: we must *guarantee* that setting the new `transform` (the â€œteleportâ€) and re-enabling `transition` happen in *separate animation frames*. Two nested `requestAnimationFrame` calls ensure exactly that.\n\n\u003Ciframe src=\"https://static.031130.xyz/demo/scroll-jump-bug-fixed.html\" width=\"100%\" height=\"500\" allowfullscreen loading=\"lazy\">\u003C/iframe>\n\n## Taming the Quantum State: A New Skill for Frontend Developers\n\nWith double `requestAnimationFrame`, weâ€™ve successfully tamed this â€œquantumâ€ bug. Now, regardless of whether DevTools is open, the animation behaves consistentlyâ€”no more vanishing acts.\n\nSo it turns out: in frontend development, we need not just JavaScript expertiseâ€”~~but perhaps a dash of quantum mechanics, too~~. ðŸ˜‰\nNext time you encounter a bug that â€œcollapses upon observationâ€, try this **â€œquantum entanglement solutionâ€**: double `requestAnimationFrame`â€”it might just decohere your bug from a probabilistic â€œquantum stateâ€ into a deterministic â€œclassical stateâ€.\n\nAnd if youâ€™ve battled even weirder bugsâ€”please share! After all, in the universe of code, we never know what exotic form the next bug will take. Perhaps, thatâ€™s precisely where the *fun* of programming lies. ðŸ›âœ¨\n\n> *This article was co-authored with assistance from ChatGPT and DeepSeekâ€”but the bug? Sadly, 100% real (and tearful).*\n\n## See Also\n- [Observer Effect â€” Wikipedia](https://en.wikipedia.org/wiki/Observer_effect_(physics))\n- [`Window.requestAnimationFrame()` â€” MDN Web Docs](https://developer.mozilla.org/en-US/docs/Web/API/Window/requestAnimationFrame)\n- [A Deep Dive into Web Page Performance â€” Ruan Yifengâ€™s Blog](https://www.ruanyifeng.com/blog/2015/09/web-page-performance-in-depth.html)\"\n",{"title":5,"description":96},"posts/en/front-end-bug-gone-when-open-devtool",false,[760,761,762,763,764],"Web","HTML","CSS","JavaScript","Debug","iLSP4x-tzYQRmGqxCqaeDtNWId3XkWH_tmKH1fT4hA4",[767,772],{"title":768,"path":769,"stem":770,"date":771,"lang":751,"children":-1},"Migration from node-sass to dart-sass: A Troubleshooting Chronicle","/2025/07/05/node-sass-migration-to-dart-sass","posts/en/node-sass-migration-to-dart-sass","2025-07-05 17:57:02",null,1763635477487]