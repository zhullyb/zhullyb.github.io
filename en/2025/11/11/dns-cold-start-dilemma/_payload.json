[{"data":1,"prerenderedAt":411},["ShallowReactive",2],{"post-2025-11-11-dns-cold-start-dilemma-en":3,"surround-2025-11-11-dns-cold-start-dilemma-en":404,"randomIndex/en/2025/11/11/dns-cold-start-dilemma/":134},{"id":4,"title":5,"body":6,"date":391,"description":12,"extension":392,"lang":393,"meta":394,"navigation":113,"path":395,"rawbody":396,"seo":397,"stem":398,"sticky":399,"tags":400,"__hash__":403},"posts/posts/en/dns-cold-start-dilemma.md","DNS Cold Start: The \"Stone of Sisyphus\" for Small Sites",{"type":7,"value":8,"toc":380},"minimark",[9,13,18,21,61,228,239,243,246,249,252,255,258,273,276,279,283,286,289,303,306,310,313,318,321,324,327,331,334,337,344,348,351,354,358,376],[10,11,12],"p",{},"When we talk about website performance, we usually focus on front-end rendering, lazy loading of resources, server response time (TTFB), and so on. However, before the user's browser can even begin to request content, there is a crucial part that is rarely mentioned in performance optimization: DNS resolution. For obscure small sites, a \"DNS Cache Miss,\" or what I call a \"DNS Cold Start,\" can become an unavoidable performance bottleneck. This is the \"Stone of Sisyphus\" mentioned in the title.",[14,15,17],"h2",{"id":16},"the-myths-metaphor-the-long-journey-of-dns-resolution","The Myth's Metaphor: The Long Journey of DNS Resolution",[10,19,20],{},"To understand the weight of this \"stone,\" we must review the complete path of DNS resolution. This isn't a simple lookup, but a global relay race:",[22,23,24,32,38,49,55],"ol",{},[25,26,27,31],"li",{},[28,29,30],"strong",{},"Starting Point: Public DNS Server"," — A user sends a request, and the public DNS server tries to find the answer in its cache.",[25,33,34,37],{},[28,35,36],{},"The First \"Push\": Root Servers"," — Cache Miss. The public DNS server is directed to one of the 13 root server groups worldwide.",[25,39,40,43,44,48],{},[28,41,42],{},"The Second Leg: TLD Servers"," — The root server points to the Top-Level Domain (TLD) server for the specific suffix (like ",[45,46,47],"code",{},".com",").",[25,50,51,54],{},[28,52,53],{},"The Third Leg: Authoritative Servers"," — The TLD server points to the domain's final \"steward\"—the Authoritative DNS Server.",[25,56,57,60],{},[28,58,59],{},"The Finish Line:"," The authoritative server returns the final IP address, which is then returned to the user by the public DNS server.",[62,63,68],"pre",{"className":64,"code":65,"language":66,"meta":67,"style":67},"language-mermaid shiki shiki-themes one-light one-dark-pro","sequenceDiagram\n    participant User as User/Browser\n    participant Local as Local DNS\u003Cbr>Recursive Resolver\n    participant Root as Root Server\n    participant TLD as TLD Server\u003Cbr>(.com, .org, etc.)\n    participant Auth as Authoritative DNS Server\n\n    Note over User,Auth: Full DNS Recursive Query Flow\n\n    User->>Local: 1. Query domain\u003Cbr>[www.example.com](https://www.example.com)\n    Note over Local: Check cache\u003Cbr>Record not found\n\n    Local->>Root: 2. Query for .com TLD server\n    Root-->>Local: 3. Return .com TLD server address\n\n    Local->>TLD: 4. Query for example.com authoritative server\n    TLD-->>Local: 5. Return example.com authoritative server address\n\n    Local->>Auth: 6. Query for [www.example.com](https://www.example.com) A record\n    Auth-->>Local: 7. Return IP address (e.g., 1.1.1.1)\n\n    Note over Local: Cache result\u003Cbr>(based on TTL)\n\n    Local-->>User: 8. Return final IP address\n\n    Note over User,Auth: Subsequent process\n    User->>Auth: 9. Establish TCP connection with IP\u003Cbr>Start HTTP request\n","mermaid","",[45,69,70,78,84,90,96,102,108,115,121,126,132,138,143,149,155,160,166,172,177,183,189,194,200,205,211,216,222],{"__ignoreMap":67},[71,72,75],"span",{"class":73,"line":74},"line",1,[71,76,77],{},"sequenceDiagram\n",[71,79,81],{"class":73,"line":80},2,[71,82,83],{},"    participant User as User/Browser\n",[71,85,87],{"class":73,"line":86},3,[71,88,89],{},"    participant Local as Local DNS\u003Cbr>Recursive Resolver\n",[71,91,93],{"class":73,"line":92},4,[71,94,95],{},"    participant Root as Root Server\n",[71,97,99],{"class":73,"line":98},5,[71,100,101],{},"    participant TLD as TLD Server\u003Cbr>(.com, .org, etc.)\n",[71,103,105],{"class":73,"line":104},6,[71,106,107],{},"    participant Auth as Authoritative DNS Server\n",[71,109,111],{"class":73,"line":110},7,[71,112,114],{"emptyLinePlaceholder":113},true,"\n",[71,116,118],{"class":73,"line":117},8,[71,119,120],{},"    Note over User,Auth: Full DNS Recursive Query Flow\n",[71,122,124],{"class":73,"line":123},9,[71,125,114],{"emptyLinePlaceholder":113},[71,127,129],{"class":73,"line":128},10,[71,130,131],{},"    User->>Local: 1. Query domain\u003Cbr>[www.example.com](https://www.example.com)\n",[71,133,135],{"class":73,"line":134},11,[71,136,137],{},"    Note over Local: Check cache\u003Cbr>Record not found\n",[71,139,141],{"class":73,"line":140},12,[71,142,114],{"emptyLinePlaceholder":113},[71,144,146],{"class":73,"line":145},13,[71,147,148],{},"    Local->>Root: 2. Query for .com TLD server\n",[71,150,152],{"class":73,"line":151},14,[71,153,154],{},"    Root-->>Local: 3. Return .com TLD server address\n",[71,156,158],{"class":73,"line":157},15,[71,159,114],{"emptyLinePlaceholder":113},[71,161,163],{"class":73,"line":162},16,[71,164,165],{},"    Local->>TLD: 4. Query for example.com authoritative server\n",[71,167,169],{"class":73,"line":168},17,[71,170,171],{},"    TLD-->>Local: 5. Return example.com authoritative server address\n",[71,173,175],{"class":73,"line":174},18,[71,176,114],{"emptyLinePlaceholder":113},[71,178,180],{"class":73,"line":179},19,[71,181,182],{},"    Local->>Auth: 6. Query for [www.example.com](https://www.example.com) A record\n",[71,184,186],{"class":73,"line":185},20,[71,187,188],{},"    Auth-->>Local: 7. Return IP address (e.g., 1.1.1.1)\n",[71,190,192],{"class":73,"line":191},21,[71,193,114],{"emptyLinePlaceholder":113},[71,195,197],{"class":73,"line":196},22,[71,198,199],{},"    Note over Local: Cache result\u003Cbr>(based on TTL)\n",[71,201,203],{"class":73,"line":202},23,[71,204,114],{"emptyLinePlaceholder":113},[71,206,208],{"class":73,"line":207},24,[71,209,210],{},"    Local-->>User: 8. Return final IP address\n",[71,212,214],{"class":73,"line":213},25,[71,215,114],{"emptyLinePlaceholder":113},[71,217,219],{"class":73,"line":218},26,[71,220,221],{},"    Note over User,Auth: Subsequent process\n",[71,223,225],{"class":73,"line":224},27,[71,226,227],{},"    User->>Auth: 9. Establish TCP connection with IP\u003Cbr>Start HTTP request\n",[10,229,230,231,234,235,238],{},"For a ",[28,232,233],{},"first-time"," or ",[28,236,237],{},"long-unvisited"," request, this process means at least 4 network round-trips (RTT), and even more in cases involving CNAMEs. For large websites with perfect caching, this stone may have already been pushed to the hilltop by someone else. But for a small site, it is always at the foot of the hill, waiting for its Sisyphus.",[14,240,242],{"id":241},"a-multiverse-the-mirror-maze-of-anycast","A Multiverse: The Mirror Maze of Anycast",[10,244,245],{},"\"Since the cost of a DNS cold start is so high, can I use a script to periodically visit my own site to 'warm up' the public DNS cache in advance?\" — This was a solution I once envisioned.",[10,247,248],{},"However, this idea is often futile under the Anycast architecture of the modern internet.",[10,250,251],{},"The core concept of Anycast is: the same IP address exists at multiple global nodes simultaneously, and user requests are routed to the \"closest\" or \"most optimal network path\" node.",[10,253,254],{},"This means that public DNS servers like Google DNS (8.8.8.8), Cloudflare DNS (1.1.1.1), AliDNS (223.5.5.5), and Tencent DNS (119.29.29.29) are not backed by a single, centralized server, but a cluster of nodes distributed worldwide, routed dynamically.",[10,256,257],{},"Thus, the problem arises:",[259,260,261,264,267],"ul",{},[25,262,263],{},"The pre-warming script I run in Shanghai might hit the Shanghai node of 223.5.5.5;",[25,265,266],{},"But a visitor from Beijing will be routed to the Beijing node of 223.5.5.5;",[25,268,269,270],{},"The caches of these two nodes are ",[28,271,272],{},"independent and not shared with each other.",[10,274,275],{},"From a webmaster's perspective, the DNS cache is no longer a predictable entity but has splintered into a \"mirror maze\" of geographically isolated, ever-changing fragments.",[10,277,278],{},"Each visitor is at the base of a different hill, pushing their own stone, as if there are thousands of Sisyphuses in the world, walking their own paths alone.",[14,280,282],{"id":281},"uncontrollable-caching-and-the-normalization-of-cold-starts","Uncontrollable Caching and the \"Normalization\" of Cold Starts",[10,284,285],{},"This also explains why even if a small site is visited regularly by a script, real visitors might still experience significant DNS latency. Because \"pre-warming\" is only locally effective—it warms the cache of one Anycast node, not the entire network. And when the TTL expires or the cache is cleared by the public DNS server's algorithm (like LRU), this warmth quietly dissipates.",[10,287,288],{},"From a macro perspective, this traps \"low-traffic sites\" in a kind of fatalistic loop:",[22,290,291,294,297,300],{},[25,292,293],{},"Due to low traffic, cache hits are rare;",[25,295,296],{},"Due to cache misses, resolution time is high;",[25,298,299],{},"Due to high resolution time, first-paint performance is poor, and users visit less;",[25,301,302],{},"Due to fewer user visits, the cache is even harder to hit.",[10,304,305],{},"The cold start is no longer an occasional \"accident,\" but a passive \"new normal.\"",[14,307,309],{"id":308},"can-we-make-the-stone-lighter-strategies-to-mitigate-cold-start-impact","Can We Make the Stone Lighter? — Strategies to Mitigate Cold Start Impact",[10,311,312],{},"The predicament of Sisyphus seems unsolvable, but we are not entirely powerless. While we cannot completely eliminate the DNS cold start, we can significantly reduce the weight of this stone through a series of strategies and shorten the time it takes to be pushed back up the hill after each time it rolls down.",[314,315,317],"h3",{"id":316},"the-art-of-the-trade-off-adjusting-dns-ttl-time-to-live","The Art of the Trade-off: Adjusting DNS TTL (Time-To-Live)",[10,319,320],{},"TTL (Time-To-Live) is a critical value in a DNS record. It tells recursive resolvers (like public DNS, local caches) how long they can cache a record, although they might still be evicted by an LRU algorithm.",[10,322,323],{},"Lengthening the TTL can effectively increase the cache hit rate, reduce DNS cold starts, and keep Sisyphus's stone at the top of the hill for as long as possible.",[10,325,326],{},"But lengthening the TTL comes at the cost of flexibility: if you need to change the IP address for your domain for any reason, an overly long TTL might cause visitors to retrieve a stale IP address for a long time.",[314,328,330],{"id":329},"choosing-a-faster-messenger-using-the-right-authoritative-dns-server","Choosing a Faster \"Messenger\": Using the Right Authoritative DNS Server",[10,332,333],{},"The \"last mile\" of DNS resolution—the time it takes to get from the public DNS server to your authoritative DNS server—is equally critical. If the Nameserver service your domain uses responds slowly, has few global nodes, or is too far from the public DNS server the visitor is querying, then the entire resolution chain will still be slowed down by this final link, even if the user's public DNS node is nearby.",[10,335,336],{},"If I were writing this blog post in English, I would just say to switch your Nameserver to a top-tier provider like Cloudflare or Google, and be done with it. These large companies offer free authoritative DNS hosting, have numerous nodes around the world, and are very professional and trustworthy in this regard.",[10,338,339,340,343],{},"But I am currently using Simplified Chinese. According to my blog's statistics, most of my readers are from mainland China, and the public DNS servers they query are most likely also deployed in mainland China. Whereas Cloudflare/Google Cloud DNS have no authoritative DNS server nodes in mainland China, which will slow things down. So ",[28,341,342],{},"if your visitors are primarily from mainland China, you might want to try AliYun (Alibaba Cloud) or Dnspod",". Their main authoritative DNS server nodes are within mainland China, which, in theory, can reduce the communication time between the public DNS server and the authoritative DNS server.",[14,345,347],{"id":346},"conclusion-the-stone-pusher","Conclusion: The Stone Pusher",[10,349,350],{},"There has never been a perfect solution to the problem of DNS cold starts. It's like a fated \"poetry of latency\" within the internet's architecture—each visitor starts from their own network topology, pushing their own stone step-by-step along an invisible path, until they reach the summit of your server, in exchange for the first pixel lighting up on their screen.",[10,352,353],{},"For small sites, this may be the weight of destiny; but to understand it, optimize it, and monitor it, is how we, on this long uphill road, polish the stone's edges to make them smoother.",[14,355,357],{"id":356},"see-also","See Also",[259,359,360,369],{},[25,361,362],{},[363,364,368],"a",{"href":365,"rel":366},"https://developers.google.com/speed/public-dns/docs/performance",[367],"nofollow","Performance Benefits | Public DNS | Google for Developers",[25,370,371],{},[363,372,375],{"href":373,"rel":374},"https://falconcloud.ae/about/blog/how-do-dns-queries-affect-website-latency/",[367],"How do DNS queries affect website latency? - falconcloud.ae",[377,378,379],"style",{},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":67,"searchDepth":80,"depth":80,"links":381},[382,383,384,385,389,390],{"id":16,"depth":80,"text":17},{"id":241,"depth":80,"text":242},{"id":281,"depth":80,"text":282},{"id":308,"depth":80,"text":309,"children":386},[387,388],{"id":316,"depth":86,"text":317},{"id":329,"depth":86,"text":330},{"id":346,"depth":80,"text":347},{"id":356,"depth":80,"text":357},"2025-11-11","md","en",{},"/2025/11/11/dns-cold-start-dilemma","---\ntitle: 'DNS Cold Start: The \"Stone of Sisyphus\" for Small Sites'\ndate: 2025-11-11\nsticky:\nlang: en\ntags:\n- DNS\n- Network\n---\n\nWhen we talk about website performance, we usually focus on front-end rendering, lazy loading of resources, server response time (TTFB), and so on. However, before the user's browser can even begin to request content, there is a crucial part that is rarely mentioned in performance optimization: DNS resolution. For obscure small sites, a \"DNS Cache Miss,\" or what I call a \"DNS Cold Start,\" can become an unavoidable performance bottleneck. This is the \"Stone of Sisyphus\" mentioned in the title.\n\n## The Myth's Metaphor: The Long Journey of DNS Resolution\n\nTo understand the weight of this \"stone,\" we must review the complete path of DNS resolution. This isn't a simple lookup, but a global relay race:\n\n1.  **Starting Point: Public DNS Server** — A user sends a request, and the public DNS server tries to find the answer in its cache.\n2.  **The First \"Push\": Root Servers** — Cache Miss. The public DNS server is directed to one of the 13 root server groups worldwide.\n3.  **The Second Leg: TLD Servers** — The root server points to the Top-Level Domain (TLD) server for the specific suffix (like `.com`).\n4.  **The Third Leg: Authoritative Servers** — The TLD server points to the domain's final \"steward\"—the Authoritative DNS Server.\n5.  **The Finish Line:** The authoritative server returns the final IP address, which is then returned to the user by the public DNS server.\n\n```mermaid\nsequenceDiagram\n    participant User as User/Browser\n    participant Local as Local DNS\u003Cbr>Recursive Resolver\n    participant Root as Root Server\n    participant TLD as TLD Server\u003Cbr>(.com, .org, etc.)\n    participant Auth as Authoritative DNS Server\n\n    Note over User,Auth: Full DNS Recursive Query Flow\n\n    User->>Local: 1. Query domain\u003Cbr>[www.example.com](https://www.example.com)\n    Note over Local: Check cache\u003Cbr>Record not found\n\n    Local->>Root: 2. Query for .com TLD server\n    Root-->>Local: 3. Return .com TLD server address\n\n    Local->>TLD: 4. Query for example.com authoritative server\n    TLD-->>Local: 5. Return example.com authoritative server address\n\n    Local->>Auth: 6. Query for [www.example.com](https://www.example.com) A record\n    Auth-->>Local: 7. Return IP address (e.g., 1.1.1.1)\n\n    Note over Local: Cache result\u003Cbr>(based on TTL)\n\n    Local-->>User: 8. Return final IP address\n\n    Note over User,Auth: Subsequent process\n    User->>Auth: 9. Establish TCP connection with IP\u003Cbr>Start HTTP request\n```\n\nFor a **first-time** or **long-unvisited** request, this process means at least 4 network round-trips (RTT), and even more in cases involving CNAMEs. For large websites with perfect caching, this stone may have already been pushed to the hilltop by someone else. But for a small site, it is always at the foot of the hill, waiting for its Sisyphus.\n\n## A Multiverse: The Mirror Maze of Anycast\n\n\"Since the cost of a DNS cold start is so high, can I use a script to periodically visit my own site to 'warm up' the public DNS cache in advance?\" — This was a solution I once envisioned.\n\nHowever, this idea is often futile under the Anycast architecture of the modern internet.\n\nThe core concept of Anycast is: the same IP address exists at multiple global nodes simultaneously, and user requests are routed to the \"closest\" or \"most optimal network path\" node.\n\nThis means that public DNS servers like Google DNS (8.8.8.8), Cloudflare DNS (1.1.1.1), AliDNS (223.5.5.5), and Tencent DNS (119.29.29.29) are not backed by a single, centralized server, but a cluster of nodes distributed worldwide, routed dynamically.\n\nThus, the problem arises:\n\n-   The pre-warming script I run in Shanghai might hit the Shanghai node of 223.5.5.5;\n-   But a visitor from Beijing will be routed to the Beijing node of 223.5.5.5;\n-   The caches of these two nodes are **independent and not shared with each other.**\n\nFrom a webmaster's perspective, the DNS cache is no longer a predictable entity but has splintered into a \"mirror maze\" of geographically isolated, ever-changing fragments.\n\nEach visitor is at the base of a different hill, pushing their own stone, as if there are thousands of Sisyphuses in the world, walking their own paths alone.\n\n## Uncontrollable Caching and the \"Normalization\" of Cold Starts\n\nThis also explains why even if a small site is visited regularly by a script, real visitors might still experience significant DNS latency. Because \"pre-warming\" is only locally effective—it warms the cache of one Anycast node, not the entire network. And when the TTL expires or the cache is cleared by the public DNS server's algorithm (like LRU), this warmth quietly dissipates.\n\nFrom a macro perspective, this traps \"low-traffic sites\" in a kind of fatalistic loop:\n\n1.  Due to low traffic, cache hits are rare;\n2.  Due to cache misses, resolution time is high;\n3.  Due to high resolution time, first-paint performance is poor, and users visit less;\n4.  Due to fewer user visits, the cache is even harder to hit.\n\nThe cold start is no longer an occasional \"accident,\" but a passive \"new normal.\"\n\n## Can We Make the Stone Lighter? — Strategies to Mitigate Cold Start Impact\n\nThe predicament of Sisyphus seems unsolvable, but we are not entirely powerless. While we cannot completely eliminate the DNS cold start, we can significantly reduce the weight of this stone through a series of strategies and shorten the time it takes to be pushed back up the hill after each time it rolls down.\n\n### The Art of the Trade-off: Adjusting DNS TTL (Time-To-Live)\n\nTTL (Time-To-Live) is a critical value in a DNS record. It tells recursive resolvers (like public DNS, local caches) how long they can cache a record, although they might still be evicted by an LRU algorithm.\n\nLengthening the TTL can effectively increase the cache hit rate, reduce DNS cold starts, and keep Sisyphus's stone at the top of the hill for as long as possible.\n\nBut lengthening the TTL comes at the cost of flexibility: if you need to change the IP address for your domain for any reason, an overly long TTL might cause visitors to retrieve a stale IP address for a long time.\n\n### Choosing a Faster \"Messenger\": Using the Right Authoritative DNS Server\n\nThe \"last mile\" of DNS resolution—the time it takes to get from the public DNS server to your authoritative DNS server—is equally critical. If the Nameserver service your domain uses responds slowly, has few global nodes, or is too far from the public DNS server the visitor is querying, then the entire resolution chain will still be slowed down by this final link, even if the user's public DNS node is nearby.\n\nIf I were writing this blog post in English, I would just say to switch your Nameserver to a top-tier provider like Cloudflare or Google, and be done with it. These large companies offer free authoritative DNS hosting, have numerous nodes around the world, and are very professional and trustworthy in this regard.\n\nBut I am currently using Simplified Chinese. According to my blog's statistics, most of my readers are from mainland China, and the public DNS servers they query are most likely also deployed in mainland China. Whereas Cloudflare/Google Cloud DNS have no authoritative DNS server nodes in mainland China, which will slow things down. So **if your visitors are primarily from mainland China, you might want to try AliYun (Alibaba Cloud) or Dnspod**. Their main authoritative DNS server nodes are within mainland China, which, in theory, can reduce the communication time between the public DNS server and the authoritative DNS server.\n\n## Conclusion: The Stone Pusher\n\nThere has never been a perfect solution to the problem of DNS cold starts. It's like a fated \"poetry of latency\" within the internet's architecture—each visitor starts from their own network topology, pushing their own stone step-by-step along an invisible path, until they reach the summit of your server, in exchange for the first pixel lighting up on their screen.\n\nFor small sites, this may be the weight of destiny; but to understand it, optimize it, and monitor it, is how we, on this long uphill road, polish the stone's edges to make them smoother.\n\n## See Also\n\n- [Performance Benefits | Public DNS | Google for Developers](https://developers.google.com/speed/public-dns/docs/performance)\n- [How do DNS queries affect website latency? - falconcloud.ae](https://falconcloud.ae/about/blog/how-do-dns-queries-affect-website-latency/)\n",{"title":5,"description":12},"posts/en/dns-cold-start-dilemma",false,[401,402],"DNS","Network","bc7yC7YfwxUJJ4396_EUEp_Xk2O3pvB75nKgN3VxrRE",[405,406],null,{"title":407,"path":408,"stem":409,"date":410,"lang":393,"children":-1},"HTTP/2 Server Push Has Effectively \"Died\" - I Miss It","/2025/11/05/http-2-server-push-is-practically-obsolete","posts/en/http-2-server-push-is-practically-obsolete","2025-11-05",1763579334430]