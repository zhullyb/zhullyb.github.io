[{"data":1,"prerenderedAt":419},["ShallowReactive",2],{"post-2025-05-31-el-image-and-el-table-why-the-fight-and-what-is-a-stacking-context-en":3,"surround-2025-05-31-el-image-and-el-table-why-the-fight-and-what-is-a-stacking-context-en":406,"randomIndex/2025/05/31/el-image-and-el-table-why-the-fight-and-what-is-a-stacking-context/":417,"language-switch-/en/2025/05/31/el-image-and-el-table-why-the-fight-and-what-is-a-stacking-context/-zh":418},{"id":4,"title":5,"body":6,"date":389,"description":390,"extension":391,"lang":392,"meta":393,"navigation":46,"path":394,"rawbody":395,"seo":396,"stem":397,"sticky":398,"tags":399,"__hash__":405},"posts/posts/en/el-image-and-el-table-why-the-fight-and-what-is-a-stacking-context.md","Why Do el-image and el-table Clash? What Is a Stacking Context?",{"type":7,"value":8,"toc":378},"minimark",[9,22,29,32,41,48,64,70,76,81,134,142,147,160,167,186,189,198,201,259,263,271,285,289,299,302,317,333,337,374],[10,11,12,13,17,18,21],"p",{},"This happened during the internal development of Jinghong’s image hosting service. A freshman reported that ",[14,15,16],"code",{},"el-image"," and ",[14,19,20],{},"el-table"," were “clashing.”",[10,23,24],{},[25,26],"img",{"alt":27,"src":28},"Screenshot","https://static.031130.xyz/uploads/2025/05/31/c6674f6f13955.webp",[10,30,31],{},"Demo iframe:",[10,33,34],{},[35,36,40],"a",{"href":37,"rel":38},"https://static.031130.xyz/demo/el-image-el-table-conflict.html",[39],"nofollow","demo",[42,43],"iframe",{"src":37,"width":44,"height":45,"allowFullScreen":46,"loading":47},"100%",500,true,"lazy",[10,49,50,51,53,54,57,58,60,61,63],{},"When I saw that the table behind was showing through the ",[14,52,16],{}," preview overlay, my first reaction was to ask the student to check whether the ",[14,55,56],{},"z-index"," was correct—specifically whether the ",[14,59,16],{}," mask overlay had a higher ",[14,62,56],{}," than the table.",[10,65,66],{},[25,67],{"alt":68,"src":69},"","https://static.031130.xyz/uploads/2025/05/31/1c20b4ea0b37e.webp",[10,71,72,73,75],{},"After testing locally, I confirmed that the ",[14,74,56],{}," was indeed set correctly. So why were the elements behind showing through? A quick Google search led me to this article:",[10,77,78],{},[25,79],{"alt":68,"src":80},"https://static.031130.xyz/uploads/2025/05/31/99845899e3524.webp",[82,83,84,90],"blockquote",{},[10,85,86,87,89],{},"Simply add the following CSS to ",[14,88,20],{},":",[91,92,96],"pre",{"className":93,"code":94,"language":95,"meta":68,"style":68},"language-css shiki shiki-themes one-light one-dark-pro",".el-table__cell {\n    position: static !important;\n}\n","css",[14,97,98,111,128],{"__ignoreMap":68},[99,100,103,107],"span",{"class":101,"line":102},"line",1,[99,104,106],{"class":105},"sAGMh",".el-table__cell",[99,108,110],{"class":109},"s5ixo"," {\n",[99,112,114,117,121,125],{"class":101,"line":113},2,[99,115,116],{"class":109},"    position: ",[99,118,120],{"class":119},"sYebD","static",[99,122,124],{"class":123},"sLKXg"," !important",[99,126,127],{"class":109},";\n",[99,129,131],{"class":101,"line":130},3,[99,132,133],{"class":109},"}\n",[10,135,136,137,141],{},"Testing locally confirmed that this solution works. But why? This is where ",[138,139,140],"strong",{},"Stacking Context"," comes into play.",[143,144,146],"h2",{"id":145},"what-exactly-is-a-stacking-context","What Exactly Is a Stacking Context?",[10,148,149,150,152,153,155,156,159],{},"Simply put, a Stacking Context is like a canvas. On the same canvas, elements with higher ",[14,151,56],{}," values appear on top of those with lower values, which is why I initially suggested checking ",[14,154,56],{},". But the catch is that ",[138,157,158],{},"Stacking Contexts themselves have a hierarchy",".",[10,161,162,163,166],{},"Imagine we have two canvases, A and B. On A, there’s an element with ",[14,164,165],{},"z-index: 1145141919810",". This element has a very high priority and should appear at the very top of the browser window. But if canvas B has higher priority than canvas A, all elements on B will be displayed above A (essentially “winning by default”). So how is a canvas’s priority determined?",[168,169,170,178],"ul",{},[171,172,173],"li",{},[138,174,175,176,159],{},"Between sibling Stacking Contexts, priority is determined by ",[14,177,56],{},[171,179,180],{},[138,181,182,183,185],{},"For Stacking Contexts with the same ",[14,184,56],{},", elements appearing later in the HTML document have higher priority.",[10,187,188],{},"The second rule explains why in the demo, only elements that come after the image cell in the table are showing through.",[143,190,192,193,17,195,197],{"id":191},"so-why-do-el-image-and-el-table-clash","So Why Do ",[14,194,16],{},[14,196,20],{}," Clash?",[10,199,200],{},"This conflict is mainly caused by two factors:",[202,203,204,235],"ol",{},[171,205,206,208,209,212,213,216,217,220,221,224,228,230,231,234],{},[14,207,20],{}," sets ",[14,210,211],{},"position: relative"," for each cell. When ",[14,214,215],{},"position"," is set to ",[14,218,219],{},"relative",", the element creates a new Stacking Context.",[222,223],"br",{},[25,225],{"alt":226,"src":227},"image-20250531013029154","https://static.031130.xyz/uploads/2025/05/31/9df43b865b3c6.webp",[222,229],{},"So a table with ten cells actually generates ten canvases, each with ",[14,232,233],{},"z-index: 1",". According to the rules above, table cells that appear later in the HTML document have higher priority than the earlier image cell.",[171,236,237,238,240,241,159,247,249,252,254,255,258],{},"The overlay used by ",[14,239,16],{},"’s preview feature is placed ",[138,242,243,244,246],{},"inside the ",[14,245,16],{}," element itself",[222,248],{},[25,250],{"alt":68,"src":251},"https://static.031130.xyz/uploads/2025/05/31/f18a2b54afd63.webp",[222,253],{},"The orange area in the image above is the overlay used during preview. The default behavior of Element Plus is to insert the preview overlay inside the ",[14,256,257],{},"\u003Cel-image>"," tag. This traps the overlay inside a low-priority Stacking Context, allowing content from later table cells to appear on top.",[143,260,262],{"id":261},"so-whats-the-solution","So What’s the Solution?",[264,265,267,268,270],"h3",{"id":266},"changing-the-position-value-works","Changing the ",[14,269,215],{}," value works",[10,272,273,274,277,278,280,281,284],{},"The solution found online, forcing ",[14,275,276],{},"position: static"," on table cells, works because ",[14,279,120],{}," does ",[138,282,283],{},"not"," create a new Stacking Context, avoiding the current problem.",[264,286,288],{"id":287},"placing-top-layer-elements-in-the-highest-priority-context-is-more-common","Placing top-layer elements in the highest-priority context is more common",[10,290,291,292,295,296,298],{},"Other component libraries usually handle this by inserting the overlay directly into the ",[14,293,294],{},"body"," element and giving it a high ",[14,297,56],{},". This ensures it always appears on top of the screen (same principle used for dialogs, popovers, etc.).",[10,300,301],{},"In fact, Element Plus supports this feature:",[82,303,304],{},[10,305,306,309,310,312,313,316],{},[138,307,308],{},"preview-teleported:"," Determines whether the image viewer overlay is inserted into the ",[14,311,294],{},". Should be set to ",[14,314,315],{},"true"," if the parent element may modify its properties.",[10,318,319,320,323,324,326,327,329,330,332],{},"So using ",[14,321,322],{},":preview-teleported=\"true\""," with ",[14,325,16],{}," is a more robust approach, because we cannot guarantee that the parent of ",[14,328,16],{}," (besides ",[14,331,20],{}," cells) won’t create another Stacking Context.",[143,334,336],{"id":335},"references","References",[168,338,339,346,353,360,367],{},[171,340,341],{},[35,342,345],{"href":343,"rel":344},"https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_positioned_layout/Stacking_context",[39],"Stacking Context - CSS | MDN",[171,347,348],{},[35,349,352],{"href":350,"rel":351},"https://juejin.cn/post/6844903667175260174",[39],"Completely Understand CSS Stacking Contexts, Levels, Order, and z-index",[171,354,355],{},[35,356,359],{"href":357,"rel":358},"https://www.zhangxinxu.com/wordpress/2016/01/understand-css-stacking-context-order-z-index/",[39],"Deep Dive into CSS Stacking Context and Stacking Order",[171,361,362],{},[35,363,366],{"href":364,"rel":365},"https://element-plus.org/zh-CN/component/image.html",[39],"Image | Element Plus",[171,368,369],{},[35,370,373],{"href":371,"rel":372},"https://blog.csdn.net/qq_61402485/article/details/131202117",[39],"el-image and el-table display issue",[375,376,377],"style",{},"html pre.shiki code .sAGMh, html code.shiki .sAGMh{--shiki-default:#986801;--shiki-dark:#D19A66}html pre.shiki code .s5ixo, html code.shiki .s5ixo{--shiki-default:#383A42;--shiki-dark:#ABB2BF}html pre.shiki code .sYebD, html code.shiki .sYebD{--shiki-default:#383A42;--shiki-dark:#D19A66}html pre.shiki code .sLKXg, html code.shiki .sLKXg{--shiki-default:#A626A4;--shiki-dark:#C678DD}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":68,"searchDepth":113,"depth":113,"links":379},[380,381,383,388],{"id":145,"depth":113,"text":146},{"id":191,"depth":113,"text":382},"So Why Do el-image and el-table Clash?",{"id":261,"depth":113,"text":262,"children":384},[385,387],{"id":266,"depth":130,"text":386},"Changing the position value works",{"id":287,"depth":130,"text":288},{"id":335,"depth":113,"text":336},"2025-05-31 00:29:40","This happened during the internal development of Jinghong’s image hosting service. A freshman reported that el-image and el-table were “clashing.”","md","en",{},"/2025/05/31/el-image-and-el-table-why-the-fight-and-what-is-a-stacking-context","---\ntitle: Why Do el-image and el-table Clash? What Is a Stacking Context?\ndate: 2025-05-31 00:29:40\nsticky:\ntags:\n- Vue.js\n- JavaScript\n- CSS\n- HTML\n- Web\n\n---\n\nThis happened during the internal development of Jinghong’s image hosting service. A freshman reported that `el-image` and `el-table` were “clashing.”\n\n![Screenshot](https://static.031130.xyz/uploads/2025/05/31/c6674f6f13955.webp)\n\nDemo iframe:\n\n[demo](https://static.031130.xyz/demo/el-image-el-table-conflict.html)\n\n\u003Ciframe src=\"https://static.031130.xyz/demo/el-image-el-table-conflict.html\" width=\"100%\" height=\"500\" allowfullscreen loading=\"lazy\">\u003C/iframe>\n\nWhen I saw that the table behind was showing through the `el-image` preview overlay, my first reaction was to ask the student to check whether the `z-index` was correct—specifically whether the `el-image` mask overlay had a higher `z-index` than the table.\n\n![](https://static.031130.xyz/uploads/2025/05/31/1c20b4ea0b37e.webp)\n\nAfter testing locally, I confirmed that the `z-index` was indeed set correctly. So why were the elements behind showing through? A quick Google search led me to this article:\n\n![](https://static.031130.xyz/uploads/2025/05/31/99845899e3524.webp)\n\n> Simply add the following CSS to `el-table`:\n>\n> ```css\n> .el-table__cell {\n>     position: static !important;\n> }\n> ```\n\nTesting locally confirmed that this solution works. But why? This is where **Stacking Context** comes into play.\n\n## What Exactly Is a Stacking Context?\n\nSimply put, a Stacking Context is like a canvas. On the same canvas, elements with higher `z-index` values appear on top of those with lower values, which is why I initially suggested checking `z-index`. But the catch is that **Stacking Contexts themselves have a hierarchy**.\n\nImagine we have two canvases, A and B. On A, there’s an element with `z-index: 1145141919810`. This element has a very high priority and should appear at the very top of the browser window. But if canvas B has higher priority than canvas A, all elements on B will be displayed above A (essentially “winning by default”). So how is a canvas’s priority determined?\n\n- **Between sibling Stacking Contexts, priority is determined by `z-index`.**\n- **For Stacking Contexts with the same `z-index`, elements appearing later in the HTML document have higher priority.**\n\nThe second rule explains why in the demo, only elements that come after the image cell in the table are showing through.\n\n## So Why Do `el-image` and `el-table` Clash?\n\nThis conflict is mainly caused by two factors:\n\n1. `el-table` sets `position: relative` for each cell. When `position` is set to `relative`, the element creates a new Stacking Context.\n\n   ![image-20250531013029154](https://static.031130.xyz/uploads/2025/05/31/9df43b865b3c6.webp)\n\n   So a table with ten cells actually generates ten canvases, each with `z-index: 1`. According to the rules above, table cells that appear later in the HTML document have higher priority than the earlier image cell.\n\n2. The overlay used by `el-image`’s preview feature is placed **inside the `el-image` element itself**.\n\n   ![](https://static.031130.xyz/uploads/2025/05/31/f18a2b54afd63.webp)\n\n   The orange area in the image above is the overlay used during preview. The default behavior of Element Plus is to insert the preview overlay inside the `\u003Cel-image>` tag. This traps the overlay inside a low-priority Stacking Context, allowing content from later table cells to appear on top.\n\n## So What’s the Solution?\n\n### Changing the `position` value works\n\nThe solution found online, forcing `position: static` on table cells, works because `static` does **not** create a new Stacking Context, avoiding the current problem.\n\n### Placing top-layer elements in the highest-priority context is more common\n\nOther component libraries usually handle this by inserting the overlay directly into the `body` element and giving it a high `z-index`. This ensures it always appears on top of the screen (same principle used for dialogs, popovers, etc.).\n\nIn fact, Element Plus supports this feature:\n\n> **preview-teleported:** Determines whether the image viewer overlay is inserted into the `body`. Should be set to `true` if the parent element may modify its properties.\n\nSo using `:preview-teleported=\"true\"` with `el-image` is a more robust approach, because we cannot guarantee that the parent of `el-image` (besides `el-table` cells) won’t create another Stacking Context.\n\n## References\n\n- [Stacking Context - CSS | MDN](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_positioned_layout/Stacking_context)\n- [Completely Understand CSS Stacking Contexts, Levels, Order, and z-index](https://juejin.cn/post/6844903667175260174)\n- [Deep Dive into CSS Stacking Context and Stacking Order](https://www.zhangxinxu.com/wordpress/2016/01/understand-css-stacking-context-order-z-index/)\n- [Image | Element Plus](https://element-plus.org/zh-CN/component/image.html)\n- [el-image and el-table display issue](https://blog.csdn.net/qq_61402485/article/details/131202117)\n",{"title":5,"description":390},"posts/en/el-image-and-el-table-why-the-fight-and-what-is-a-stacking-context",false,[400,401,402,403,404],"Vue.js","JavaScript","CSS","HTML","Web","4aknNiUAVd1e5mhBxgfMVcLrsH6K_1aW4IyuCmv_ex4",[407,412],{"title":408,"path":409,"stem":410,"date":411,"lang":392,"children":-1},"In 2025, How to Choose the Right Video Compression Algorithm for Web Pages?","/2025/06/02/choosing-the-right-video-compression-format-for-web-in-2025","posts/en/choosing-the-right-video-compression-format-for-web-in-2025","2025-06-02 20:59:10",{"title":413,"path":414,"stem":415,"date":416,"lang":392,"children":-1},"How to Copy Text to Clipboard with JavaScript in 2025","/2025/04/21/how-we-copy-text-to-clipboard-with-js-in-2025","posts/en/how-we-copy-text-to-clipboard-with-js-in-2025","2025-04-21 19:48:05",4,"/2025/05/31/el-image-and-el-table-why-the-fight-and-what-is-a-stacking-context/",1763662447391]