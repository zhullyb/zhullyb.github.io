<!DOCTYPE html><html  lang="en-US"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Array Field Filtering Challenges and Performance Optimization in Nuxt Content v3 | 竹林里有冰的博客</title><link rel="preconnect" href="https://static.031130.xyz" crossorigin><link rel="stylesheet" href="https://s4.zstatic.net/ajax/libs/github-markdown-css/5.8.1/github-markdown.min.css"><style>[data-v-11c89a0f] .markdown-body h2,[data-v-11c89a0f] .markdown-body h3,[data-v-11c89a0f] .markdown-body h4,[data-v-11c89a0f] .markdown-body h5,[data-v-11c89a0f] .markdown-body h6{scroll-margin-top:78px}[data-v-11c89a0f] .markdown-body h2>a,[data-v-11c89a0f] .markdown-body h3>a,[data-v-11c89a0f] .markdown-body h4>a,[data-v-11c89a0f] .markdown-body h5>a,[data-v-11c89a0f] .markdown-body h6>a{color:unset}@media(prefers-color-scheme:dark){[data-v-11c89a0f] .markdown-body{--bgColor-default:#252d38;--bgColor-muted:#181c27}[data-v-11c89a0f] .markdown-body .shiki,[data-v-11c89a0f] .markdown-body .shiki span{color:var(--shiki-dark)!important}}aside[data-v-11c89a0f]{position:sticky;top:78px}[data-v-11c89a0f] #waline{margin-top:3rem}.article-end-hr[data-v-11c89a0f]{border:none;border-top:1px solid #e1e4e8;margin:1rem 0}@media(prefers-color-scheme:dark){.article-end-hr[data-v-11c89a0f]{border-color:#444c56}}.tags[data-v-11c89a0f]{margin:1rem 0}.tags[data-v-11c89a0f] *{vertical-align:middle}.tags svg[data-v-11c89a0f]{font-size:.9em}.tags a[data-v-11c89a0f]{margin-left:.2rem}.tags a[data-v-11c89a0f]:hover{color:#007bff}</style><style>.content-wrapper[data-v-ccd9c1ba]{margin-bottom:40px;margin-top:40px}@media(min-width:769px){.content-wrapper[data-v-ccd9c1ba]{display:flex;justify-content:space-around}.content-wrapper .side[data-v-ccd9c1ba]{width:20%}}@media(max-width:768px){.content-wrapper[data-v-ccd9c1ba]{margin:30px}}main[data-v-ccd9c1ba]{min-height:calc(40vh - 120px);width:50%}@media(max-width:1024px){main[data-v-ccd9c1ba]{width:75%}}@media(max-width:768px){main[data-v-ccd9c1ba]{width:unset}}</style><style>header[data-v-bf9b66e4]{align-items:center;box-shadow:0 2px 4px #0000001a;display:flex;flex-direction:column;height:62px;justify-content:center;padding-bottom:16px;padding-top:20px;position:fixed;top:0;transition:background-color .3s ease,height .3s ease,padding-top .3s ease,backdrop-filter .3s ease;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:100%;z-index:2}header.scrolled[data-v-bf9b66e4]{height:58px;padding-bottom:16px;padding-top:16px}header.scrolled[data-v-bf9b66e4],header.show-mobile-menu[data-v-bf9b66e4]{-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px);background-color:#3c4658b3}header.show-mobile-menu[data-v-bf9b66e4]{height:-moz-fit-content;height:fit-content}.header-container[data-v-bf9b66e4]{color:#fff;min-width:70%}@media(max-width:1024px){.header-container[data-v-bf9b66e4]{min-width:75%;padding-left:16px;padding-right:16px}}@media(max-width:768px){.header-container[data-v-bf9b66e4]{min-width:100%}}.header-container .header-title[data-v-bf9b66e4]{font-weight:700;text-shadow:0 0 10px rgba(0,0,0,.3)}.header[data-v-bf9b66e4]{justify-content:space-between}.header[data-v-bf9b66e4],.header-right[data-v-bf9b66e4]{align-items:center;display:flex}.header-right[data-v-bf9b66e4]{gap:16px}.mobile-menu-dropdown[data-v-bf9b66e4]{border-radius:8px;display:flex;flex-direction:column;padding:8px 0;width:100%}.mobile-menu-dropdown a[data-v-bf9b66e4]{font-size:18px;font-weight:500;padding:12px 24px;text-align:center}.mobile-menu-dropdown a[data-v-bf9b66e4],a[data-v-bf9b66e4]{color:#fff;text-decoration:none}.lang-switch[data-v-bf9b66e4]{align-items:center;background:#ffffff1a;border:1px solid hsla(0,0%,100%,.3);border-radius:999px;color:#fff;cursor:pointer;display:flex;font-size:14px;justify-content:center;padding:6px 12px;transition:background .2s ease,border-color .2s ease}.lang-switch[data-v-bf9b66e4]:hover{background:#fff3;border-color:#fff9}.search-trigger[data-v-bf9b66e4]{align-items:center;background:#ffffff1a;border:1px solid hsla(0,0%,100%,.3);border-radius:999px;color:#fff;cursor:pointer;display:flex;font-size:14px;gap:6px;padding:6px 12px;transition:background .2s ease,border-color .2s ease}.search-trigger[data-v-bf9b66e4]:hover{background:#fff3;border-color:#fff9}.search-trigger span[aria-hidden=true][data-v-bf9b66e4]{font-size:16px;line-height:1}@media(max-width:768px){.pc[data-v-bf9b66e4],.search-trigger .search-trigger__label[data-v-bf9b66e4]{display:none}}</style><style>.post-navigation[data-v-3c6a4bdf]{display:flex;flex-wrap:wrap;gap:1rem}.nav-button[data-v-3c6a4bdf]{align-items:center;border:1px solid #e1e4e8;color:#24292e;cursor:pointer;display:flex;flex:0 1 calc(50% - .5rem);gap:1rem;max-width:calc(50% - .5rem);min-width:280px;padding:1.25rem 1.5rem;text-decoration:none;transition:border-color .2s ease}@media(prefers-color-scheme:dark){.nav-button[data-v-3c6a4bdf]{border:1px solid #444c5a;color:#c9d1d9}}.nav-button[data-v-3c6a4bdf]:hover{border-color:#007bff}.nav-button:hover .nav-title[data-v-3c6a4bdf]{color:#007bff}.nav-button.prev[data-v-3c6a4bdf]{margin-right:auto}.nav-button.prev .nav-content[data-v-3c6a4bdf]{text-align:left}.nav-button.next[data-v-3c6a4bdf]{flex-direction:row-reverse;margin-left:auto}.nav-button.next .nav-content[data-v-3c6a4bdf]{text-align:right}.nav-arrow[data-v-3c6a4bdf]{color:#6a737d;flex-shrink:0;font-size:1.5rem;font-weight:600;line-height:1}.nav-content[data-v-3c6a4bdf]{display:flex;flex:1;flex-direction:column;gap:.5rem;min-width:0}.nav-label[data-v-3c6a4bdf]{color:#6a737d;font-size:.875rem;font-weight:500}.nav-title[data-v-3c6a4bdf]{display:-webkit-box;font-size:1rem;font-weight:600;-webkit-line-clamp:2;line-clamp:2;overflow:hidden;text-overflow:ellipsis;transition:color .2s ease;-webkit-box-orient:vertical;color:#24292e;line-height:1.4}@media(prefers-color-scheme:dark){.nav-title[data-v-3c6a4bdf]{color:#c9d1d9}}@media(max-width:768px){.post-navigation[data-v-3c6a4bdf]{flex-direction:column;gap:.75rem}.nav-button[data-v-3c6a4bdf]{min-width:100%}}</style><style>#waline{--waline-theme-color:#3f72af;--waline-active-color:#173f70}#waline .wl-panel{border-radius:0;margin:0}@media(prefers-color-scheme:dark){#waline .wl-panel{border-color:#444c5a}}#waline .wl-btn{border-radius:0}</style><style>.toc[data-v-ae70bcd1]{background:#fafafa;border:1px solid #e5e5e5;max-height:calc(100vh - 120px);overflow-y:auto;padding:1.25rem}@media(prefers-color-scheme:dark){.toc[data-v-ae70bcd1]{background:#181c27;border:1px solid #444c5a}}@media(max-width:768px){.toc[data-v-ae70bcd1]{display:none}}.toc-title[data-v-ae70bcd1]{border-bottom:1px solid #e5e5e5;color:#333;font-size:1rem;font-weight:600;margin-bottom:1rem;padding-bottom:.5rem}@media(prefers-color-scheme:dark){.toc-title[data-v-ae70bcd1]{border-bottom:1px solid #444c5a;color:#fff}}.toc-list[data-v-ae70bcd1]{list-style:none;margin:0;padding:0}.toc-item[data-v-ae70bcd1]{line-height:1.5;margin:.3rem 0;max-height:100px;opacity:1;overflow:hidden;transition:max-height .25s ease,opacity .25s ease,margin .25s ease}.toc-item.collapsed[data-v-ae70bcd1]{margin:0;max-height:0;opacity:0}.toc-item a[data-v-ae70bcd1]{color:#666;display:block;font-size:.875rem;padding:.35rem .5rem;text-decoration:none;transition:color .2s,background-color .2s}@media(prefers-color-scheme:dark){.toc-item a[data-v-ae70bcd1]{color:#ccc}}.toc-item a[data-v-ae70bcd1]:hover{background-color:#3b82f614;color:#007bff}.toc-item.active a[data-v-ae70bcd1]{background-color:#3b82f61f;color:#007bff;font-weight:500}.toc-item.toc-level-1[data-v-ae70bcd1]{padding-left:0}.toc-item.toc-level-1 a[data-v-ae70bcd1]{font-weight:500}.toc-item.toc-level-2[data-v-ae70bcd1]{padding-left:.75rem}.toc-item.toc-level-3[data-v-ae70bcd1]{padding-left:1.5rem}.toc-item.toc-level-3 a[data-v-ae70bcd1]{font-size:.85rem}.toc-item.toc-level-4[data-v-ae70bcd1]{padding-left:2.25rem}.toc-item.toc-level-4 a[data-v-ae70bcd1]{font-size:.825rem}.toc-item.toc-level-5[data-v-ae70bcd1]{padding-left:3rem}.toc-item.toc-level-5 a[data-v-ae70bcd1]{font-size:.8rem}.toc-item.toc-level-6[data-v-ae70bcd1]{padding-left:3.75rem}.toc-item.toc-level-6 a[data-v-ae70bcd1]{font-size:.775rem}.toc[data-v-ae70bcd1]::-webkit-scrollbar{width:5px}.toc[data-v-ae70bcd1]::-webkit-scrollbar-track{background:transparent}.toc[data-v-ae70bcd1]::-webkit-scrollbar-thumb{background:#d1d5db}.toc[data-v-ae70bcd1]::-webkit-scrollbar-thumb:hover{background:#9ca3af}</style><style>footer[data-v-71f6d0ea]{color:#fff;justify-content:center;position:relative;width:100%}.footer-content[data-v-71f6d0ea],footer[data-v-71f6d0ea]{align-items:center;display:flex}.footer-content[data-v-71f6d0ea]{flex-direction:column;gap:12px;padding:20px;z-index:1}.footer-mask[data-v-71f6d0ea]{background:linear-gradient(180deg,#0000004d,#00000080);inset:0;position:absolute}@media(prefers-color-scheme:dark){.footer-mask[data-v-71f6d0ea]{background:linear-gradient(180deg,#0009,#000c)}}</style><style>.prose-heading[data-v-a22a06c0]{position:relative}.prose-heading:hover .heading-anchor[data-v-a22a06c0]{opacity:1}.heading-anchor[data-v-a22a06c0]{color:#3b82f6;font-weight:400;margin-left:.5rem;opacity:0;text-decoration:none;transition:opacity .2s,color .2s}.heading-anchor[data-v-a22a06c0]:hover{color:#007bff}.anchor-icon[data-v-a22a06c0]{display:inline-block}.prose-h2[data-v-a22a06c0]{margin:1.75rem 0 .875rem}</style><style>.prose-img-wrapper[data-v-4f488808]{display:inline-block;position:relative}.prose-img[data-v-4f488808]{border-radius:4px;box-shadow:0 1px 4px #00000014;max-width:100%;transition:box-shadow .2s}.prose-img[data-v-4f488808]:hover{box-shadow:0 4px 16px #0000002e}.prose-img-caption[data-v-4f488808]{color:#666;display:block;font-size:.875rem;font-style:italic;margin-top:.25rem;text-align:center}.prose-img-preview-mask[data-v-4f488808]{align-items:center;animation:fadeIn-4f488808 .2s;background:#000000d9;display:flex;justify-content:center;inset:0;position:fixed;z-index:9999}.prose-img-preview-img[data-v-4f488808]{background:#fff;border-radius:8px;box-shadow:0 8px 32px #0006;max-height:90vh;max-width:90vw;will-change:transform}.prose-img-preview-img[data-v-4f488808],.prose-img-preview-scale-indicator[data-v-4f488808]{-webkit-user-select:none;-moz-user-select:none;user-select:none}.prose-img-preview-scale-indicator[data-v-4f488808]{background:#00000080;border-radius:4px;bottom:32px;color:#fff;font-size:1rem;left:50%;padding:2px 10px;pointer-events:none;position:absolute;transform:translate(-50%);z-index:10001}.prose-img-preview-close[data-v-4f488808]{background:none;border:none;color:#fff;cursor:pointer;font-size:2.5rem;line-height:1;padding:0 .5rem;position:absolute;right:48px;top:32px;transition:color .2s;z-index:10000}.prose-img-preview-close[data-v-4f488808]:hover{color:#ffb3b3}@keyframes fadeIn-4f488808{0%{opacity:0}to{opacity:1}}</style><style>@media(max-width:768px){.pc-nav[data-v-c5a90b55]{display:none}}.mobile-nav[data-v-c5a90b55]{cursor:pointer;display:none}@media(max-width:768px){.mobile-nav[data-v-c5a90b55]{align-items:center;display:flex;justify-content:center}}.mobile-nav .container[data-v-c5a90b55]{align-items:center;display:flex;flex-direction:column;height:20px;justify-content:center;margin:0 auto;width:25px}.mobile-nav-item[data-v-c5a90b55]{background:#fff;border-radius:2px;flex-shrink:0;height:2px;margin:2.5px 0;width:100%}a[data-v-c5a90b55]{color:#fff;margin-left:16px;margin-right:16px;text-decoration:none}</style><style>.banner[data-v-a96b3d82]{height:60vh;width:100%}.mask[data-v-a96b3d82]{align-items:center;background:#0000001a;display:flex;height:100%;justify-content:center;width:100%}@media(prefers-color-scheme:dark){.mask[data-v-a96b3d82]{background:#00000080}}.title-container[data-v-a96b3d82]{align-items:center;color:#fff;display:flex;height:100%;justify-content:center;margin:auto;width:50%}@media(max-width:768px){.title-container[data-v-a96b3d82]{width:80%}}.title[data-v-a96b3d82]{color:#fff;margin:auto auto auto 0;padding-top:58px;text-shadow:0 0 5px rgba(0,0,0,.7)}.title h1[data-v-a96b3d82]{font-size:32px;font-weight:700;margin:0}.title p[data-v-a96b3d82]{font-size:16px;font-weight:300;margin:8px 0}@media(max-width:768px){.title[data-v-a96b3d82]{margin:auto;text-align:center}}</style><style>.search-overlay-enter-active[data-v-63592d71],.search-overlay-leave-active[data-v-63592d71]{transition:opacity .2s ease}.search-overlay-enter-from[data-v-63592d71],.search-overlay-leave-to[data-v-63592d71]{opacity:0}.search-overlay[data-v-63592d71]{align-items:flex-start;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);background:#00000059;display:flex;justify-content:center;inset:0;padding:120px 16px 40px;position:fixed;z-index:2000}.search-overlay__panel[data-v-63592d71]{background:#fffffff2;box-shadow:0 18px 50px #00000040;display:flex;flex-direction:column;max-height:calc(100vh - 160px);overflow:hidden;width:min(720px,100%)}.search-overlay__header[data-v-63592d71]{align-items:center;border-bottom:1px solid rgba(0,0,0,.05);display:flex;gap:12px;padding:16px 20px 16px 16px}.search-overlay__input[data-v-63592d71]{background:#ffffffd9;border:1px solid rgba(0,0,0,.12);flex:1;font-size:16px;padding:12px 16px;transition:border-color .2s ease}.search-overlay__input[data-v-63592d71]:focus{border-color:#007bff;outline:none}.search-overlay__close[data-v-63592d71]{background:transparent;border:none;border-radius:50%;color:#0000008c;cursor:pointer;font-size:24px;height:32px;line-height:24px;width:32px}.search-overlay__close[data-v-63592d71]:hover{color:#000c}.search-overlay__body[data-v-63592d71]{overflow-y:auto;padding:8px 0 20px}.search-overlay__state[data-v-63592d71]{color:#00000094;margin:20px;text-align:center}.search-overlay__count[data-v-63592d71]{color:#000000b3;font-weight:600;margin:12px 24px 0}.search-overlay__list[data-v-63592d71]{display:flex;flex-direction:column;gap:12px;list-style:none;margin:16px 0 0;padding:0 8px 8px}.search-overlay__item[data-v-63592d71]{background:#ffffffe6;border-radius:12px;box-shadow:0 8px 18px #00000014;transition:transform .2s ease}.search-overlay__item[data-v-63592d71]:hover{transform:translateY(-2px)}.search-overlay__link[data-v-63592d71]{color:inherit;display:block;padding:16px 20px;text-decoration:none}.search-overlay__item-title[data-v-63592d71]{color:#007bff;font-size:18px;font-weight:700;margin:0}.search-overlay__item-meta[data-v-63592d71]{color:#0009;font-size:13px;margin:8px 0 0}.search-overlay__item-meta span[data-v-63592d71]{color:#0000008c}.search-overlay__item-snippet[data-v-63592d71]{color:#000c;font-size:14px;line-height:1.6;margin:12px 0 0}@media(max-width:768px){.search-overlay[data-v-63592d71]{padding:80px 12px 20px}.search-overlay__panel[data-v-63592d71]{max-height:calc(100vh - 120px)}}</style><link rel="stylesheet" href="/_nuxt/entry.Cb3Jctur.css" crossorigin><link rel="stylesheet" href="/_nuxt/DefaultLayout.O7h8immh.css" crossorigin><link rel="preload" as="fetch" crossorigin="anonymous" href="/en/2025/10/20/nuxt-content-v3-z-array-query-challenge/_payload.json?e861cbc8-6e07-4c34-8bec-667455078912"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/XkZwU57j.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CfL3A5F0.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/D6caWpW2.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BdbdvwZc.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/AjAZGepW.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/DxtP2ohF.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/wm5oDfO2.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/Cp4DhK53.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CfNh1ju4.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CJm0ekr6.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/B_Ctheg_.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BtxTOW4H.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CjulR-I4.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/CxwQ7CXE.js"><link rel="preload" as="fetch" fetchpriority="low" crossorigin="anonymous" href="/_nuxt/builds/meta/e861cbc8-6e07-4c34-8bec-667455078912.json"><script src="/js/u.js" defer data-website-id="5346b89b-f4bf-4593-971d-1f41a1118bc1"></script><link rel="prefetch" as="style" href="https://s4.zstatic.net/ajax/libs/github-markdown-css/5.8.1/github-markdown.min.css"><link rel="alternate" type="application/rss+xml" title="竹林里有冰的博客 RSS Feed (Chinese)" href="https://zhul.in/rss.xml"><link rel="alternate" type="application/atom+xml" title="竹林里有冰的博客 Atom Feed (English)" href="https://zhul.in/en/rss.xml"><meta name="description" content="Nuxt Content is a powerful module in the Nuxt ecosystem for handling Markdown, YAML, and other content types. Recently, while migrating my blog from Hexo to Nuxt v4 + Nuxt Content v3, I encountered a tricky issue: the v3 default query API does not directly provide support for &quot;contains&quot; ($contains) operations on array fields."><meta property="og:type" content="website"><meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"><meta name="keywords" content="Nuxt,Nuxt Content,JavaScript"><script type="module" src="/_nuxt/XkZwU57j.js" crossorigin></script><meta name="twitter:card" content="summary_large_image"><meta property="og:title" data-infer="" content="Array Field Filtering Challenges and Performance Optimization in Nuxt Content v3 | 竹林里有冰的博客"><meta property="og:description" data-infer="" content="Nuxt Content is a powerful module in the Nuxt ecosystem for handling Markdown, YAML, and other content types. Recently, while migrating my blog from Hexo to Nuxt v4 + Nuxt Content v3, I encountered a tricky issue: the v3 default query API does not directly provide support for &quot;contains&quot; ($contains) operations on array fields."><link rel="canonical" href="https://zhul.in/en/2025/10/20/nuxt-content-v3-z-array-query-challenge/"><meta property="og:url" content="https://zhul.in/en/2025/10/20/nuxt-content-v3-z-array-query-challenge/"><meta property="og:locale" content="en_US"><meta property="og:site_name" content="竹林里有冰的博客"></head><body><!--teleport start anchor--><!----><!--teleport anchor--><!--teleport start anchor--><!----><!--teleport anchor--><!--teleport start anchor--><!----><!--teleport anchor--><!--teleport start anchor--><!----><!--teleport anchor--><!--teleport start anchor--><!----><!--teleport anchor--><!--teleport start anchor--><!----><!--teleport anchor--><div id="__nuxt"><!--[--><div></div><div data-v-11c89a0f data-v-ccd9c1ba><!--[--><header class="" data-v-bf9b66e4><div class="header-container" data-v-bf9b66e4><div class="header" data-v-bf9b66e4><a href="/en/" class="header-title" data-v-bf9b66e4>Zhullyb&#39;s Blog</a><div class="header-right" data-v-bf9b66e4><nav data-v-bf9b66e4 data-v-c5a90b55><div class="pc-nav" data-v-c5a90b55><!--[--><a href="/en/" class="" data-v-c5a90b55>Home</a><a href="/en/archives/" class="" data-v-c5a90b55>Archives</a><a href="/en/tags/" class="" data-v-c5a90b55>Tags</a><a href="/en/links/" class="" data-v-c5a90b55>Links</a><a href="/en/about/" class="" data-v-c5a90b55>About</a><!--]--></div><div class="mobile-nav" data-v-c5a90b55><div class="container" data-v-c5a90b55><!--[--><div class="mobile-nav-item" data-v-c5a90b55></div><div class="mobile-nav-item" data-v-c5a90b55></div><div class="mobile-nav-item" data-v-c5a90b55></div><!--]--></div></div></nav><a href="/2025/10/20/nuxt-content-v3-z-array-query-challenge/" class="lang-switch" aria-label="Switch Language" data-v-bf9b66e4><span class="lang-switch__label" data-v-bf9b66e4>中</span></a><button type="button" class="search-trigger pc" aria-label="Search" data-v-bf9b66e4><svg viewBox="0 0 24 24" width="1.2em" height="1.2em" data-v-bf9b66e4><path fill="currentColor" d="M15.5 14h-.79l-.28-.27A6.47 6.47 0 0 0 16 9.5A6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5S14 7.01 14 9.5S11.99 14 9.5 14"></path></svg><span class="search-trigger__label" data-v-bf9b66e4>Search</span></button></div></div></div><!----></header><div class="banner" style="background-color:#00bb77;background-image:url(&quot;data:image/svg+xml,%3Csvg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;120&#39; height=&#39;120&#39; viewBox=&#39;0 0 120 120&#39;%3E%3Cpolygon fill=&#39;%23000&#39; fill-opacity=&#39;.1&#39; points=&#39;120 0 120 60 90 30 60 0 0 0 0 0 60 60 0 120 60 120 90 90 120 60 120 0&#39;/%3E%3C/svg%3E&quot;);" data-v-bf9b66e4 data-v-a96b3d82><div class="mask" data-v-a96b3d82><div class="title-container" data-v-a96b3d82><div class="title" data-v-a96b3d82><h1 data-v-a96b3d82>Array Field Filtering Challenges and Performance Optimization in Nuxt Content v3</h1><!----></div></div></div></div><!--teleport start--><!--teleport end--><!--]--><div class="content-wrapper" data-v-ccd9c1ba><div class="before-main side" data-v-ccd9c1ba><!--[--><!--]--></div><main data-v-ccd9c1ba><!--[--><article class="markdown-body" data-v-11c89a0f><p><!--[-->Nuxt Content is a powerful module in the Nuxt ecosystem for handling Markdown, YAML, and other content types. Recently, while migrating my blog from Hexo to <strong><!--[-->Nuxt v4 + Nuxt Content v3<!--]--></strong>, I encountered a tricky issue: the v3 default query API <strong><!--[-->does not directly provide<!--]--></strong> support for &quot;contains&quot; (<code><!--[-->$contains<!--]--></code>) operations on array fields.<!--]--></p><p><!--[-->For example, here&#39;s the Front Matter of the blog post I&#39;m currently writing:<!--]--></p><pre class="language-markdown shiki shiki-themes one-light one-dark-pro" style=""><!--[--><code><span class="line" line="1"><span>---
</span></span><span class="line" line="2"><span>title: Array Field Filtering Challenges in Nuxt Content v3
</span></span><span class="line" line="3"><span>date: 2025-10-20 21:52:59
</span></span><span class="line" line="4"><span>sticky:
</span></span><span class="line" line="5"><span>tags:
</span></span><span class="line" line="6"><span>- Nuxt
</span></span><span class="line" line="7"><span>- Nuxt Content
</span></span><span class="line" line="8"><span>- JavaScript
</span></span><span class="line" line="9"><span>---
</span></span></code><!--]--></pre><p><!--[-->My goal was to create a <strong><!--[-->Tag page<!--]--></strong> that lists all articles containing a specific tag (e.g., &#39;Nuxt&#39;).<!--]--></p><h2 id="the-convenience-of-v2-and-the-limitations-of-v3" class="prose-heading prose-h2" data-v-a22a06c0><!--[-->The Convenience of v2 and the Limitations of v3<!--]--><a href="#the-convenience-of-v2-and-the-limitations-of-v3" class="heading-anchor" aria-label="链接到此标题" data-v-a22a06c0><span class="anchor-icon" data-v-a22a06c0>#</span></a></h2><p><!--[-->In Nuxt Content v2, data was stored based on the file system, and the query approach abstracted file content with a syntax similar to <strong><!--[-->MongoDB&#39;s JSON document queries<!--]--></strong>. We could easily use the <code><!--[-->$contains<!--]--></code> method to retrieve all articles with the &quot;Nuxt&quot; tag:<!--]--></p><pre class="language-typescript shiki shiki-themes one-light one-dark-pro" style=""><!--[--><code><span class="line" line="1"><span class="sLKXg">const</span><span class="sNmU0"> tag</span><span class="s_Sar"> =</span><span class="sAdtL"> decodeURIComponent</span><span class="s5ixo">(</span><span class="s7GmK">route</span><span class="s5ixo">.</span><span class="s2QsP">params</span><span class="s5ixo">.</span><span class="sJa8x">tag</span><span class="sblXP"> as</span><span class="sN9Y4"> string</span><span class="s5ixo">)
</span></span><span class="line" line="2"><span emptylineplaceholder="true">
</span></span><span class="line" line="3"><span class="sLKXg">const</span><span class="sNmU0"> articles</span><span class="s_Sar"> =</span><span class="sLKXg"> await</span><span class="sAdtL"> queryContent</span><span class="s5ixo">(</span><span class="sDhpE">&#39;posts&#39;</span><span class="s5ixo">)
</span></span><span class="line" line="4"><span class="s5ixo">  .</span><span class="sAdtL">where</span><span class="s5ixo">({ </span><span class="sJa8x">tags</span><span class="st7oF">:</span><span class="s5ixo"> { </span><span class="sJa8x">$contains</span><span class="st7oF">:</span><span class="sz0mV"> tag</span><span class="s5ixo"> } })  </span><span class="sW2Sy">// ✅ MongoDB-style queries in v2
</span></span><span class="line" line="5"><span class="s5ixo">  .</span><span class="sAdtL">find</span><span class="s5ixo">()
</span></span></code><!--]--></pre><p><!--[-->However, when using <strong><!--[-->Nuxt Content v3&#39;s <code><!--[-->queryCollection<!--]--></code> API<!--]--></strong>, we naturally try to use the <code><!--[-->.where()<!--]--></code> method for filtering:<!--]--></p><pre class="language-typescript shiki shiki-themes one-light one-dark-pro" style=""><!--[--><code><span class="line" line="1"><span class="sLKXg">const</span><span class="sNmU0"> tag</span><span class="s_Sar"> =</span><span class="sAdtL"> decodeURIComponent</span><span class="s5ixo">(</span><span class="s7GmK">route</span><span class="s5ixo">.</span><span class="s2QsP">params</span><span class="s5ixo">.</span><span class="sJa8x">tag</span><span class="sblXP"> as</span><span class="sN9Y4"> string</span><span class="s5ixo">)
</span></span><span class="line" line="2"><span emptylineplaceholder="true">
</span></span><span class="line" line="3"><span class="sLKXg">const</span><span class="s5ixo"> { </span><span class="sNmU0">data</span><span class="s5ixo"> } </span><span class="s_Sar">=</span><span class="sLKXg"> await</span><span class="sAdtL"> useAsyncData</span><span class="s5ixo">(</span><span class="sDhpE">`tag-</span><span class="sAOjX">${</span><span class="sz0mV">tag</span><span class="sAOjX">}</span><span class="sDhpE">`</span><span class="s5ixo">, () </span><span class="sLKXg">=&gt;
</span></span><span class="line" line="4"><span class="sAdtL">    queryCollection</span><span class="s5ixo">(</span><span class="sDhpE">&#39;posts&#39;</span><span class="s5ixo">)
</span></span><span class="line" line="5"><span class="s5ixo">        .</span><span class="sAdtL">where</span><span class="s5ixo">(</span><span class="sz0mV">tag</span><span class="s5ixo">, </span><span class="sDhpE">&#39;in&#39;</span><span class="s5ixo">, </span><span class="sDhpE">&#39;tags&#39;</span><span class="s5ixo">)  </span><span class="sW2Sy">// ❌ This will error because the first parameter must be a field name
</span></span><span class="line" line="6"><span class="s5ixo">        .</span><span class="sAdtL">order</span><span class="s5ixo">(</span><span class="sDhpE">&#39;date&#39;</span><span class="s5ixo">, </span><span class="sDhpE">&#39;DESC&#39;</span><span class="s5ixo">)
</span></span><span class="line" line="7"><span class="s5ixo">        .</span><span class="sAdtL">select</span><span class="s5ixo">(</span><span class="sDhpE">&#39;title&#39;</span><span class="s5ixo">, </span><span class="sDhpE">&#39;date&#39;</span><span class="s5ixo">, </span><span class="sDhpE">&#39;path&#39;</span><span class="s5ixo">, </span><span class="sDhpE">&#39;tags&#39;</span><span class="s5ixo">)
</span></span><span class="line" line="8"><span class="s5ixo">        .</span><span class="sAdtL">all</span><span class="s5ixo">()
</span></span><span class="line" line="9"><span class="s5ixo">)
</span></span></code><!--]--></pre><p><!--[-->Unfortunately, this approach doesn&#39;t work. The <code><!--[-->.where()<!--]--></code> method signature requires the field name as the first parameter: <code><!--[-->where(field: keyof Collection | string, operator: SqlOperator, value?: unknown)<!--]--></code>.<!--]--></p><p><!--[-->Since Nuxt Content v3 <strong><!--[-->uses SQLite as its underlying local database<!--]--></strong>, all queries must follow SQL-like syntax. If the design doesn&#39;t provide built-in operators for array fields (such as an SQL equivalent of <code><!--[-->$contains<!--]--></code>), the eventual solution often feels somewhat &quot;awkward.&quot;<!--]--></p><h2 id="initial-implementation-sacrificing-performance-with-fetch-all" class="prose-heading prose-h2" data-v-a22a06c0><!--[-->Initial Implementation: Sacrificing Performance with &quot;Fetch All&quot;<!--]--><a href="#initial-implementation-sacrificing-performance-with-fetch-all" class="heading-anchor" aria-label="链接到此标题" data-v-a22a06c0><span class="anchor-icon" data-v-a22a06c0>#</span></a></h2><p><!--[-->Following a &quot;migrate quickly, optimize later&quot; approach, I wrote the following code:<!--]--></p><pre class="language-typescript shiki shiki-themes one-light one-dark-pro" style=""><!--[--><code><span class="line" line="1"><span class="sW2Sy">// Initial implementation: fetch all and filter with JS
</span></span><span class="line" line="2"><span class="sLKXg">const</span><span class="sAdtL"> allPosts</span><span class="s_Sar"> =</span><span class="s5ixo"> (
</span></span><span class="line" line="3"><span class="sLKXg">    await</span><span class="sAdtL"> useAsyncData</span><span class="s5ixo">(</span><span class="sDhpE">`tag-</span><span class="sAOjX">${</span><span class="s7GmK">route</span><span class="sMj0N">.</span><span class="s2QsP">params</span><span class="sMj0N">.</span><span class="sJa8x">tag</span><span class="sAOjX">}</span><span class="sDhpE">`</span><span class="s5ixo">, () </span><span class="sLKXg">=&gt;
</span></span><span class="line" line="4"><span class="sAdtL">        queryCollection</span><span class="s5ixo">(</span><span class="sDhpE">&#39;posts&#39;</span><span class="s5ixo">)
</span></span><span class="line" line="5"><span class="s5ixo">            .</span><span class="sAdtL">order</span><span class="s5ixo">(</span><span class="sDhpE">&#39;date&#39;</span><span class="s5ixo">, </span><span class="sDhpE">&#39;DESC&#39;</span><span class="s5ixo">)
</span></span><span class="line" line="6"><span class="s5ixo">            .</span><span class="sAdtL">select</span><span class="s5ixo">(</span><span class="sDhpE">&#39;title&#39;</span><span class="s5ixo">, </span><span class="sDhpE">&#39;date&#39;</span><span class="s5ixo">, </span><span class="sDhpE">&#39;path&#39;</span><span class="s5ixo">, </span><span class="sDhpE">&#39;tags&#39;</span><span class="s5ixo">)
</span></span><span class="line" line="7"><span class="s5ixo">            .</span><span class="sAdtL">all</span><span class="s5ixo">()
</span></span><span class="line" line="8"><span class="s5ixo">    )
</span></span><span class="line" line="9"><span class="s5ixo">).</span><span class="sJa8x">data</span><span class="sblXP"> as</span><span class="sC09Y"> Ref</span><span class="s5ixo">&lt;</span><span class="sC09Y">Post</span><span class="s5ixo">[]&gt;
</span></span><span class="line" line="10"><span emptylineplaceholder="true">
</span></span><span class="line" line="11"><span class="sLKXg">const</span><span class="sNmU0"> Posts</span><span class="s_Sar"> =</span><span class="sAdtL"> computed</span><span class="s5ixo">(() </span><span class="sLKXg">=&gt;</span><span class="s5ixo"> {
</span></span><span class="line" line="12"><span class="sLKXg">    return</span><span class="s7GmK"> allPosts</span><span class="s5ixo">.</span><span class="s2QsP">value</span><span class="s5ixo">.</span><span class="sAdtL">filter</span><span class="s5ixo">(</span><span class="s8iYz">post</span><span class="sLKXg"> =&gt;
</span></span><span class="line" line="13"><span class="s7DPa">        typeof</span><span class="s7GmK"> post</span><span class="s5ixo">.</span><span class="s2QsP">tags</span><span class="s5ixo">?.</span><span class="sJa8x">map</span><span class="s_Sar"> ===</span><span class="sDhpE"> &#39;function&#39;
</span></span><span class="line" line="14"><span class="s7DPa">            ?</span><span class="s7GmK"> post</span><span class="s5ixo">.</span><span class="s2QsP">tags</span><span class="s5ixo">?.</span><span class="sAdtL">includes</span><span class="s5ixo">(</span><span class="sAdtL">decodeURIComponent</span><span class="s5ixo">(</span><span class="s7GmK">route</span><span class="s5ixo">.</span><span class="s2QsP">params</span><span class="s5ixo">.</span><span class="sJa8x">tag</span><span class="sblXP"> as</span><span class="sN9Y4"> string</span><span class="s5ixo">))
</span></span><span class="line" line="15"><span class="s7DPa">            :</span><span class="sAGMh"> false
</span></span><span class="line" line="16"><span class="s5ixo">    )
</span></span><span class="line" line="17"><span class="s5ixo">})
</span></span></code><!--]--></pre><p><!--[-->While this method met the requirements, it came with obvious performance costs: <strong><!--[-->bloated <code><!--[-->_payload.json<!--]--></code> file sizes.<!--]--></strong><!--]--></p><p><!--[-->In Nuxt projects, <code><!--[-->_payload.json<!--]--></code> stores dynamic data such as <code><!--[-->useAsyncData<!--]--></code> results. With the fetch-all approach, <strong><!--[-->every Tag page<!--]--></strong> loads a <code><!--[-->_payload.json<!--]--></code> containing information for all articles, causing data redundancy. Many tag pages only need data for one or two articles but are forced to load information for all articles, severely impacting performance.<!--]--></p><p><!--[--><span class="prose-img-wrapper" data-v-4f488808><img src="https://static.031130.xyz/uploads/2025/10/20/a748878c03c64.webp" alt="The tags directory occupies 2.9MiB, the largest of all directories" title="" loading="lazy" class="prose-img" style="cursor:zoom-in;" data-v-4f488808><span class="prose-img-caption" data-v-4f488808>The tags directory occupies 2.9MiB, the largest of all directories</span><!--teleport start--><!--teleport end--></span><!--]--></p><p><!--[--><span class="prose-img-wrapper" data-v-4f488808><img src="https://static.031130.xyz/uploads/2025/10/20/8ef786d873da1.webp" alt="_payload.json" title="" loading="lazy" class="prose-img" style="cursor:zoom-in;" data-v-4f488808><span class="prose-img-caption" data-v-4f488808>_payload.json</span><!--teleport start--><!--teleport end--></span><!--]--></p><h2 id="a-clever-solution-leveraging-sqlites-storage-characteristics-for-optimization" class="prose-heading prose-h2" data-v-a22a06c0><!--[-->A Clever Solution: Leveraging SQLite&#39;s Storage Characteristics for Optimization<!--]--><a href="#a-clever-solution-leveraging-sqlites-storage-characteristics-for-optimization" class="heading-anchor" aria-label="链接到此标题" data-v-a22a06c0><span class="anchor-icon" data-v-a22a06c0>#</span></a></h2><p><!--[-->To reduce the query results returned by <code><!--[-->useAsyncData<!--]--></code>, I searched through Nuxt Content&#39;s GitHub Discussions and found <a href="https://github.com/nuxt/content/discussions/2955" rel="nofollow"><!--[-->a &quot;clever&quot; solution proposed during v3.alpha.8<!--]--></a>.<!--]--></p><p><!--[-->Since Nuxt Content v3 uses an SQLite database, the <strong><!--[--><code><!--[-->tags<!--]--></code> array originally defined in Front Matter (via <code><!--[-->z.array()<!--]--></code>) is ultimately stored as a JSON string<!--]--></strong> in the database (you can view the exact format in the <code><!--[-->.nuxt/content/sql_dump.txt<!--]--></code> file).<!--]--></p><p><!--[--><span class="prose-img-wrapper" data-v-4f488808><img src="https://static.031130.xyz/uploads/2025/10/20/b70036c55bb29.webp" alt="sql_dump.txt" title="" loading="lazy" class="prose-img" style="cursor:zoom-in;" data-v-4f488808><span class="prose-img-caption" data-v-4f488808>sql_dump.txt</span><!--teleport start--><!--teleport end--></span><!--]--></p><p><!--[-->This means we can leverage SQLite&#39;s <strong><!--[-->string operation<!--]--></strong> features by using the <strong><!--[--><code><!--[-->LIKE<!--]--></code> operator with wildcards<!--]--></strong> to perform array containment filtering, essentially querying whether the JSON string contains a specific substring:<!--]--></p><pre class="language-typescript shiki shiki-themes one-light one-dark-pro" style=""><!--[--><code><span class="line" line="1"><span class="sLKXg">const</span><span class="sNmU0"> tag</span><span class="s_Sar"> =</span><span class="sAdtL"> decodeURIComponent</span><span class="s5ixo">(</span><span class="s7GmK">route</span><span class="s5ixo">.</span><span class="s2QsP">params</span><span class="s5ixo">.</span><span class="sJa8x">tag</span><span class="sblXP"> as</span><span class="sN9Y4"> string</span><span class="s5ixo">)
</span></span><span class="line" line="2"><span emptylineplaceholder="true">
</span></span><span class="line" line="3"><span class="sLKXg">const</span><span class="s5ixo"> { </span><span class="sNmU0">data</span><span class="s5ixo"> } </span><span class="s_Sar">=</span><span class="sLKXg"> await</span><span class="sAdtL"> useAsyncData</span><span class="s5ixo">(</span><span class="sDhpE">`tag-</span><span class="sAOjX">${</span><span class="s7GmK">route</span><span class="sMj0N">.</span><span class="s2QsP">params</span><span class="sMj0N">.</span><span class="sJa8x">tag</span><span class="sAOjX">}</span><span class="sDhpE">`</span><span class="s5ixo">, () </span><span class="sLKXg">=&gt;
</span></span><span class="line" line="4"><span class="sAdtL">    queryCollection</span><span class="s5ixo">(</span><span class="sDhpE">&#39;posts&#39;</span><span class="s5ixo">)
</span></span><span class="line" line="5"><span class="s5ixo">        .</span><span class="sAdtL">where</span><span class="s5ixo">(</span><span class="sDhpE">&#39;tags&#39;</span><span class="s5ixo">, </span><span class="sDhpE">&#39;LIKE&#39;</span><span class="s5ixo">, </span><span class="sDhpE">`%&quot;</span><span class="sAOjX">${</span><span class="sz0mV">tag</span><span class="sAOjX">}</span><span class="sDhpE">&quot;%`</span><span class="s5ixo">)
</span></span><span class="line" line="6"><span class="s5ixo">        .</span><span class="sAdtL">order</span><span class="s5ixo">(</span><span class="sDhpE">&#39;date&#39;</span><span class="s5ixo">, </span><span class="sDhpE">&#39;DESC&#39;</span><span class="s5ixo">)
</span></span><span class="line" line="7"><span class="s5ixo">        .</span><span class="sAdtL">select</span><span class="s5ixo">(</span><span class="sDhpE">&#39;title&#39;</span><span class="s5ixo">, </span><span class="sDhpE">&#39;date&#39;</span><span class="s5ixo">, </span><span class="sDhpE">&#39;path&#39;</span><span class="s5ixo">, </span><span class="sDhpE">&#39;tags&#39;</span><span class="s5ixo">)
</span></span><span class="line" line="8"><span class="s5ixo">        .</span><span class="sAdtL">all</span><span class="s5ixo">()
</span></span><span class="line" line="9"><span class="s5ixo">)
</span></span></code><!--]--></pre><p><!--[-->Below are the file sizes after optimization and regeneration - the reduction is quite significant:<!--]--></p><ul><!--[--><li><!--[-->Tags directory size: 2.9MiB → 1.4MiB<!--]--></li><li><!--[-->Individual _payload.json size: 23.1KiB → 1.01 KiB<!--]--></li><!--]--></ul><p><!--[-->Through this method, we successfully pushed the query logic down to the database layer, avoided unnecessary full data transfers, significantly reduced the size of <code><!--[-->_payload.json<!--]--></code> in individual directories, and achieved performance optimization.<!--]--></p><p><!--[--><span class="prose-img-wrapper" data-v-4f488808><img src="https://static.031130.xyz/uploads/2025/10/20/007e72e7b476d.webp" alt="Tags directory size reduction" title="" loading="lazy" class="prose-img" style="cursor:zoom-in;" data-v-4f488808><span class="prose-img-caption" data-v-4f488808>Tags directory size reduction</span><!--teleport start--><!--teleport end--></span><!--]--></p><p><!--[--><span class="prose-img-wrapper" data-v-4f488808><img src="https://static.031130.xyz/uploads/2025/10/20/17ba3ccbbdf9e.webp" alt="_payload.json" title="" loading="lazy" class="prose-img" style="cursor:zoom-in;" data-v-4f488808><span class="prose-img-caption" data-v-4f488808>_payload.json</span><!--teleport start--><!--teleport end--></span><!--]--></p><h2 id="see-also" class="prose-heading prose-h2" data-v-a22a06c0><!--[-->See Also<!--]--><a href="#see-also" class="heading-anchor" aria-label="链接到此标题" data-v-a22a06c0><span class="anchor-icon" data-v-a22a06c0>#</span></a></h2><p><!--[--><a href="https://content.nuxt.com/docs/utils/query-collection#wherefield-keyof-collection-string-operator-sqloperator-value-unknown" rel="nofollow"><!--[-->queryCollection - Nuxt Content<!--]--></a><!--]--></p><p><!--[--><a href="https://github.com/nuxt/content/discussions/2955" rel="nofollow"><!--[-->How do you query <code><!--[-->z.array()<!--]--></code> fields (e.g. tags) in the latest nuxt-content module (v3.alpha.8) · nuxt/content · Discussion #2955<!--]--></a><!--]--></p><style>html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .sLKXg, html code.shiki .sLKXg{--shiki-default:#A626A4;--shiki-dark:#C678DD}html pre.shiki code .sNmU0, html code.shiki .sNmU0{--shiki-default:#986801;--shiki-dark:#E5C07B}html pre.shiki code .s_Sar, html code.shiki .s_Sar{--shiki-default:#0184BC;--shiki-dark:#56B6C2}html pre.shiki code .sAdtL, html code.shiki .sAdtL{--shiki-default:#4078F2;--shiki-dark:#61AFEF}html pre.shiki code .s5ixo, html code.shiki .s5ixo{--shiki-default:#383A42;--shiki-dark:#ABB2BF}html pre.shiki code .s7GmK, html code.shiki .s7GmK{--shiki-default:#383A42;--shiki-dark:#E5C07B}html pre.shiki code .s2QsP, html code.shiki .s2QsP{--shiki-default:#E45649;--shiki-dark:#E5C07B}html pre.shiki code .sJa8x, html code.shiki .sJa8x{--shiki-default:#E45649;--shiki-dark:#E06C75}html pre.shiki code .sblXP, html code.shiki .sblXP{--shiki-default:#383A42;--shiki-dark:#C678DD}html pre.shiki code .sN9Y4, html code.shiki .sN9Y4{--shiki-default:#0184BC;--shiki-dark:#E5C07B}html pre.shiki code .sDhpE, html code.shiki .sDhpE{--shiki-default:#50A14F;--shiki-dark:#98C379}html pre.shiki code .st7oF, html code.shiki .st7oF{--shiki-default:#0184BC;--shiki-dark:#ABB2BF}html pre.shiki code .sz0mV, html code.shiki .sz0mV{--shiki-default:#383A42;--shiki-dark:#E06C75}html pre.shiki code .sW2Sy, html code.shiki .sW2Sy{--shiki-default:#A0A1A7;--shiki-default-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic}html pre.shiki code .sAOjX, html code.shiki .sAOjX{--shiki-default:#CA1243;--shiki-dark:#C678DD}html pre.shiki code .sMj0N, html code.shiki .sMj0N{--shiki-default:#50A14F;--shiki-dark:#ABB2BF}html pre.shiki code .sC09Y, html code.shiki .sC09Y{--shiki-default:#C18401;--shiki-dark:#E5C07B}html pre.shiki code .s8iYz, html code.shiki .s8iYz{--shiki-default:#383A42;--shiki-default-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic}html pre.shiki code .s7DPa, html code.shiki .s7DPa{--shiki-default:#0184BC;--shiki-dark:#C678DD}html pre.shiki code .sAGMh, html code.shiki .sAGMh{--shiki-default:#986801;--shiki-dark:#D19A66}</style></article><hr class="article-end-hr" data-v-11c89a0f><div class="tags" data-v-11c89a0f><svg viewBox="0 0 512 512" width="1.2em" height="1.2em" data-v-11c89a0f><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M403.29 32H280.36a14.46 14.46 0 0 0-10.2 4.2L24.4 281.9a28.85 28.85 0 0 0 0 40.7l117 117a28.86 28.86 0 0 0 40.71 0L427.8 194a14.46 14.46 0 0 0 4.2-10.2v-123A28.66 28.66 0 0 0 403.29 32"></path><path fill="currentColor" d="M352 144a32 32 0 1 1 32-32a32 32 0 0 1-32 32"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="m230 480l262-262a13.8 13.8 0 0 0 4-10V80"></path></svg><!--[--><a href="/en/tags/Nuxt/" class="" data-v-11c89a0f>#Nuxt</a><a href="/en/tags/Nuxt%20Content/" class="" data-v-11c89a0f>#Nuxt Content</a><a href="/en/tags/JavaScript/" class="" data-v-11c89a0f>#JavaScript</a><!--]--></div><nav class="post-navigation" data-v-11c89a0f data-v-3c6a4bdf><a href="/en/2025/11/05/http-2-server-push-is-practically-obsolete/" class="nav-button prev" data-v-3c6a4bdf><div class="nav-arrow" data-v-3c6a4bdf>←</div><div class="nav-content" data-v-3c6a4bdf><span class="nav-label" data-v-3c6a4bdf>Previous</span><span class="nav-title" data-v-3c6a4bdf>HTTP/2 Server Push Has Effectively &quot;Died&quot; - I Miss It</span></div></a><a href="/en/2025/10/16/how-s-mozilla-crlite-going-now/" class="nav-button next" data-v-3c6a4bdf><div class="nav-content" data-v-3c6a4bdf><span class="nav-label" data-v-3c6a4bdf>Next</span><span class="nav-title" data-v-3c6a4bdf>Post-OCSP Era: How Browsers Address New Certificate Revocation Challenges</span></div><div class="nav-arrow" data-v-3c6a4bdf>→</div></a></nav><div id="waline" data-v-11c89a0f><span></span></div><!--]--></main><div class="after-main side" data-v-ccd9c1ba><!--[--><aside data-v-11c89a0f><nav class="toc" data-v-11c89a0f data-v-ae70bcd1><div class="toc-title" data-v-ae70bcd1>目录</div><ul class="toc-list" data-v-ae70bcd1><!--[--><li class="toc-item toc-level-2" data-v-ae70bcd1><a href="#the-convenience-of-v2-and-the-limitations-of-v3" data-v-ae70bcd1>The Convenience of v2 and the Limitations of v3</a></li><li class="toc-item toc-level-2" data-v-ae70bcd1><a href="#initial-implementation-sacrificing-performance-with-fetch-all" data-v-ae70bcd1>Initial Implementation: Sacrificing Performance with &quot;Fetch All&quot;</a></li><li class="toc-item toc-level-2" data-v-ae70bcd1><a href="#a-clever-solution-leveraging-sqlites-storage-characteristics-for-optimization" data-v-ae70bcd1>A Clever Solution: Leveraging SQLite&#39;s Storage Characteristics for Optimization</a></li><li class="toc-item toc-level-2" data-v-ae70bcd1><a href="#see-also" data-v-ae70bcd1>See Also</a></li><!--]--></ul></nav></aside><!--]--></div></div><footer style="min-height:120px;background-color:#00bb77;background-image:url(&quot;data:image/svg+xml,%3Csvg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;120&#39; height=&#39;120&#39; viewBox=&#39;0 0 120 120&#39;%3E%3Cpolygon fill=&#39;%23000&#39; fill-opacity=&#39;.1&#39; points=&#39;120 0 120 60 90 30 60 0 0 0 0 0 60 60 0 120 60 120 90 90 120 60 120 0&#39;/%3E%3C/svg%3E&quot;);" data-v-ccd9c1ba data-v-71f6d0ea><div class="footer-mask" data-v-71f6d0ea></div><div class="footer-content" data-v-71f6d0ea><div data-v-71f6d0ea>©2020 - 2025 By zhullyb</div><!----></div></footer></div><!--]--></div><div id="teleports"></div><script type="application/ld+json" data-nuxt-schema-org="true" data-hid="schema-org-graph">{"@context":"https://schema.org","@graph":[{"@id":"https://zhul.in/en/#website","@type":"WebSite","description":"这里是我的个人博客，专注于分享技术干货、学习心得和生活感悟，涵盖前端开发、后端架构、人工智能、编程技巧、工具推荐等多个领域。我持续更新原创内容，记录成长过程中的思考与收获，致力于帮助更多开发者和技术爱好者提升技能、拓展视野。如果你对技术、产品和互联网行业感兴趣，相信你能在这里找到有价值的知识与灵感。","inLanguage":"en-US","name":"竹林里有冰的博客","url":"https://zhul.in/en/","translationOfWork":{"@id":"https://zhul.in/#website"}},{"@id":"https://zhul.in/en/2025/10/20/nuxt-content-v3-z-array-query-challenge/#webpage","@type":"WebPage","description":"Nuxt Content is a powerful module in the Nuxt ecosystem for handling Markdown, YAML, and other content types. Recently, while migrating my blog from Hexo to Nuxt v4 + Nuxt Content v3, I encountered a tricky issue: the v3 default query API does not directly provide support for \"contains\" ($contains) operations on array fields.","name":"Array Field Filtering Challenges and Performance Optimization in Nuxt Content v3","url":"https://zhul.in/en/2025/10/20/nuxt-content-v3-z-array-query-challenge/","isPartOf":{"@id":"https://zhul.in/en/#website"},"potentialAction":[{"@type":"ReadAction","target":["https://zhul.in/en/2025/10/20/nuxt-content-v3-z-array-query-challenge/"]}]}]}</script><script type="application/json" data-nuxt-data="nuxt-app" data-ssr="true" id="__NUXT_DATA__" data-src="/en/2025/10/20/nuxt-content-v3-z-array-query-challenge/_payload.json?e861cbc8-6e07-4c34-8bec-667455078912">[{"state":1,"once":22,"_errors":23,"serverRendered":6,"path":25,"prerenderedAt":26},["Reactive",2],{"$si18n:cached-locale-configs":3,"$si18n:resolved-locale":9,"$snuxt-seo-utils:routeRules":10,"$ssite-config":11},{"zh":4,"en":7},{"fallbacks":5,"cacheable":6},[],true,{"fallbacks":8,"cacheable":6},[],"en",{"head":-1,"seoMeta":-1},{"_priority":12,"currentLocale":16,"defaultLocale":17,"description":18,"env":19,"name":20,"trailingSlash":6,"url":21},{"name":13,"env":14,"url":13,"description":13,"defaultLocale":15,"trailingSlash":13,"currentLocale":15},-3,-15,-2,"en-US","zh-CN","这里是我的个人博客，专注于分享技术干货、学习心得和生活感悟，涵盖前端开发、后端架构、人工智能、编程技巧、工具推荐等多个领域。我持续更新原创内容，记录成长过程中的思考与收获，致力于帮助更多开发者和技术爱好者提升技能、拓展视野。如果你对技术、产品和互联网行业感兴趣，相信你能在这里找到有价值的知识与灵感。","production","竹林里有冰的博客","https://zhul.in/",["Set"],["ShallowReactive",24],{"post-2025-10-20-nuxt-content-v3-z-array-query-challenge-en":-1,"surround-2025-10-20-nuxt-content-v3-z-array-query-challenge-en":-1,"randomIndex/en/2025/10/20/nuxt-content-v3-z-array-query-challenge/":-1,"language-switch-/en/2025/10/20/nuxt-content-v3-z-array-query-challenge/-zh":-1,"posts-search-sections":-1},"/en/2025/10/20/nuxt-content-v3-z-array-query-challenge/",1763657539675]</script><script>window.__NUXT__={};window.__NUXT__.config={public:{content:{wsUrl:""},mdc:{components:{prose:true,map:{}},headings:{anchorLinks:{h1:false,h2:true,h3:true,h4:true,h5:false,h6:false}}},"seo-utils":{canonicalQueryWhitelist:["page","sort","filter","search","q","category","tag"],canonicalLowercase:true},i18n:{baseUrl:"",defaultLocale:"zh",rootRedirect:"",redirectStatusCode:302,skipSettingLocaleOnNavigate:false,locales:[{code:"zh",language:"zh-CN",name:"简体中文",_hreflang:"zh-CN",_sitemap:"zh-CN"},{code:"en",language:"en-US",name:"English",_hreflang:"en-US",_sitemap:"en-US"}],detectBrowserLanguage:false,experimental:{localeDetector:"",typedPages:true,typedOptionsAndMessages:false,alternateLinkCanonicalQueries:true,devCache:false,cacheLifetime:"",stripMessagesPayload:false,preload:false,strictSeo:false,nitroContextDetection:true,httpCacheDuration:10},domainLocales:{zh:{domain:""},en:{domain:""}}}},app:{baseURL:"/",buildId:"e861cbc8-6e07-4c34-8bec-667455078912",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script></body></html>